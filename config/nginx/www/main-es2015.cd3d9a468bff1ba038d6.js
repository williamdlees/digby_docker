(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},LvDl:function(e,t,n){(function(e){var i;(function(){var r="Expected a function",s="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",l="[object Array]",c="[object Boolean]",h="[object Date]",u="[object Error]",d="[object Function]",p="[object GeneratorFunction]",f="[object Map]",m="[object Number]",g="[object Object]",v="[object RegExp]",b="[object Set]",y="[object String]",_="[object Symbol]",w="[object WeakMap]",x="[object ArrayBuffer]",S="[object DataView]",C="[object Float32Array]",k="[object Float64Array]",E="[object Int8Array]",A="[object Int16Array]",R="[object Int32Array]",T="[object Uint8Array]",I="[object Uint16Array]",D="[object Uint32Array]",O=/\b__p \+= '';/g,P=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,L=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,N=RegExp(L.source),z=RegExp(F.source),V=/<%-([\s\S]+?)%>/g,j=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q=/^\w*$/,$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/[\\^$.*+?()[\]{}|]/g,W=RegExp(U.source),G=/^\s+|\s+$/g,Y=/^\s+/,Z=/\s+$/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,K=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,se=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,le=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ce=/($^)/,he=/['\n\r\u2028\u2029\\]/g,ue="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="["+de+"]",fe="["+ue+"]",me="\\d+",ge="[a-z\\xdf-\\xf6\\xf8-\\xff]",ve="[^\\ud800-\\udfff"+de+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",be="\\ud83c[\\udffb-\\udfff]",ye="[^\\ud800-\\udfff]",_e="(?:\\ud83c[\\udde6-\\uddff]){2}",we="[\\ud800-\\udbff][\\udc00-\\udfff]",xe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Se="(?:"+ge+"|"+ve+")",Ce="(?:"+xe+"|"+ve+")",ke="(?:"+fe+"|"+be+")?",Ee="[\\ufe0e\\ufe0f]?"+ke+"(?:\\u200d(?:"+[ye,_e,we].join("|")+")[\\ufe0e\\ufe0f]?"+ke+")*",Ae="(?:"+["[\\u2700-\\u27bf]",_e,we].join("|")+")"+Ee,Re="(?:"+[ye+fe+"?",fe,_e,we,"[\\ud800-\\udfff]"].join("|")+")",Te=RegExp("['\u2019]","g"),Ie=RegExp(fe,"g"),De=RegExp(be+"(?="+be+")|"+Re+Ee,"g"),Oe=RegExp([xe+"?"+ge+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[pe,xe,"$"].join("|")+")",Ce+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[pe,xe+Se,"$"].join("|")+")",xe+"?"+Se+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",xe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Ae].join("|"),"g"),Pe=RegExp("[\\u200d\\ud800-\\udfff"+ue+"\\ufe0e\\ufe0f]"),Me=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Le=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,Ne={};Ne[C]=Ne[k]=Ne[E]=Ne[A]=Ne[R]=Ne[T]=Ne["[object Uint8ClampedArray]"]=Ne[I]=Ne[D]=!0,Ne[a]=Ne[l]=Ne[x]=Ne[c]=Ne[S]=Ne[h]=Ne[u]=Ne[d]=Ne[f]=Ne[m]=Ne[g]=Ne[v]=Ne[b]=Ne[y]=Ne[w]=!1;var ze={};ze[a]=ze[l]=ze[x]=ze[S]=ze[c]=ze[h]=ze[C]=ze[k]=ze[E]=ze[A]=ze[R]=ze[f]=ze[m]=ze[g]=ze[v]=ze[b]=ze[y]=ze[_]=ze[T]=ze["[object Uint8ClampedArray]"]=ze[I]=ze[D]=!0,ze[u]=ze[d]=ze[w]=!1;var Ve={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},je=parseFloat,Be=parseInt,He="object"==typeof global&&global&&global.Object===Object&&global,qe="object"==typeof self&&self&&self.Object===Object&&self,$e=He||qe||Function("return this")(),Ue=t&&!t.nodeType&&t,We=Ue&&"object"==typeof e&&e&&!e.nodeType&&e,Ge=We&&We.exports===Ue,Ye=Ge&&He.process,Ze=function(){try{return We&&We.require&&We.require("util").types||Ye&&Ye.binding&&Ye.binding("util")}catch(e){}}(),Xe=Ze&&Ze.isArrayBuffer,Ke=Ze&&Ze.isDate,Qe=Ze&&Ze.isMap,Je=Ze&&Ze.isRegExp,et=Ze&&Ze.isSet,tt=Ze&&Ze.isTypedArray;function nt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function it(e,t,n,i){for(var r=-1,s=null==e?0:e.length;++r<s;){var o=e[r];t(i,o,n(o),e)}return i}function rt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ot(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function at(e,t){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];t(o,n,e)&&(s[r++]=o)}return s}function lt(e,t){return!(null==e||!e.length)&&bt(e,t,0)>-1}function ct(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function ht(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function ut(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function dt(e,t,n,i){var r=-1,s=null==e?0:e.length;for(i&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n}function pt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function ft(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var mt=xt("length");function gt(e,t,n){var i;return n(e,function(e,n,r){if(t(e,n,r))return i=n,!1}),i}function vt(e,t,n,i){for(var r=e.length,s=n+(i?1:-1);i?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function bt(e,t,n){return t==t?function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):vt(e,_t,n)}function yt(e,t,n,i){for(var r=n-1,s=e.length;++r<s;)if(i(e[r],t))return r;return-1}function _t(e){return e!=e}function wt(e,t){var n=null==e?0:e.length;return n?kt(e,t)/n:NaN}function xt(e){return function(t){return null==t?void 0:t[e]}}function St(e){return function(t){return null==e?void 0:e[t]}}function Ct(e,t,n,i,r){return r(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function kt(e,t){for(var n,i=-1,r=e.length;++i<r;){var s=t(e[i]);void 0!==s&&(n=void 0===n?s:n+s)}return n}function Et(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function At(e){return function(t){return e(t)}}function Rt(e,t){return ht(t,function(t){return e[t]})}function Tt(e,t){return e.has(t)}function It(e,t){for(var n=-1,i=e.length;++n<i&&bt(t,e[n],0)>-1;);return n}function Dt(e,t){for(var n=e.length;n--&&bt(t,e[n],0)>-1;);return n}function Ot(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var Pt=St({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Mt=St({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Lt(e){return"\\"+Ve[e]}function Ft(e){return Pe.test(e)}function Nt(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function zt(e,t){return function(n){return e(t(n))}}function Vt(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[r++]=n)}return o}function jt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Bt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Ht(e){return Ft(e)?function(e){for(var t=De.lastIndex=0;De.test(e);)++t;return t}(e):mt(e)}function qt(e){return Ft(e)?function(e){return e.match(De)||[]}(e):function(e){return e.split("")}(e)}var $t=St({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ut=function e(t){var n,i=(t=null==t?$e:Ut.defaults($e.Object(),t,Ut.pick($e,Le))).Array,ue=t.Date,de=t.Error,pe=t.Function,fe=t.Math,me=t.Object,ge=t.RegExp,ve=t.String,be=t.TypeError,ye=i.prototype,_e=me.prototype,we=t["__core-js_shared__"],xe=pe.prototype.toString,Se=_e.hasOwnProperty,Ce=0,ke=(n=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ee=_e.toString,Ae=xe.call(me),Re=$e._,De=ge("^"+xe.call(Se).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=Ge?t.Buffer:void 0,Ve=t.Symbol,He=t.Uint8Array,qe=Pe?Pe.allocUnsafe:void 0,Ue=zt(me.getPrototypeOf,me),We=me.create,Ye=_e.propertyIsEnumerable,Ze=ye.splice,mt=Ve?Ve.isConcatSpreadable:void 0,St=Ve?Ve.iterator:void 0,Wt=Ve?Ve.toStringTag:void 0,Gt=function(){try{var e=Kr(me,"defineProperty");return e({},"",{}),e}catch(t){}}(),Yt=t.clearTimeout!==$e.clearTimeout&&t.clearTimeout,Zt=ue&&ue.now!==$e.Date.now&&ue.now,Xt=t.setTimeout!==$e.setTimeout&&t.setTimeout,Kt=fe.ceil,Qt=fe.floor,Jt=me.getOwnPropertySymbols,en=Pe?Pe.isBuffer:void 0,tn=t.isFinite,nn=ye.join,rn=zt(me.keys,me),sn=fe.max,on=fe.min,an=ue.now,ln=t.parseInt,cn=fe.random,hn=ye.reverse,un=Kr(t,"DataView"),dn=Kr(t,"Map"),pn=Kr(t,"Promise"),fn=Kr(t,"Set"),mn=Kr(t,"WeakMap"),gn=Kr(me,"create"),vn=mn&&new mn,bn={},yn=Es(un),_n=Es(dn),wn=Es(pn),xn=Es(fn),Sn=Es(mn),Cn=Ve?Ve.prototype:void 0,kn=Cn?Cn.valueOf:void 0,En=Cn?Cn.toString:void 0;function An(e){if($o(e)&&!Po(e)&&!(e instanceof Dn)){if(e instanceof In)return e;if(Se.call(e,"__wrapped__"))return As(e)}return new In(e)}var Rn=function(){function e(){}return function(t){if(!qo(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Tn(){}function In(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Dn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function On(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Mn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new Pn(e);this.size=t.size}function Nn(e,t){var n=Po(e),i=!n&&Oo(e),r=!n&&!i&&No(e),s=!n&&!i&&!r&&Qo(e),o=n||i||r||s,a=o?Et(e.length,ve):[],l=a.length;for(var c in e)!t&&!Se.call(e,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||rs(c,l))||a.push(c);return a}function zn(e){var t=e.length;return t?e[Mi(0,t-1)]:void 0}function Vn(e,t){return ws(mr(e),Yn(t,0,e.length))}function jn(e){return ws(mr(e))}function Bn(e,t,n){(void 0!==n&&!To(e[t],n)||void 0===n&&!(t in e))&&Wn(e,t,n)}function Hn(e,t,n){var i=e[t];Se.call(e,t)&&To(i,n)&&(void 0!==n||t in e)||Wn(e,t,n)}function qn(e,t){for(var n=e.length;n--;)if(To(e[n][0],t))return n;return-1}function $n(e,t,n,i){return Jn(e,function(e,r,s){t(i,e,n(e),s)}),i}function Un(e,t){return e&&gr(t,_a(t),e)}function Wn(e,t,n){"__proto__"==t&&Gt?Gt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Gn(e,t){for(var n=-1,r=t.length,s=i(r),o=null==e;++n<r;)s[n]=o?void 0:ma(e,t[n]);return s}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Zn(e,t,n,i,r,s){var o,l=1&t,u=2&t,w=4&t;if(n&&(o=r?n(e,i,r,s):n(e)),void 0!==o)return o;if(!qo(e))return e;var O=Po(e);if(O){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Se.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return mr(e,o)}else{var P=es(e),M=P==d||P==p;if(No(e))return cr(e,l);if(P==g||P==a||M&&!r){if(o=u||M?{}:ns(e),!l)return u?function(e,t){return gr(e,Jr(e),t)}(e,function(e,t){return e&&gr(t,wa(t),e)}(o,e)):function(e,t){return gr(e,Qr(e),t)}(e,Un(o,e))}else{if(!ze[P])return r?e:{};o=function(e,t,n){var i=e.constructor;switch(t){case x:return hr(e);case c:case h:return new i(+e);case S:return function(e,t){var n=t?hr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case C:case k:case E:case A:case R:case T:case"[object Uint8ClampedArray]":case I:case D:return ur(e,n);case f:return new i;case m:case y:return new i(e);case v:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case b:return new i;case _:return kn?me(kn.call(e)):{}}}(e,P,l)}}s||(s=new Fn);var L=s.get(e);if(L)return L;s.set(e,o),Zo(e)?e.forEach(function(i){o.add(Zn(i,t,n,i,e,s))}):Uo(e)&&e.forEach(function(i,r){o.set(r,Zn(i,t,n,r,e,s))});var F=O?void 0:(w?u?$r:qr:u?wa:_a)(e);return rt(F||e,function(i,r){F&&(i=e[r=i]),Hn(o,r,Zn(i,t,n,r,e,s))}),o}function Xn(e,t,n){var i=n.length;if(null==e)return!i;for(e=me(e);i--;){var r=n[i],s=e[r];if(void 0===s&&!(r in e)||!(0,t[r])(s))return!1}return!0}function Kn(e,t,n){if("function"!=typeof e)throw new be(r);return vs(function(){e.apply(void 0,n)},t)}function Qn(e,t,n,i){var r=-1,s=lt,o=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=ht(t,At(n))),i?(s=ct,o=!1):t.length>=200&&(s=Tt,o=!1,t=new Ln(t));e:for(;++r<a;){var h=e[r],u=null==n?h:n(h);if(h=i||0!==h?h:0,o&&u==u){for(var d=c;d--;)if(t[d]===u)continue e;l.push(h)}else s(t,u,i)||l.push(h)}return l}An.templateSettings={escape:V,evaluate:j,interpolate:B,variable:"",imports:{_:An}},(An.prototype=Tn.prototype).constructor=An,(In.prototype=Rn(Tn.prototype)).constructor=In,(Dn.prototype=Rn(Tn.prototype)).constructor=Dn,On.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},On.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},On.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Se.call(t,e)?t[e]:void 0},On.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:Se.call(t,e)},On.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},Pn.prototype.clear=function(){this.__data__=[],this.size=0},Pn.prototype.delete=function(e){var t=this.__data__,n=qn(t,e);return!(n<0||(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,0))},Pn.prototype.get=function(e){var t=this.__data__,n=qn(t,e);return n<0?void 0:t[n][1]},Pn.prototype.has=function(e){return qn(this.__data__,e)>-1},Pn.prototype.set=function(e,t){var n=this.__data__,i=qn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Mn.prototype.clear=function(){this.size=0,this.__data__={hash:new On,map:new(dn||Pn),string:new On}},Mn.prototype.delete=function(e){var t=Zr(this,e).delete(e);return this.size-=t?1:0,t},Mn.prototype.get=function(e){return Zr(this,e).get(e)},Mn.prototype.has=function(e){return Zr(this,e).has(e)},Mn.prototype.set=function(e,t){var n=Zr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Ln.prototype.add=Ln.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ln.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new Pn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Pn){var i=n.__data__;if(!dn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mn(i)}return n.set(e,t),this.size=n.size,this};var Jn=yr(ai),ei=yr(li,!0);function ti(e,t){var n=!0;return Jn(e,function(e,i,r){return n=!!t(e,i,r)}),n}function ni(e,t,n){for(var i=-1,r=e.length;++i<r;){var s=e[i],o=t(s);if(null!=o&&(void 0===a?o==o&&!Ko(o):n(o,a)))var a=o,l=s}return l}function ii(e,t){var n=[];return Jn(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function ri(e,t,n,i,r){var s=-1,o=e.length;for(n||(n=is),r||(r=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?ri(a,t-1,n,i,r):ut(r,a):i||(r[r.length]=a)}return r}var si=_r(),oi=_r(!0);function ai(e,t){return e&&si(e,t,_a)}function li(e,t){return e&&oi(e,t,_a)}function ci(e,t){return at(t,function(t){return jo(e[t])})}function hi(e,t){for(var n=0,i=(t=sr(t,e)).length;null!=e&&n<i;)e=e[ks(t[n++])];return n&&n==i?e:void 0}function ui(e,t,n){var i=t(e);return Po(e)?i:ut(i,n(e))}function di(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Wt&&Wt in me(e)?function(e){var t=Se.call(e,Wt),n=e[Wt];try{e[Wt]=void 0;var i=!0}catch(s){}var r=Ee.call(e);return i&&(t?e[Wt]=n:delete e[Wt]),r}(e):function(e){return Ee.call(e)}(e)}function pi(e,t){return e>t}function fi(e,t){return null!=e&&Se.call(e,t)}function mi(e,t){return null!=e&&t in me(e)}function gi(e,t,n){for(var r=n?ct:lt,s=e[0].length,o=e.length,a=o,l=i(o),c=1/0,h=[];a--;){var u=e[a];a&&t&&(u=ht(u,At(t))),c=on(u.length,c),l[a]=!n&&(t||s>=120&&u.length>=120)?new Ln(a&&u):void 0}u=e[0];var d=-1,p=l[0];e:for(;++d<s&&h.length<c;){var f=u[d],m=t?t(f):f;if(f=n||0!==f?f:0,!(p?Tt(p,m):r(h,m,n))){for(a=o;--a;){var g=l[a];if(!(g?Tt(g,m):r(e[a],m,n)))continue e}p&&p.push(m),h.push(f)}}return h}function vi(e,t,n){var i=null==(e=ps(e,t=sr(t,e)))?e:e[ks(zs(t))];return null==i?void 0:nt(i,e,n)}function bi(e){return $o(e)&&di(e)==a}function yi(e,t,n,i,r){return e===t||(null==e||null==t||!$o(e)&&!$o(t)?e!=e&&t!=t:function(e,t,n,i,r,s){var o=Po(e),d=Po(t),p=o?l:es(e),w=d?l:es(t),C=(p=p==a?g:p)==g,k=(w=w==a?g:w)==g,E=p==w;if(E&&No(e)){if(!No(t))return!1;o=!0,C=!1}if(E&&!C)return s||(s=new Fn),o||Qo(e)?Br(e,t,n,i,r,s):function(e,t,n,i,r,s,o){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!s(new He(e),new He(t)));case c:case h:case m:return To(+e,+t);case u:return e.name==t.name&&e.message==t.message;case v:case y:return e==t+"";case f:var a=Nt;case b:if(a||(a=jt),e.size!=t.size&&!(1&i))return!1;var l=o.get(e);if(l)return l==t;i|=2,o.set(e,t);var d=Br(a(e),a(t),i,r,s,o);return o.delete(e),d;case _:if(kn)return kn.call(e)==kn.call(t)}return!1}(e,t,p,n,i,r,s);if(!(1&n)){var A=C&&Se.call(e,"__wrapped__"),R=k&&Se.call(t,"__wrapped__");if(A||R){var T=A?e.value():e,I=R?t.value():t;return s||(s=new Fn),r(T,I,n,i,s)}}return!!E&&(s||(s=new Fn),function(e,t,n,i,r,s){var o=1&n,a=qr(e),l=a.length;if(l!=qr(t).length&&!o)return!1;for(var c=l;c--;){var h=a[c];if(!(o?h in t:Se.call(t,h)))return!1}var u=s.get(e);if(u&&s.get(t))return u==t;var d=!0;s.set(e,t),s.set(t,e);for(var p=o;++c<l;){var f=e[h=a[c]],m=t[h];if(i)var g=o?i(m,f,h,t,e,s):i(f,m,h,e,t,s);if(!(void 0===g?f===m||r(f,m,n,i,s):g)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(d=!1)}return s.delete(e),s.delete(t),d}(e,t,n,i,r,s))}(e,t,n,i,yi,r))}function _i(e,t,n,i){var r=n.length,s=r,o=!i;if(null==e)return!s;for(e=me(e);r--;){var a=n[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<s;){var l=(a=n[r])[0],c=e[l],h=a[1];if(o&&a[2]){if(void 0===c&&!(l in e))return!1}else{var u=new Fn;if(i)var d=i(c,h,l,e,t,u);if(!(void 0===d?yi(h,c,3,i,u):d))return!1}}return!0}function wi(e){return!(!qo(e)||(t=e,ke&&ke in t))&&(jo(e)?De:se).test(Es(e));var t}function xi(e){return"function"==typeof e?e:null==e?Wa:"object"==typeof e?Po(e)?Ai(e[0],e[1]):Ei(e):tl(e)}function Si(e){if(!cs(e))return rn(e);var t=[];for(var n in me(e))Se.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ci(e,t){return e<t}function ki(e,t){var n=-1,r=Lo(e)?i(e.length):[];return Jn(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function Ei(e){var t=Xr(e);return 1==t.length&&t[0][2]?us(t[0][0],t[0][1]):function(n){return n===e||_i(n,e,t)}}function Ai(e,t){return os(e)&&hs(t)?us(ks(e),t):function(n){var i=ma(n,e);return void 0===i&&i===t?ga(n,e):yi(t,i,3)}}function Ri(e,t,n,i,r){e!==t&&si(t,function(s,o){if(r||(r=new Fn),qo(s))!function(e,t,n,i,r,s,o){var a=ms(e,n),l=ms(t,n),c=o.get(l);if(c)Bn(e,n,c);else{var h=s?s(a,l,n+"",e,t,o):void 0,u=void 0===h;if(u){var d=Po(l),p=!d&&No(l),f=!d&&!p&&Qo(l);h=l,d||p||f?Po(a)?h=a:Fo(a)?h=mr(a):p?(u=!1,h=cr(l,!0)):f?(u=!1,h=ur(l,!0)):h=[]:Go(l)||Oo(l)?(h=a,Oo(a)?h=oa(a):qo(a)&&!jo(a)||(h=ns(l))):u=!1}u&&(o.set(l,h),r(h,l,i,s,o),o.delete(l)),Bn(e,n,h)}}(e,t,o,n,Ri,i,r);else{var a=i?i(ms(e,o),s,o+"",e,t,r):void 0;void 0===a&&(a=s),Bn(e,o,a)}},wa)}function Ti(e,t){var n=e.length;if(n)return rs(t+=t<0?n:0,n)?e[t]:void 0}function Ii(e,t,n){var i=-1;return t=ht(t.length?t:[Wa],At(Yr())),function(e,t){var i=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var i=-1,r=e.criteria,s=t.criteria,o=r.length,a=n.length;++i<o;){var l=dr(r[i],s[i]);if(l)return i>=a?l:l*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)});i--;)e[i]=e[i].value;return e}(ki(e,function(e,n,r){return{criteria:ht(t,function(t){return t(e)}),index:++i,value:e}}))}function Di(e,t,n){for(var i=-1,r=t.length,s={};++i<r;){var o=t[i],a=hi(e,o);n(a,o)&&Vi(s,sr(o,e),a)}return s}function Oi(e,t,n,i){var r=i?yt:bt,s=-1,o=t.length,a=e;for(e===t&&(t=mr(t)),n&&(a=ht(e,At(n)));++s<o;)for(var l=0,c=t[s],h=n?n(c):c;(l=r(a,h,l,i))>-1;)a!==e&&Ze.call(a,l,1),Ze.call(e,l,1);return e}function Pi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==s){var s=r;rs(r)?Ze.call(e,r,1):Ki(e,r)}}return e}function Mi(e,t){return e+Qt(cn()*(t-e+1))}function Li(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Qt(t/2))&&(e+=e)}while(t);return n}function Fi(e,t){return bs(ds(e,t,Wa),e+"")}function Ni(e){return zn(Ta(e))}function zi(e,t){var n=Ta(e);return ws(n,Yn(t,0,n.length))}function Vi(e,t,n,i){if(!qo(e))return e;for(var r=-1,s=(t=sr(t,e)).length,o=s-1,a=e;null!=a&&++r<s;){var l=ks(t[r]),c=n;if(r!=o){var h=a[l];void 0===(c=i?i(h,l,a):void 0)&&(c=qo(h)?h:rs(t[r+1])?[]:{})}Hn(a,l,c),a=a[l]}return e}var ji=vn?function(e,t){return vn.set(e,t),e}:Wa,Bi=Gt?function(e,t){return Gt(e,"toString",{configurable:!0,enumerable:!1,value:qa(t),writable:!0})}:Wa;function Hi(e){return ws(Ta(e))}function qi(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var o=i(s);++r<s;)o[r]=e[r+t];return o}function $i(e,t){var n;return Jn(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}function Ui(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var s=i+r>>>1,o=e[s];null!==o&&!Ko(o)&&(n?o<=t:o<t)?i=s+1:r=s}return r}return Wi(e,t,Wa,n)}function Wi(e,t,n,i){t=n(t);for(var r=0,s=null==e?0:e.length,o=t!=t,a=null===t,l=Ko(t),c=void 0===t;r<s;){var h=Qt((r+s)/2),u=n(e[h]),d=void 0!==u,p=null===u,f=u==u,m=Ko(u);if(o)var g=i||f;else g=c?f&&(i||d):a?f&&d&&(i||!p):l?f&&d&&!p&&(i||!m):!p&&!m&&(i?u<=t:u<t);g?r=h+1:s=h}return on(s,4294967294)}function Gi(e,t){for(var n=-1,i=e.length,r=0,s=[];++n<i;){var o=e[n],a=t?t(o):o;if(!n||!To(a,l)){var l=a;s[r++]=0===o?0:o}}return s}function Yi(e){return"number"==typeof e?e:Ko(e)?NaN:+e}function Zi(e){if("string"==typeof e)return e;if(Po(e))return ht(e,Zi)+"";if(Ko(e))return En?En.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xi(e,t,n){var i=-1,r=lt,s=e.length,o=!0,a=[],l=a;if(n)o=!1,r=ct;else if(s>=200){var c=t?null:Lr(e);if(c)return jt(c);o=!1,r=Tt,l=new Ln}else l=t?[]:a;e:for(;++i<s;){var h=e[i],u=t?t(h):h;if(h=n||0!==h?h:0,o&&u==u){for(var d=l.length;d--;)if(l[d]===u)continue e;t&&l.push(u),a.push(h)}else r(l,u,n)||(l!==a&&l.push(u),a.push(h))}return a}function Ki(e,t){return null==(e=ps(e,t=sr(t,e)))||delete e[ks(zs(t))]}function Qi(e,t,n,i){return Vi(e,t,n(hi(e,t)),i)}function Ji(e,t,n,i){for(var r=e.length,s=i?r:-1;(i?s--:++s<r)&&t(e[s],s,e););return n?qi(e,i?0:s,i?s+1:r):qi(e,i?s+1:0,i?r:s)}function er(e,t){var n=e;return n instanceof Dn&&(n=n.value()),dt(t,function(e,t){return t.func.apply(t.thisArg,ut([e],t.args))},n)}function tr(e,t,n){var r=e.length;if(r<2)return r?Xi(e[0]):[];for(var s=-1,o=i(r);++s<r;)for(var a=e[s],l=-1;++l<r;)l!=s&&(o[s]=Qn(o[s]||a,e[l],t,n));return Xi(ri(o,1),t,n)}function nr(e,t,n){for(var i=-1,r=e.length,s=t.length,o={};++i<r;)n(o,e[i],i<s?t[i]:void 0);return o}function ir(e){return Fo(e)?e:[]}function rr(e){return"function"==typeof e?e:Wa}function sr(e,t){return Po(e)?e:os(e,t)?[e]:Cs(aa(e))}var or=Fi;function ar(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:qi(e,t,n)}var lr=Yt||function(e){return $e.clearTimeout(e)};function cr(e,t){if(t)return e.slice();var n=e.length,i=qe?qe(n):new e.constructor(n);return e.copy(i),i}function hr(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function ur(e,t){var n=t?hr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function dr(e,t){if(e!==t){var n=void 0!==e,i=null===e,r=e==e,s=Ko(e),o=void 0!==t,a=null===t,l=t==t,c=Ko(t);if(!a&&!c&&!s&&e>t||s&&o&&l&&!a&&!c||i&&o&&l||!n&&l||!r)return 1;if(!i&&!s&&!c&&e<t||c&&n&&r&&!i&&!s||a&&n&&r||!o&&r||!l)return-1}return 0}function pr(e,t,n,r){for(var s=-1,o=e.length,a=n.length,l=-1,c=t.length,h=sn(o-a,0),u=i(c+h),d=!r;++l<c;)u[l]=t[l];for(;++s<a;)(d||s<o)&&(u[n[s]]=e[s]);for(;h--;)u[l++]=e[s++];return u}function fr(e,t,n,r){for(var s=-1,o=e.length,a=-1,l=n.length,c=-1,h=t.length,u=sn(o-l,0),d=i(u+h),p=!r;++s<u;)d[s]=e[s];for(var f=s;++c<h;)d[f+c]=t[c];for(;++a<l;)(p||s<o)&&(d[f+n[a]]=e[s++]);return d}function mr(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function gr(e,t,n,i){var r=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),r?Wn(n,a,l):Hn(n,a,l)}return n}function vr(e,t){return function(n,i){var r=Po(n)?it:$n,s=t?t():{};return r(n,e,Yr(i,2),s)}}function br(e){return Fi(function(t,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(r--,s):void 0,o&&ss(n[0],n[1],o)&&(s=r<3?void 0:s,r=1),t=me(t);++i<r;){var a=n[i];a&&e(t,a,i,s)}return t})}function yr(e,t){return function(n,i){if(null==n)return n;if(!Lo(n))return e(n,i);for(var r=n.length,s=t?r:-1,o=me(n);(t?s--:++s<r)&&!1!==i(o[s],s,o););return n}}function _r(e){return function(t,n,i){for(var r=-1,s=me(t),o=i(t),a=o.length;a--;){var l=o[e?a:++r];if(!1===n(s[l],l,s))break}return t}}function wr(e){return function(t){var n=Ft(t=aa(t))?qt(t):void 0,i=n?n[0]:t.charAt(0),r=n?ar(n,1).join(""):t.slice(1);return i[e]()+r}}function xr(e){return function(t){return dt(ja(Oa(t).replace(Te,"")),e,"")}}function Sr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Rn(e.prototype),i=e.apply(n,t);return qo(i)?i:n}}function Cr(e){return function(t,n,i){var r=me(t);if(!Lo(t)){var s=Yr(n,3);t=_a(t),n=function(e){return s(r[e],e,r)}}var o=e(t,n,i);return o>-1?r[s?t[o]:o]:void 0}}function kr(e){return Hr(function(t){var n=t.length,i=n,s=In.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new be(r);if(s&&!a&&"wrapper"==Wr(o))var a=new In([],!0)}for(i=a?i:n;++i<n;){var l=Wr(o=t[i]),c="wrapper"==l?Ur(o):void 0;a=c&&as(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[Wr(c[0])].apply(a,c[3]):1==o.length&&as(o)?a[l]():a.thru(o)}return function(){var e=arguments,i=e[0];if(a&&1==e.length&&Po(i))return a.plant(i).value();for(var r=0,s=n?t[r].apply(this,e):i;++r<n;)s=t[r].call(this,s);return s}})}function Er(e,t,n,r,s,o,a,l,c,h){var u=128&t,d=1&t,p=2&t,f=24&t,m=512&t,g=p?void 0:Sr(e);return function v(){for(var b=arguments.length,y=i(b),_=b;_--;)y[_]=arguments[_];if(f)var w=Gr(v),x=Ot(y,w);if(r&&(y=pr(y,r,s,f)),o&&(y=fr(y,o,a,f)),b-=x,f&&b<h){var S=Vt(y,w);return Pr(e,t,Er,v.placeholder,n,y,S,l,c,h-b)}var C=d?n:this,k=p?C[e]:e;return b=y.length,l?y=fs(y,l):m&&b>1&&y.reverse(),u&&c<b&&(y.length=c),this&&this!==$e&&this instanceof v&&(k=g||Sr(k)),k.apply(C,y)}}function Ar(e,t){return function(n,i){return function(e,t,n,i){return ai(e,function(e,r,s){t(i,n(e),r,s)}),i}(n,e,t(i),{})}}function Rr(e,t){return function(n,i){var r;if(void 0===n&&void 0===i)return t;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;"string"==typeof n||"string"==typeof i?(n=Zi(n),i=Zi(i)):(n=Yi(n),i=Yi(i)),r=e(n,i)}return r}}function Tr(e){return Hr(function(t){return t=ht(t,At(Yr())),Fi(function(n){var i=this;return e(t,function(e){return nt(e,i,n)})})})}function Ir(e,t){var n=(t=void 0===t?" ":Zi(t)).length;if(n<2)return n?Li(t,e):t;var i=Li(t,Kt(e/Ht(t)));return Ft(t)?ar(qt(i),0,e).join(""):i.slice(0,e)}function Dr(e){return function(t,n,r){return r&&"number"!=typeof r&&ss(t,n,r)&&(n=r=void 0),t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n,r){for(var s=-1,o=sn(Kt((t-e)/(n||1)),0),a=i(o);o--;)a[r?o:++s]=e,e+=n;return a}(t,n,r=void 0===r?t<n?1:-1:na(r),e)}}function Or(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=sa(t),n=sa(n)),e(t,n)}}function Pr(e,t,n,i,r,s,o,a,l,c){var h=8&t;t|=h?32:64,4&(t&=~(h?64:32))||(t&=-4);var u=[e,t,r,h?s:void 0,h?o:void 0,h?void 0:s,h?void 0:o,a,l,c],d=n.apply(void 0,u);return as(e)&&gs(d,u),d.placeholder=i,ys(d,e,t)}function Mr(e){var t=fe[e];return function(e,n){if(e=sa(e),(n=null==n?0:on(ia(n),292))&&tn(e)){var i=(aa(e)+"e").split("e");return+((i=(aa(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Lr=fn&&1/jt(new fn([,-0]))[1]==1/0?function(e){return new fn(e)}:Ka;function Fr(e){return function(t){var n=es(t);return n==f?Nt(t):n==b?Bt(t):function(e,t){return ht(t,function(t){return[t,e[t]]})}(t,e(t))}}function Nr(e,t,n,o,a,l,c,h){var u=2&t;if(!u&&"function"!=typeof e)throw new be(r);var d=o?o.length:0;if(d||(t&=-97,o=a=void 0),c=void 0===c?c:sn(ia(c),0),h=void 0===h?h:ia(h),d-=a?a.length:0,64&t){var p=o,f=a;o=a=void 0}var m=u?void 0:Ur(e),g=[e,t,n,o,a,p,f,l,c,h];if(m&&function(e,t){var n=e[1],i=t[1],r=n|i;if(!(r<131||128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n))return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var o=t[3];if(o){var a=e[3];e[3]=a?pr(a,o,t[4]):o,e[4]=a?Vt(e[3],s):t[4]}(o=t[5])&&(e[5]=(a=e[5])?fr(a,o,t[6]):o,e[6]=a?Vt(e[5],s):t[6]),(o=t[7])&&(e[7]=o),128&i&&(e[8]=null==e[8]?t[8]:on(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(g,m),e=g[0],t=g[1],n=g[2],o=g[3],a=g[4],!(h=g[9]=void 0===g[9]?u?0:e.length:sn(g[9]-d,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var r=Sr(e);return function s(){for(var o=arguments.length,a=i(o),l=o,c=Gr(s);l--;)a[l]=arguments[l];var h=o<3&&a[0]!==c&&a[o-1]!==c?[]:Vt(a,c);return(o-=h.length)<n?Pr(e,t,Er,s.placeholder,void 0,a,h,void 0,void 0,n-o):nt(this&&this!==$e&&this instanceof s?r:e,this,a)}}(e,t,h):32!=t&&33!=t||a.length?Er.apply(void 0,g):function(e,t,n,r){var s=1&t,o=Sr(e);return function t(){for(var a=-1,l=arguments.length,c=-1,h=r.length,u=i(h+l),d=this&&this!==$e&&this instanceof t?o:e;++c<h;)u[c]=r[c];for(;l--;)u[c++]=arguments[++a];return nt(d,s?n:this,u)}}(e,t,n,o);else var v=function(e,t,n){var i=1&t,r=Sr(e);return function t(){return(this&&this!==$e&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,n);return ys((m?ji:gs)(v,g),e,t)}function zr(e,t,n,i){return void 0===e||To(e,_e[n])&&!Se.call(i,n)?t:e}function Vr(e,t,n,i,r,s){return qo(e)&&qo(t)&&(s.set(t,e),Ri(e,t,void 0,Vr,s),s.delete(t)),e}function jr(e){return Go(e)?void 0:e}function Br(e,t,n,i,r,s){var o=1&n,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(e);if(c&&s.get(t))return c==t;var h=-1,u=!0,d=2&n?new Ln:void 0;for(s.set(e,t),s.set(t,e);++h<a;){var p=e[h],f=t[h];if(i)var m=o?i(f,p,h,t,e,s):i(p,f,h,e,t,s);if(void 0!==m){if(m)continue;u=!1;break}if(d){if(!ft(t,function(e,t){if(!Tt(d,t)&&(p===e||r(p,e,n,i,s)))return d.push(t)})){u=!1;break}}else if(p!==f&&!r(p,f,n,i,s)){u=!1;break}}return s.delete(e),s.delete(t),u}function Hr(e){return bs(ds(e,void 0,Ps),e+"")}function qr(e){return ui(e,_a,Qr)}function $r(e){return ui(e,wa,Jr)}var Ur=vn?function(e){return vn.get(e)}:Ka;function Wr(e){for(var t=e.name+"",n=bn[t],i=Se.call(bn,t)?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==e)return r.name}return t}function Gr(e){return(Se.call(An,"placeholder")?An:e).placeholder}function Yr(){var e=An.iteratee||Ga;return e=e===Ga?xi:e,arguments.length?e(arguments[0],arguments[1]):e}function Zr(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Xr(e){for(var t=_a(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,hs(r)]}return t}function Kr(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return wi(n)?n:void 0}var Qr=Jt?function(e){return null==e?[]:(e=me(e),at(Jt(e),function(t){return Ye.call(e,t)}))}:rl,Jr=Jt?function(e){for(var t=[];e;)ut(t,Qr(e)),e=Ue(e);return t}:rl,es=di;function ts(e,t,n){for(var i=-1,r=(t=sr(t,e)).length,s=!1;++i<r;){var o=ks(t[i]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++i!=r?s:!!(r=null==e?0:e.length)&&Ho(r)&&rs(o,r)&&(Po(e)||Oo(e))}function ns(e){return"function"!=typeof e.constructor||cs(e)?{}:Rn(Ue(e))}function is(e){return Po(e)||Oo(e)||!!(mt&&e&&e[mt])}function rs(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function ss(e,t,n){if(!qo(n))return!1;var i=typeof t;return!!("number"==i?Lo(n)&&rs(t,n.length):"string"==i&&t in n)&&To(n[t],e)}function os(e,t){if(Po(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ko(e))||q.test(e)||!H.test(e)||null!=t&&e in me(t)}function as(e){var t=Wr(e),n=An[t];if("function"!=typeof n||!(t in Dn.prototype))return!1;if(e===n)return!0;var i=Ur(n);return!!i&&e===i[0]}(un&&es(new un(new ArrayBuffer(1)))!=S||dn&&es(new dn)!=f||pn&&"[object Promise]"!=es(pn.resolve())||fn&&es(new fn)!=b||mn&&es(new mn)!=w)&&(es=function(e){var t=di(e),n=t==g?e.constructor:void 0,i=n?Es(n):"";if(i)switch(i){case yn:return S;case _n:return f;case wn:return"[object Promise]";case xn:return b;case Sn:return w}return t});var ls=we?jo:sl;function cs(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_e)}function hs(e){return e==e&&!qo(e)}function us(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in me(n))}}function ds(e,t,n){return t=sn(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,o=sn(r.length-t,0),a=i(o);++s<o;)a[s]=r[t+s];s=-1;for(var l=i(t+1);++s<t;)l[s]=r[s];return l[t]=n(a),nt(e,this,l)}}function ps(e,t){return t.length<2?e:hi(e,qi(t,0,-1))}function fs(e,t){for(var n=e.length,i=on(t.length,n),r=mr(e);i--;){var s=t[i];e[i]=rs(s,n)?r[s]:void 0}return e}function ms(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var gs=_s(ji),vs=Xt||function(e,t){return $e.setTimeout(e,t)},bs=_s(Bi);function ys(e,t,n){var i=t+"";return bs(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(X,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return rt(o,function(n){var i="_."+n[0];t&n[1]&&!lt(e,i)&&e.push(i)}),e.sort()}(function(e){var t=e.match(K);return t?t[1].split(Q):[]}(i),n)))}function _s(e){var t=0,n=0;return function(){var i=an(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function ws(e,t){var n=-1,i=e.length,r=i-1;for(t=void 0===t?i:t;++n<t;){var s=Mi(n,r),o=e[s];e[s]=e[n],e[n]=o}return e.length=t,e}var xs,Ss,Cs=(xs=So(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($,function(e,n,i,r){t.push(i?r.replace(ee,"$1"):n||e)}),t},function(e){return 500===Ss.size&&Ss.clear(),e}),Ss=xs.cache,xs);function ks(e){if("string"==typeof e||Ko(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Es(e){if(null!=e){try{return xe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function As(e){if(e instanceof Dn)return e.clone();var t=new In(e.__wrapped__,e.__chain__);return t.__actions__=mr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Rs=Fi(function(e,t){return Fo(e)?Qn(e,ri(t,1,Fo,!0)):[]}),Ts=Fi(function(e,t){var n=zs(t);return Fo(n)&&(n=void 0),Fo(e)?Qn(e,ri(t,1,Fo,!0),Yr(n,2)):[]}),Is=Fi(function(e,t){var n=zs(t);return Fo(n)&&(n=void 0),Fo(e)?Qn(e,ri(t,1,Fo,!0),void 0,n):[]});function Ds(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ia(n);return r<0&&(r=sn(i+r,0)),vt(e,Yr(t,3),r)}function Os(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=ia(n),r=n<0?sn(i+r,0):on(r,i-1)),vt(e,Yr(t,3),r,!0)}function Ps(e){return null!=e&&e.length?ri(e,1):[]}function Ms(e){return e&&e.length?e[0]:void 0}var Ls=Fi(function(e){var t=ht(e,ir);return t.length&&t[0]===e[0]?gi(t):[]}),Fs=Fi(function(e){var t=zs(e),n=ht(e,ir);return t===zs(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gi(n,Yr(t,2)):[]}),Ns=Fi(function(e){var t=zs(e),n=ht(e,ir);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gi(n,void 0,t):[]});function zs(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Vs=Fi(js);function js(e,t){return e&&e.length&&t&&t.length?Oi(e,t):e}var Bs=Hr(function(e,t){var n=null==e?0:e.length,i=Gn(e,t);return Pi(e,ht(t,function(e){return rs(e,n)?+e:e}).sort(dr)),i});function Hs(e){return null==e?e:hn.call(e)}var qs=Fi(function(e){return Xi(ri(e,1,Fo,!0))}),$s=Fi(function(e){var t=zs(e);return Fo(t)&&(t=void 0),Xi(ri(e,1,Fo,!0),Yr(t,2))}),Us=Fi(function(e){var t=zs(e);return t="function"==typeof t?t:void 0,Xi(ri(e,1,Fo,!0),void 0,t)});function Ws(e){if(!e||!e.length)return[];var t=0;return e=at(e,function(e){if(Fo(e))return t=sn(e.length,t),!0}),Et(t,function(t){return ht(e,xt(t))})}function Gs(e,t){if(!e||!e.length)return[];var n=Ws(e);return null==t?n:ht(n,function(e){return nt(t,void 0,e)})}var Ys=Fi(function(e,t){return Fo(e)?Qn(e,t):[]}),Zs=Fi(function(e){return tr(at(e,Fo))}),Xs=Fi(function(e){var t=zs(e);return Fo(t)&&(t=void 0),tr(at(e,Fo),Yr(t,2))}),Ks=Fi(function(e){var t=zs(e);return t="function"==typeof t?t:void 0,tr(at(e,Fo),void 0,t)}),Qs=Fi(Ws),Js=Fi(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Gs(e,n)});function eo(e){var t=An(e);return t.__chain__=!0,t}function to(e,t){return t(e)}var no=Hr(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return Gn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Dn&&rs(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:to,args:[r],thisArg:void 0}),new In(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e})):this.thru(r)}),io=vr(function(e,t,n){Se.call(e,n)?++e[n]:Wn(e,n,1)}),ro=Cr(Ds),so=Cr(Os);function oo(e,t){return(Po(e)?rt:Jn)(e,Yr(t,3))}function ao(e,t){return(Po(e)?st:ei)(e,Yr(t,3))}var lo=vr(function(e,t,n){Se.call(e,n)?e[n].push(t):Wn(e,n,[t])}),co=Fi(function(e,t,n){var r=-1,s="function"==typeof t,o=Lo(e)?i(e.length):[];return Jn(e,function(e){o[++r]=s?nt(t,e,n):vi(e,t,n)}),o}),ho=vr(function(e,t,n){Wn(e,n,t)});function uo(e,t){return(Po(e)?ht:ki)(e,Yr(t,3))}var po=vr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),fo=Fi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ss(e,t[0],t[1])?t=[]:n>2&&ss(t[0],t[1],t[2])&&(t=[t[0]]),Ii(e,ri(t,1),[])}),mo=Zt||function(){return $e.Date.now()};function go(e,t,n){return t=n?void 0:t,Nr(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function vo(e,t){var n;if("function"!=typeof t)throw new be(r);return e=ia(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var bo=Fi(function(e,t,n){var i=1;if(n.length){var r=Vt(n,Gr(bo));i|=32}return Nr(e,i,t,n,r)}),yo=Fi(function(e,t,n){var i=3;if(n.length){var r=Vt(n,Gr(yo));i|=32}return Nr(t,i,e,n,r)});function _o(e,t,n){var i,s,o,a,l,c,h=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new be(r);function f(t){var n=i,r=s;return i=s=void 0,h=t,a=e.apply(r,n)}function m(e){return h=e,l=vs(v,t),u?f(e):a}function g(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-h>=o}function v(){var e=mo();if(g(e))return b(e);l=vs(v,function(e){var n=t-(e-c);return d?on(n,o-(e-h)):n}(e))}function b(e){return l=void 0,p&&i?f(e):(i=s=void 0,a)}function y(){var e=mo(),n=g(e);if(i=arguments,s=this,c=e,n){if(void 0===l)return m(c);if(d)return lr(l),l=vs(v,t),f(c)}return void 0===l&&(l=vs(v,t)),a}return t=sa(t)||0,qo(n)&&(u=!!n.leading,o=(d="maxWait"in n)?sn(sa(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==l&&lr(l),h=0,i=c=s=l=void 0},y.flush=function(){return void 0===l?a:b(mo())},y}var wo=Fi(function(e,t){return Kn(e,1,t)}),xo=Fi(function(e,t,n){return Kn(e,sa(t)||0,n)});function So(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new be(r);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(So.Cache||Mn),n}function Co(e){if("function"!=typeof e)throw new be(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}So.Cache=Mn;var ko=or(function(e,t){var n=(t=1==t.length&&Po(t[0])?ht(t[0],At(Yr())):ht(ri(t,1),At(Yr()))).length;return Fi(function(i){for(var r=-1,s=on(i.length,n);++r<s;)i[r]=t[r].call(this,i[r]);return nt(e,this,i)})}),Eo=Fi(function(e,t){return Nr(e,32,void 0,t,Vt(t,Gr(Eo)))}),Ao=Fi(function(e,t){return Nr(e,64,void 0,t,Vt(t,Gr(Ao)))}),Ro=Hr(function(e,t){return Nr(e,256,void 0,void 0,void 0,t)});function To(e,t){return e===t||e!=e&&t!=t}var Io=Or(pi),Do=Or(function(e,t){return e>=t}),Oo=bi(function(){return arguments}())?bi:function(e){return $o(e)&&Se.call(e,"callee")&&!Ye.call(e,"callee")},Po=i.isArray,Mo=Xe?At(Xe):function(e){return $o(e)&&di(e)==x};function Lo(e){return null!=e&&Ho(e.length)&&!jo(e)}function Fo(e){return $o(e)&&Lo(e)}var No=en||sl,zo=Ke?At(Ke):function(e){return $o(e)&&di(e)==h};function Vo(e){if(!$o(e))return!1;var t=di(e);return t==u||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Go(e)}function jo(e){if(!qo(e))return!1;var t=di(e);return t==d||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Bo(e){return"number"==typeof e&&e==ia(e)}function Ho(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function qo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $o(e){return null!=e&&"object"==typeof e}var Uo=Qe?At(Qe):function(e){return $o(e)&&es(e)==f};function Wo(e){return"number"==typeof e||$o(e)&&di(e)==m}function Go(e){if(!$o(e)||di(e)!=g)return!1;var t=Ue(e);if(null===t)return!0;var n=Se.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&xe.call(n)==Ae}var Yo=Je?At(Je):function(e){return $o(e)&&di(e)==v},Zo=et?At(et):function(e){return $o(e)&&es(e)==b};function Xo(e){return"string"==typeof e||!Po(e)&&$o(e)&&di(e)==y}function Ko(e){return"symbol"==typeof e||$o(e)&&di(e)==_}var Qo=tt?At(tt):function(e){return $o(e)&&Ho(e.length)&&!!Ne[di(e)]},Jo=Or(Ci),ea=Or(function(e,t){return e<=t});function ta(e){if(!e)return[];if(Lo(e))return Xo(e)?qt(e):mr(e);if(St&&e[St])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[St]());var t=es(e);return(t==f?Nt:t==b?jt:Ta)(e)}function na(e){return e?1/0===(e=sa(e))||-1/0===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ia(e){var t=na(e),n=t%1;return t==t?n?t-n:t:0}function ra(e){return e?Yn(ia(e),0,4294967295):0}function sa(e){if("number"==typeof e)return e;if(Ko(e))return NaN;if(qo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(G,"");var n=re.test(e);return n||oe.test(e)?Be(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function oa(e){return gr(e,wa(e))}function aa(e){return null==e?"":Zi(e)}var la=br(function(e,t){if(cs(t)||Lo(t))gr(t,_a(t),e);else for(var n in t)Se.call(t,n)&&Hn(e,n,t[n])}),ca=br(function(e,t){gr(t,wa(t),e)}),ha=br(function(e,t,n,i){gr(t,wa(t),e,i)}),ua=br(function(e,t,n,i){gr(t,_a(t),e,i)}),da=Hr(Gn),pa=Fi(function(e,t){e=me(e);var n=-1,i=t.length,r=i>2?t[2]:void 0;for(r&&ss(t[0],t[1],r)&&(i=1);++n<i;)for(var s=t[n],o=wa(s),a=-1,l=o.length;++a<l;){var c=o[a],h=e[c];(void 0===h||To(h,_e[c])&&!Se.call(e,c))&&(e[c]=s[c])}return e}),fa=Fi(function(e){return e.push(void 0,Vr),nt(Sa,void 0,e)});function ma(e,t,n){var i=null==e?void 0:hi(e,t);return void 0===i?n:i}function ga(e,t){return null!=e&&ts(e,t,mi)}var va=Ar(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ee.call(t)),e[t]=n},qa(Wa)),ba=Ar(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ee.call(t)),Se.call(e,t)?e[t].push(n):e[t]=[n]},Yr),ya=Fi(vi);function _a(e){return Lo(e)?Nn(e):Si(e)}function wa(e){return Lo(e)?Nn(e,!0):function(e){if(!qo(e))return function(e){var t=[];if(null!=e)for(var n in me(e))t.push(n);return t}(e);var t=cs(e),n=[];for(var i in e)("constructor"!=i||!t&&Se.call(e,i))&&n.push(i);return n}(e)}var xa=br(function(e,t,n){Ri(e,t,n)}),Sa=br(function(e,t,n,i){Ri(e,t,n,i)}),Ca=Hr(function(e,t){var n={};if(null==e)return n;var i=!1;t=ht(t,function(t){return t=sr(t,e),i||(i=t.length>1),t}),gr(e,$r(e),n),i&&(n=Zn(n,7,jr));for(var r=t.length;r--;)Ki(n,t[r]);return n}),ka=Hr(function(e,t){return null==e?{}:function(e,t){return Di(e,t,function(t,n){return ga(e,n)})}(e,t)});function Ea(e,t){if(null==e)return{};var n=ht($r(e),function(e){return[e]});return t=Yr(t),Di(e,n,function(e,n){return t(e,n[0])})}var Aa=Fr(_a),Ra=Fr(wa);function Ta(e){return null==e?[]:Rt(e,_a(e))}var Ia=xr(function(e,t,n){return t=t.toLowerCase(),e+(n?Da(t):t)});function Da(e){return Va(aa(e).toLowerCase())}function Oa(e){return(e=aa(e))&&e.replace(le,Pt).replace(Ie,"")}var Pa=xr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ma=xr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),La=wr("toLowerCase"),Fa=xr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Na=xr(function(e,t,n){return e+(n?" ":"")+Va(t)}),za=xr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Va=wr("toUpperCase");function ja(e,t,n){return e=aa(e),void 0===(t=n?void 0:t)?function(e){return Me.test(e)}(e)?function(e){return e.match(Oe)||[]}(e):function(e){return e.match(J)||[]}(e):e.match(t)||[]}var Ba=Fi(function(e,t){try{return nt(e,void 0,t)}catch(n){return Vo(n)?n:new de(n)}}),Ha=Hr(function(e,t){return rt(t,function(t){t=ks(t),Wn(e,t,bo(e[t],e))}),e});function qa(e){return function(){return e}}var $a=kr(),Ua=kr(!0);function Wa(e){return e}function Ga(e){return xi("function"==typeof e?e:Zn(e,1))}var Ya=Fi(function(e,t){return function(n){return vi(n,e,t)}}),Za=Fi(function(e,t){return function(n){return vi(e,n,t)}});function Xa(e,t,n){var i=_a(t),r=ci(t,i);null!=n||qo(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=ci(t,_a(t)));var s=!(qo(n)&&"chain"in n&&!n.chain),o=jo(e);return rt(r,function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__),r=n.__actions__=mr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,ut([this.value()],arguments))})}),e}function Ka(){}var Qa=Tr(ht),Ja=Tr(ot),el=Tr(ft);function tl(e){return os(e)?xt(ks(e)):function(e){return function(t){return hi(t,e)}}(e)}var nl=Dr(),il=Dr(!0);function rl(){return[]}function sl(){return!1}var ol,al=Rr(function(e,t){return e+t},0),ll=Mr("ceil"),cl=Rr(function(e,t){return e/t},1),hl=Mr("floor"),ul=Rr(function(e,t){return e*t},1),dl=Mr("round"),pl=Rr(function(e,t){return e-t},0);return An.after=function(e,t){if("function"!=typeof t)throw new be(r);return e=ia(e),function(){if(--e<1)return t.apply(this,arguments)}},An.ary=go,An.assign=la,An.assignIn=ca,An.assignInWith=ha,An.assignWith=ua,An.at=da,An.before=vo,An.bind=bo,An.bindAll=Ha,An.bindKey=yo,An.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Po(e)?e:[e]},An.chain=eo,An.chunk=function(e,t,n){t=(n?ss(e,t,n):void 0===t)?1:sn(ia(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var s=0,o=0,a=i(Kt(r/t));s<r;)a[o++]=qi(e,s,s+=t);return a},An.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var s=e[t];s&&(r[i++]=s)}return r},An.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return ut(Po(n)?mr(n):[n],ri(t,1))},An.cond=function(e){var t=null==e?0:e.length,n=Yr();return e=t?ht(e,function(e){if("function"!=typeof e[1])throw new be(r);return[n(e[0]),e[1]]}):[],Fi(function(n){for(var i=-1;++i<t;){var r=e[i];if(nt(r[0],this,n))return nt(r[1],this,n)}})},An.conforms=function(e){return function(e){var t=_a(e);return function(n){return Xn(n,e,t)}}(Zn(e,1))},An.constant=qa,An.countBy=io,An.create=function(e,t){var n=Rn(e);return null==t?n:Un(n,t)},An.curry=function e(t,n,i){var r=Nr(t,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},An.curryRight=function e(t,n,i){var r=Nr(t,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},An.debounce=_o,An.defaults=pa,An.defaultsDeep=fa,An.defer=wo,An.delay=xo,An.difference=Rs,An.differenceBy=Ts,An.differenceWith=Is,An.drop=function(e,t,n){var i=null==e?0:e.length;return i?qi(e,(t=n||void 0===t?1:ia(t))<0?0:t,i):[]},An.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?qi(e,0,(t=i-(t=n||void 0===t?1:ia(t)))<0?0:t):[]},An.dropRightWhile=function(e,t){return e&&e.length?Ji(e,Yr(t,3),!0,!0):[]},An.dropWhile=function(e,t){return e&&e.length?Ji(e,Yr(t,3),!0):[]},An.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ss(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=ia(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:ia(i))<0&&(i+=r),i=n>i?0:ra(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},An.filter=function(e,t){return(Po(e)?at:ii)(e,Yr(t,3))},An.flatMap=function(e,t){return ri(uo(e,t),1)},An.flatMapDeep=function(e,t){return ri(uo(e,t),1/0)},An.flatMapDepth=function(e,t,n){return n=void 0===n?1:ia(n),ri(uo(e,t),n)},An.flatten=Ps,An.flattenDeep=function(e){return null!=e&&e.length?ri(e,1/0):[]},An.flattenDepth=function(e,t){return null!=e&&e.length?ri(e,t=void 0===t?1:ia(t)):[]},An.flip=function(e){return Nr(e,512)},An.flow=$a,An.flowRight=Ua,An.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},An.functions=function(e){return null==e?[]:ci(e,_a(e))},An.functionsIn=function(e){return null==e?[]:ci(e,wa(e))},An.groupBy=lo,An.initial=function(e){return null!=e&&e.length?qi(e,0,-1):[]},An.intersection=Ls,An.intersectionBy=Fs,An.intersectionWith=Ns,An.invert=va,An.invertBy=ba,An.invokeMap=co,An.iteratee=Ga,An.keyBy=ho,An.keys=_a,An.keysIn=wa,An.map=uo,An.mapKeys=function(e,t){var n={};return t=Yr(t,3),ai(e,function(e,i,r){Wn(n,t(e,i,r),e)}),n},An.mapValues=function(e,t){var n={};return t=Yr(t,3),ai(e,function(e,i,r){Wn(n,i,t(e,i,r))}),n},An.matches=function(e){return Ei(Zn(e,1))},An.matchesProperty=function(e,t){return Ai(e,Zn(t,1))},An.memoize=So,An.merge=xa,An.mergeWith=Sa,An.method=Ya,An.methodOf=Za,An.mixin=Xa,An.negate=Co,An.nthArg=function(e){return e=ia(e),Fi(function(t){return Ti(t,e)})},An.omit=Ca,An.omitBy=function(e,t){return Ea(e,Co(Yr(t)))},An.once=function(e){return vo(2,e)},An.orderBy=function(e,t,n,i){return null==e?[]:(Po(t)||(t=null==t?[]:[t]),Po(n=i?void 0:n)||(n=null==n?[]:[n]),Ii(e,t,n))},An.over=Qa,An.overArgs=ko,An.overEvery=Ja,An.overSome=el,An.partial=Eo,An.partialRight=Ao,An.partition=po,An.pick=ka,An.pickBy=Ea,An.property=tl,An.propertyOf=function(e){return function(t){return null==e?void 0:hi(e,t)}},An.pull=Vs,An.pullAll=js,An.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Oi(e,t,Yr(n,2)):e},An.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Oi(e,t,void 0,n):e},An.pullAt=Bs,An.range=nl,An.rangeRight=il,An.rearg=Ro,An.reject=function(e,t){return(Po(e)?at:ii)(e,Co(Yr(t,3)))},An.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],s=e.length;for(t=Yr(t,3);++i<s;){var o=e[i];t(o,i,e)&&(n.push(o),r.push(i))}return Pi(e,r),n},An.rest=function(e,t){if("function"!=typeof e)throw new be(r);return Fi(e,t=void 0===t?t:ia(t))},An.reverse=Hs,An.sampleSize=function(e,t,n){return t=(n?ss(e,t,n):void 0===t)?1:ia(t),(Po(e)?Vn:zi)(e,t)},An.set=function(e,t,n){return null==e?e:Vi(e,t,n)},An.setWith=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:Vi(e,t,n,i)},An.shuffle=function(e){return(Po(e)?jn:Hi)(e)},An.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ss(e,t,n)?(t=0,n=i):(t=null==t?0:ia(t),n=void 0===n?i:ia(n)),qi(e,t,n)):[]},An.sortBy=fo,An.sortedUniq=function(e){return e&&e.length?Gi(e):[]},An.sortedUniqBy=function(e,t){return e&&e.length?Gi(e,Yr(t,2)):[]},An.split=function(e,t,n){return n&&"number"!=typeof n&&ss(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=aa(e))&&("string"==typeof t||null!=t&&!Yo(t))&&!(t=Zi(t))&&Ft(e)?ar(qt(e),0,n):e.split(t,n):[]},An.spread=function(e,t){if("function"!=typeof e)throw new be(r);return t=null==t?0:sn(ia(t),0),Fi(function(n){var i=n[t],r=ar(n,0,t);return i&&ut(r,i),nt(e,this,r)})},An.tail=function(e){var t=null==e?0:e.length;return t?qi(e,1,t):[]},An.take=function(e,t,n){return e&&e.length?qi(e,0,(t=n||void 0===t?1:ia(t))<0?0:t):[]},An.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?qi(e,(t=i-(t=n||void 0===t?1:ia(t)))<0?0:t,i):[]},An.takeRightWhile=function(e,t){return e&&e.length?Ji(e,Yr(t,3),!1,!0):[]},An.takeWhile=function(e,t){return e&&e.length?Ji(e,Yr(t,3)):[]},An.tap=function(e,t){return t(e),e},An.throttle=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new be(r);return qo(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),_o(e,t,{leading:i,maxWait:t,trailing:s})},An.thru=to,An.toArray=ta,An.toPairs=Aa,An.toPairsIn=Ra,An.toPath=function(e){return Po(e)?ht(e,ks):Ko(e)?[e]:mr(Cs(aa(e)))},An.toPlainObject=oa,An.transform=function(e,t,n){var i=Po(e),r=i||No(e)||Qo(e);if(t=Yr(t,4),null==n){var s=e&&e.constructor;n=r?i?new s:[]:qo(e)&&jo(s)?Rn(Ue(e)):{}}return(r?rt:ai)(e,function(e,i,r){return t(n,e,i,r)}),n},An.unary=function(e){return go(e,1)},An.union=qs,An.unionBy=$s,An.unionWith=Us,An.uniq=function(e){return e&&e.length?Xi(e):[]},An.uniqBy=function(e,t){return e&&e.length?Xi(e,Yr(t,2)):[]},An.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Xi(e,void 0,t):[]},An.unset=function(e,t){return null==e||Ki(e,t)},An.unzip=Ws,An.unzipWith=Gs,An.update=function(e,t,n){return null==e?e:Qi(e,t,rr(n))},An.updateWith=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:Qi(e,t,rr(n),i)},An.values=Ta,An.valuesIn=function(e){return null==e?[]:Rt(e,wa(e))},An.without=Ys,An.words=ja,An.wrap=function(e,t){return Eo(rr(t),e)},An.xor=Zs,An.xorBy=Xs,An.xorWith=Ks,An.zip=Qs,An.zipObject=function(e,t){return nr(e||[],t||[],Hn)},An.zipObjectDeep=function(e,t){return nr(e||[],t||[],Vi)},An.zipWith=Js,An.entries=Aa,An.entriesIn=Ra,An.extend=ca,An.extendWith=ha,Xa(An,An),An.add=al,An.attempt=Ba,An.camelCase=Ia,An.capitalize=Da,An.ceil=ll,An.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=sa(n))==n?n:0),void 0!==t&&(t=(t=sa(t))==t?t:0),Yn(sa(e),t,n)},An.clone=function(e){return Zn(e,4)},An.cloneDeep=function(e){return Zn(e,5)},An.cloneDeepWith=function(e,t){return Zn(e,5,t="function"==typeof t?t:void 0)},An.cloneWith=function(e,t){return Zn(e,4,t="function"==typeof t?t:void 0)},An.conformsTo=function(e,t){return null==t||Xn(e,t,_a(t))},An.deburr=Oa,An.defaultTo=function(e,t){return null==e||e!=e?t:e},An.divide=cl,An.endsWith=function(e,t,n){e=aa(e),t=Zi(t);var i=e.length,r=n=void 0===n?i:Yn(ia(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},An.eq=To,An.escape=function(e){return(e=aa(e))&&z.test(e)?e.replace(F,Mt):e},An.escapeRegExp=function(e){return(e=aa(e))&&W.test(e)?e.replace(U,"\\$&"):e},An.every=function(e,t,n){var i=Po(e)?ot:ti;return n&&ss(e,t,n)&&(t=void 0),i(e,Yr(t,3))},An.find=ro,An.findIndex=Ds,An.findKey=function(e,t){return gt(e,Yr(t,3),ai)},An.findLast=so,An.findLastIndex=Os,An.findLastKey=function(e,t){return gt(e,Yr(t,3),li)},An.floor=hl,An.forEach=oo,An.forEachRight=ao,An.forIn=function(e,t){return null==e?e:si(e,Yr(t,3),wa)},An.forInRight=function(e,t){return null==e?e:oi(e,Yr(t,3),wa)},An.forOwn=function(e,t){return e&&ai(e,Yr(t,3))},An.forOwnRight=function(e,t){return e&&li(e,Yr(t,3))},An.get=ma,An.gt=Io,An.gte=Do,An.has=function(e,t){return null!=e&&ts(e,t,fi)},An.hasIn=ga,An.head=Ms,An.identity=Wa,An.includes=function(e,t,n,i){e=Lo(e)?e:Ta(e),n=n&&!i?ia(n):0;var r=e.length;return n<0&&(n=sn(r+n,0)),Xo(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&bt(e,t,n)>-1},An.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ia(n);return r<0&&(r=sn(i+r,0)),bt(e,t,r)},An.inRange=function(e,t,n){return t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n){return e>=on(t,n)&&e<sn(t,n)}(e=sa(e),t,n)},An.invoke=ya,An.isArguments=Oo,An.isArray=Po,An.isArrayBuffer=Mo,An.isArrayLike=Lo,An.isArrayLikeObject=Fo,An.isBoolean=function(e){return!0===e||!1===e||$o(e)&&di(e)==c},An.isBuffer=No,An.isDate=zo,An.isElement=function(e){return $o(e)&&1===e.nodeType&&!Go(e)},An.isEmpty=function(e){if(null==e)return!0;if(Lo(e)&&(Po(e)||"string"==typeof e||"function"==typeof e.splice||No(e)||Qo(e)||Oo(e)))return!e.length;var t=es(e);if(t==f||t==b)return!e.size;if(cs(e))return!Si(e).length;for(var n in e)if(Se.call(e,n))return!1;return!0},An.isEqual=function(e,t){return yi(e,t)},An.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?yi(e,t,void 0,n):!!i},An.isError=Vo,An.isFinite=function(e){return"number"==typeof e&&tn(e)},An.isFunction=jo,An.isInteger=Bo,An.isLength=Ho,An.isMap=Uo,An.isMatch=function(e,t){return e===t||_i(e,t,Xr(t))},An.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,_i(e,t,Xr(t),n)},An.isNaN=function(e){return Wo(e)&&e!=+e},An.isNative=function(e){if(ls(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wi(e)},An.isNil=function(e){return null==e},An.isNull=function(e){return null===e},An.isNumber=Wo,An.isObject=qo,An.isObjectLike=$o,An.isPlainObject=Go,An.isRegExp=Yo,An.isSafeInteger=function(e){return Bo(e)&&e>=-9007199254740991&&e<=9007199254740991},An.isSet=Zo,An.isString=Xo,An.isSymbol=Ko,An.isTypedArray=Qo,An.isUndefined=function(e){return void 0===e},An.isWeakMap=function(e){return $o(e)&&es(e)==w},An.isWeakSet=function(e){return $o(e)&&"[object WeakSet]"==di(e)},An.join=function(e,t){return null==e?"":nn.call(e,t)},An.kebabCase=Pa,An.last=zs,An.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=ia(n))<0?sn(i+r,0):on(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):vt(e,_t,r,!0)},An.lowerCase=Ma,An.lowerFirst=La,An.lt=Jo,An.lte=ea,An.max=function(e){return e&&e.length?ni(e,Wa,pi):void 0},An.maxBy=function(e,t){return e&&e.length?ni(e,Yr(t,2),pi):void 0},An.mean=function(e){return wt(e,Wa)},An.meanBy=function(e,t){return wt(e,Yr(t,2))},An.min=function(e){return e&&e.length?ni(e,Wa,Ci):void 0},An.minBy=function(e,t){return e&&e.length?ni(e,Yr(t,2),Ci):void 0},An.stubArray=rl,An.stubFalse=sl,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=ul,An.nth=function(e,t){return e&&e.length?Ti(e,ia(t)):void 0},An.noConflict=function(){return $e._===this&&($e._=Re),this},An.noop=Ka,An.now=mo,An.pad=function(e,t,n){e=aa(e);var i=(t=ia(t))?Ht(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Ir(Qt(r),n)+e+Ir(Kt(r),n)},An.padEnd=function(e,t,n){e=aa(e);var i=(t=ia(t))?Ht(e):0;return t&&i<t?e+Ir(t-i,n):e},An.padStart=function(e,t,n){e=aa(e);var i=(t=ia(t))?Ht(e):0;return t&&i<t?Ir(t-i,n)+e:e},An.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(aa(e).replace(Y,""),t||0)},An.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ss(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=na(e),void 0===t?(t=e,e=0):t=na(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=cn();return on(e+r*(t-e+je("1e-"+((r+"").length-1))),t)}return Mi(e,t)},An.reduce=function(e,t,n){var i=Po(e)?dt:Ct,r=arguments.length<3;return i(e,Yr(t,4),n,r,Jn)},An.reduceRight=function(e,t,n){var i=Po(e)?pt:Ct,r=arguments.length<3;return i(e,Yr(t,4),n,r,ei)},An.repeat=function(e,t,n){return t=(n?ss(e,t,n):void 0===t)?1:ia(t),Li(aa(e),t)},An.replace=function(){var e=arguments,t=aa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},An.result=function(e,t,n){var i=-1,r=(t=sr(t,e)).length;for(r||(r=1,e=void 0);++i<r;){var s=null==e?void 0:e[ks(t[i])];void 0===s&&(i=r,s=n),e=jo(s)?s.call(e):s}return e},An.round=dl,An.runInContext=e,An.sample=function(e){return(Po(e)?zn:Ni)(e)},An.size=function(e){if(null==e)return 0;if(Lo(e))return Xo(e)?Ht(e):e.length;var t=es(e);return t==f||t==b?e.size:Si(e).length},An.snakeCase=Fa,An.some=function(e,t,n){var i=Po(e)?ft:$i;return n&&ss(e,t,n)&&(t=void 0),i(e,Yr(t,3))},An.sortedIndex=function(e,t){return Ui(e,t)},An.sortedIndexBy=function(e,t,n){return Wi(e,t,Yr(n,2))},An.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Ui(e,t);if(i<n&&To(e[i],t))return i}return-1},An.sortedLastIndex=function(e,t){return Ui(e,t,!0)},An.sortedLastIndexBy=function(e,t,n){return Wi(e,t,Yr(n,2),!0)},An.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Ui(e,t,!0)-1;if(To(e[n],t))return n}return-1},An.startCase=Na,An.startsWith=function(e,t,n){return e=aa(e),n=null==n?0:Yn(ia(n),0,e.length),t=Zi(t),e.slice(n,n+t.length)==t},An.subtract=pl,An.sum=function(e){return e&&e.length?kt(e,Wa):0},An.sumBy=function(e,t){return e&&e.length?kt(e,Yr(t,2)):0},An.template=function(e,t,n){var i=An.templateSettings;n&&ss(e,t,n)&&(t=void 0),e=aa(e),t=ha({},t,i,zr);var r,s,o=ha({},t.imports,i.imports,zr),a=_a(o),l=Rt(o,a),c=0,h=t.interpolate||ce,u="__p += '",d=ge((t.escape||ce).source+"|"+h.source+"|"+(h===B?te:ce).source+"|"+(t.evaluate||ce).source+"|$","g"),p="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(d,function(t,n,i,o,a,l){return i||(i=o),u+=e.slice(c,l).replace(he,Lt),n&&(r=!0,u+="' +\n__e("+n+") +\n'"),a&&(s=!0,u+="';\n"+a+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),u+="';\n";var f=Se.call(t,"variable")&&t.variable;f||(u="with (obj) {\n"+u+"\n}\n"),u=(s?u.replace(O,""):u).replace(P,"$1").replace(M,"$1;"),u="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var m=Ba(function(){return pe(a,p+"return "+u).apply(void 0,l)});if(m.source=u,Vo(m))throw m;return m},An.times=function(e,t){if((e=ia(e))<1||e>9007199254740991)return[];var n=4294967295,i=on(e,4294967295);e-=4294967295;for(var r=Et(i,t=Yr(t));++n<e;)t(n);return r},An.toFinite=na,An.toInteger=ia,An.toLength=ra,An.toLower=function(e){return aa(e).toLowerCase()},An.toNumber=sa,An.toSafeInteger=function(e){return e?Yn(ia(e),-9007199254740991,9007199254740991):0===e?e:0},An.toString=aa,An.toUpper=function(e){return aa(e).toUpperCase()},An.trim=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=Zi(t)))return e;var i=qt(e),r=qt(t);return ar(i,It(i,r),Dt(i,r)+1).join("")},An.trimEnd=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(Z,"");if(!e||!(t=Zi(t)))return e;var i=qt(e);return ar(i,0,Dt(i,qt(t))+1).join("")},An.trimStart=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Zi(t)))return e;var i=qt(e);return ar(i,It(i,qt(t))).join("")},An.truncate=function(e,t){var n=30,i="...";if(qo(t)){var r="separator"in t?t.separator:r;n="length"in t?ia(t.length):n,i="omission"in t?Zi(t.omission):i}var s=(e=aa(e)).length;if(Ft(e)){var o=qt(e);s=o.length}if(n>=s)return e;var a=n-Ht(i);if(a<1)return i;var l=o?ar(o,0,a).join(""):e.slice(0,a);if(void 0===r)return l+i;if(o&&(a+=l.length-a),Yo(r)){if(e.slice(a).search(r)){var c,h=l;for(r.global||(r=ge(r.source,aa(ne.exec(r))+"g")),r.lastIndex=0;c=r.exec(h);)var u=c.index;l=l.slice(0,void 0===u?a:u)}}else if(e.indexOf(Zi(r),a)!=a){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+i},An.unescape=function(e){return(e=aa(e))&&N.test(e)?e.replace(L,$t):e},An.uniqueId=function(e){var t=++Ce;return aa(e)+t},An.upperCase=za,An.upperFirst=Va,An.each=oo,An.eachRight=ao,An.first=Ms,Xa(An,(ol={},ai(An,function(e,t){Se.call(An.prototype,t)||(ol[t]=e)}),ol),{chain:!1}),An.VERSION="4.17.15",rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){An[e].placeholder=An}),rt(["drop","take"],function(e,t){Dn.prototype[e]=function(n){n=void 0===n?1:sn(ia(n),0);var i=this.__filtered__&&!t?new Dn(this):this.clone();return i.__filtered__?i.__takeCount__=on(n,i.__takeCount__):i.__views__.push({size:on(n,4294967295),type:e+(i.__dir__<0?"Right":"")}),i},Dn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),rt(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;Dn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),rt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Dn.prototype[e]=function(){return this[n](1).value()[0]}}),rt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Dn.prototype[e]=function(){return this.__filtered__?new Dn(this):this[n](1)}}),Dn.prototype.compact=function(){return this.filter(Wa)},Dn.prototype.find=function(e){return this.filter(e).head()},Dn.prototype.findLast=function(e){return this.reverse().find(e)},Dn.prototype.invokeMap=Fi(function(e,t){return"function"==typeof e?new Dn(this):this.map(function(n){return vi(n,e,t)})}),Dn.prototype.reject=function(e){return this.filter(Co(Yr(e)))},Dn.prototype.slice=function(e,t){e=ia(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Dn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ia(t))<0?n.dropRight(-t):n.take(t-e)),n)},Dn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Dn.prototype.toArray=function(){return this.take(4294967295)},ai(Dn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=An[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);r&&(An.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,a=t instanceof Dn,l=o[0],c=a||Po(t),h=function(e){var t=r.apply(An,ut([e],o));return i&&u?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(a=c=!1);var u=this.__chain__,d=!!this.__actions__.length,p=s&&!u,f=a&&!d;if(!s&&c){t=f?t:new Dn(this);var m=e.apply(t,o);return m.__actions__.push({func:to,args:[h],thisArg:void 0}),new In(m,u)}return p&&f?e.apply(this,o):(m=this.thru(h),p?i?m.value()[0]:m.value():m)})}),rt(["pop","push","shift","sort","splice","unshift"],function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);An.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Po(r)?r:[],e)}return this[n](function(n){return t.apply(Po(n)?n:[],e)})}}),ai(Dn.prototype,function(e,t){var n=An[t];if(n){var i=n.name+"";Se.call(bn,i)||(bn[i]=[]),bn[i].push({name:t,func:n})}}),bn[Er(void 0,2).name]=[{name:"wrapper",func:void 0}],Dn.prototype.clone=function(){var e=new Dn(this.__wrapped__);return e.__actions__=mr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mr(this.__views__),e},Dn.prototype.reverse=function(){if(this.__filtered__){var e=new Dn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Dn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Po(e),i=t<0,r=n?e.length:0,s=function(e,t,n){for(var i=-1,r=n.length;++i<r;){var s=n[i],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=on(t,e+o);break;case"takeRight":e=sn(e,t-o)}}return{start:e,end:t}}(0,r,this.__views__),o=s.start,a=s.end,l=a-o,c=i?a:o-1,h=this.__iteratees__,u=h.length,d=0,p=on(l,this.__takeCount__);if(!n||!i&&r==l&&p==l)return er(e,this.__actions__);var f=[];e:for(;l--&&d<p;){for(var m=-1,g=e[c+=t];++m<u;){var v=h[m],b=v.type,y=(0,v.iteratee)(g);if(2==b)g=y;else if(!y){if(1==b)continue e;break e}}f[d++]=g}return f},An.prototype.at=no,An.prototype.chain=function(){return eo(this)},An.prototype.commit=function(){return new In(this.value(),this.__chain__)},An.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},An.prototype.plant=function(e){for(var t,n=this;n instanceof Tn;){var i=As(n);i.__index__=0,i.__values__=void 0,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},An.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Dn){var t=e;return this.__actions__.length&&(t=new Dn(this)),(t=t.reverse()).__actions__.push({func:to,args:[Hs],thisArg:void 0}),new In(t,this.__chain__)}return this.thru(Hs)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return er(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,St&&(An.prototype[St]=function(){return this}),An}();$e._=Ut,void 0===(i=(function(){return Ut}).call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n("YuTi")(e))},WuQa:function(e,t,n){e.exports=function(){"use strict";var e=[],t=window.document,n=Object.getPrototypeOf,i=e.slice,r=e.concat,s=e.push,o=e.indexOf,a={},l=a.toString,c=a.hasOwnProperty,h=c.toString,u=h.call(Object),d={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},f=function(e){return null!=e&&e===e.window},m={type:!0,src:!0,noModule:!0};function g(e,n,i){var r,s=(n=n||t).createElement("script");if(s.text=e,i)for(r in m)i[r]&&(s[r]=i[r]);n.head.appendChild(s).parentNode.removeChild(s)}function v(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?a[l.call(e)]||"object":typeof e}var b="3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",y=function(e,t){return new y.fn.init(e,t)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(e){var t=!!e&&"length"in e&&e.length,n=v(e);return!p(e)&&!f(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}y.fn=y.prototype={jquery:b,constructor:y,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:e.sort,splice:e.splice},y.extend=y.fn.extend=function(){var e,t,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||p(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],o!==(i=e[t])&&(c&&i&&(y.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,s=n&&Array.isArray(n)?n:[]):s=n&&y.isPlainObject(n)?n:{},o[t]=y.extend(c,s,i)):void 0!==i&&(o[t]=i));return o},y.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==l.call(e)||(t=n(e))&&("function"!=typeof(i=c.call(t,"constructor")&&t.constructor)||h.call(i)!==u))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){g(e)},each:function(e,t){var n,i=0;if(w(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(_,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(w(Object(e))?y.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,s=e.length,o=!n;r<s;r++)!t(e[r],r)!==o&&i.push(e[r]);return i},map:function(e,t,n){var i,s,o=0,a=[];if(w(e))for(i=e.length;o<i;o++)null!=(s=t(e[o],o,n))&&a.push(s);else for(o in e)null!=(s=t(e[o],o,n))&&a.push(s);return r.apply([],a)},guid:1,support:d}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=e[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});var x=function(e){var t,n,i,r,s,o,a,l,c,h,u,d,p,f,m,g,v,b,y,_="sizzle"+1*new Date,w=e.document,x=0,S=0,C=oe(),k=oe(),E=oe(),A=function(e,t){return e===t&&(u=!0),0},R={}.hasOwnProperty,T=[],I=T.pop,D=T.push,O=T.push,P=T.slice,M=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\[[\\x20\\t\\r\\n\\f]*("+N+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+F+"*\\]",V=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",j=new RegExp(F+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),$=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),U=new RegExp(V),W=new RegExp("^"+N+"$"),G={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ee=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){d()},re=ve(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{O.apply(T=P.call(w.childNodes),w.childNodes)}catch(xe){O={apply:T.length?function(e,t){D.apply(e,P.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,r){var s,a,c,h,u,f,v,b=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!r&&((t?t.ownerDocument||t:w)!==p&&d(t),t=t||p,m)){if(11!==x&&(u=K.exec(e)))if(s=u[1]){if(9===x){if(!(c=t.getElementById(s)))return i;if(c.id===s)return i.push(c),i}else if(b&&(c=b.getElementById(s))&&y(t,c)&&c.id===s)return i.push(c),i}else{if(u[2])return O.apply(i,t.getElementsByTagName(e)),i;if((s=u[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(s)),i}if(n.qsa&&!E[e+" "]&&(!g||!g.test(e))){if(1!==x)b=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((h=t.getAttribute("id"))?h=h.replace(te,ne):t.setAttribute("id",h=_),a=(f=o(e)).length;a--;)f[a]="#"+h+" "+ge(f[a]);v=f.join(","),b=Q.test(e)&&fe(t.parentNode)||t}if(v)try{return O.apply(i,b.querySelectorAll(v)),i}catch(S){}finally{h===_&&t.removeAttribute("id")}}}return l(e.replace(B,"$1"),t,i,r)}function oe(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ae(e){return e[_]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(xe){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return ae(function(t){return t=+t,ae(function(n,i){for(var r,s=e([],n.length,t),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},s=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=se.setDocument=function(e){var t,r,o=e?e.ownerDocument||e:w;return o!==p&&9===o.nodeType&&o.documentElement?(f=(p=o).documentElement,m=!s(p),w!==p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ie,!1):r.attachEvent&&r.attachEvent("onunload",ie)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=X.test(p.getElementsByClassName),n.getById=le(function(e){return f.appendChild(e).id=_,!p.getElementsByName||!p.getElementsByName(_).length}),n.getById?(i.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,r,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(r=t.getElementsByName(e),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=X.test(p.querySelectorAll))&&(le(function(e){f.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+L+")"),e.querySelectorAll("[id~="+_+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=X.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le(function(e){n.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),v.push("!=",V)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=X.test(f.compareDocumentPosition),y=t||X.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===p||e.ownerDocument===w&&y(w,e)?-1:t===p||t.ownerDocument===w&&y(w,t)?1:h?M(h,e)-M(h,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,r=e.parentNode,s=t.parentNode,o=[e],a=[t];if(!r||!s)return e===p?-1:t===p?1:r?-1:s?1:h?M(h,e)-M(h,t):0;if(r===s)return ce(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?ce(o[i],a[i]):o[i]===w?-1:a[i]===w?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&d(e),t=t.replace($,"='$1']"),n.matchesSelector&&m&&!E[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var i=b.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(xe){}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&d(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&d(e);var r=i.attrHandle[t.toLowerCase()],s=r&&R.call(i.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==s?s:n.attributes||!m?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},se.escape=function(e){return(e+"").replace(te,ne)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],r=0,s=0;if(u=!n.detectDuplicates,h=!n.sortStable&&e.slice(0),e.sort(A),u){for(;t=e[s++];)t===e[s]&&(r=i.push(s));for(;r--;)e.splice(i[r],1)}return h=null,e},r=se.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=se.selectors={cacheLength:50,createPseudo:ae,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+F+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var r=se.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(j," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,h,u,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(g){if(s){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&b){for(y=(p=(c=(h=(u=(d=g)[_]||(d[_]={}))[d.uniqueID]||(u[d.uniqueID]={}))[e]||[])[0]===x&&c[1])&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(y=p=0)||f.pop();)if(1===d.nodeType&&++y&&d===t){h[e]=[x,p,y];break}}else if(b&&(y=p=(c=(h=(u=(d=t)[_]||(d[_]={}))[d.uniqueID]||(u[d.uniqueID]={}))[e]||[])[0]===x&&c[1]),!1===y)for(;(d=++p&&d&&d[m]||(y=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(b&&((h=(u=d[_]||(d[_]={}))[d.uniqueID]||(u[d.uniqueID]={}))[e]=[x,y]),d!==t)););return(y-=r)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return r[_]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,n){for(var i,s=r(e,t),o=s.length;o--;)e[i=M(e,s[o])]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ae(function(e){var t=[],n=[],i=a(e.replace(B,"$1"));return i[_]?ae(function(e,t,n,r){for(var s,o=i(e,null,r,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),t[0]=null,!n.pop()}}),has:ae(function(e){return function(t){return se(e,t).length>0}}),contains:ae(function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:ae(function(e){return W.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:pe(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ue(t);function me(){}function ge(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ve(e,t,n){var i=t.dir,r=t.next,s=r||i,o=n&&"parentNode"===s,a=S++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r);return!1}:function(t,n,l){var c,h,u,d=[x,a];if(l){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(h=(u=t[_]||(t[_]={}))[t.uniqueID]||(u[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=h[s])&&c[0]===x&&c[1]===a)return d[2]=c[2];if(h[s]=d,d[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function ye(e,t,n,i,r){for(var s,o=[],a=0,l=e.length,c=null!=t;a<l;a++)(s=e[a])&&(n&&!n(s,i,r)||(o.push(s),c&&t.push(a)));return o}function _e(e,t,n,i,r,s){return i&&!i[_]&&(i=_e(i)),r&&!r[_]&&(r=_e(r,s)),ae(function(s,o,a,l){var c,h,u,d=[],p=[],f=o.length,m=s||function(e,t,n){for(var i=0,r=t.length;i<r;i++)se(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:ye(m,d,e,a,l),v=n?r||(s?e:f||i)?[]:o:g;if(n&&n(g,v,a,l),i)for(c=ye(v,p),i(c,[],a,l),h=c.length;h--;)(u=c[h])&&(v[p[h]]=!(g[p[h]]=u));if(s){if(r||e){if(r){for(c=[],h=v.length;h--;)(u=v[h])&&c.push(g[h]=u);r(null,v=[],c,l)}for(h=v.length;h--;)(u=v[h])&&(c=r?M(s,u):d[h])>-1&&(s[c]=!(o[c]=u))}}else v=ye(v===o?v.splice(f,v.length):v),r?r(null,o,v,l):O.apply(o,v)})}function we(e){for(var t,n,r,s=e.length,o=i.relative[e[0].type],a=o||i.relative[" "],l=o?1:0,h=ve(function(e){return e===t},a,!0),u=ve(function(e){return M(t,e)>-1},a,!0),d=[function(e,n,i){var r=!o&&(i||n!==c)||((t=n).nodeType?h(e,n,i):u(e,n,i));return t=null,r}];l<s;l++)if(n=i.relative[e[l].type])d=[ve(be(d),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[_]){for(r=++l;r<s&&!i.relative[e[r].type];r++);return _e(l>1&&be(d),l>1&&ge(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(B,"$1"),n,l<r&&we(e.slice(l,r)),r<s&&we(e=e.slice(r)),r<s&&ge(e))}d.push(n)}return be(d)}return me.prototype=i.filters=i.pseudos,i.setFilters=new me,o=se.tokenize=function(e,t){var n,r,s,o,a,l,c,h=k[e+" "];if(h)return t?0:h.slice(0);for(a=e,l=[],c=i.preFilter;a;){for(o in n&&!(r=H.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=q.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),i.filter)!(r=G[o].exec(a))||c[o]&&!(r=c[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):k(e,l).slice(0)},a=se.compile=function(e,t){var n,r=[],s=[],a=E[e+" "];if(!a){for(t||(t=o(e)),n=t.length;n--;)(a=we(t[n]))[_]?r.push(a):s.push(a);(a=E(e,function(e,t){var n=t.length>0,r=e.length>0,s=function(s,o,a,l,h){var u,f,g,v=0,b="0",y=s&&[],_=[],w=c,S=s||r&&i.find.TAG("*",h),C=x+=null==w?1:Math.random()||.1,k=S.length;for(h&&(c=o===p||o||h);b!==k&&null!=(u=S[b]);b++){if(r&&u){for(f=0,o||u.ownerDocument===p||(d(u),a=!m);g=e[f++];)if(g(u,o||p,a)){l.push(u);break}h&&(x=C)}n&&((u=!g&&u)&&v--,s&&y.push(u))}if(v+=b,n&&b!==v){for(f=0;g=t[f++];)g(y,_,o,a);if(s){if(v>0)for(;b--;)y[b]||_[b]||(_[b]=I.call(l));_=ye(_)}O.apply(l,_),h&&!s&&_.length>0&&v+t.length>1&&se.uniqueSort(l)}return h&&(x=C,c=w),y};return n?ae(s):s}(s,r))).selector=e}return a},l=se.select=function(e,t,n,r){var s,l,c,h,u,d="function"==typeof e&&e,p=!r&&o(e=d.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(J,ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(s=G.needsContext.test(e)?0:l.length;s--&&!i.relative[h=(c=l[s]).type];)if((u=i.find[h])&&(r=u(c.matches[0].replace(J,ee),Q.test(l[0].type)&&fe(t.parentNode)||t))){if(l.splice(s,1),!(e=r.length&&ge(l)))return O.apply(n,r),n;break}}return(d||a(e,p))(r,t,!m,n,!t||Q.test(e)&&fe(t.parentNode)||t),n},n.sortStable=_.split("").sort(A).join("")===_,n.detectDuplicates=!!u,d(),se}(window);y.find=x,y.expr=x.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=x.uniqueSort,y.text=x.getText,y.isXMLDoc=x.isXML,y.contains=x.contains,y.escapeSelector=x.escape;var S=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&y(e).is(n))break;i.push(e)}return i},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=y.expr.match.needsContext;function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(e,t,n){return p(t)?y.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?y.grep(e,function(e){return e===t!==n}):"string"!=typeof t?y.grep(e,function(e){return o.call(t,e)>-1!==n}):y.filter(t,e,n)}y.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?y.find.matchesSelector(i,e)?[i]:[]:y.find.matches(e,y.grep(t,function(e){return 1===e.nodeType}))},y.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(y(e).filter(function(){for(t=0;t<i;t++)if(y.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)y.find(e,r[t],n);return i>1?y.uniqueSort(n):n},filter:function(e){return this.pushStack(R(this,e||[],!1))},not:function(e){return this.pushStack(R(this,e||[],!0))},is:function(e){return!!R(this,"string"==typeof e&&k.test(e)?y(e):e||[],!1).length}});var T,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(e,n,i){var r,s;if(!e)return this;if(i=i||T,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:I.exec(e))||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(y.merge(this,y.parseHTML(r[1],(n=n instanceof y?n[0]:n)&&n.nodeType?n.ownerDocument||n:t,!0)),A.test(r[1])&&y.isPlainObject(n))for(r in n)p(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return(s=t.getElementById(r[2]))&&(this[0]=s,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==i.ready?i.ready(e):e(y):y.makeArray(e,this)}).prototype=y.fn,T=y(t);var D=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}y.fn.extend({has:function(e){var t=y(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(y.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,s=[],o="string"!=typeof e&&y(e);if(!k.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&y.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?y.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?o.call(y(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return E(e,"iframe")?e.contentDocument:(E(e,"template")&&(e=e.content||e),y.merge([],e.childNodes))}},function(e,t){y.fn[e]=function(n,i){var r=y.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=y.filter(i,r)),this.length>1&&(O[e]||y.uniqueSort(r),D.test(e)&&r.reverse()),this.pushStack(r)}});var M=/[^\x20\t\r\n\f]+/g;function L(e){return e}function F(e){throw e}function N(e,t,n,i){var r;try{e&&p(r=e.promise)?r.call(e).done(t).fail(n):e&&p(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}y.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return y.each(e.match(M)||[],function(e,n){t[n]=!0}),t}(e):y.extend({},e);var t,n,i,r,s=[],o=[],a=-1,l=function(){for(r=r||e.once,i=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){y.each(n,function(n,i){p(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==v(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return y.each(arguments,function(e,t){for(var n;(n=y.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--}),this},has:function(e){return e?y.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||t||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},y.extend({Deferred:function(e){var t=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return y.Deferred(function(n){y.each(t,function(t,i){var s=p(e[i[4]])&&e[i[4]];r[i[1]](function(){var e=s&&s.apply(this,arguments);e&&p(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,s?[e]:arguments)})}),e=null}).promise()},then:function(e,n,i){var r=0;function s(e,t,n,i){return function(){var o=this,a=arguments,l=function(){var l,c;if(!(e<r)){if((l=n.apply(o,a))===t.promise())throw new TypeError("Thenable self-resolution");p(c=l&&("object"==typeof l||"function"==typeof l)&&l.then)?i?c.call(l,s(r,t,L,i),s(r,t,F,i)):(r++,c.call(l,s(r,t,L,i),s(r,t,F,i),s(r,t,L,t.notifyWith))):(n!==L&&(o=void 0,a=[l]),(i||t.resolveWith)(o,a))}},c=i?l:function(){try{l()}catch(i){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(i,c.stackTrace),e+1>=r&&(n!==F&&(o=void 0,a=[i]),t.rejectWith(o,a))}};e?c():(y.Deferred.getStackHook&&(c.stackTrace=y.Deferred.getStackHook()),window.setTimeout(c))}}return y.Deferred(function(r){t[0][3].add(s(0,r,p(i)?i:L,r.notifyWith)),t[1][3].add(s(0,r,p(e)?e:L)),t[2][3].add(s(0,r,p(n)?n:F))}).promise()},promise:function(e){return null!=e?y.extend(e,i):i}},r={};return y.each(t,function(e,s){var o=s[2],a=s[5];i[s[1]]=o.add,a&&o.add(function(){n=a},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(s[3].fire),r[s[0]]=function(){return r[s[0]+"With"](this===r?void 0:this,arguments),this},r[s[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,n=t,r=Array(n),s=i.call(arguments),o=y.Deferred(),a=function(e){return function(n){r[e]=this,s[e]=arguments.length>1?i.call(arguments):n,--t||o.resolveWith(r,s)}};if(t<=1&&(N(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||p(s[n]&&s[n].then)))return o.then();for(;n--;)N(s[n],a(n),o.reject);return o.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(e,t){window.console&&window.console.warn&&e&&z.test(e.name)&&window.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},y.readyException=function(e){window.setTimeout(function(){throw e})};var V=y.Deferred();function j(){t.removeEventListener("DOMContentLoaded",j),window.removeEventListener("load",j),y.ready()}y.fn.ready=function(e){return V.then(e).catch(function(e){y.readyException(e)}),this},y.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==e&&--y.readyWait>0||V.resolveWith(t,[y]))}}),y.ready.then=V.then,"complete"===t.readyState||"loading"!==t.readyState&&!t.documentElement.doScroll?window.setTimeout(y.ready):(t.addEventListener("DOMContentLoaded",j),window.addEventListener("load",j));var B=function(e,t,n,i,r,s,o){var a=0,l=e.length,c=null==n;if("object"===v(n))for(a in r=!0,n)B(e,t,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,p(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(y(e),n)})),t))for(;a<l;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):s},H=/^-ms-/,q=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function U(e){return e.replace(H,"ms-").replace(q,$)}var W=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=y.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},W(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[U(t)]=n;else for(i in t)r[U(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][U(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(U):(t=U(t))in i?[t]:t.match(M)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||y.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!y.isEmptyObject(t)}};var Y=new G,Z=new G,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Q(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:X.test(e)?JSON.parse(e):e)}(n)}catch(r){}Z.set(e,t,n)}else n=void 0;return n}y.extend({hasData:function(e){return Z.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),y.fn.extend({data:function(e,t){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=Z.get(s),1===s.nodeType&&!Y.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=U(i.slice(5)),Q(s,i,r[i]));Y.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Z.set(this,e)}):B(this,function(t){var n;if(s&&void 0===t)return void 0!==(n=Z.get(s,e))||void 0!==(n=Q(s,e))?n:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),y.extend({queue:function(e,t,n){var i;if(e)return i=Y.get(e,t=(t||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=Y.access(e,t,y.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){var n=y.queue(e,t=t||"fx"),i=n.length,r=n.shift(),s=y._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,function(){y.dequeue(e,t)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:y.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),y.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?y.queue(this[0],e):void 0===t?this:this.each(function(){var n=y.queue(this,e,t);y._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){y.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=y.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Y.get(s[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&y.contains(e.ownerDocument,e)&&"none"===y.css(e,"display")},ie=function(e,t,n,i){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in r=n.apply(e,i||[]),t)e.style[s]=o[s];return r},re={};function se(e){var t,n=e.ownerDocument,i=e.nodeName,r=re[i];return r||(t=n.body.appendChild(n.createElement(i)),r=y.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),re[i]=r,r)}function oe(e,t){for(var n,i,r=[],s=0,o=e.length;s<o;s++)(i=e[s]).style&&(n=i.style.display,t?("none"===n&&(r[s]=Y.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&ne(i)&&(r[s]=se(i))):"none"!==n&&(r[s]="none",Y.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}y.fn.extend({show:function(){return oe(this,!0)},hide:function(){return oe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ne(this)?y(this).show():y(this).hide()})}});var ae=/^(?:checkbox|radio)$/i,le=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ce=/^$|^module$|\/(?:java|ecma)script/i,he={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ue(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?y.merge([e],n):n}function de(e,t){for(var n=0,i=e.length;n<i;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}he.optgroup=he.option,he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td;var pe=/<|&#?\w+;/;function fe(e,t,n,i,r){for(var s,o,a,l,c,h,u=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((s=e[p])||0===s)if("object"===v(s))y.merge(d,s.nodeType?[s]:s);else if(pe.test(s)){for(o=o||u.appendChild(t.createElement("div")),a=(le.exec(s)||["",""])[1].toLowerCase(),o.innerHTML=(l=he[a]||he._default)[1]+y.htmlPrefilter(s)+l[2],h=l[0];h--;)o=o.lastChild;y.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(t.createTextNode(s));for(u.textContent="",p=0;s=d[p++];)if(i&&y.inArray(s,i)>-1)r&&r.push(s);else if(c=y.contains(s.ownerDocument,s),o=ue(u.appendChild(s),"script"),c&&de(o),n)for(h=0;s=o[h++];)ce.test(s.type||"")&&n.push(s);return u}!function(){var e=t.createDocumentFragment().appendChild(t.createElement("div")),n=t.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),d.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var me=t.documentElement,ge=/^key/,ve=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,be=/^([^.]*)(?:\.(.+)|)/;function ye(){return!0}function _e(){return!1}function we(){try{return t.activeElement}catch(Xn){}}function xe(e,t,n,i,r,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)xe(e,a,n,i,t[a],s);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=_e;else if(!r)return e;return 1===s&&(o=r,(r=function(e){return y().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=y.guid++)),e.each(function(){y.event.add(this,t,r,i,n)})}y.event={global:{},add:function(e,t,n,i,r){var s,o,a,l,c,h,u,d,p,f,m,g=Y.get(e);if(g)for(n.handler&&(n=(s=n).handler,r=s.selector),r&&y.find.matchesSelector(me,r),n.guid||(n.guid=y.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==y&&y.event.triggered!==t.type?y.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;c--;)p=m=(a=be.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(u=y.event.special[p]||{},u=y.event.special[p=(r?u.delegateType:u.bindType)||p]||{},h=y.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&y.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,f,o)||e.addEventListener&&e.addEventListener(p,o)),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),y.event.global[p]=!0)},remove:function(e,t,n,i,r){var s,o,a,l,c,h,u,d,p,f,m,g=Y.hasData(e)&&Y.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(M)||[""]).length;c--;)if(p=m=(a=be.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(u=y.event.special[p]||{},d=l[p=(i?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)h=d[s],!r&&m!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(d.splice(s,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(e,h));o&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,f,g.handle)||y.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)y.event.remove(e,p+t[c],n,i,!0);y.isEmptyObject(l)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,s,o,a=y.event.fix(e),l=new Array(arguments.length),c=(Y.get(this,"events")||{})[a.type]||[],h=y.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(o=y.event.handlers.call(this,a,c),t=0;(r=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(i=((y.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,i,r,s,o,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[r=(i=t[n]).selector+" "]&&(o[r]=i.needsContext?y(r,this).index(c)>-1:y.find(r,this,null,[c]).length),o[r]&&s.push(i);s.length&&a.push({elem:c,handlers:s})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(y.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==we()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===we()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&E(this,"input"))return this.click(),!1},_default:function(e){return E(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},y.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ye:_e,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:_e,isPropagationStopped:_e,isImmediatePropagationStopped:_e,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ye,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ye,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ye,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ge.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ve.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},y.event.addProp),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return r&&(r===i||y.contains(i,r))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),y.fn.extend({on:function(e,t,n,i){return xe(this,e,t,n,i)},one:function(e,t,n,i){return xe(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=_e),this.each(function(){y.event.remove(this,e,n,t)})}});var Se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ce=/<script|<style|<link/i,ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Ee=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ae(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&y(e).children("tbody")[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Te(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,i,r,s,o,a,l,c;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.access(e),o=Y.set(t,s),c=s.events))for(r in delete o.handle,o.events={},c)for(n=0,i=c[r].length;n<i;n++)y.event.add(t,r,c[r][n]);Z.hasData(e)&&(a=Z.access(e),l=y.extend({},a),Z.set(t,l))}}function De(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ae.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Oe(e,t,n,i){t=r.apply([],t);var s,o,a,l,c,h,u=0,f=e.length,m=f-1,v=t[0],b=p(v);if(b||f>1&&"string"==typeof v&&!d.checkClone&&ke.test(v))return e.each(function(r){var s=e.eq(r);b&&(t[0]=v.call(this,r,s.html())),Oe(s,t,n,i)});if(f&&(o=(s=fe(t,e[0].ownerDocument,!1,e,i)).firstChild,1===s.childNodes.length&&(s=o),o||i)){for(l=(a=y.map(ue(s,"script"),Re)).length;u<f;u++)c=s,u!==m&&(c=y.clone(c,!0,!0),l&&y.merge(a,ue(c,"script"))),n.call(e[u],c,u);if(l)for(h=a[a.length-1].ownerDocument,y.map(a,Te),u=0;u<l;u++)ce.test((c=a[u]).type||"")&&!Y.access(c,"globalEval")&&y.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?y._evalUrl&&y._evalUrl(c.src):g(c.textContent.replace(Ee,""),h,c))}return e}function Pe(e,t,n){for(var i,r=t?y.filter(t,e):e,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||y.cleanData(ue(i)),i.parentNode&&(n&&y.contains(i.ownerDocument,i)&&de(ue(i,"script")),i.parentNode.removeChild(i));return e}y.extend({htmlPrefilter:function(e){return e.replace(Se,"<$1></$2>")},clone:function(e,t,n){var i,r,s,o,a=e.cloneNode(!0),l=y.contains(e.ownerDocument,e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(o=ue(a),i=0,r=(s=ue(e)).length;i<r;i++)De(s[i],o[i]);if(t)if(n)for(s=s||ue(e),o=o||ue(a),i=0,r=s.length;i<r;i++)Ie(s[i],o[i]);else Ie(e,a);return(o=ue(a,"script")).length>0&&de(o,!l&&ue(e,"script")),a},cleanData:function(e){for(var t,n,i,r=y.event.special,s=0;void 0!==(n=e[s]);s++)if(W(n)){if(t=n[Y.expando]){if(t.events)for(i in t.events)r[i]?y.event.remove(n,i):y.removeEvent(n,i,t.handle);n[Y.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),y.fn.extend({detach:function(e){return Pe(this,e,!0)},remove:function(e){return Pe(this,e)},text:function(e){return B(this,function(e){return void 0===e?y.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Oe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ae(this,e).appendChild(e)})},prepend:function(){return Oe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Oe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Oe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(y.cleanData(ue(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return y.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!he[(le.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(y.cleanData(ue(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Oe(this,arguments,function(t){var n=this.parentNode;y.inArray(this,e)<0&&(y.cleanData(ue(this)),n&&n.replaceChild(t,this))},e)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){y.fn[e]=function(e){for(var n,i=[],r=y(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),y(r[a])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var Me=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),Le=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)},Fe=new RegExp(te.join("|"),"i");function Ne(e,t,n){var i,r,s,o,a=e.style;return(n=n||Le(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||y.contains(e.ownerDocument,e)||(o=y.style(e,t)),!d.pixelBoxStyles()&&Me.test(o)&&Fe.test(t)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(l).appendChild(c);var e=window.getComputedStyle(c);i="1%"!==e.top,a=12===n(e.marginLeft),c.style.right="60%",o=36===n(e.right),r=36===n(e.width),c.style.position="absolute",s=36===c.offsetWidth||"absolute",me.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,r,s,o,a,l=t.createElement("div"),c=t.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===c.style.backgroundClip,y.extend(d,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),s}}))}();var Ve,je,Be=/^(none|table(?!-c[ea]).+)/,He=/^--/,qe={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},Ue=["Webkit","Moz","ms"],We=t.createElement("div").style;function Ge(e){var t=y.cssProps[e];return t||(t=y.cssProps[e]=function(e){if(e in We)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;n--;)if((e=Ue[n]+t)in We)return e}(e)||e),t}function Ye(e,t,n){var i=ee.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Ze(e,t,n,i,r,s){var o="width"===t?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=y.css(e,n+te[o],!0,r)),i?("content"===n&&(l-=y.css(e,"padding"+te[o],!0,r)),"margin"!==n&&(l-=y.css(e,"border"+te[o]+"Width",!0,r))):(l+=y.css(e,"padding"+te[o],!0,r),"padding"!==n?l+=y.css(e,"border"+te[o]+"Width",!0,r):a+=y.css(e,"border"+te[o]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-a-.5))),l}function Xe(e,t,n){var i=Le(e),r=Ne(e,t,i),s="border-box"===y.css(e,"boxSizing",!1,i),o=s;if(Me.test(r)){if(!n)return r;r="auto"}return o=o&&(d.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===y.css(e,"display",!1,i))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(r=parseFloat(r)||0)+Ze(e,t,n||(s?"border":"content"),o,i,r)+"px"}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ne(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=U(t),l=He.test(t),c=e.style;if(l||(t=Ge(a)),o=y.cssHooks[t]||y.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:c[t];"string"==(s=typeof n)&&(r=ee.exec(n))&&r[1]&&(n=function(e,t,n,i){var r,s,o=20,a=function(){return y.css(e,t,"")},l=a(),c=n&&n[3]||(y.cssNumber[t]?"":"px"),h=(y.cssNumber[t]||"px"!==c&&+l)&&ee.exec(y.css(e,t));if(h&&h[3]!==c){for(c=c||h[3],h=+(l/=2)||1;o--;)y.style(e,t,h+c),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),h/=s;y.style(e,t,(h*=2)+c),n=n||[]}return n&&(h=+h||+l||0,r=n[1]?h+(n[1]+1)*n[2]:+n[2]),r}(e,t,r),s="number"),null!=n&&n==n&&("number"===s&&(n+=r&&r[3]||(y.cssNumber[a]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,s,o,a=U(t);return He.test(t)||(t=Ge(a)),(o=y.cssHooks[t]||y.cssHooks[a])&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=Ne(e,t,i)),"normal"===r&&t in $e&&(r=$e[t]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),y.each(["height","width"],function(e,t){y.cssHooks[t]={get:function(e,n,i){if(n)return!Be.test(y.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Xe(e,t,i):ie(e,qe,function(){return Xe(e,t,i)})},set:function(e,n,i){var r,s=Le(e),o="border-box"===y.css(e,"boxSizing",!1,s),a=i&&Ze(e,t,i,o,s);return o&&d.scrollboxSize()===s.position&&(a-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-Ze(e,t,"border",!1,s)-.5)),a&&(r=ee.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=y.css(e,t)),Ye(0,n,a)}}}),y.cssHooks.marginLeft=ze(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ne(e,"marginLeft"))||e.getBoundingClientRect().left-ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(e,t){y.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+te[i]+t]=s[i]||s[i-2]||s[0];return r}},"margin"!==e&&(y.cssHooks[e+t].set=Ye)}),y.fn.extend({css:function(e,t){return B(this,function(e,t,n){var i,r,s={},o=0;if(Array.isArray(t)){for(i=Le(e),r=t.length;o<r;o++)s[t[o]]=y.css(e,t[o],!1,i);return s}return void 0!==n?y.style(e,t,n):y.css(e,t)},e,t,arguments.length>1)}}),y.fn.delay=function(e,t){return e=y.fx&&y.fx.speeds[e]||e,this.queue(t=t||"fx",function(t,n){var i=window.setTimeout(t,e);n.stop=function(){window.clearTimeout(i)}})},Ve=t.createElement("input"),je=t.createElement("select").appendChild(t.createElement("option")),Ve.type="checkbox",d.checkOn=""!==Ve.value,d.optSelected=je.selected,(Ve=t.createElement("input")).value="t",Ve.type="radio",d.radioValue="t"===Ve.value;var Ke,Qe=y.expr.attrHandle;y.fn.extend({attr:function(e,t){return B(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){y.removeAttr(this,e)})}}),y.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?y.prop(e,t,n):(1===s&&y.isXMLDoc(e)||(r=y.attrHooks[t.toLowerCase()]||(y.expr.match.bool.test(t)?Ke:void 0)),void 0!==n?null===n?void y.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=y.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&E(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(M);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),Ke={set:function(e,t,n){return!1===t?y.removeAttr(e,n):e.setAttribute(n,n),n}},y.each(y.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Qe[t]||y.find.attr;Qe[t]=function(e,t,i){var r,s,o=t.toLowerCase();return i||(s=Qe[o],Qe[o]=r,r=null!=n(e,t,i)?o:null,Qe[o]=s),r}});var Je=/^(?:input|select|textarea|button)$/i,et=/^(?:a|area)$/i;function tt(e){return(e.match(M)||[]).join(" ")}function nt(e){return e.getAttribute&&e.getAttribute("class")||""}function it(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}y.fn.extend({prop:function(e,t){return B(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[y.propFix[e]||e]})}}),y.extend({prop:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&y.isXMLDoc(e)||(r=y.propHooks[t=y.propFix[t]||t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):Je.test(e.nodeName)||et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(y.propHooks.selected={get:function(e){return null},set:function(e){}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this}),y.fn.extend({addClass:function(e){var t,n,i,r,s,o,a,l=0;if(p(e))return this.each(function(t){y(this).addClass(e.call(this,t,nt(this)))});if((t=it(e)).length)for(;n=this[l++];)if(r=nt(n),i=1===n.nodeType&&" "+tt(r)+" "){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(a=tt(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,s,o,a,l=0;if(p(e))return this.each(function(t){y(this).removeClass(e.call(this,t,nt(this)))});if(!arguments.length)return this.attr("class","");if((t=it(e)).length)for(;n=this[l++];)if(r=nt(n),i=1===n.nodeType&&" "+tt(r)+" "){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");r!==(a=tt(i))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):p(e)?this.each(function(n){y(this).toggleClass(e.call(this,n,nt(this),t),t)}):this.each(function(){var t,r,s,o;if(i)for(r=0,s=y(this),o=it(e);t=o[r++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==n||((t=nt(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+tt(nt(n))+" ").indexOf(t)>-1)return!0;return!1}});var rt=/\r/g;y.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=p(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,y(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=y.map(r,function(e){return null==e?"":e+""})),(t=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=y.valHooks[r.type]||y.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(rt,""):null==n?"":n:void 0}}),y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return null!=t?t:tt(y.text(e))}},select:{get:function(e){var t,n,i,r=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?s+1:r.length;for(i=s<0?l:o?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(t=y(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,s=y.makeArray(t),o=r.length;o--;)((i=r[o]).selected=y.inArray(y.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=y.inArray(y(e).val(),t)>-1}},d.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.focusin="onfocusin"in window;var st=/^(?:focusinfocus|focusoutblur)$/,ot=function(e){e.stopPropagation()};y.extend(y.event,{trigger:function(e,n,i,r){var s,o,a,l,h,u,d,m,g=[i||t],v=c.call(e,"type")?e.type:e,b=c.call(e,"namespace")?e.namespace.split("."):[];if(o=m=a=i=i||t,3!==i.nodeType&&8!==i.nodeType&&!st.test(v+y.event.triggered)&&(v.indexOf(".")>-1&&(b=v.split("."),v=b.shift(),b.sort()),h=v.indexOf(":")<0&&"on"+v,(e=e[y.expando]?e:new y.Event(v,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:y.makeArray(n,[e]),d=y.event.special[v]||{},r||!d.trigger||!1!==d.trigger.apply(i,n))){if(!r&&!d.noBubble&&!f(i)){for(st.test((l=d.delegateType||v)+v)||(o=o.parentNode);o;o=o.parentNode)g.push(o),a=o;a===(i.ownerDocument||t)&&g.push(a.defaultView||a.parentWindow||window)}for(s=0;(o=g[s++])&&!e.isPropagationStopped();)m=o,e.type=s>1?l:d.bindType||v,(u=(Y.get(o,"events")||{})[e.type]&&Y.get(o,"handle"))&&u.apply(o,n),(u=h&&o[h])&&u.apply&&W(o)&&(e.result=u.apply(o,n),!1===e.result&&e.preventDefault());return e.type=v,r||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),n)||!W(i)||h&&p(i[v])&&!f(i)&&((a=i[h])&&(i[h]=null),y.event.triggered=v,e.isPropagationStopped()&&m.addEventListener(v,ot),i[v](),e.isPropagationStopped()&&m.removeEventListener(v,ot),y.event.triggered=void 0,a&&(i[h]=a)),e.result}},simulate:function(e,t,n){var i=y.extend(new y.Event,n,{type:e,isSimulated:!0});y.event.trigger(i,null,t)}}),y.fn.extend({trigger:function(e,t){return this.each(function(){y.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return y.event.trigger(e,t,n,!0)}}),d.focusin||y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){y.event.simulate(t,e.target,y.event.fix(e))};y.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Y.access(i,t);r||i.addEventListener(e,n,!0),Y.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Y.access(i,t)-1;r?Y.access(i,t,r):(i.removeEventListener(e,n,!0),Y.remove(i,t))}}});var at,lt=/\[\]$/,ct=/\r?\n/g,ht=/^(?:submit|button|image|reset|file)$/i,ut=/^(?:input|select|textarea|keygen)/i;function dt(e,t,n,i){var r;if(Array.isArray(t))y.each(t,function(t,r){n||lt.test(e)?i(e,r):dt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==v(t))i(e,t);else for(r in t)dt(e+"["+r+"]",t[r],n,i)}y.param=function(e,t){var n,i=[],r=function(e,t){var n=p(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,function(){r(this.name,this.value)});else for(n in e)dt(n,e[n],t,r);return i.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&ut.test(this.nodeName)&&!ht.test(e)&&(this.checked||!ae.test(e))}).map(function(e,t){var n=y(this).val();return null==n?null:Array.isArray(n)?y.map(n,function(e){return{name:t.name,value:e.replace(ct,"\r\n")}}):{name:t.name,value:n.replace(ct,"\r\n")}}).get()}}),y.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=y(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return p(e)?this.each(function(t){y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p(e);return this.each(function(n){y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)},y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},d.createHTMLDocument=((at=t.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===at.childNodes.length),y.parseHTML=function(e,n,i){return"string"!=typeof e?[]:("boolean"==typeof n&&(i=n,n=!1),n||(d.createHTMLDocument?((r=(n=t.implementation.createHTMLDocument("")).createElement("base")).href=t.location.href,n.head.appendChild(r)):n=t),o=!i&&[],(s=A.exec(e))?[n.createElement(s[1])]:(s=fe([e],n,o),o&&o.length&&y(o).remove(),y.merge([],s.childNodes)));var r,s,o},y.offset={setOffset:function(e,t,n){var i,r,s,o,a,l,c=y.css(e,"position"),h=y(e),u={};"static"===c&&(e.style.position="relative"),a=h.offset(),s=y.css(e,"top"),l=y.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(o=(i=h.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),p(t)&&(t=t.call(e,n,y.extend({},a))),null!=t.top&&(u.top=t.top-a.top+o),null!=t.left&&(u.left=t.left-a.left+r),"using"in t?t.using.call(e,u):h.css(u)}},y.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){y.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?{top:(t=i.getBoundingClientRect()).top+(n=i.ownerDocument.defaultView).pageYOffset,left:t.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===y.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===y.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=y(e).offset()).top+=y.css(e,"borderTopWidth",!0),r.left+=y.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-y.css(i,"marginTop",!0),left:t.left-r.left-y.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===y.css(e,"position");)e=e.offsetParent;return e||me})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;y.fn[e]=function(i){return B(this,function(e,i,r){var s;if(f(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===r)return s?s[t]:e[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):e[i]=r},e,i,arguments.length)}}),y.each(["top","left"],function(e,t){y.cssHooks[t]=ze(d.pixelPosition,function(e,n){if(n)return n=Ne(e,t),Me.test(n)?y(e).position()[t]+"px":n})}),y.each({Height:"height",Width:"width"},function(e,t){y.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){y.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return B(this,function(t,n,r){var s;return f(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?y.css(t,n,a):y.style(t,n,r,a)},t,o?r:void 0,o)}})}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){y.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),y.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),y.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),y.proxy=function(e,t){var n,r,s;if("string"==typeof t&&(n=e[t],t=e,e=n),p(e))return r=i.call(arguments,2),(s=function(){return e.apply(t||this,r.concat(i.call(arguments)))}).guid=e.guid=e.guid||y.guid++,s},y.holdReady=function(e){e?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=E,y.isFunction=p,y.isWindow=f,y.camelCase=U,y.type=v,y.now=Date.now,y.isNumeric=function(e){var t=y.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))};const pt=y;function ft(e){return function(e,t){const n=document.createElement("div");return t&&(t.class&&n.classList.add(t.class),t.id&&(n.id=t.id),t.style&&function(e,t){for(let n of Object.keys(t))e.style[n]=t[n]}(n,t.style)),n}(0,e)}function mt(e){const t=getComputedStyle(e);"none"!==t.display&&(e._initialDisplay=t.display),e.style.display="none"}function gt(e){if(e.type.startsWith("touch")){const t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.pageX,y:e.pageY}}function vt(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function bt(e,t){const{clientX:n,clientY:i}=e;return((e,{clientX:t,clientY:n})=>{const{left:i,top:r,width:s,height:o}=e.getBoundingClientRect(),a=t-i,l=n-r;return{x:a,y:l,xNormalized:a/s,yNormalized:l/o,width:s,height:o}})(t,{clientX:n,clientY:i})}function yt(e,t){return function(e,t){t=t||"currentColor";let n=_t[e];n||(console.error(`No icon named: ${e}`),n=_t.question);const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"viewBox","0 0 "+n[0]+" "+n[1]);const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttributeNS(null,"fill",t),r.setAttributeNS(null,"d",n[4]),i.appendChild(r),i}(e,t)}const _t={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};function wt(e,t){var n=document.createElement("div");e.appendChild(n),n.appendChild(yt("times")),n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t()})}function xt(e){return"string"==typeof e||e instanceof String}function St(e){var t=String(e).split(/[.,]/);return t[0].split("").reverse().reduce(function(e,t,n){return n%3==0?e+","+t:e+t}).split("").reverse().join("")+(t[1]?"."+t[1]:"")}const Ct=function(e){return e.split(/\n|\r\n|\r/g)};function kt(e,t){var n,i,r=[],s=e.length,o=0,a=!1;if(s>0)for(r[o]=e.charAt(0),n=1;n<s;n++)'"'===(i=e.charAt(n))?a=!a:a||i!==t?r[o]+=i:r[++o]="";return r}function Et(e){return e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e}function At(e){return e.includes("googleapis")&&!e.includes("urlshortener")||Rt(e)||Tt(e)}function Rt(e){return e.startsWith("gs://")||e.startsWith("https://www.googleapis.com/storage")||e.startsWith("https://storage.cloud.google.com")||e.startsWith("https://storage.googleapis.com")}function Tt(e){return e.indexOf("drive.google.com")>=0||e.indexOf("www.googleapis.com/drive")>0}function It(e){var t=Dt(e);return t?"https://www.googleapis.com/drive/v3/files/"+t+"?alt=media&supportsTeamDrives=true":e}function Dt(e){if(e.includes("/open?id=")){const t=e.indexOf("/open?id=")+9,n=e.indexOf("&");if(t>0&&n>t)return e.substring(t,n);if(t>0)return e.substring(t)}else{if(e.includes("/file/d/")){const t=e.indexOf("/file/d/")+8,n=e.lastIndexOf("/");return e.substring(t,n)}if(e.startsWith("https://www.googleapis.com/drive")){let t=e.indexOf("/files/");const n=e.indexOf("?");if(t>0)return t+=7,n>0?e.substring(t,n):e.substring(t)}}throw Error("Unknown Google Drive url format: "+e)}const Ot=new Map;function Pt(){return"undefined"!=typeof gapi&&gapi.auth2&&gapi.auth2.getAuthInstance()}Ot.set("!","%21"),Ot.set("#","%23"),Ot.set("$","%24"),Ot.set("%","%25"),Ot.set("&","%26"),Ot.set("'","%27"),Ot.set("(","%28"),Ot.set(")","%29"),Ot.set("*","%2A"),Ot.set("+","%2B"),Ot.set(",","%2C"),Ot.set("/","%2F"),Ot.set(":","%3A"),Ot.set(";","%3B"),Ot.set("=","%3D"),Ot.set("?","%3F"),Ot.set("@","%40"),Ot.set("[","%5B"),Ot.set("]","%5D"),Ot.set(" ","%20");let Mt=!1;async function Lt(e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");if(Mt)return new Promise(function(t,n){let i;i=setInterval(()=>{try{!1===Mt&&(t(Lt(e)),clearInterval(i))}catch(r){clearInterval(i),n(r)}},100)});Mt=!0;try{let t,n=gapi.auth2.getAuthInstance().currentUser.get();if(n.isSignedIn()){n.hasGrantedScopes(e)||await n.grant({scope:e});const{access_token:i,expires_at:r}=n.getAuthResponse();if(Date.now()<r-3e5)t={access_token:i,expires_at:r};else{const{access_token:e,expires_at:i}=n.reloadAuthResponse();t={access_token:e,expires_at:i}}}else{n=await async function(e){const t=new gapi.auth2.SigninOptionsBuilder;return t.setPrompt("select_account"),t.setScope(e),gapi.auth2.getAuthInstance().signIn(t)}(e);const{access_token:i,expires_at:r}=n.getAuthResponse();t={access_token:i,expires_at:r}}return t}finally{Mt=!1}}function Ft(){return gapi.apiKey}function Nt(e){for(var t=zt,n=t.parser.loose.exec(e),i={},r=14;r--;)i[t.key[r]]=n[r]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(e,n,r){n&&(i[t.q.name][n]=r)}),i}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(e){return Buffer.from(e,"base64").toString("binary")});const zt={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function Vt(e){if(jt(e))return e.name;if(xt(e)){let t=e.lastIndexOf("/"),n=t<0?e:e.substr(t+1);return t=n.indexOf("?"),t>0&&(n=n.substr(0,t)),n}throw Error("Expected File or string, got "+typeof e)}function jt(e){return e instanceof File||"function"!=typeof e&&e.hasOwnProperty("name")&&e.hasOwnProperty("size")&&e.hasOwnProperty("type")}const Bt=jt;function Ht(e,t){const n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function qt(e){let t=e.length;for(;--t>=0;)e[t]=0}const $t=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ut=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Wt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Gt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yt=new Array(576);qt(Yt);const Zt=new Array(60);qt(Zt);const Xt=new Array(512);qt(Xt);const Kt=new Array(256);qt(Kt);const Qt=new Array(29);qt(Qt);const Jt=new Array(30);function en(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let tn,nn,rn;function sn(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}qt(Jt);const on=e=>e<256?Xt[e]:Xt[256+(e>>>7)],an=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ln=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,an(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},cn=(e,t,n)=>{ln(e,n[2*t],n[2*t+1])},hn=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},un=(e,t,n)=>{const i=new Array(16);let r,s,o=0;for(r=1;r<=15;r++)i[r]=o=o+n[r-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=hn(i[t]++,t))}},dn=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},pn=e=>{e.bi_valid>8?an(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},fn=(e,t,n,i)=>{const r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},mn=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&fn(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!fn(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},gn=(e,t,n)=>{let i,r,s,o,a=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],r=e.pending_buf[e.l_buf+a],a++,0===i?cn(e,r,t):(s=Kt[r],cn(e,s+256+1,t),o=$t[s],0!==o&&(r-=Qt[s],ln(e,r,o)),i--,s=on(i),cn(e,s,n),o=Ut[s],0!==o&&(i-=Jt[s],ln(e,i,o)))}while(a<e.last_lit);cn(e,256,t)},vn=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)mn(e,n,o);l=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],mn(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*l]=n[2*o]+n[2*a],e.depth[l]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=l,e.heap[1]=l++,mn(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,h,u,d,p,f,m=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)h=e.heap[c],d=n[2*n[2*h+1]+1]+1,d>l&&(d=l,m++),n[2*h+1]=d,h>i||(e.bl_count[d]++,p=0,h>=a&&(p=o[h-a]),f=n[2*h],e.opt_len+=f*(d+p),s&&(e.static_len+=f*(r[2*h+1]+p)));if(0!==m){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(d=l;0!==d;d--)for(h=e.bl_count[d];0!==h;)u=e.heap[--c],u>i||(n[2*u+1]!==d&&(e.opt_len+=(d-n[2*u+1])*n[2*u],n[2*u+1]=d),h--)}})(e,t),un(n,c,e.bl_count)},bn=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++a<l&&r===o||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4))},yn=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++a<l&&r===o)){if(a<c)do{cn(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(cn(e,r,e.bl_tree),a--),cn(e,16,e.bl_tree),ln(e,a-3,2)):a<=10?(cn(e,17,e.bl_tree),ln(e,a-3,3)):(cn(e,18,e.bl_tree),ln(e,a-11,7));a=0,s=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4)}};let _n=!1;const wn=(e,t,n,i)=>{ln(e,0+(i?1:0),3),((e,t,n,i)=>{pn(e),an(e,n),an(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n)};var xn={_tr_init:e=>{_n||((()=>{let e,t,n,i,r;const s=new Array(16);for(n=0,i=0;i<28;i++)for(Qt[i]=n,e=0;e<1<<$t[i];e++)Kt[n++]=i;for(Kt[n-1]=i,r=0,i=0;i<16;i++)for(Jt[i]=r,e=0;e<1<<Ut[i];e++)Xt[r++]=i;for(r>>=7;i<30;i++)for(Jt[i]=r<<7,e=0;e<1<<Ut[i]-7;e++)Xt[256+r++]=i;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)Yt[2*e+1]=8,e++,s[8]++;for(;e<=255;)Yt[2*e+1]=9,e++,s[9]++;for(;e<=279;)Yt[2*e+1]=7,e++,s[7]++;for(;e<=287;)Yt[2*e+1]=8,e++,s[8]++;for(un(Yt,287,s),e=0;e<30;e++)Zt[2*e+1]=5,Zt[2*e]=hn(e,5);tn=new en(Yt,$t,257,286,15),nn=new en(Zt,Ut,0,30,15),rn=new en(new Array(0),Wt,0,19,7)})(),_n=!0),e.l_desc=new sn(e.dyn_ltree,tn),e.d_desc=new sn(e.dyn_dtree,nn),e.bl_desc=new sn(e.bl_tree,rn),e.bi_buf=0,e.bi_valid=0,dn(e)},_tr_stored_block:wn,_tr_flush_block:(e,t,n,i)=>{let r,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),vn(e,e.l_desc),vn(e,e.d_desc),o=(e=>{let t;for(bn(e,e.dyn_ltree,e.l_desc.max_code),bn(e,e.dyn_dtree,e.d_desc.max_code),vn(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Gt[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?wn(e,t,n,i):4===e.strategy||s===r?(ln(e,2+(i?1:0),3),gn(e,Yt,Zt)):(ln(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for(ln(e,t-257,5),ln(e,n-1,5),ln(e,i-4,4),r=0;r<i;r++)ln(e,e.bl_tree[2*Gt[r]+1],3);yn(e,e.dyn_ltree,t-1),yn(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),gn(e,e.dyn_ltree,e.dyn_dtree)),dn(e),i&&pn(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Kt[n]+256+1)]++,e.dyn_dtree[2*on(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{ln(e,2,3),cn(e,256,Yt),(e=>{16===e.bi_valid?(an(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Sn=(e,t,n,i)=>{let r=65535&e|0,s=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{r=r+t[i++]|0,s=s+r|0}while(--o);r%=65521,s%=65521}return r|s<<16|0};const Cn=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var kn=(e,t,n,i)=>{const r=Cn,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[255&(e^t[o])];return-1^e},En={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},An={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Rn,_tr_stored_block:Tn,_tr_flush_block:In,_tr_tally:Dn,_tr_align:On}=xn,{Z_NO_FLUSH:Pn,Z_PARTIAL_FLUSH:Mn,Z_FULL_FLUSH:Ln,Z_FINISH:Fn,Z_BLOCK:Nn,Z_OK:zn,Z_STREAM_END:Vn,Z_STREAM_ERROR:jn,Z_DATA_ERROR:Bn,Z_BUF_ERROR:Hn,Z_DEFAULT_COMPRESSION:qn,Z_FILTERED:$n,Z_HUFFMAN_ONLY:Un,Z_RLE:Wn,Z_FIXED:Gn,Z_UNKNOWN:Yn,Z_DEFLATED:Zn}=An,Xn=(e,t)=>(e.msg=En[t],t),Kn=e=>(e<<1)-(e>4?9:0),Qn=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Jn=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const ei=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ti=(e,t)=>{In(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ei(e.strm)},ni=(e,t)=>{e.pending_buf[e.pending++]=t},ii=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ri=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=Sn(e.adler,t,r,n):2===e.state.wrap&&(e.adler=kn(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},si=(e,t)=>{let n,i,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,h=e.w_mask,u=e.prev,d=e.strstart+258;let p=c[s+o-1],f=c[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,c[n+o]===f&&c[n+o-1]===p&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<d);if(i=258-(d-s),s=d-258,i>o){if(e.match_start=t,o=i,i>=a)break;p=c[s+o-1],f=c[s+o]}}}while((t=u[t&h])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead},oi=e=>{const t=e.w_size;let n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do{r=e.head[--n],e.head[n]=r>=t?r-t:0}while(--i);i=t,n=i;do{r=e.prev[--n],e.prev[n]=r>=t?r-t:0}while(--i);s+=t}if(0===e.strm.avail_in)break;if(i=ri(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Jn(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Jn(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},ai=(e,t)=>{let n,i;for(;;){if(e.lookahead<262){if(oi(e),e.lookahead<262&&t===Pn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Jn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=si(e,n)),e.match_length>=3)if(i=Dn(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Jn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Jn(e,e.ins_h,e.window[e.strstart+1]);else i=Dn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ti(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Fn?(ti(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ti(e,!1),0===e.strm.avail_out)?1:2},li=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<262){if(oi(e),e.lookahead<262&&t===Pn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Jn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=si(e,n),e.match_length<=5&&(e.strategy===$n||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=Dn(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Jn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(ti(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=Dn(e,0,e.window[e.strstart-1]),i&&ti(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Dn(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Fn?(ti(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ti(e,!1),0===e.strm.avail_out)?1:2};function ci(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const hi=[new ci(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(oi(e),0===e.lookahead&&t===Pn)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,ti(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(ti(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Fn?(ti(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&ti(e,!1),1)}),new ci(4,4,8,4,ai),new ci(4,5,16,8,ai),new ci(4,6,32,32,ai),new ci(4,4,16,16,li),new ci(8,16,32,32,li),new ci(8,16,128,128,li),new ci(8,32,128,256,li),new ci(32,128,258,1024,li),new ci(32,258,258,4096,li)];function ui(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Zn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Qn(this.dyn_ltree),Qn(this.dyn_dtree),Qn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Qn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Qn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const di=e=>{const t=(e=>{if(!e||!e.state)return Xn(e,jn);e.total_in=e.total_out=0,e.data_type=Yn;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=Pn,Rn(t),zn})(e);var n;return t===zn&&((n=e.state).window_size=2*n.w_size,Qn(n.head),n.max_lazy_match=hi[n.level].max_lazy,n.good_match=hi[n.level].good_length,n.nice_match=hi[n.level].nice_length,n.max_chain_length=hi[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t};var pi=(e,t,n,i,r,s)=>{if(!e)return jn;let o=1;if(t===qn&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>9||n!==Zn||i<8||i>15||t<0||t>9||s<0||s>Gn)return Xn(e,jn);8===i&&(i=9);const a=new ui;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,di(e)},fi=(e,t)=>{let n,i;if(!e||!e.state||t>Nn||t<0)return e?Xn(e,jn):jn;const r=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===r.status&&t!==Fn)return Xn(e,0===e.avail_out?Hn:jn);r.strm=e;const s=r.last_flush;if(r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,ni(r,31),ni(r,139),ni(r,8),r.gzhead?(ni(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ni(r,255&r.gzhead.time),ni(r,r.gzhead.time>>8&255),ni(r,r.gzhead.time>>16&255),ni(r,r.gzhead.time>>24&255),ni(r,9===r.level?2:r.strategy>=Un||r.level<2?4:0),ni(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ni(r,255&r.gzhead.extra.length),ni(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=kn(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(ni(r,0),ni(r,0),ni(r,0),ni(r,0),ni(r,0),ni(r,9===r.level?2:r.strategy>=Un||r.level<2?4:0),ni(r,3),r.status=113);else{let t=Zn+(r.w_bits-8<<4)<<8,n=-1;n=r.strategy>=Un||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,r.status=113,ii(r,t),0!==r.strstart&&(ii(r,e.adler>>>16),ii(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=kn(e.adler,r.pending_buf,r.pending-n,n)),ei(e),n=r.pending,r.pending!==r.pending_buf_size));)ni(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=kn(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=kn(e.adler,r.pending_buf,r.pending-n,n)),ei(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ni(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=kn(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=kn(e.adler,r.pending_buf,r.pending-n,n)),ei(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ni(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=kn(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ei(e),r.pending+2<=r.pending_buf_size&&(ni(r,255&e.adler),ni(r,e.adler>>8&255),e.adler=0,r.status=113)):r.status=113),0!==r.pending){if(ei(e),0===e.avail_out)return r.last_flush=-1,zn}else if(0===e.avail_in&&Kn(t)<=Kn(s)&&t!==Fn)return Xn(e,Hn);if(666===r.status&&0!==e.avail_in)return Xn(e,Hn);if(0!==e.avail_in||0!==r.lookahead||t!==Pn&&666!==r.status){let n=r.strategy===Un?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(oi(e),0===e.lookahead)){if(t===Pn)return 1;break}if(e.match_length=0,n=Dn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ti(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Fn?(ti(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ti(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===Wn?((e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=258){if(oi(e),e.lookahead<=258&&t===Pn)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+258;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=258-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Dn(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Dn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ti(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Fn?(ti(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ti(e,!1),0===e.strm.avail_out)?1:2})(r,t):hi[r.level].func(r,t);if(3!==n&&4!==n||(r.status=666),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),zn;if(2===n&&(t===Mn?On(r):t!==Nn&&(Tn(r,0,0,!1),t===Ln&&(Qn(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ei(e),0===e.avail_out))return r.last_flush=-1,zn}return t!==Fn?zn:r.wrap<=0?Vn:(2===r.wrap?(ni(r,255&e.adler),ni(r,e.adler>>8&255),ni(r,e.adler>>16&255),ni(r,e.adler>>24&255),ni(r,255&e.total_in),ni(r,e.total_in>>8&255),ni(r,e.total_in>>16&255),ni(r,e.total_in>>24&255)):(ii(r,e.adler>>>16),ii(r,65535&e.adler)),ei(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?zn:Vn)},mi=e=>{if(!e||!e.state)return jn;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?Xn(e,jn):(e.state=null,113===t?Xn(e,Bn):zn)};const gi=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var vi=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)gi(n,t)&&(e[t]=n[t])}}return e},bi=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let t=e[i];n.set(t,r),r+=t.length}return n};let yi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Ju){yi=!1}const _i=new Uint8Array(256);for(let ed=0;ed<256;ed++)_i[ed]=ed>=252?6:ed>=248?5:ed>=240?4:ed>=224?3:ed>=192?2:1;_i[254]=_i[254]=1;var wi=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},xi=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const s=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){s[r++]=t;continue}let o=_i[t];if(o>4)s[r++]=65533,i+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&i<n;)t=t<<6|63&e[i++],o--;o>1?s[r++]=65533:t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&yi)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(s,r)},Si=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+_i[e[n]]>t?n:t},Ci=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ki=Object.prototype.toString,{Z_NO_FLUSH:Ei,Z_SYNC_FLUSH:Ai,Z_FULL_FLUSH:Ri,Z_FINISH:Ti,Z_OK:Ii,Z_STREAM_END:Di,Z_DEFAULT_COMPRESSION:Oi,Z_DEFAULT_STRATEGY:Pi,Z_DEFLATED:Mi}=An;function Li(e){this.options=vi({level:Oi,method:Mi,chunkSize:16384,windowBits:15,memLevel:8,strategy:Pi},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ci,this.strm.avail_out=0;let n=pi(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ii)throw new Error(En[n]);if(t.header&&(r=t.header,(i=this.strm)&&i.state&&(2!==i.state.wrap||(i.state.gzhead=r))),t.dictionary){let e;if(e="string"==typeof t.dictionary?wi(t.dictionary):"[object ArrayBuffer]"===ki.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=((e,t)=>{let n=t.length;if(!e||!e.state)return jn;const i=e.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return jn;if(1===r&&(e.adler=Sn(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(Qn(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,oi(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Jn(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,oi(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,zn})(this.strm,e),n!==Ii)throw new Error(En[n]);this._dict_set=!0}var i,r}function Fi(e,t){const n=new Li(t);if(n.push(e,!0),n.err)throw n.msg||En[n.err];return n.result}Li.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Ti:Ei,n.input="string"==typeof e?wi(e):"[object ArrayBuffer]"===ki.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===Ai||s===Ri)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=fi(n,s),r===Di)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=mi(this.strm),this.onEnd(r),this.ended=!0,r===Ii;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Li.prototype.onData=function(e){this.chunks.push(e)},Li.prototype.onEnd=function(e){e===Ii&&(this.result=bi(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ni={Deflate:Li,deflate:Fi,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Fi(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Fi(e,t)},constants:An},zi=function(e,t){let n,i,r,s,o,a,l,c,h,u,d,p,f,m,g,v,b,y,_,w,x,S,C,k;const E=e.state;n=e.next_in,C=e.input,i=n+(e.avail_in-5),r=e.next_out,k=e.output,s=r-(t-e.avail_out),o=r+(e.avail_out-257),a=E.dmax,l=E.wsize,c=E.whave,h=E.wnext,u=E.window,d=E.hold,p=E.bits,f=E.lencode,m=E.distcode,g=(1<<E.lenbits)-1,v=(1<<E.distbits)-1;e:do{p<15&&(d+=C[n++]<<p,p+=8,d+=C[n++]<<p,p+=8),b=f[d&g];t:for(;;){if(y=b>>>24,d>>>=y,p-=y,y=b>>>16&255,0===y)k[r++]=65535&b;else{if(!(16&y)){if(0==(64&y)){b=f[(65535&b)+(d&(1<<y)-1)];continue t}if(32&y){E.mode=12;break e}e.msg="invalid literal/length code",E.mode=30;break e}_=65535&b,y&=15,y&&(p<y&&(d+=C[n++]<<p,p+=8),_+=d&(1<<y)-1,d>>>=y,p-=y),p<15&&(d+=C[n++]<<p,p+=8,d+=C[n++]<<p,p+=8),b=m[d&v];n:for(;;){if(y=b>>>24,d>>>=y,p-=y,y=b>>>16&255,!(16&y)){if(0==(64&y)){b=m[(65535&b)+(d&(1<<y)-1)];continue n}e.msg="invalid distance code",E.mode=30;break e}if(w=65535&b,y&=15,p<y&&(d+=C[n++]<<p,p+=8,p<y&&(d+=C[n++]<<p,p+=8)),w+=d&(1<<y)-1,w>a){e.msg="invalid distance too far back",E.mode=30;break e}if(d>>>=y,p-=y,y=r-s,w>y){if(y=w-y,y>c&&E.sane){e.msg="invalid distance too far back",E.mode=30;break e}if(x=0,S=u,0===h){if(x+=l-y,y<_){_-=y;do{k[r++]=u[x++]}while(--y);x=r-w,S=k}}else if(h<y){if(x+=l+h-y,y-=h,y<_){_-=y;do{k[r++]=u[x++]}while(--y);if(x=0,h<_){y=h,_-=y;do{k[r++]=u[x++]}while(--y);x=r-w,S=k}}}else if(x+=h-y,y<_){_-=y;do{k[r++]=u[x++]}while(--y);x=r-w,S=k}for(;_>2;)k[r++]=S[x++],k[r++]=S[x++],k[r++]=S[x++],_-=3;_&&(k[r++]=S[x++],_>1&&(k[r++]=S[x++]))}else{x=r-w;do{k[r++]=k[x++],k[r++]=k[x++],k[r++]=k[x++],_-=3}while(_>2);_&&(k[r++]=k[x++],_>1&&(k[r++]=k[x++]))}break}}break}}while(n<i&&r<o);_=p>>3,n-=_,p-=_<<3,d&=(1<<p)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<o?o-r+257:257-(r-o),E.hold=d,E.bits=p};const Vi=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ji=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Bi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Hi=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var qi=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c,h,u,d,p,f,m=0,g=0,v=0,b=0,y=0,_=0,w=0,x=0,S=0,C=0,k=null,E=0;const A=new Uint16Array(16),R=new Uint16Array(16);let T,I,D,O=null,P=0;for(m=0;m<=15;m++)A[m]=0;for(g=0;g<i;g++)A[t[n+g]]++;for(y=l,b=15;b>=1&&0===A[b];b--);if(y>b&&(y=b),0===b)return r[s++]=20971520,r[s++]=20971520,a.bits=1,0;for(v=1;v<b&&0===A[v];v++);for(y<v&&(y=v),x=1,m=1;m<=15;m++)if(x<<=1,x-=A[m],x<0)return-1;if(x>0&&(0===e||1!==b))return-1;for(R[1]=0,m=1;m<15;m++)R[m+1]=R[m]+A[m];for(g=0;g<i;g++)0!==t[n+g]&&(o[R[t[n+g]]++]=g);if(0===e?(k=O=o,f=19):1===e?(k=Vi,E-=257,O=ji,P-=257,f=256):(k=Bi,O=Hi,f=-1),C=0,g=0,m=v,p=s,_=y,w=0,u=-1,S=1<<y,d=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){T=m-w,o[g]<f?(I=0,D=o[g]):o[g]>f?(I=O[P+o[g]],D=k[E+o[g]]):(I=96,D=0),c=1<<m-w,h=1<<_,v=h;do{h-=c,r[p+(C>>w)+h]=T<<24|I<<16|D|0}while(0!==h);for(c=1<<m-1;C&c;)c>>=1;if(0!==c?(C&=c-1,C+=c):C=0,g++,0==--A[m]){if(m===b)break;m=t[n+o[g]]}if(m>y&&(C&d)!==u){for(0===w&&(w=y),p+=v,_=m-w,x=1<<_;_+w<b&&(x-=A[_+w],!(x<=0));)_++,x<<=1;if(S+=1<<_,1===e&&S>852||2===e&&S>592)return 1;u=C&d,r[u]=y<<24|_<<16|p-s|0}}return 0!==C&&(r[p+C]=m-w<<24|64<<16|0),a.bits=y,0};const{Z_FINISH:$i,Z_BLOCK:Ui,Z_TREES:Wi,Z_OK:Gi,Z_STREAM_END:Yi,Z_NEED_DICT:Zi,Z_STREAM_ERROR:Xi,Z_DATA_ERROR:Ki,Z_MEM_ERROR:Qi,Z_BUF_ERROR:Ji,Z_DEFLATED:er}=An,tr=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function nr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ir=e=>{if(!e||!e.state)return Xi;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(!e||!e.state)return Xi;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Gi})(e)};let rr,sr,or=!0;const ar=e=>{if(or){rr=new Int32Array(512),sr=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(qi(1,e.lens,0,288,rr,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;qi(2,e.lens,0,32,sr,0,e.work,{bits:5}),or=!1}e.lencode=rr,e.lenbits=9,e.distcode=sr,e.distbits=5},lr=(e,t,n,i)=>{let r;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),(i-=r)?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0};var cr=ir,hr=(e,t)=>{if(!e)return Xi;const n=new nr;e.state=n,n.window=null;const i=((e,t)=>{let n;if(!e||!e.state)return Xi;const i=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Xi:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,ir(e))})(e,t);return i!==Gi&&(e.state=null),i},ur=(e,t)=>{let n,i,r,s,o,a,l,c,h,u,d,p,f,m,g,v,b,y,_,w,x,S,C=0;const k=new Uint8Array(4);let E,A;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Xi;n=e.state,12===n.mode&&(n.mode=13),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,h=n.bits,u=a,d=l,S=Gi;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(2&n.wrap&&35615===c){n.check=0,k[0]=255&c,k[1]=c>>>8&255,n.check=kn(n.check,k,2,0),c=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&c)!==er){e.msg="unknown compression method",n.mode=30;break}if(c>>>=4,h-=4,x=8+(15&c),0===n.wbits)n.wbits=x;else if(x>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&c?10:12,c=0,h=0;break;case 2:for(;h<16;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(n.flags=c,(255&n.flags)!==er){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=kn(n.check,k,2,0)),c=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}n.head&&(n.head.time=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,n.check=kn(n.check,k,4,0)),c=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=kn(n.check,k,2,0)),c=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(k[0]=255&c,k[1]=c>>>8&255,n.check=kn(n.check,k,2,0)),c=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+p),x)),512&n.flags&&(n.check=kn(n.check,i,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break e;p=0;do{x=i[s+p++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&p<a);if(512&n.flags&&(n.check=kn(n.check,i,p,s)),a-=p,s+=p,x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break e;p=0;do{x=i[s+p++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&p<a);if(512&n.flags&&(n.check=kn(n.check,i,p,s)),a-=p,s+=p,x)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}c=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;h<32;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}e.adler=n.check=tr(c),c=0,h=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=h,Zi;e.adler=n.check=1,n.mode=12;case 12:if(t===Ui||t===Wi)break e;case 13:if(n.last){c>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}switch(n.last=1&c,c>>>=1,h-=1,3&c){case 0:n.mode=14;break;case 1:if(ar(n),n.mode=20,t===Wi){c>>>=2,h-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}c>>>=2,h-=2;break;case 14:for(c>>>=7&h,h-=7&h;h<32;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,h=0,n.mode=15,t===Wi)break e;case 15:n.mode=16;case 16:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),0===p)break e;r.set(i.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=12;break;case 17:for(;h<14;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(n.nlen=257+(31&c),c>>>=5,h-=5,n.ndist=1+(31&c),c>>>=5,h-=5,n.ncode=4+(15&c),c>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}n.lens[R[n.have++]]=7&c,c>>>=3,h-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},S=qi(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,S){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[c&(1<<n.lenbits)-1],g=C>>>24,v=C>>>16&255,b=65535&C,!(g<=h);){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(b<16)c>>>=g,h-=g,n.lens[n.have++]=b;else{if(16===b){for(A=g+2;h<A;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(c>>>=g,h-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],p=3+(3&c),c>>>=2,h-=2}else if(17===b){for(A=g+3;h<A;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}c>>>=g,h-=g,x=0,p=3+(7&c),c>>>=3,h-=3}else{for(A=g+7;h<A;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}c>>>=g,h-=g,x=0,p=11+(127&c),c>>>=7,h-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,E={bits:n.lenbits},S=qi(1,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,S){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},S=qi(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,S){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,t===Wi)break e;case 20:n.mode=21;case 21:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=h,zi(e,d),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,h=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;C=n.lencode[c&(1<<n.lenbits)-1],g=C>>>24,v=C>>>16&255,b=65535&C,!(g<=h);){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(v&&0==(240&v)){for(y=g,_=v,w=b;C=n.lencode[w+((c&(1<<y+_)-1)>>y)],g=C>>>24,v=C>>>16&255,b=65535&C,!(y+g<=h);){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}c>>>=y,h-=y,n.back+=y}if(c>>>=g,h-=g,n.back+=g,n.length=b,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=12;break}if(64&v){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(A=n.extra;h<A;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;C=n.distcode[c&(1<<n.distbits)-1],g=C>>>24,v=C>>>16&255,b=65535&C,!(g<=h);){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(0==(240&v)){for(y=g,_=v,w=b;C=n.distcode[w+((c&(1<<y+_)-1)>>y)],g=C>>>24,v=C>>>16&255,b=65535&C,!(y+g<=h);){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}c>>>=y,h-=y,n.back+=y}if(c>>>=g,h-=g,n.back+=g,64&v){e.msg="invalid distance code",n.mode=30;break}n.offset=b,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(A=n.extra;h<A;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(p=d-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=r,f=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{r[o++]=m[f++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;r[o++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===a)break e;a--,c|=i[s++]<<h,h+=8}if(d-=l,e.total_out+=d,n.total+=d,d&&(e.adler=n.check=n.flags?kn(n.check,r,d,o-d):Sn(n.check,r,d,o-d)),d=l,(n.flags?c:tr(c))!==n.check){e.msg="incorrect data check",n.mode=30;break}c=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===a)break e;a--,c+=i[s++]<<h,h+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}c=0,h=0}n.mode=29;case 29:S=Yi;break e;case 30:S=Ki;break e;case 31:return Qi;case 32:default:return Xi}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=h,(n.wsize||d!==e.avail_out&&n.mode<30&&(n.mode<27||t!==$i))&&lr(e,e.output,e.next_out,d-e.avail_out),u-=e.avail_in,d-=e.avail_out,e.total_in+=u,e.total_out+=d,n.total+=d,n.wrap&&d&&(e.adler=n.check=n.flags?kn(n.check,r,d,e.next_out-d):Sn(n.check,r,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===u&&0===d||t===$i)&&S===Gi&&(S=Ji),S},dr=e=>{if(!e||!e.state)return Xi;let t=e.state;return t.window&&(t.window=null),e.state=null,Gi},pr=(e,t)=>{const n=t.length;let i,r,s;return e&&e.state?(i=e.state,0!==i.wrap&&11!==i.mode?Xi:11===i.mode&&(r=1,r=Sn(r,t,n,0),r!==i.check)?Ki:(s=lr(e,t,n,n),s?(i.mode=31,Qi):(i.havedict=1,Gi))):Xi},fr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const mr=Object.prototype.toString,{Z_NO_FLUSH:gr,Z_FINISH:vr,Z_OK:br,Z_STREAM_END:yr,Z_NEED_DICT:_r,Z_STREAM_ERROR:wr,Z_DATA_ERROR:xr,Z_MEM_ERROR:Sr}=An;function Cr(e){this.options=vi({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ci,this.strm.avail_out=0;let n=hr(this.strm,t.windowBits);if(n!==br)throw new Error(En[n]);if(this.header=new fr,((e,t)=>{if(!e||!e.state)return Xi;const n=e.state;0==(2&n.wrap)||(n.head=t,t.done=!1)})(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=wi(t.dictionary):"[object ArrayBuffer]"===mr.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=pr(this.strm,t.dictionary),n!==br)))throw new Error(En[n])}function kr(e,t){const n=new Cr(t);if(n.push(e),n.err)throw n.msg||En[n.err];return n.result}Cr.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?vr:gr,n.input="[object ArrayBuffer]"===mr.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=ur(n,o),s===_r&&r&&(s=pr(n,r),s===br?s=ur(n,o):s===xr&&(s=_r));n.avail_in>0&&s===yr&&n.state.wrap>0&&0!==e[n.next_in];)cr(n),s=ur(n,o);switch(s){case wr:case xr:case _r:case Sr:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===yr))if("string"===this.options.to){let e=Si(n.output,n.next_out),t=n.next_out-e,r=xi(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==br||0!==a){if(s===yr)return s=dr(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Cr.prototype.onData=function(e){this.chunks.push(e)},Cr.prototype.onEnd=function(e){e===br&&(this.result="string"===this.options.to?this.chunks.join(""):bi(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Er={Inflate:Cr,inflate:kr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,kr(e,t)},ungzip:kr,constants:An};const{Deflate:Ar,deflate:Rr,deflateRaw:Tr,gzip:Ir}=Ni,{Inflate:Dr,inflate:Or,inflateRaw:Pr,ungzip:Mr}=Er;var Lr={Deflate:Ar,deflate:Rr,deflateRaw:Tr,gzip:Ir,Inflate:Dr,inflate:Or,inflateRaw:Pr,ungzip:Mr,constants:An};const Fr=Lr.inflate;function Nr(e,t){const n=[];let i=0,r=0;for(t=t||e.byteLength-18;i<t;)try{const t=ArrayBuffer.isView(e)?e:new Uint8Array(e,i,18),s=t[11]<<8|t[10],o=12+s+i,a=1+(t[17]<<8|t[16])-s-19;if(e.byteLength-o<a||a<=0)break;const l=new Uint8Array(e,o,a),c=Lr.inflateRaw(l);i+=a-1+26,r+=c.byteLength,n.push(c)}catch(o){console.error(o);break}if(1===n.length)return n[0];{const e=new Uint8Array(r);let t=0;for(let i=0;i<n.length;++i){var s=new Uint8Array(n[i]);jr(s,0,e,t,s.length),t+=s.length}return e}}function zr(e){const t=ArrayBuffer.isView(e)?e:new Uint8Array(e);return 1+(t[17]<<8|t[16])}const Vr="function"==typeof new Uint8Array(1).subarray;function jr(e,t,n,i,r){if(0!==r){if(!e)throw"Undef src";if(!n)throw"Undef dest";0===t&&r===e.length?Br(e,n,i):Vr?Br(e.subarray(t,t+r),n,i):1===e.BYTES_PER_ELEMENT&&r>100?Br(new Uint8Array(e.buffer,e.byteOffset+t,r),n,i):function(e,t,n,i,r){for(let s=0;s<r;++s)n[i+s]=e[t+s]}(e,t,n,i,r)}}function Br(e,t,n){t.set(e,n)}function Hr(e,t){const n=e.split(","),i=n[0].split(":")[1];let r=n[1];if(i.indexOf("base64")>=0){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);let n;return n=t||i.indexOf("gzip")>0?Lr.ungzip(e):e,n}return decodeURIComponent(r)}const qr=function(e,t,n){return Math.min(Math.max(e,t),n)},$r=function(e){return Math.log(e)/Math.LN2};function Ur(){this.content=[]}function Wr(e,t){return Math.random()*(t-e)+e}Ur.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},remove:function(e){for(var t=this.content.length,n=0;n<t;n++)if(this.content[n]===e){var i=this.content.pop();if(n===t-1)break;this.content[n]=i,this.bubbleUp(n),this.sinkDown(n);break}},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e],n=t;e>0;){var i=Math.floor((e+1)/2)-1,r=this.content[i];if(n>=r)break;this.content[i]=t,this.content[e]=r,e=i}},sinkDown:function(e){for(var t=this.content.length,n=this.content[e],i=n;;){var r=2*(e+1),s=r-1,o=null;if(s<t){var a=this.content[s],l=a;a<i&&(o=s)}if(r<t&&this.content[r]<(null==o?i:l)&&(o=r),null==o)break;this.content[e]=this.content[o],this.content[o]=n,e=o}}};const Gr={rgbListFromHSV:()=>{let e=[];for(let t=1;t>=.5;t-=.1)for(let n=0;n<1;n+=1/28){const i="rgb("+Gr.hsvToRgb(n,1,t).join(",")+")";e.push(i)}return e.pop(),e.push(Gr.rgbColor(16,16,16)),e},rgbToHex:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(null!==t)return"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")"},hsvToRgb:function(e,t,n){var i,r,s,o=Math.floor(6*e),a=6*e-o,l=n*(1-t),c=n*(1-a*t),h=n*(1-(1-a)*t);switch(o%6){case 0:i=n,r=h,s=l;break;case 1:i=c,r=n,s=l;break;case 2:i=l,r=n,s=h;break;case 3:i=l,r=c,s=n;break;case 4:i=h,r=l,s=n;break;case 5:i=n,r=l,s=c}return[Math.floor(255*i),Math.floor(255*r),Math.floor(255*s)]},hslToRgb:function(e,t,n){var i,r,s;if(0===t)i=r=s=n;else{var o=n<.5?n*(1+t):n+t-n*t,a=2*n-o;i=Gr.hue2rgb(a,o,e+1/3),r=Gr.hue2rgb(a,o,e),s=Gr.hue2rgb(a,o,e-1/3)}return[255*i,255*r,255*s]},hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),rgbaColor:function(e,t,n,i){return"rgba("+(e=qr(e,0,255))+","+(t=qr(t,0,255))+","+(n=qr(n,0,255))+","+(i=qr(i,0,1))+")"},rgbColor:function(e,t,n){return"rgb("+(e=qr(e,0,255))+","+(t=qr(t,0,255))+","+(n=qr(n,0,255))+")"},greyScale:function(e){var t=qr(e,0,255);return"rgb("+t+","+t+","+t+")"},randomGrey:function(e,t){e=qr(e,0,255),t=qr(t,0,255);var n=Math.round(Wr(e,t)).toString(10);return"rgb("+n+","+n+","+n+")"},randomRGB:function(e,t){return e=qr(e,0,255),t=qr(t,0,255),"rgb("+Math.round(Wr(e,t)).toString(10)+","+Math.round(Wr(e,t)).toString(10)+","+Math.round(Wr(e,t)).toString(10)+")"},randomRGBConstantAlpha:function(e,t,n){return e=qr(e,0,255),t=qr(t,0,255),"rgba("+Math.round(Wr(e,t)).toString(10)+","+Math.round(Wr(e,t)).toString(10)+","+Math.round(Wr(e,t)).toString(10)+","+n+")"},addAlpha:function(e,t){if("0"===e||"."===e)e="rgb(0,0,0)";else{const t=this.colorNameToHex(e);t&&(e=t)}var n=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);if(e.startsWith("rgba")){const n=e.lastIndexOf(",");return e.substring(0,n+1)+t.toString()+")"}return n&&(e=Gr.hexToRgb(e)),e.startsWith("rgb")?e.replace("rgb","rgba").replace(")",", "+t+")"):(console.log(e+" is not an rgb style string"),e)},rgbComponents:function(e){if("0"===e||"."===e)return[0,0,0];if(/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e))e=Gr.hexToRgb(e);else if(!e.startsWith("rgb")){const t=this.colorNameToHex(e);e=this.hexToRgb(t)}if(e.startsWith("rgb("))return e.substring(4,e.length-1).split(",").map(e=>Number.parseInt(e.trim()));if(e.startsWith("rgba("))return e.substring(5,e.length-1).split(",").map((e,t)=>(e=e.trim(),3===t?Number.parseFloat(e):Number.parseInt(e)));throw Error("Unrecognized color string: color")},getCompositeColor:function(e,t,n){return"rgb("+Math.floor(n*t[0]+(1-n)*e[0])+","+Math.floor(n*t[1]+(1-n)*e[1])+","+Math.floor(n*t[2]+(1-n)*e[2])+")"},createColorString:function(e){return(e=function(e){return void 0===e||((e.startsWith("'")||e.startsWith('"'))&&(e=e.substring(1)),(e.endsWith("'")||e.endsWith('"'))&&(e=e.substring(0,e.length-1))),e}(e)).includes(",")?e.startsWith("rgb")?e:"rgb("+e+")":e},darkenLighten:function(e,t){let n,i=this.colorNameToHex(e);n=i?Gr.hexToRgb(i):e.startsWith("rgb(")?e:Gr.hexToRgb(e);const r=n.replace(")","").substring(4).split(","),s=Math.max(0,Math.min(255,Number.parseInt(r[0].trim())+t)),o=Math.max(0,Math.min(255,Number.parseInt(r[1].trim())+t)),a=Math.max(0,Math.min(255,Number.parseInt(r[2].trim())+t));return"rgb("+s.toString()+","+o.toString()+","+a.toString()+")"},colorNameToHex:function(e){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",darkgrey:"#a9a9a9",darkslategrey:"#2f4f4f",dimgrey:"#696969",grey:"#808080",lightgray:"#d3d3d3",lightslategrey:"#778899",slategrey:"#708090"}[e]}};let Yr;function Zr(e,t){t.addEventListener("mousedown",Xr.bind(e))}function Xr(e){e.stopPropagation(),e.preventDefault(),function(e){if(!e.getClientRects().length)return{top:0,left:0};e.getBoundingClientRect()}(this);const t=Kr.bind(this),n=Qr.bind(this),i=getComputedStyle(this),r=parseInt(i.top.replace("px","")),s=parseInt(i.left.replace("px",""));Yr={dragFunction:t,dragEndFunction:n,screenX:e.screenX,screenY:e.screenY,top:r,left:s},document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),document.addEventListener("mouseleave",n),document.addEventListener("mouseexit",n)}function Kr(e){if(!Yr)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=e.screenY-Yr.screenY;this.style.left=`${Yr.left+(e.screenX-Yr.screenX)}px`,this.style.top=`${Yr.top+t}px`}function Qr(e){if(!Yr)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=Yr.dragEndFunction;document.removeEventListener("mousemove",Yr.dragFunction),document.removeEventListener("mouseup",t),document.removeEventListener("mouseleave",t),document.removeEventListener("mouseexit",t),Yr=void 0}const Jr={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"#ffffff",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"},es={oauthTokens:{},setToken:function(e,t){this.oauthTokens[t=t||"googleapis"]=e,"googleapis"===t&&(this.google.access_token=e)},getToken:function(e){let t;e=e||"googleapis";for(let n of Object.keys(this.oauthTokens))if(ts(n).test(e)){t=this.oauthTokens[n];break}return t},removeToken:function(e){e=e||"googleapis";for(let t of Object.keys(this.oauthTokens))ts(t).test(e)&&(this.oauthTokens[t]=void 0);"googleapis"===e&&(this.google.access_token=void 0)},google:{setToken:function(e){es.setToken(e)}}};function ts(e){return new RegExp("^"+e.split(/\*+/).map(ns).join(".*")+"$")}function ns(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}const is=new class{constructor(e){this.requestsPerSecond=e.requestsPerSecond||10,this.lastStartTime=0,this.queued=[]}add(e,t){var n=this;return new Promise(function(t,i){n.queued.push({resolve:t,reject:i,asyncFunction:e}),n.dequeue()})}addAll(e,t){var n=e.map((function(e){return this.add(e,t)}).bind(this));return Promise.all(n)}dequeue(){if(this.queued.length>0){var e=new Date,t=1e3/this.requestsPerSecond+1,n=e-this.lastStartTime;n>=t?this._execute():setTimeout((function(){this.dequeue()}).bind(this),t-n)}}async _execute(){this.lastStartTime=new Date;var e=this.queued.shift();const t=e.asyncFunction;try{const n=await t();e.resolve(n)}catch(n){e.reject(n)}}}({requestsPerSecond:8}),rs={apiKey:void 0,setApiKey:function(e){this.apiKey=e},load:ss,loadArrayBuffer:async function(e,t){return(t=t||{}).responseType||(t.responseType="arraybuffer"),jt(e)?as(e,t):ss(e,t)},loadJson:async function(e,t){"POST"===((t=t||{}).method||(t.sendData?"POST":"GET"))&&(t.contentType="application/json");const n=await this.loadString(e,t);return n?JSON.parse(n):n},loadString:async function(e,t){return t=t||{},e instanceof File?async function(e,t){const n=t.range?e.slice(t.range.start,t.range.start+t.range.size):e;return hs(await ls(n))}(e,t):async function(e,t){return(t=t||{}).responseType="arraybuffer",hs(await rs.load(e,t))}(e,t)}};async function ss(e,t){t=t||{};const n=typeof e;if(jt(e=await("function"==typeof e?e():e)))return as(e,t);if("function"==typeof e.startsWith){if(e.startsWith("data:")){const n=Hr(e).buffer;return t.range?n.slice(t.range.start,t.range.size?t.range.start+t.range.size:n.byteLength):n}return e.startsWith("https://drive.google.com")&&(e=It(e)),Tt(e)||e.startsWith("https://www.dropbox.com")?is.add(async function(){return os(e,t)}):os(e,t)}throw Error(`url must be either a 'File', 'string', 'function', or 'Promise'.  Actual type: ${n}`)}async function os(e,t){e=function(e){return e.includes("//www.dropbox.com")?e.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):e.includes("//drive.google.com")?It(e):e.includes("//www.broadinstitute.org/igvdata")?e.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):e.includes("//igvdata.broadinstitute.org")?e.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):e.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?e.replace("ftp://","https://"):e}(e);let n=(t=t||{}).oauthToken||function(e){const t=At(e)?void 0:Nt(e).host;let n=es.getToken(t);if(n)return n;if(void 0===t){const e=cs();if(e&&e.expires_at>Date.now())return e.access_token}}(e);return n&&(n=await("function"==typeof n?n():n)),new Promise(function(i,r){At(e)&&(Rt(e)&&(e=function(e){let{bucket:t,object:n}=function(e){let t,n;if(e.startsWith("gs://")){const i=e.indexOf("/",5);if(i>=0){t=e.substring(5,i);const r=e.indexOf("?");n=r<0?e.substring(i+1):e.substring(i+1,r)}}else if(e.startsWith("https://storage.googleapis.com")||e.startsWith("https://storage.cloud.google.com")){const i=e.indexOf("/v1/b/",8);if(i>0){const r=e.indexOf("/o/",i);if(r>0){const s=e.indexOf("?",r);t=e.substring(i+6,r),n=s>0?e.substring(r+3,s):e.substring(r+3)}}else{const i=e.indexOf("/",8),r=e.indexOf("/",i+1),s=e.indexOf("?",r);r>0&&(t=e.substring(i+1,r),n=s<0?e.substring(r+1):e.substring(r+1,s))}}else if(e.startsWith("https://www.googleapis.com/storage/v1/b")){const i=e.indexOf("/v1/b/",8),r=e.indexOf("/o/",i);if(r>0){const s=e.indexOf("?",r);t=e.substring(i+6,r),n=s>0?e.substring(r+3,s):e.substring(r+3)}}if(t&&n)return{bucket:t,object:n};throw Error(`Unrecognized Google Storage URI: ${e}`)}(e);n=function(e){let t="";return e.split("").forEach(function(e){Ot.has(e)?t+=Ot.get(e):t+=e}),t}(n);const i=e.indexOf("?");return`https://storage.googleapis.com/storage/v1/b/${t}/o/${n}${i>0?e.substring(i)+"&alt=media":"?alt=media"}`}(e)),Tt(e=function(e){let t=rs.apiKey;if(t||"undefined"==typeof gapi||(t=gapi.apiKey),void 0!==t&&!e.includes("key=")){const n=e.includes("?")?"&":"?";e=e+n+"key="+t}return e}(e))&&function(e){if(e.includes("supportsTeamDrive"))return e;{const t=e.includes("?")?"&":"?";e=e+t+"supportsTeamDrive=true"}}(e),n||(n=cs()));const s=t.headers||{};n&&function(e,t){t&&(e["Cache-Control"]="no-cache",e.Authorization="Bearer "+t)}(s,n);const o=t.range,a=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent),o&&a&&!function(e){return e.indexOf("X-Amz-Signature")>-1}(e)&&(e+=e.includes("?")?"&":"?",e+="someRandomSeed="+Math.random().toString(36));const l=new XMLHttpRequest,c=t.sendData||t.body,h=t.responseType,u=t.contentType,d=t.mimeType;if(l.open(t.method||(c?"POST":"GET"),e),t.timeout&&(l.timeout=t.timeout),o&&l.setRequestHeader("Range","bytes="+o.start+"-"+(o.size?o.start+o.size-1:"")),u&&l.setRequestHeader("Content-Type",u),d&&l.overrideMimeType(d),h&&(l.responseType=h),s)for(let e of Object.keys(s))l.setRequestHeader(e,s[e]);!0===t.withCredentials&&(l.withCredentials=!0),l.onload=async function(n){0===l.status||l.status>=200&&l.status<=300?o&&206!==l.status&&0!==o.start?(l.response.length>1e5&&alert(`Warning: Range header ignored for URL: ${e}.  This can have performance impacts.`),i(l.response.slice(o.start,o.start+o.size))):i(l.response):"undefined"==typeof gapi||404!==l.status&&401!==l.status&&403!==l.status||!At(e)||t.retries?p(403===l.status?"Access forbidden: "+e:416===l.status?"xxUnsatisfiable range":l.status):f()},l.onerror=function(n){At(e)&&!t.retries&&f(),p("Error accessing resource: "+e+" Status: "+l.status)},l.ontimeout=function(e){p("Timed out")},l.onabort=function(e){console.log("Aborted"),r(e)};try{l.send(c)}catch(m){r(m)}function p(e){if(!r)throw e;r(e)}async function f(){try{const n=await async function(e){if(console.log("Fetch token for "+e),Pt()){const t=function(e){return Tt(e)?"https://www.googleapis.com/auth/drive.file":Rt(e)?"https://www.googleapis.com/auth/devstorage.read_only":"https://www.googleapis.com/auth/userinfo.profile"}(e),n=await Lt(t);return n?n.access_token:void 0}throw Error("Authorization is required, but Google oAuth has not been initalized. Contact your site administrator for assistance.")}(e);t.retries=1,t.oauthToken=n;const r=await ss(e,t);i(r)}catch(m){if(m.error){const t=m.error.startsWith("popup_blocked")?"Google login popup blocked by browser.":m.error;alert(t)}else p(m)}}})}async function as(e,t){let n=t&&t.range?e.slice(t.range.start,t.range.start+t.range.size):e;return"arraybuffer"===t.responseType?ls(n):new Promise(function(t,i){const r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(t){console.error("reject uploading local file "+e.name),i(null,r)},r.readAsBinaryString(n),console.warn("Deprecated method used: readAsBinaryString")})}async function ls(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise(function(t,n){const i=new FileReader;i.onload=function(e){t(i.result)},i.onerror=function(e){console.error("reject uploading local file "+localfile.name),n(null,i)},i.readAsArrayBuffer(e)})}function cs(){if(Pt()){const e=function(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e&&e.isSignedIn()){const{access_token:t,expires_at:n}=e.getAuthResponse();return{access_token:t,expires_at:n}}}();return e?e.access_token:void 0}}function hs(e){let t;return t=function(e){const t=ArrayBuffer.isView(e)?e:new Uint8Array(e);return 31===t[0]&&139===t[1]}(e)?function(e){const t=ArrayBuffer.isView(e)?e:new Uint8Array(e);return 0!=(4&t[3])&&66===t[12]&&67===t[13]?Nr(t.buffer):Lr.ungzip(t)}(e):new Uint8Array(e),"TextDecoder"in("undefined"!=typeof self?self:"undefined"!=typeof global?global:window)?(new TextDecoder).decode(t):function(e){for(var t="",n=0;n<e.length;){var i=e[n],r=0,s=0;if(i<=127?(r=0,s=255&i):i<=223?(r=1,s=31&i):i<=239?(r=2,s=15&i):i<=244&&(r=3,s=7&i),e.length-n-r>0)for(var o=0;o<r;)s=s<<6|63&(i=e[n+o+1]),o+=1;else s=65533,r=e.length-n;t+=String.fromCodePoint(s),n+=r+1}return t}(t)}var us={color:1};us.parent=us,us.left=us,us.right=us;class ds{constructor(){this.root=us}insert(e,t,n){var i=new bs(new vs(e,t,n));for(this.treeInsert(i),i.color=2;i!==this.root&&2===i.parent.color;)if(i.parent===i.parent.parent.left){let e=i.parent.parent.right;2===e.color?(i.parent.color=1,e.color=1,i.parent.parent.color=2,i=i.parent.parent):(i===i.parent.right&&fs.call(this,i=i.parent),i.parent.color=1,i.parent.parent.color=2,ms.call(this,i.parent.parent))}else{let e=i.parent.parent.left;2===e.color?(i.parent.color=1,e.color=1,i.parent.parent.color=2,i=i.parent.parent):(i===i.parent.left&&ms.call(this,i=i.parent),i.parent.color=1,i.parent.parent.color=2,fs.call(this,i.parent.parent))}this.root.color=1}findOverlapping(e,t){var n=new vs(e,t,0);if(this.root===us)return[];var i=ps.call(this,n,this.root,[]);return i.length>1&&i.sort(function(e,t){return e.low-t.low}),i}logIntervals(){!function e(t,n){for(var i="",r=0;r<n;r++)i+=" ";console.log(i+t.interval.low+" "+t.interval.high),n+=5,t.left!==us&&e(t.left,n),t.right!==us&&e(t.right,n)}(this.root,0)}mapIntervals(e){!function t(n){e(n.interval),n.left!==us&&t(n.left),n.right!==us&&t(n.right)}(this.root)}treeInsert(e){for(var t=this.root,n=us;t!==us;)n=t,t=e.interval.low<=t.interval.low?t.left:t.right;e.parent=n,n===us?(this.root=e,e.left=e.right=us):e.interval.low<=n.interval.low?n.left=e:n.right=e,gs.call(this,e)}}function ps(e,t,n){return t.interval.overlaps(e)&&n.push(t.interval),t.left!==us&&t.left.max>=e.low&&ps.call(this,e,t.left,n),t.right!==us&&t.right.min<=e.high&&ps.call(this,e,t.right,n),n}function fs(e){var t=e.right;e.right=t.left,t.left!==us&&(t.left.parent=e),t.parent=e.parent,e.parent===us?this.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,gs.call(this,e)}function ms(e){var t=e.left;e.left=t.right,t.right!==us&&(t.right.parent=e),t.parent=e.parent,e.parent===us?this.root=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,gs.call(this,e)}function gs(e){for(;e!==us;){var t=e.left.max>e.right.max?e.left.max:e.right.max,n=e.interval.high;e.max=t>n?t:n;var i=e.left.min<e.right.min?e.left.min:e.right.min,r=e.interval.low;e.min=i<r?i:r,e=e.parent}}class vs{constructor(e,t,n){this.low=e,this.high=t,this.value=n}equals(e){return!!e&&(this===e||this.low===e.low&&this.high===e.high)}compareTo(e){return this.low<e.low?-1:this.low>e.low?1:this.high<e.high?-1:this.high>e.high?1:0}overlaps(e){return this.low<=e.high&&e.low<=this.high}}function bs(e){this.parent=us,this.left=us,this.right=us,this.interval=e,this.color=2}class ys{constructor(e,t,n){this.treeMap=this.buildTreeMap(e=e||[],t),this.range=n,this.count=e.length}containsRange(e){return void 0===this.range||this.range.contains(e.chr,e.start,e.end)}queryFeatures(e,t,n){const i=this.treeMap[e];if(!i)return[];const r=i.findOverlapping(t,n);if(0===r.length)return[];{const i=[],s=this.allFeatures[e];if(s){for(let e of r){const r=e.value;for(let e=r.start;e<r.end;e++){let r=s[e];if(r.start>n)break;r.end>=t&&i.push(r)}}i.sort(function(e,t){return e.start-t.start})}return i}}getAllFeatures(){return this.allFeatures}buildTreeMap(e,t){const n={},i=[];if(this.allFeatures={},e){for(let n of e){let e=n.chr;t&&(e=t.getChromosomeName(e));let r=this.allFeatures[e];r||(i.push(e),r=[],this.allFeatures[e]=r),r.push(n)}for(let e of i){const t=this.allFeatures[e];t.sort(function(e,t){return e.start===t.start?0:e.start>t.start?1:-1}),n[e]=_s(t)}}return n}}function _s(e){const t=new ds,n=e.length,i=Math.max(10,Math.round(n/10));for(let r=0;r<n;r+=i){const s=Math.min(n,r+i),o=new ws(r,s),a=e[r].start;let l=a;for(let t=r;t<s;t++)l=Math.max(l,e[t].end);t.insert(a,l,o)}return t}class ws{constructor(e,t){this.start=e,this.end=t}}const xs=function(e,t,n){if(e&&0!==e.length){const i=function(e){const t=new ds,n=e.length,i=Math.max(10,Math.round(n/100));e.sort(function(e,t){return e.start===t.start?0:e.start>t.start?1:-1});for(let r=0;r<n;r+=i){const s=Math.min(n,r+i),o=e.slice(r,s),a=o[0].start;let l=a;o.forEach(function(e){l=Math.max(l,e.end)}),t.insert(a,l,o)}return t}(e).findOverlapping(t,n);return 0===i.length?[]:(e=[],i.forEach(function(i){const r=i.value,s=r.length;for(let o=0;o<s;o++){const i=r[o];if(i.start>n)break;i.end>t&&e.push(i)}}),e.sort(function(e,t){return e.start-t.start}),e)}return[]};function Ss(e,t){const n=ft({class:"igv-menu-popup-check-container"}),i=ft();n.appendChild(i);const r=yt("check",!0===t?"#444":"transparent");i.appendChild(r);const s=ft();return s.innerText=e,n.appendChild(s),n}const Cs={trackMenuItemList:function(e){const t=new Set(["alignment","annotation","variant","eqtl","snp"]),n=e.track.config&&void 0!==e.track.config.visibilityWindow;let i=[];return"sequence"!==e.track.config.type&&(i.push(function(e){const t=pt("<div>");return t.text("Set track name"),{object:t,click:t=>{const n={label:"Track Name",value:(i=e.track,i.trackView.viewports[0].$trackLabel.text()||"unnamed"),callback:function(){let t=e.browser.inputDialog.input.value;t=""===t||void 0===t?"untitled":t.trim(),e.track.name=t}};var i;e.browser.inputDialog.present(n,t)}}}(e)),i.push(function(e){const t=pt("<div>");return t.text("Set track height"),{object:t,click:t=>{e.browser.inputDialog.present({label:"Track Height",value:e.track.height,callback:()=>{const t=parseFloat(e.browser.inputDialog.input.value,10);void 0!==t&&(void 0!==e.track.minHeight&&e.track.minHeight>t&&(e.track.minHeight=t),void 0!==e.track.maxHeight&&e.track.maxHeight<t&&(e.track.minHeight=t),e.setTrackHeight(t,!0),e.checkContentHeight(),e.repaintViews(),e.track.autoHeight=!1)}},t)}}}(e))),this.showColorPicker(e.track)&&(i.push("<hr/>"),i.push(ks({trackView:e,label:"Set track color",option:"color"})),i.push(function({trackView:e,label:t}){const n=pt("<div>");return n.text(t),{object:n,click:()=>{e.track.color=void 0,e.repaintViews()}}}({trackView:e,label:"Unset track color"})),i.push(ks({trackView:e,label:"Set alt color",option:"altColor"}))),e.track.menuItemList&&(i=i.concat(e.track.menuItemList())),(n||t.has(e.track.type))&&(i.push("<hr/>"),i.push(function(e){const t=pt("<div>");return t.text("Set visibility window"),{object:t,click:t=>{e.browser.inputDialog.present({label:"Visibility Window",value:e.track.visibilityWindow,callback:()=>{let t=e.browser.inputDialog.input.value;t=""===t||void 0===t?-1:t.trim(),e.track.visibilityWindow=Number.parseInt(t),e.track.config.visibilityWindow=Number.parseInt(t),e.updateViews()}},t)}}}(e))),!1!==e.track.removable&&(i.push("<hr/>"),i.push(function(e){const t=pt("<div>");return t.text("Remove track"),{object:t,click:()=>e.browser.removeTrack(e.track)}}(e))),i},numericDataMenuItems:function(e){const t=[];t.push("<hr/>");const n=pt("<div>");return n.text("Set data range"),t.push({object:n,click:()=>{e.browser.dataRangeDialog.configure(e),e.browser.dataRangeDialog.present(pt(e.browser.columnContainer))}}),void 0!==e.track.logScale&&t.push({object:pt(Ss("Log scale",e.track.logScale)),click:()=>{e.track.logScale=!e.track.logScale,e.repaintViews()}}),t.push({object:pt(Ss("Autoscale",e.track.autoscale)),click:()=>{e.track.autoscale=!e.track.autoscale,e.updateViews()}}),t},trackMenuItemListHelper:function(e,t){var n=[];return e.length>0&&(n=e.map(function(e,n){var i;if(e.name?(i=pt("<div>")).text(e.name):e.object?i=e.object:"string"==typeof e.label?(i=pt("<div>")).html(e.label):"string"==typeof e&&(i=e.startsWith("<")?pt(e):pt("<div>"+e+"</div>")),0===n&&i.addClass("igv-track-menu-border-top"),e.click){function r(n){e.click(n),t.hide(),n.preventDefault(),n.stopPropagation()}i.on("click",r),i.on("touchend",function(e){r(e)}),i.on("mouseup",function(e){e.preventDefault(),e.stopPropagation()})}return{object:i,init:e.init||void 0}})),n},showColorPicker:e=>void 0===e.type||"bedtype"===e.type||"alignment"===e.type||"annotation"===e.type||"variant"===e.type||"wig"===e.type||"interact"===e.type,createMenuItem(e,t){const n=pt("<div>");return n.text(e),{object:n,click:t}}};function ks({trackView:e,label:t,option:n}){const i=pt("<div>");return i.text(t),{object:i,click:()=>e.presentColorPicker(n)}}function Es(e){return function(e,t){const n=document.createElement("div");return t&&(t.class&&n.classList.add(t.class),t.id&&(n.id=t.id),t.style&&function(e,t){for(let n of Object.keys(t))e.style[n]=t[n]}(n,t.style)),n}(0,e)}function As(e){const t=getComputedStyle(e);"none"!==t.display&&(e._initialDisplay=t.display),e.style.display="none"}function Rs(e){"none"===getComputedStyle(e).display&&(e.style.display=e._initialDisplay||"block")}function Ts(e,t){t=t||"currentColor";let n=Is[e];n||(console.error(`No icon named: ${e}`),n=Is.question);const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"viewBox","0 0 "+n[0]+" "+n[1]);const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttributeNS(null,"fill",t),r.setAttributeNS(null,"d",n[4]),i.appendChild(r),i}const Is={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};function Ds(e,t){var n=document.createElement("div");e.appendChild(n),n.appendChild(Ts("times",void 0)),n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t()})}let Os;function Ps(e,t){t.addEventListener("mousedown",Ms.bind(e))}function Ms(e){e.stopPropagation(),e.preventDefault(),function(e){if(!e.getClientRects().length)return{top:0,left:0};e.getBoundingClientRect()}(this);const t=Ls.bind(this),n=Fs.bind(this),i=getComputedStyle(this),r=parseInt(i.top.replace("px","")),s=parseInt(i.left.replace("px",""));Os={dragFunction:t,dragEndFunction:n,screenX:e.screenX,screenY:e.screenY,top:r,left:s},document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),document.addEventListener("mouseleave",n),document.addEventListener("mouseexit",n)}function Ls(e){if(!Os)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=e.screenY-Os.screenY;this.style.left=`${Os.left+(e.screenX-Os.screenX)}px`,this.style.top=`${Os.top+t}px`}function Fs(e){if(!Os)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=Os.dragEndFunction;document.removeEventListener("mousemove",Os.dragFunction),document.removeEventListener("mouseup",t),document.removeEventListener("mouseleave",t),document.removeEventListener("mouseexit",t),Os=void 0}const Ns={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class zs{constructor(e){this.container=Es({class:"igv-ui-alert-dialog-container"}),e.appendChild(this.container),this.container.setAttribute("tabIndex","-1");const t=Es();this.container.appendChild(t),this.errorHeadline=Es(),t.appendChild(this.errorHeadline),this.errorHeadline.textContent="";let n=Es({id:"igv-ui-alert-dialog-body"});this.container.appendChild(n),this.body=Es({id:"igv-ui-alert-dialog-body-copy"}),n.appendChild(this.body);let i=Es();this.container.appendChild(i),this.ok=Es(),i.appendChild(this.ok),this.ok.textContent="OK";const r=()=>{"function"==typeof this.callback&&(this.callback("OK"),this.callback=void 0),this.body.innerHTML="",As(this.container)};this.ok.addEventListener("click",e=>{e.stopPropagation(),r()}),this.container.addEventListener("keypress",e=>{e.stopPropagation(),"Enter"===e.key&&r()}),Ps(this.container,t),As(this.container)}present(e,t){this.errorHeadline.textContent=e.message?"ERROR":"";let n=e.message||e;Ns.hasOwnProperty(n)&&(n=Ns[n]),this.body.innerHTML=n,this.callback=t,Rs(this.container),this.container.focus()}}let Vs;const js={init(e){Vs||(Vs=new zs(e))},presentAlert(e,t){Vs||this.init(document.body),Vs.present(e,t)}};class Bs{constructor(e){this.parent=e,this.container=Es({class:"igv-ui-generic-dialog-container"}),e.appendChild(this.container);const t=Es({class:"igv-ui-generic-dialog-header"});this.container.appendChild(t),this.label=Es({class:"igv-ui-generic-dialog-one-liner"}),this.container.appendChild(this.label),this.label.text="Unlabeled",this.input_container=Es({class:"igv-ui-generic-dialog-input"}),this.container.appendChild(this.input_container),this.input=document.createElement("input"),this.input_container.appendChild(this.input);const n=Es({class:"igv-ui-generic-dialog-ok-cancel"});this.container.appendChild(n),this.ok=Es(),n.appendChild(this.ok),this.ok.textContent="OK",this.cancel=Es(),n.appendChild(this.cancel),this.cancel.textContent="Cancel",As(this.container),this.input.addEventListener("keyup",e=>{13===e.keyCode&&("function"==typeof this.callback&&(this.callback(this.input.value),this.callback=void 0),this.input.value=void 0,As(this.container))}),this.ok.addEventListener("click",()=>{"function"==typeof this.callback&&(this.callback(this.input.value),this.callback=void 0),this.input.value=void 0,As(this.container)});const i=()=>{this.input.value="",As(this.container)};this.cancel.addEventListener("click",i),Ds(t,i),Ps(this.container,t)}present(e,t){this.label.textContent=e.label,this.input.value=e.value,this.callback=e.callback||e.click,Rs(this.container);const{x:n,y:i}=function(e){if(e.type.startsWith("touch")){const t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.pageX,y:e.pageY}}(t);this.clampLocation(n,i)}clampLocation(e,t){const{width:n,height:i}=this.container.getBoundingClientRect();console.log(`InputDialog - clampLocation() - width ${n} height ${i}`);const{x:r,y:s,width:o,height:a}=this.parent.getBoundingClientRect(),l=Math.min(Math.max(t,s),s+a-i),c=Math.min(Math.max(e,r),r+o-n);this.container.style.left=`${c}px`,this.container.style.top=`${l}px`}}const Hs={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"#ffffff",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"};class qs{constructor({parent:e,top:t,left:n,width:i,height:r,border:s,closeHandler:o}){let a=Es({class:"igv-ui-generic-container"});e.appendChild(a),As(a),this.container=a,void 0!==t&&(this.container.style.top=`${t}px`),void 0!==n&&(this.container.style.left=`${n}px`),void 0!==i&&(this.container.style.width=`${i}px`),void 0!==r&&(this.container.style.height=`${r}px`),s&&(this.container.style.border=s);const l=Es();this.container.appendChild(l),Ds(l,e=>{As(this.container),"function"==typeof o&&o(e)}),Ps(this.container,l)}show(){Rs(this.container)}hide(){As(this.container)}dispose(){this.container.parent&&this.container.parent.removeChild(this.container)}}class $s extends qs{constructor({parent:e,top:t,left:n,width:i,height:r,defaultColors:s,colorHandler:o}){super({parent:e,top:t,left:n,width:i,height:r,border:"1px solid gray"}),Us(this.container,o,s)}}const Us=(e,t,n)=>{const i=Object.values(Hs);for(let r of i){const n=Es({class:"igv-ui-color-swatch"});e.appendChild(n),Ws(n,r,t)}if(n)for(let r of n){const n=Es({class:"igv-ui-color-swatch"});e.appendChild(n),Ws(n,r,t)}},Ws=(e,t,n)=>{e.style.backgroundColor=t,e.addEventListener("mouseenter",n=>e.style.borderColor=t),e.addEventListener("mouseleave",t=>e.style.borderColor="white"),e.addEventListener("click",e=>{e.stopPropagation(),n(t)}),e.addEventListener("touchend",e=>{e.stopPropagation(),n(t)})};class Gs{constructor(e,t){this.parent=e,this.popover=Es({class:"igv-ui-popover"}),e.appendChild(this.popover);const n=Es();this.popover.appendChild(n);const i=Es();n.appendChild(i),t&&(i.textContent=t),Ds(n,()=>this.hide()),Ps(this.popover,n),this.popoverContent=Es(),this.popover.appendChild(this.popoverContent),this.popover.style.display="none"}presentContentWithEvent(e,t){this.popover.style.display="block",this.popoverContent.innerHTML=t,Ys(e,this.popover)}presentMenu(e,t){if(0===t.length)return;this.popover.style.display="block";const n=(i=this.popover,t.map(function(e,t){let n;if("string"==typeof e)n=Es(),n.innerHTML=e;else if("Node"==typeof e)n=e;else{if("function"==typeof e.init&&e.init(),"checkbox"===e.type)n=function(e,t){const n=Es({class:"igv-ui-trackgear-popover-check-container"}),i=Ts("check",!0===t?"#444":"transparent");i.style.borderColor="gray",i.style.borderWidth="1px",i.style.borderStyle="solid",n.appendChild(i);let r=Es();return r.textContent="Show all bases",n.appendChild(r),n}(0,e.value);else if("color"===e.type){const t=new $s({parent:i.parentElement,width:364,colorHandler:t=>e.click(t)});n=Es(),"string"==typeof e.label&&(n.innerHTML=e.label);const r=e=>{t.show(),As(i),e.preventDefault(),e.stopPropagation()};n.addEventListener("click",r),n.addEventListener("touchend",r),n.addEventListener("mouseup",function(e){e.preventDefault(),e.stopPropagation()})}else n=Es(),"string"==typeof e.label&&(n.innerHTML=e.label);if(e.click&&"color"!==e.type){function r(t){e.click(),As(i),t.preventDefault(),t.stopPropagation()}n.addEventListener("click",r),n.addEventListener("touchend",r),n.addEventListener("mouseup",function(e){e.preventDefault(),e.stopPropagation()})}}return{object:n,init:e.init}}));var i;for(let r of n)this.popoverContent.appendChild(r.object);Ys(e,this.popover)}hide(){this.popover.style.display="none",this.dispose()}dispose(){this.popover&&this.popover.parentNode.removeChild(this.popover);const e=Object.keys(this);for(let t of e)this[t]=void 0}}function Ys(e,t){const{x:n,y:i}=function(e,t){const{clientX:n,clientY:i}=e;return((e,{clientX:t,clientY:n})=>{const{left:i,top:r,width:s,height:o}=e.getBoundingClientRect(),a=t-i,l=n-r;return{x:a,y:l,xNormalized:a/s,yNormalized:l/o,width:s,height:o}})(t,{clientX:n,clientY:i})}(e,t.parentNode),{width:r}=t.parentNode.getBoundingClientRect(),{width:s}=t.getBoundingClientRect(),o=n+s;console.log(`popover-parent width ${r}. popover x ${n} width ${s} xmax ${o}.`),t.style.left=`${o>r?n-(o-r):n}px`,t.style.top=`${i}px`}var Zs;"undefined"!=typeof document&&(function(e){for(let t of document.styleSheets)if(t=t.href?t.href.replace(/^.*[\\\/]/,""):"","igv-ui.css"===t)return!0;return!1}()||((Zs=document.createElement("style")).setAttribute("type","text/css"),Zs.innerHTML='.igv-ui-popover {\n  cursor: default;\n  position: absolute;\n  z-index: 2048;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: 1px;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  background-color: white; }\n  .igv-ui-popover > div:first-child {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-popover > div:first-child > div:first-child {\n      margin-left: 4px; }\n    .igv-ui-popover > div:first-child > div:last-child {\n      margin-right: 4px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-popover > div:first-child > div:last-child:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-popover > div:last-child {\n    overflow-y: auto;\n    overflow-x: hidden;\n    max-height: 400px;\n    max-width: 1500px;\n    background-color: white; }\n    .igv-ui-popover > div:last-child > div {\n      -webkit-user-select: all;\n      /* Chrome/Safari */\n      -moz-user-select: all;\n      /* Firefox */\n      margin-left: 4px;\n      margin-right: 4px;\n      min-width: 220px;\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n      .igv-ui-popover > div:last-child > div > span {\n        font-weight: bolder; }\n    .igv-ui-popover > div:last-child hr {\n      width: 100%; }\n\n.igv-ui-alert-dialog-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  top: 50%;\n  left: 50%;\n  width: 400px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  outline: none;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center; }\n  .igv-ui-alert-dialog-container > div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-alert-dialog-container > div:first-child div:first-child {\n      padding-left: 8px; }\n  .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body #igv-ui-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-ui-alert-dialog-container > div:last-child {\n    width: 100%;\n    margin-bottom: 10px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-ui-alert-dialog-container > div:last-child div {\n      margin: unset;\n      width: 40px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: small;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-alert-dialog-container > div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-ui-color-swatch {\n  position: relative;\n  box-sizing: content-box;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  width: 32px;\n  height: 32px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  border-radius: 4px; }\n\n.igv-ui-color-swatch:hover {\n  border-color: dimgray; }\n\n.igv-ui-colorpicker-menu-close-button {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 32px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  padding-right: 8px; }\n  .igv-ui-colorpicker-menu-close-button i.fa {\n    display: block;\n    margin-left: 4px;\n    margin-right: 4px;\n    color: #5f5f5f; }\n  .igv-ui-colorpicker-menu-close-button i.fa:hover,\n  .igv-ui-colorpicker-menu-close-button i.fa:focus,\n  .igv-ui-colorpicker-menu-close-button i.fa:active {\n    cursor: pointer;\n    color: #0f0f0f; }\n\n.igv-ui-generic-dialog-container {\n  box-sizing: content-box;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-generic-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-ui-generic-container div:first-child div {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-ui-dialog {\n  z-index: 2048;\n  position: fixed;\n  width: fit-content;\n  height: fit-content;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400; }\n  .igv-ui-dialog .igv-ui-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-dialog .igv-ui-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-dialog .igv-ui-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-dialog .igv-ui-dialog-one-liner {\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin: 8px;\n    overflow-wrap: break-word;\n    background-color: white;\n    font-weight: bold; }\n  .igv-ui-dialog .igv-ui-dialog-ok-cancel {\n    width: 100%;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div {\n      margin: 16px;\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child {\n      background-color: #5ea4e0; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child {\n      background-color: #c4c4c4; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-dialog .igv-ui-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-dialog .igv-ui-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-panel, .igv-ui-panel-column, .igv-ui-panel-row {\n  z-index: 2048;\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n.igv-ui-panel-column {\n  display: flex;\n  flex-direction: column; }\n\n.igv-ui-panel-row {\n  display: flex;\n  flex-direction: row; }\n\n.igv-ui-textbox {\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n/*# sourceMappingURL=igv-ui.css.map */\n',document.head.insertBefore(Zs,document.head.childNodes[document.head.childNodes.length-1])));class Xs{constructor(e,t){this.$container=pt("<div>",{class:"igv-generic-dialog-container"}),e.append(this.$container),this.$container.offset({left:0,top:0});const n=pt("<div>",{class:"igv-generic-dialog-header"});this.$container.append(n),wt(n[0],()=>{this.$minimum_input.val(void 0),this.$maximum_input.val(void 0),this.$container.offset({left:0,top:0}),this.$container.hide()}),this.$minimum=pt("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$minimum);const i=pt("<div>");i.text("Minimum"),this.$minimum.append(i),this.$minimum_input=pt("<input>"),this.$minimum.append(this.$minimum_input),this.$maximum=pt("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$maximum);const r=pt("<div>");r.text("Maximum"),this.$maximum.append(r),this.$maximum_input=pt("<input>"),this.$maximum.append(this.$maximum_input);const s=pt("<div>",{class:"igv-generic-dialog-ok-cancel"});this.$container.append(s),this.$ok=pt("<div>"),s.append(this.$ok),this.$ok.text("OK"),this.$cancel=pt("<div>"),s.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",()=>{this.$minimum_input.val(void 0),this.$maximum_input.val(void 0),this.$container.offset({left:0,top:0}),this.$container.hide()}),Zr(this.$container.get(0),n.get(0)),this.$container.hide()}configure(e){const t=e.dataRange();let n,i;t?(n=t.min,i=t.max):(n=0,i=100),this.$minimum_input.val(n),this.$maximum_input.val(i),this.$minimum_input.unbind(),this.$minimum_input.on("keyup",t=>{13===t.keyCode&&this.processResults(e)}),this.$maximum_input.unbind(),this.$maximum_input.on("keyup",t=>{13===t.keyCode&&this.processResults(e)}),this.$ok.unbind(),this.$ok.on("click",t=>{this.processResults(e)})}processResults(e){const t=parseFloat(this.$minimum_input.val()),n=parseFloat(this.$maximum_input.val());isNaN(t)||isNaN(n)?js.presentAlert(new Error("Must input numeric values"),void 0):e.setDataRange(t,n),this.$minimum_input.val(void 0),this.$maximum_input.val(void 0),this.$container.offset({left:0,top:0}),this.$container.hide()}present(e){const t=e.offset().top,n=pt("body").scrollTop();this.$container.offset({left:e.width()-this.$container.width(),top:t+n}),this.$container.show()}}const Ks={configureHighDPICanvas:function(e,t,n){const i=window.devicePixelRatio;e.canvas.style.width=`${t}px`,e.canvas.width=Math.floor(i*t),e.canvas.style.height=`${n}px`,e.canvas.height=Math.floor(i*n),e.scale(i,i)},setProperties:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},strokeLine:function(e,t,n,i,r,s){t=Math.floor(t)+.5,n=Math.floor(n)+.5,i=Math.floor(i)+.5,r=Math.floor(r)+.5,s&&(e.save(),Ks.setProperties(e,s)),e.beginPath(),e.moveTo(t,n),e.lineTo(i,r),e.stroke(),s&&e.restore()},fillRect:function(e,t,n,i,r,s){t=Math.round(t),n=Math.round(n),s&&(e.save(),Ks.setProperties(e,s)),e.fillRect(t,n,i,r),s&&e.restore()},fillPolygon:function(e,t,n,i){i&&(e.save(),Ks.setProperties(e,i)),Qs(e,t,n),e.fill(),i&&e.restore()},strokePolygon:function(e,t,n,i){i&&(e.save(),Ks.setProperties(e,i)),Qs(e,t,n),e.stroke(),i&&e.restore()},fillText:function(e,t,n,i,r,s){if((r||s)&&e.save(),r&&Ks.setProperties(e,r),s){for(var o in e.translate(n,i),s){var a=s[o];"translate"===o&&e.translate(a.x,a.y),"rotate"===o&&e.rotate(a.angle*Math.PI/180)}e.fillText(t,0,0)}else e.fillText(t,n,i);(r||s)&&e.restore()},strokeText:function(e,t,n,i,r,s){if((r||s)&&e.save(),r&&Ks.setProperties(e,r),s){for(var o in e.translate(n,i),s){var a=s[o];"translate"===o&&e.translate(a.x,a.y),"rotate"===o&&e.rotate(a.angle*Math.PI/180)}e.strokeText(t,0,0)}else e.strokeText(t,n,i);(r||s)&&e.restore()},strokeCircle:function(e,t,n,i,r){r&&(e.save(),Ks.setProperties(e,r)),e.beginPath(),e.arc(t,n,i,0,2*Math.PI),e.stroke(),r&&e.restore()},fillCircle:function(e,t,n,i,r){r&&(e.save(),Ks.setProperties(e,r)),e.beginPath(),e.arc(t,n,i,0,2*Math.PI),e.fill(),r&&e.restore()},drawArrowhead:function(e,t,n,i,r){e.save(),i||(i=5),r&&(e.lineWidth=r),e.beginPath(),e.moveTo(t,n-i/2),e.lineTo(t,n+i/2),e.lineTo(t+i,n),e.lineTo(t,n-i/2),e.closePath(),e.fill(),e.restore()},dashedLine:function(e,t,n,i,r,s,o={}){void 0===s&&(s=2),e.setLineDash([s,s]),Ks.strokeLine(e,t,n,i,r,o),e.setLineDash([])},roundRect:function(e,t,n,i,r,s,o,a){void 0===a&&(a=!0),void 0===s&&(s=5),e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+r-s),e.quadraticCurveTo(t+i,n+r,t+i-s,n+r),e.lineTo(t+s,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),a&&e.stroke(),o&&e.fill()},polygon:function(e,t,n,i,r){void 0===r&&(r=!0),e.beginPath();var s=t.length;e.moveTo(t[0],n[0]);for(var o=1;o<s;o++)e.lineTo(t[o],n[o]);e.closePath(),r&&e.stroke(),i&&e.fill()}};function Qs(e,t,n){var i,r=t.length;for(i=0;i<r;i++)t[i]=Math.round(t[i]),n[i]=Math.round(n[i]);for(e.beginPath(),e.moveTo(t[0],n[0]),i=1;i<r;i++)e.lineTo(t[i],n[i]);e.closePath()}const Js={gwascatalog:{fields:["bin","chr","start","end","name","pubMedID","author","pubDate","journal","title","trait","initSample","replSample","region","genes","riskAllele","riskAlFreq","pValue","pValueDesc","orOrBeta","ci95","platform","cnv"]},wgrna:{fields:["bin","chr","start","end","name","score","strand","thickStart","thickEnd","type"]},cpgislandext:{fields:["bin","chr","start","end","name","length","cpgNum","gcNum","perCpg","perGc","obsExp"]},clinVarMain:{fields:["chr1","start","end","name","score","strand","thickStart","thickEnd","reserved","blockCount","blockSizes","chromStarts","origName","clinSign","reviewStatus","type","geneId","snpId","nsvId","rcvAcc","testedInGtr","phenotypeList","phenotype","origin","assembly","cytogenetic","hgvsCod","hgvsProt","numSubmit","lastEval","guidelines","otherIds"]}},eo=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram","gwas","maf","mut"]),to={r:30,g:30,b:30},no={Set1:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(166,86,40)","rgb(152,78,163)","rgb(255,127,0)","rgb(247,129,191)","rgb(153,153,153)","rgb(255,255,51)"],Dark2:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],Set2:["rgb(102, 194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],Set3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],Pastel1:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],Pastel2:["rgb(173,226,207)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(243,225,206)"],Accent:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"]};class io{constructor(e){this.colors=no[e],Array.isArray(this.colors)||(this.colors=[]),this.colorTable={},this.nextIdx=0,this.colorGenerator=new so}getColor(e){return this.colorTable.hasOwnProperty(e)||(this.colorTable[e]=this.nextIdx<this.colors.length?this.colors[this.nextIdx]:this.colorGenerator.get(),this.nextIdx++),this.colorTable[e]}}class ro{constructor(e){this.colorTable=e||{},this.nextIdx=0,this.colorGenerator=new so}getColor(e){if(!this.colorTable.hasOwnProperty(e)){if(this.colorTable.hasOwnProperty("*"))return this.colorTable["*"];this.colorTable[e]=this.colorGenerator.get()}return this.colorTable[e]}}function so(){this.hue=Math.random(),this.goldenRatio=.618033988749895,this.hexwidth=2}so.prototype.hsvToRgb=function(e,t,n){var i=Math.floor(6*e),r=6*e-i,s=n*(1-t),o=n*(1-r*t),a=n*(1-(1-r)*t),l=255,c=255,h=255;switch(i){case 0:l=n,c=a,h=s;break;case 1:l=o,c=n,h=s;break;case 2:l=s,c=n,h=a;break;case 3:l=s,c=o,h=n;break;case 4:l=a,c=s,h=n;break;case 5:l=n,c=s,h=o}return[Math.floor(256*l),Math.floor(256*c),Math.floor(256*h)]},so.prototype.padHex=function(e){return e.length>this.hexwidth?e:new Array(this.hexwidth-e.length+1).join("0")+e},so.prototype.get=function(e,t){this.hue+=this.goldenRatio,this.hue%=1,"number"!=typeof e&&(e=.5),"number"!=typeof t&&(t=.95);var n=this.hsvToRgb(this.hue,e,t);return"#"+this.padHex(n[0].toString(16))+this.padHex(n[1].toString(16))+this.padHex(n[2].toString(16))};const oo=new so,ao=Number.MIN_SAFE_INTEGER,lo={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"STOP",TAG:"STOP",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"STOP",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"},co={},ho=["A","G","C","T","Y","R","W","S","K","M","D","V","H","B","N","X"],uo=["T","C","G","A","R","Y","W","S","M","K","H","B","D","V","N","X"];for(let ed=0;ed<ho.length;ed++)co[ho[ed]]=uo[ed],co[ho[ed].toLowerCase()]=uo[ed].toLowerCase();class po{constructor(e,t){this.type="sequence",this.browser=t,this.removable=!1,this.config=e,this.name="Sequence",this.id="sequence",this.sequenceType=e.sequenceType||"dna",this.height=25,this.disableButtons=!1,this.order=e.order||ao,this.ignoreTrackMenu=!1,this.reversed=!1,this.frameTranslate=!1}menuItemList(){return[{name:this.reversed?"Forward":"Reverse",click:()=>{this.reversed=!this.reversed,this.trackView.repaintViews()}},{name:this.frameTranslate?"Close Translation":"Three-frame Translate",click:()=>{if(this.frameTranslate=!this.frameTranslate,this.frameTranslate){for(let e of this.trackView.viewports)e.setContentHeight(115);this.trackView.setTrackHeight(115)}else{for(let e of this.trackView.viewports)e.setContentHeight(25);this.trackView.setTrackHeight(25)}this.trackView.repaintViews()}}]}contextMenuItemList(e){const t=e.viewport;return t.referenceFrame.bpPerPixel<=1?[{label:"View visible sequence...",click:async()=>{const e=t.getWidth(),n=t.referenceFrame.chr,i=t.referenceFrame.start,r=i+e*t.referenceFrame.bpPerPixel,s=await this.browser.genome.sequence.getSequence(n,i,r);js.presentAlert(s)}},{label:"Copy visible sequence",click:async()=>{const e=t.getWidth(),n=t.referenceFrame.chr,i=t.referenceFrame.start,r=i+e*t.referenceFrame.bpPerPixel,s=await this.browser.genome.sequence.getSequence(n,i,r);navigator.clipboard.writeText(s)}},"<hr/>"]:void 0}translateSequence(e){const t=[[],[],[]];for(let n of[0,1,2]){let i=n;for(;e.length-i>=3;){let r=e.slice(i,i+3);this.reversed&&(r=r.split("").reverse().join(""));const s=lo[r.toUpperCase()]||"";t[n].push({codons:r,aminoA:s}),i+=3}}return t}async getFeatures(e,t,n,i){return i&&i>1?null:{bpStart:t,sequence:await this.browser.genome.sequence.getSequence(e,t,n)}}draw(e){const t=e.context;if(e.features){const n=e.features.sequence,i=e.features.bpStart,r=1+e.bpStart+e.pixelWidth*e.bpPerPixel;let s=15;for(let o=i;o<=r;o++){let r=Math.floor(o-i);if(r<n.length){let i=n[r];this.reversed&&(i=co[i]||"");let a=o-e.bpStart,l=a/e.bpPerPixel,c=(a+1)/e.bpPerPixel,h=this.fillColor(i);if(e.bpPerPixel>.1)Ks.fillRect(t,l,5,c-l,s-5,{fillStyle:h});else{let e=.5*(l+c-t.measureText(i).width);Ks.strokeText(t,i,e,s,{strokeStyle:h})}}}if(this.frameTranslate){let i;this.reversed?(i=n.split("").map(function(e){return co[e]}),i=i.join("")):i=n;let r=s,o=this.translateSequence(i);for(let n of o){let i=o.indexOf(n),s=i,a=25;r=0===i?r+10:r+30;for(let o of n){let i,l=n.indexOf(o),c=l+s+2*l,h=0==l%2?"rgb(160,160,160)":"rgb(224,224,224)",u=Math.floor(c/e.bpPerPixel),d=Math.floor((c+3)/e.bpPerPixel),p=Math.round((u+d)/2);o.aminoA.indexOf("STOP")>-1?(h="rgb(255, 0, 0)",i="STOP"):i=o.aminoA,"M"===o.aminoA&&(h="rgb(0, 153, 0)",i="START"),Ks.fillRect(t,u,r,d-u,a,{fillStyle:h}),e.bpPerPixel<=.1&&Ks.strokeText(t,i,p-t.measureText(i).width/2,r+15)}}}}}supportsWholeGenome(){return!1}computePixelHeight(e){return this.height}fillColor(e){return this.color?this.color:"dna"===this.sequenceType?this.browser.nucleotideColors[e]||"gray":"rgb(0, 0, 150)"}}function fo(e,t){var n,i=Object.keys(t);for(n=0;n<i.length;n++)e=e.replace(new RegExp("\\{"+i[n]+"\\}","gi"),t[i[n]]);return e}function mo(e){var t,n,i;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",i=0;i<12;i++)n+=t[Math.floor(Math.random()*t.length)]}while(e[n]);return n}function go(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}function vo(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}const bo=function(e,t){var n,i,r,s={};for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i="&"+e[n+1]+";",r=parseInt(e[n],t),s[i]="&#"+r+";";return s["\\xa0"]="&#160;",s}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),yo={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};class _o{constructor(e,t){this.__root=e,this.__ctx=t}addColorStop(e,t){var n,i=this.__ctx.__createElement("stop");i.setAttribute("offset",e),t&&-1!==t.indexOf("rgba")?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),i.setAttribute("stop-color",fo("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),i.setAttribute("stop-opacity",n[4])):i.setAttribute("stop-color",t),this.__root.appendChild(i)}}class wo{constructor(e,t){this.__root=e,this.__ctx=t}}class xo{constructor(e){if(!(this instanceof xo))return new xo(e);this.config=e,this.width=e.width,this.height=e.height,this.enableMirroring=e.enableMirroring||!1,this.canvas=this,this.__document=document,e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.isSVG=!0,this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__createElement("svg"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__root.setAttribute("overflow","visible"),e.viewbox&&(this.__root.setAttribute("viewBox",e.viewbox.x+" "+e.viewbox.y+" "+e.viewbox.width+" "+e.viewbox.height),this.viewbox=e.viewbox),this.__ids={},this.__defs=this.__createElement("defs"),this.__root.appendChild(this.__defs),this.multiLocusGap=e.multiLocusGap;let t=this.__createElement("rect",{id:"svg_output_backdrop",width:"100%",height:"100%",fill:e.backdropColor||"white"});this.__root.appendChild(t),this.__rootGroup=this.__createElement("g",{id:"root-group"}),this.__root.appendChild(this.__rootGroup),this.__currentElement=this.__rootGroup}setWidth(e){this.width=e,this.__root.setAttribute("width",this.width),this.__root.setAttribute("viewBox",this.config.viewbox.x+" "+this.config.viewbox.y+" "+e+" "+this.config.viewbox.height)}setHeight(e){this.height=e,this.__root.setAttribute("height",this.height),this.__root.setAttribute("viewBox",this.config.viewbox.x+" "+this.config.viewbox.y+" "+this.config.viewbox.width+" "+e)}__createElement(e,t,n){void 0===t&&(t={});let i=this.__document.createElementNS("http://www.w3.org/2000/svg",e);n&&(i.setAttribute("fill","none"),i.setAttribute("stroke","none"));for(let r of Object.keys(t))i.setAttribute(r,t[r]);return i}__setDefaultStyles(){var e,t,n=Object.keys(yo);for(e=0;e<n.length;e++)this[t=n[e]]=yo[t].canvas}__applyStyleState(e){var t,n,i=Object.keys(e);for(t=0;t<i.length;t++)this[n=i[t]]=e[n]}__getStyleState(){var e,t,n={},i=Object.keys(yo);for(e=0;e<i.length;e++)n[t=i[e]]=this[t];return n}__applyStyleToCurrentElement(e){var t=this.__currentElement,n=this.__currentElementsToStyle;n&&(t.setAttribute(e,""),t=n.element,n.children.forEach(function(t){t.setAttribute(e,"")}));var i,r,s,o,a,l=Object.keys(yo);for(i=0;i<l.length;i++)if(s=this[l[i]],(r=yo[l[i]]).apply)if(s instanceof wo){if(s.__ctx)for(;s.__ctx.__defs.childNodes.length;)o=s.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[o]=o,this.__defs.appendChild(s.__ctx.__defs.childNodes[0]);t.setAttribute(r.apply,fo("url(#{id})",{id:s.__root.getAttribute("id")}))}else if(s instanceof _o)t.setAttribute(r.apply,fo("url(#{id})",{id:s.__root.getAttribute("id")}));else if(r&&-1!==r.apply.indexOf(e)&&r.svg!==s)if("stroke"!==r.svgAttr&&"fill"!==r.svgAttr||!s||-1===s.indexOf("rgba")){var c=r.svgAttr;if("globalAlpha"===l[i]&&t.getAttribute(c=e+"-"+r.svgAttr))continue;t.setAttribute(c,s)}else{a=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(s),t.setAttribute(r.svgAttr,fo("rgb({r},{g},{b})",{r:a[1],g:a[2],b:a[3]}));var h=a[4],u=this.globalAlpha;null!=u&&(h*=u),t.setAttribute(r.svgAttr+"-opacity",h)}}__closestGroupOrSvg(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)}getSerializedSvg(e){var t,n,i,r,s,o=(new XMLSerializer).serializeToString(this.__root);if(e)for(t=Object.keys(bo),n=0;n<t.length;n++)r=bo[i=t[n]],(s=new RegExp(i,"gi")).test(o)&&(o=o.replace(s,r));return o}getSvg(){return this.__root}saveWithTranslationAndClipRect(e,t,n,i,r,s){const o=`${e}_clip_rect`;let a=this.__createElement("clipPath",{id:o});this.__defs.appendChild(a);const l={x:"0",y:s.toString(),width:i.toString(),height:r.toString()};a.appendChild(this.__createElement("rect",l));const c=this.__createElement("g");c.setAttribute("transform",fo("translate({x},{y})",{x:t,y:n})),c.setAttribute("clip-path",fo("url(#{id})",{id:o}));const h=this.__closestGroupOrSvg();h.appendChild(c),this.__groupStack.push(h),this.__currentElement=c,this.__stack.push(this.__getStyleState())}save(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())}restore(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)}__addTransform(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var i=this.__currentElement.getAttribute("transform");i?i+=" ":i="",this.__currentElement.setAttribute("transform",i+=e)}addTrackGroupWithTranslationAndClipRect(e,t,n,i,r,s){const o=e+"_clip_rect";let a=this.__createElement("clipPath",{id:o});this.__defs.appendChild(a),a.appendChild(this.__createElement("rect",{x:"0",y:s.toString(),width:i.toString(),height:r.toString()}));let l=this.__createElement("g");this.__rootGroup.appendChild(l),l.setAttribute("transform",fo("translate({x},{y})",{x:t,y:n})),l.setAttribute("id",e+"_group"),l.setAttribute("clip-path",fo("url(#{id})",{id:o})),this.__currentElement=l}scale(e,t){void 0===t&&(t=e),this.__addTransform(fo("scale({x},{y})",{x:e,y:t}))}rotate(e){var t=180*e/Math.PI;this.__addTransform(fo("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))}translate(e,t){this.__addTransform(fo("translate({x},{y})",{x:e,y:t}))}transform(e,t,n,i,r,s){this.__addTransform(fo("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:n,d:i,e:r,f:s}))}beginPath(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e}__applyCurrentDefaultPath(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)}__addPathCommand(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e}moveTo(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(fo("M {x} {y}",{x:e,y:t}))}closePath(){this.__currentDefaultPath&&this.__addPathCommand("Z")}lineTo(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath&&this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(fo("L {x} {y}",{x:e,y:t})):this.__addPathCommand(fo("M {x} {y}",{x:e,y:t}))}bezierCurveTo(e,t,n,i,r,s){this.__currentPosition={x:r,y:s},this.__addPathCommand(fo("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:n,cp2y:i,x:r,y:s}))}quadraticCurveTo(e,t,n,i){this.__currentPosition={x:n,y:i},this.__addPathCommand(fo("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:n,y:i}))}arcTo(e,t,n,i,r){var s=this.__currentPosition&&this.__currentPosition.x,o=this.__currentPosition&&this.__currentPosition.y;if(void 0!==s&&void 0!==o){if(r<0)throw new Error("IndexSizeError: The radius provided ("+r+") is negative.");if(s===e&&o===t||e===n&&t===i||0===r)this.lineTo(e,t);else{var a=vo([s-e,o-t]),l=vo([n-e,i-t]);if(a[0]*l[1]!=a[1]*l[0]){var c=Math.acos(Math.abs(a[0]*l[0]+a[1]*l[1])),h=vo([a[0]+l[0],a[1]+l[1]]),u=r/Math.sin(c/2),d=e+u*h[0],p=t+u*h[1],f=[-a[1],a[0]],m=[l[1],-l[0]],g=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},v=g(f),b=g(m);this.lineTo(d+f[0]*r,p+f[1]*r),this.arc(d,p,r,v,b)}else this.lineTo(e,t)}}}stroke(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")}fill(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")}rect(e,t,n,i){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+i),this.lineTo(e,t+i),this.lineTo(e,t),this.closePath()}fillRect(e,t,n,i){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n);var r,s,o,a={x:e,y:t,width:n,height:i};(!this.viewbox||(r=this.viewbox).x<(s=a).x+s.width&&r.x+r.width>s.x&&r.y<s.y+s.height&&r.y+r.height>s.y)&&(o=this.__createElement("rect",a,!0),this.__closestGroupOrSvg().appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("fill"))}strokeRect(e,t,n,i){var r;r=this.__createElement("rect",{x:e,y:t,width:n,height:i},!0),this.__closestGroupOrSvg().appendChild(r),this.__currentElement=r,this.__applyStyleToCurrentElement("stroke")}strokeEllipse(e,t,n,i,r,s,o,a){this.__ellipse(e,t,n,i,r,s,o,a,"stroke")}fillEllipse(e,t,n,i,r,s,o,a){this.__ellipse(e,t,n,i,r,s,o,a,"fill")}__ellipse(e,t,n,i,r,s,o,a,l){const c=this.__createElement("ellipse",{cx:e,cy:t,rx:n,ry:i},!0);this.__closestGroupOrSvg().appendChild(c),this.__currentElement=c,this.__applyStyleToCurrentElement(l)}__clearCanvas(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),t=this.__root.childNodes[1],n=t.childNodes,i=n.length-1;i>=0;i--)n[i]&&t.removeChild(n[i]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)}clearRect(e,t,n,i){if(0!==e||0!==t||n!==this.width||i!==this.height){var r,s=this.__closestGroupOrSvg();r=this.__createElement("rect",{x:e,y:t,width:n,height:i,fill:"#FFFFFF"},!0),s.appendChild(r)}else this.__clearCanvas()}createLinearGradient(e,t,n,i){var r=this.__createElement("linearGradient",{id:mo(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(r),new _o(r,this)}createRadialGradient(e,t,n,i,r,s){var o=this.__createElement("radialGradient",{id:mo(this.__ids),cx:i+"px",cy:r+"px",r:s+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new _o(o,this)}__parseFont(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t}__wrapTextLink(e,t){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t}__applyText(e,t,n,i){var r,s,o=this.__parseFont(),a=this.__closestGroupOrSvg(),l=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:t,y:n,"text-anchor":(r=this.textAlign,s={left:"start",right:"end",center:"middle",start:"start",end:"end"},s[r]||s.start),"dominant-baseline":go(this.textBaseline)},!0);l.appendChild(this.__document.createTextNode(e)),this.__currentElement=l,this.__applyStyleToCurrentElement(i),a.appendChild(this.__wrapTextLink(o,l))}fillText(e,t,n){this.__applyText(e,t,n,"fill")}strokeText(e,t,n){this.__applyText(e,t,n,"stroke")}measureText(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)}arc(e,t,n,i,r,s){if(i!==r){(i%=2*Math.PI)==(r%=2*Math.PI)&&(r=(r+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));var o,a=e+n*Math.cos(r),l=t+n*Math.sin(r),c=e+n*Math.cos(i),h=t+n*Math.sin(i),u=s?0:1,d=r-i;d<0&&(d+=2*Math.PI),o=s?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(c,h),this.__addPathCommand(fo("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:o,sweepFlag:u,endX:a,endY:l})),this.__currentPosition={x:a,y:l}}}clip(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=mo(this.__ids),i=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",fo("url(#{id})",{id:n})),e.appendChild(i),this.__currentElement=i}drawImage(){var e,t,n,i,r,s,o,a,l,c,h,u,d,p=Array.prototype.slice.call(arguments),f=p[0],m=0,g=0;if(3===p.length)e=p[1],t=p[2],n=r=f.width,i=s=f.height;else if(5===p.length)e=p[1],t=p[2],n=p[3],i=p[4],r=f.width,s=f.height;else{if(9!==p.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);m=p[1],g=p[2],r=p[3],s=p[4],e=p[5],t=p[6],n=p[7],i=p[8]}o=this.__closestGroupOrSvg();var v="translate("+e+", "+t+")";if(f instanceof xo){if((a=f.getSvg().cloneNode(!0)).childNodes&&a.childNodes.length>1){for(l=a.childNodes[0];l.childNodes.length;)d=l.childNodes[0].getAttribute("id"),this.__ids[d]=d,this.__defs.appendChild(l.childNodes[0]);if(c=a.childNodes[1]){var b=c.getAttribute("transform");c.setAttribute("transform",b?b+" "+v:v),o.appendChild(c)}}}else"CANVAS"!==f.nodeName&&"IMG"!==f.nodeName||((h=this.__createElement("image")).setAttribute("width",n),h.setAttribute("height",i),h.setAttribute("preserveAspectRatio","none"),(m||g||r!==f.width||s!==f.height)&&((u=this.__document.createElement("canvas")).width=n,u.height=i,u.getContext("2d").drawImage(f,m,g,r,s,0,0,n,i),f=u),h.setAttribute("transform",v),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===f.nodeName?f.toDataURL():f.getAttribute("src")),o.appendChild(h))}createPattern(e,t){let n,i=this.__document.__createElement("pattern"),r=mo(this.__ids);return i.setAttribute("id",r),i.setAttribute("width",e.width),i.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?(n=this.__createElement("image"),n.setAttribute("width",e.width),n.setAttribute("height",e.height),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),i.appendChild(n),this.__defs.appendChild(i)):e instanceof xo&&(i.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(i)),new wo(i,this)}setLineDash(e){this.lineDash=e&&e.length>0?e.join(","):null}drawFocusRing(){}createImageData(){}getImageData(){}putImageData(){}globalCompositeOperation(){}setTransform(){}}const So=function(e,t,n,i,r){this.name=e,this.order=t,this.bpStart=n,this.bpLength=i,this.rangeLocus=r},Co=Ct,ko=new Set(["fastaURL","indexURL","cytobandURL","indexed"]);class Eo{constructor(e){this.fastaURL=e.fastaURL,this.withCredentials=e.withCredentials,this.chromosomeNames=[],this.chromosomes={},this.sequences=new Map,this.offsets={};const t={};for(let n in e)e.hasOwnProperty(n)&&!ko.has(n)&&(t[n]=e[n]);this.config=t}async init(){return this.loadAll()}async getSequence(e,t,n){this.offsets[e]&&(t-=this.offsets[e],n-=this.offsets[e]);let i="";if(t<0)for(let o=t;o<Math.min(n,0);o++)i+="*";if(n<=0)return Promise.resolve(i);const r=this.sequences.get(e),s=Math.min(n,r.length);return i+r.substring(t,s)}async loadAll(){let e;if(ea(this.fastaURL)){let t=Hr(this.fastaURL);e="";for(let n of t)e+=String.fromCharCode(n)}else e=await rs.load(this.fastaURL,Zo(this.config));const t=Co(e),n=t.length;let i,r,s,o,a=0,l=0,c=0;for(;a<n;)if(s=t[a++].trim(),s.startsWith("#")||0===s.length);else if(s.startsWith(">")){i&&(this.chromosomeNames.push(o),this.sequences.set(o,i),this.chromosomes[o]=new So(o,c++,l,l+i.length,r));const e=s.substr(1).split(/\s+/)[0].split(":");if(o=e[0],i="",l=0,r=void 0,e.length>1&&e[1].indexOf("-")>0){const t=e[1].split("-");2===t.length&&/^[0-9]+$/.test(t[0])&&/^[0-9]+$/.test(t[1]);const n=Number.parseInt(t[0]);Number.parseInt(t[1])>n&&(l=n-1,this.offsets[o]=l,r=e[1])}}else i+=s;i&&(this.chromosomeNames.push(o),this.sequences.set(o,i),this.chromosomes[o]=new So(o,c++,l,l+i.length,r))}}const Ao=function(e,t,n,i){this.chr=e,this.start=t,this.end=n,this.features=i};Ao.prototype.contains=function(e,t,n){return this.chr===e&&this.start<=t&&this.end>=n},Ao.prototype.containsRange=function(e){return this.chr===e.chr&&this.start<=e.start&&this.end>=e.end};const Ro=Ct,To=new Set(["fastaURL","indexURL","cytobandURL","indexed"]);class Io{constructor(e){this.file=e.fastaURL,this.indexFile=e.indexURL||e.indexFile||this.file+".fai",this.withCredentials=e.withCredentials,this.chromosomeNames=[],this.chromosomes={},this.sequences={},this.offsets={};const t={};for(let n in e)e.hasOwnProperty(n)&&!To.has(n)&&(t[n]=e[n]);this.config=t}async init(){return this.getIndex()}async getSequence(e,t,n){if(!this.interval||!this.interval.contains(e,t,n)){let i=t,r=n;if(n-t<5e4){const e=Math.round(t+(n-t)/2);i=Math.max(0,e-25e3),r=e+25e3}const s=await this.readSequence(e,i,r);this.interval=new Ao(e,i,r,s)}return this.interval.features?this.interval.features.substr(t-this.interval.start,n-t):null}async getIndex(){if(this.index)return this.index;{const e=await rs.load(this.indexFile,Zo(this.config)),t=Ro(e),n=t.length;let i=0,r=0;for(this.index={};i<n;){const e=t[i++].split("\t");if(5===e.length){const t=e[0],n=parseInt(e[1]),i={size:n,position:parseInt(e[2]),basesPerLine:parseInt(e[3]),bytesPerLine:parseInt(e[4])};this.chromosomeNames.push(t),this.index[t]=i,this.chromosomes[t]=new So(t,r++,0,n)}}return this.index}}async readSequence(e,t,n){await this.getIndex();const i=this.index[e];if(i){const r=Math.max(0,t),s=Math.min(i.size,n),o=i.bytesPerLine,a=i.basesPerLine,l=i.position,c=o-a,h=Math.floor(r/a),u=Math.floor(s/a),d=r-h*a,p=l+h*o+d,f=l+u*o+(s-u*a)-1-p+1;let m;if(f<=0?console.error("No sequence for "+e+":"+t+"-"+n):m=await rs.load(this.file,Zo(this.config,{range:{start:p,size:f}})),m){let e,t="",n=0,i=m.length;for(d>0&&(e=Math.min(s-r,a-d),t+=m.substr(n,e),n+=e+c);n<i;)e=Math.min(a,i-n),t+=m.substr(n,e),n+=e+c;return t}return null}return console.log("No index entry for chr: "+e),this.interval=new Ao(e,t,n,null),null}}const Do=function(e,t,n,i){this.start=e,this.end=t,this.name=n,this.stain=0,"acen"===i?this.type="c":(this.type=i.charAt(1),"p"===this.type&&(this.stain=parseInt(i.substring(4))))},Oo=Ct,Po={loadGenome:async function(e){const t=e.cytobandURL,n=e.aliasURL,i=await async function(e){let t;return t=ea(e.fastaURL)||!1===e.indexed?new Eo(e):new Io(e),await t.init(),t}(e);let r,s;return t&&(r=await async function(e,t){let n;if(ea(e)){const t=Hr(e);n="";const i=t.length;for(let e=0;e<i;e++)n+=String.fromCharCode(t[e])}else n=await rs.loadString(e,Zo(t));const i={};let r,s=[];const o=Oo(n);for(let u of o){var a=u.split("\t"),l=a[0];if(r||(r=l),l!==r&&(i[r]=s,s=[],r=l),5===a.length){var c=parseInt(a[1]),h=parseInt(a[2]);s.push(new Do(c,h,a[3],a[4]))}}return i}(t,i.config)),n&&(s=await function(e,t){return rs.loadString(e,Zo(t)).then(function(e){var t=Oo(e),n=[];return t.forEach(function(e){!e.startsWith("#")&&e.length>0&&n.push(e.split("\t"))}),n})}(n,i.config)),new Mo(e,i,r,s)},initializeGenomes:async function(e){if(!Po.KNOWN_GENOMES){const i={};if(!1!==e.loadDefaultGenomes)try{const e=`https://igv.org/genomes/genomes.json?randomSeed=${Math.random().toString(36)}&version=2.10.4`;t(await rs.loadJson(e,{timeout:5e3}))}catch(n){console.error(n);try{const e=`https://s3.amazonaws.com/igv.org.genomes/genomes.json?randomSeed=${Math.random().toString(36)}&version=2.10.4`;t(await rs.loadJson(e,{}))}catch(n){console.error(n),console.warn("Errors loading default genome definitions.")}}const r=e.genomeList||e.genomes;function t(e){return e.forEach(function(e){i[e.id]=e}),i}r&&t("string"==typeof r?await rs.loadJson(r,{}):r),Po.KNOWN_GENOMES=i}},isWholeGenomeView:function(e){return"all"===e.toLowerCase()},expandReference:function(e){if(xt(e)&&e.startsWith("{"))try{e=JSON.parse(e)}catch(n){}let t;if(xt(e)?t=e:e.genome?t=e.genome:void 0!==e.id&&void 0===e.fastaURL&&(t=e.id),t){const e=Po.KNOWN_GENOMES[t];return e||js.presentAlert(new Error(`Unknown genome id: ${t}`),void 0),e}return e}};class Mo{constructor(e,t,n,i){this.config=e,this.id=e.id,this.sequence=t,this.chromosomeNames=t.chromosomeNames,this.chromosomes=t.chromosomes,this.ideograms=n,this.featureDB={},this.wholeGenomeView=void 0===e.wholeGenomeView||e.wholeGenomeView,this.wholeGenomeView&&Object.keys(t.chromosomes).length>1?function(e,t){let n;if(t.chromosomeOrder)e.wgChromosomeNames=Array.isArray(t.chromosomeOrder)?t.chromosomeOrder:t.chromosomeOrder.split(",").map(e=>e.trim()),n=e.wgChromosomeNames.map(t=>e.chromosomes[t]).filter(e=>void 0!==e);else{const t=Object.keys(e.chromosomes).map(t=>e.chromosomes[t].bpLength).reduce((e,t)=>Math.max(e,t))/50;n=Object.values(e.chromosomes).filter(e=>e.bpLength>t);const i=n.filter(e=>r(e.name.replace("chr",""))),s=n.filter(e=>!r(e.name.replace("chr","")));i.sort((e,t)=>Number.parseInt(e.name.replace("chr",""))-Number.parseInt(t.name.replace("chr","")));const o=i.map(e=>e.name);for(let e of s)o.push(e.name);e.wgChromosomeNames=o}const i=n.reduce((e,t)=>e+t.bpLength,0);function r(e){return/^\d+$/.test(e)}e.chromosomes.all={name:"all",bpLength:i}}(this,e):this.wgChromosomeNames=t.chromosomeNames;var r={},s=this;r.all="all",this.chromosomeNames.forEach(function(e){var t=e.startsWith("chr")?e.substring(3):"chr"+e;r[t.toLowerCase()]=e,"chrM"===e&&(r.mt="chrM"),"MT"===e&&(r.chrm="MT"),r[e.toLowerCase()]=e}),i&&i.forEach(function(e){var t,n;for(n=0;n<e.length;n++)if(s.chromosomes[e[n]]){t=e[n];break}t&&e.forEach(function(e){e!==t&&(r[e.toLowerCase()]=t,r[e]=t)})}),this.chrAliasTable=r}showWholeGenomeView(){return!1!==this.config.wholeGenomeView}toJSON(){return Object.assign({},this.config,{tracks:void 0})}getInitialLocus(){}getHomeChromosomeName(){return this.showWholeGenomeView()&&this.chromosomes.hasOwnProperty("all")?"all":this.chromosomeNames[0]}getChromosomeName(e){return this.chrAliasTable[e.toLowerCase()]||e}getChromosome(e){return e=this.getChromosomeName(e),this.chromosomes[e]}getCytobands(e){return this.ideograms?this.ideograms[e]:null}getLongestChromosome(){var e,t=this.chromosomes;for(let i in t){if(t.hasOwnProperty(i)){var n=t[i];(void 0===e||n.bpLength>e.bpLength)&&(e=n)}return e}}getChromosomes(){return this.chromosomes}getGenomeCoordinate(e,t){var n=this.getCumulativeOffset(e);if(void 0!==n)return n+t}getChromosomeCoordinate(e){let t;void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=computeCumulativeOffsets.call(this));let n=0;for(let i of this.wgChromosomeNames){const r=this.cumulativeOffsets[i];if(r>e)return{chr:t,position:e-n};t=i,n=r}return{chr:this.chromosomeNames[this.chromosomeNames.length-1],position:0}}getCumulativeOffset(e){void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=(function(){let e=this,t={},n=0;for(let i of e.wgChromosomeNames)t[i]=Math.floor(n),n+=e.getChromosome(i).bpLength;return t}).call(this));const t=this.getChromosomeName(e);return this.cumulativeOffsets[t]}getGenomeLength(){let e=this;if(!this.bpLength){let t=0;e.wgChromosomeNames.forEach(function(n){t+=e.chromosomes[n].bpLength}),this.bpLength=t}return this.bpLength}async getSequence(e,t,n){return this.sequence.getSequence(e,t,n)}}let Lo,Fo=0;class No extends class{constructor(e,t,n,i){this.guid=vt(),this.trackView=e,this.referenceFrame=n,this.browser=e.browser,this.$viewport=pt('<div class="igv-viewport">'),t.appendChild(this.$viewport.get(0)),e.track.height&&(this.$viewport.get(0).style.height=`${e.track.height}px`),e.track instanceof po&&(this.alert=new zs(this.$viewport.get(0))),this.$content=pt("<div>",{class:"igv-viewport-content"}),this.$viewport.append(this.$content),this.$content.height(this.$viewport.height()),this.contentDiv=this.$content.get(0),this.$canvas=pt("<canvas>"),this.$content.append(this.$canvas),this.canvas=this.$canvas.get(0),this.ctx=this.canvas.getContext("2d"),this.setWidth(i),this.initializationHelper()}initializationHelper(){}showMessage(e){this.messageDiv||(this.messageDiv=document.createElement("div"),this.messageDiv.className="igv-viewport-message",this.contentDiv.append(this.messageDiv)),this.messageDiv.textContent=e,this.messageDiv.style.display="inline-block"}hideMessage(e){this.messageDiv&&(this.messageDiv.style.display="none")}setTrackLabel(e){}startSpinner(){}stopSpinner(){}checkZoomIn(){return!0}shift(){}setTop(e){const t=-e,n=t+this.$viewport.height();this.$content.css("top",`${e}px`),(void 0===this.canvasVerticalRange||this.canvasVerticalRange.bottom<n||this.canvasVerticalRange.top>t)&&this.repaint()}async loadFeatures(){}async repaint(){console.log("Viewport - repaint()")}draw(e,t,n){console.log("Viewport - draw(drawConfiguration, features, roiFeatures)")}checkContentHeight(){let e=this.trackView.track;if("FILL"===e.displayMode)this.setContentHeight(this.$viewport.height());else if("function"==typeof e.computePixelHeight){let t=this.cachedFeatures;if(t&&t.length>0){let n=e.computePixelHeight(t);n!==this.$content.height()&&this.setContentHeight(n)}}}getContentHeight(){return this.$content.height()}setContentHeight(e){e=Math.min(e,32e3),this.$content.height(e),this.tile&&(this.tile.invalidate=!0)}isLoading(){return!1}saveSVG(){}isVisible(){return this.$viewport.width()}setWidth(e){this.$viewport.width(e),this.canvas.style.width=`${e}px`,this.canvas.setAttribute("width",e)}getWidth(){return this.$viewport.width()}getContentTop(){return this.contentDiv.offsetTop}containsPosition(e,t){console.log("Viewport - containsPosition(chr, position)")}addMouseHandlers(){}removeMouseHandlers(){}dispose(){this.popover&&this.popover.dispose(),this.removeMouseHandlers(),this.$viewport.get(0).remove();for(let e of Object.keys(this))this[e]=void 0}}{constructor(e,t,n,i){super(e,t,n,i)}initializationHelper(){this.$spinner=pt("<div>",{class:"igv-loading-spinner-container"}),this.$viewport.append(this.$spinner),this.$spinner.append(pt("<div>"));const{track:e}=this.trackView;"sequence"!==e.type&&(this.$zoomInNotice=this.createZoomInNotice(this.$content)),e.name&&"sequence"!==e.config.type&&(this.$trackLabel=pt('<div class="igv-track-label">'),this.$viewport.append(this.$trackLabel),this.setTrackLabel(e.name),!1===this.browser.trackLabelsVisible&&this.$trackLabel.hide()),this.stopSpinner(),this.addMouseHandlers()}setTrackLabel(e){this.$trackLabel.empty(),this.$trackLabel.html(e);const t=this.$trackLabel.text();this.$trackLabel.attr("title",t)}startSpinner(){this.$spinner.show()}stopSpinner(){this.$spinner.hide()}checkZoomIn(){return!(!this.viewIsReady()||this.$zoomInNotice&&((()=>{const e=this.referenceFrame;if("all"!==this.referenceFrame.chr.toLowerCase()||this.trackView.track.supportsWholeGenome()){const t="function"==typeof this.trackView.track.getVisibilityWindow?this.trackView.track.getVisibilityWindow():this.trackView.track.visibilityWindow;return void 0!==t&&t>0&&e.bpPerPixel*this.$viewport.width()>t}return!0})()?(this.canvas&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.tile=void 0),this.$zoomInNotice.show(),this.trackView.track.autoHeight&&this.setContentHeight(this.trackView.minHeight||0),1):(this.$zoomInNotice.hide(),0)))}shift(){const e=this,t=e.referenceFrame;if(e.canvas&&e.tile&&e.tile.chr===e.referenceFrame.chr&&e.tile.bpPerPixel===t.bpPerPixel){const n=Math.round((e.tile.startBP-t.start)/t.bpPerPixel);e.canvas.style.left=n+"px"}}async loadFeatures(){const e=this.referenceFrame,t=e.chr,n=this.browser.genome.getChromosome(t).bpLength,i=this.$content.width()*e.bpPerPixel,r=Math.floor(Math.max(0,e.start-i)),s=Math.ceil(Math.min(n,e.start+i+i));if(!this.loading||this.loading.start!==r||this.loading.end!==s){this.loading={start:r,end:s},this.startSpinner();try{const n=await this.getFeatures(this.trackView.track,t,r,s,e.bpPerPixel);let i=[];const l=(a=this.trackView.track.roi,(o=this.browser.roi)&&a?o.concat(a):o||a);if(l)for(let o of l){const n=await o.getFeatures(t,r,s,e.bpPerPixel);i.push({track:o,features:n})}return this.tile=new Bo(t,r,s,e.bpPerPixel,n,i),this.loading=!1,this.hideMessage(),this.stopSpinner(),this.tile}catch(l){this.trackView&&!0!==this.trackView.disposed&&(this.showMessage("Error loading track data"),js.presentAlert(l),console.error(l))}finally{this.loading=!1,this.stopSpinner()}var o,a}}async repaint(){if(void 0===this.tile)return;let e,{features:t,roiFeatures:n,bpPerPixel:i,startBP:r,endBP:s}=this.tile;Po.isWholeGenomeView(this.referenceFrame.chr)?(i=this.referenceFrame.end/this.$viewport.width(),r=0,s=this.referenceFrame.end,e=this.$viewport.width()):e=Math.ceil((s-r)/i);const o=this.$viewport.height(),a=this.getContentHeight(),l=n?Math.max(a,o):a;let c=Math.min(l,3*o);if(0===e||0===c)return void(this.canvas&&pt(this.canvas).remove());const h=Math.max(0,-this.$content.position().top-o);let u;u="FILL"===this.trackView.track.displayMode?window.devicePixelRatio:!1===this.trackView.track.supportHiDPI?1:window.devicePixelRatio;const d=Math.round((r-this.referenceFrame.start)/this.referenceFrame.bpPerPixel),p=pt('<canvas class="igv-canvas">').get(0),f=p.getContext("2d");p.style.width=e+"px",p.style.height=c+"px",p.width=u*e,p.height=u*c,f.scale(u,u),p.style.left=d+"px",p.style.top=h+"px",f.translate(0,-h);const m={context:f,pixelXOffset:d,pixelWidth:e,pixelHeight:c,pixelTop:h,bpStart:r,bpEnd:s,bpPerPixel:i,referenceFrame:this.referenceFrame,selection:this.selection,viewport:this,viewportWidth:this.$viewport.width()};this.draw(m,t,n),this.canvasVerticalRange={top:h,bottom:h+c},this.$canvas&&this.$canvas.remove(),this.$canvas=pt(p),this.$content.append(this.$canvas),this.canvas=p,this.ctx=f}draw(e,t,n){if(t&&(e.features=t,this.trackView.track.draw(e)),n)for(let i of n)e.features=i.features,i.track.draw(e)}async toSVG(e){if(this.$zoomInNotice&&this.$zoomInNotice.is(":visible"))return;const t=this.referenceFrame,n=e.bpPerPixel,i=e.features,r=e.roiFeatures,s=this.$viewport.width(),o=this.$viewport.height(),a=t.start,l=t.start+s*t.bpPerPixel,c=new xo({width:s,height:o,viewbox:{x:0,y:-this.$content.position().top,width:s,height:o}}),h={viewport:this,context:c,top:-this.$content.position().top,pixelTop:0,pixelWidth:s,pixelHeight:o,bpStart:a,bpEnd:l,bpPerPixel:n,referenceFrame:this.referenceFrame,selection:this.selection,viewportWidth:s};return this.draw(h,i,r),c.getSerializedSvg(!0)}containsPosition(e,t){return this.referenceFrame.chr===e&&t>=this.referenceFrame.start&&t<=this.referenceFrame.calculateEnd(this.getWidth())}isLoading(){return this.loading}saveImage(){if(!this.ctx)return;const e=this.canvasVerticalRange?this.canvasVerticalRange.top:0,t=window.devicePixelRatio,n=this.$viewport.width()*t,i=this.$viewport.height()*t,r=-pt(this.canvas).position().left*t,s=(-this.$content.position().top-e)*t,o=this.ctx.getImageData(r,s,n,i),a=document.createElement("canvas"),l=a.getContext("2d");a.width=o.width,a.height=o.height,l.putImageData(o,0,0),Ht((this.$trackLabel.text()?this.$trackLabel.text():"image")+".png",a.toDataURL("image/png"))}saveSVG(){const{width:e,height:t}=this.$viewport.get(0).getBoundingClientRect(),n={width:e,height:t,viewbox:{x:0,y:-this.$content.position().top,width:e,height:t}},i=new xo(n),r=`${(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,"")}_referenceFrame_${this.browser.referenceFrameList.indexOf(this.referenceFrame)}_guid_${vt()}`;this.drawSVGWithContext(i,e,t,r,0,0,0);const s=i.getSerializedSvg(!0);Ht(`${r}.svg`,URL.createObjectURL(new Blob([s],{type:"application/octet-stream"})))}renderSVGContext(e,{deltaX:t,deltaY:n}){if(this.$zoomInNotice&&this.$zoomInNotice.is(":visible"))return;const i=`${(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,"")}_referenceFrame_${this.browser.referenceFrameList.indexOf(this.referenceFrame)}_guid_${vt()}`,{top:r}=this.$content.position(),{width:s,height:o}=this.$viewport.get(0).getBoundingClientRect();if(this.drawSVGWithContext(e,s,o,i,t,n+r,-r),this.$trackLabel&&!0===this.browser.trackLabelsVisible){const{x:i,y:r,width:s,height:o}=((e,t)=>{const{x:n,y:i}=e.getBoundingClientRect(),{x:r,y:s,width:o,height:a}=t.getBoundingClientRect();return{x:r-n,y:s-i,width:o,height:a}})(this.$viewport.get(0),this.$trackLabel.get(0));this.renderTrackLabelSVG(e,t+i,n+r,s,o)}}renderTrackLabelSVG(e,t,n,i,r){const s=`${(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,"")}_track_label_guid_${vt()}`;e.saveWithTranslationAndClipRect(s,t,n,i,r,0),e.fillStyle="white",e.fillRect(0,0,i,r),e.font="12px Arial",e.fillStyle="rgb(68, 68, 68)";const{width:o}=e.measureText(this.$trackLabel.text()),a=.25*(i-o),l=.7*(r-12);e.fillText(this.$trackLabel.text(),a,r-l),e.strokeStyle="rgb(68, 68, 68)",e.strokeRect(0,0,i,r),e.restore()}drawSVGWithContext(e,t,n,i,r,s,o){e.saveWithTranslationAndClipRect(i,r,s,t,n,o);let{start:a,bpPerPixel:l}=this.referenceFrame;this.draw({context:e,viewport:this,referenceFrame:this.referenceFrame,top:o,pixelTop:o,pixelWidth:t,pixelHeight:n,bpStart:a,bpEnd:a+t*l,bpPerPixel:l,viewportWidth:t,selection:this.selection},this.tile?this.tile.features:[],this.tile?this.tile.roiFeatures:void 0),e.restore()}getCachedFeatures(){return this.tile?this.tile.features:[]}async getFeatures(e,t,n,i,r){if(this.tile&&this.tile.containsRange(t,n,i,r))return this.tile.features;if("function"==typeof e.getFeatures){const s=await e.getFeatures(t,n,i,r,this);return this.cachedFeatures=s,this.checkContentHeight(),s}}createZoomInNotice(e){const t=pt("<div>",{class:"igv-zoom-in-notice-container"});e.append(t);const n=pt("<div>");return t.append(n),n.text("Zoom in to see features"),t.hide(),t}viewIsReady(){return this.browser&&this.browser.referenceFrameList&&this.referenceFrame}addMouseHandlers(){this.addViewportContextMenuHandler(this.$viewport.get(0)),this.addViewportMouseDownHandler(this.$viewport.get(0)),this.addViewportTouchStartHandler(this.$viewport.get(0)),this.addViewportMouseUpHandler(this.$viewport.get(0)),this.addViewportTouchEndHandler(this.$viewport.get(0)),this.addViewportClickHandler(this.$viewport.get(0)),this.trackView.track.name&&"sequence"!==this.trackView.track.config.type&&this.addTrackLabelClickHandler(this.$trackLabel.get(0))}removeMouseHandlers(){this.removeViewportContextMenuHandler(this.$viewport.get(0)),this.removeViewportMouseDownHandler(this.$viewport.get(0)),this.removeViewportTouchStartHandler(this.$viewport.get(0)),this.removeViewportMouseUpHandler(this.$viewport.get(0)),this.removeViewportTouchEndHandler(this.$viewport.get(0)),this.removeViewportClickHandler(this.$viewport.get(0)),this.trackView.track.name&&"sequence"!==this.trackView.track.config.type&&this.removeTrackLabelClickHandler(this.$trackLabel.get(0))}addViewportContextMenuHandler(e){this.boundContextMenuHandler=(function(e){if(this.browser.dragObject)return!1;const t=jo(e,this);if(void 0===t)return!1;e.preventDefault();let n=[];if("function"==typeof this.trackView.track.contextMenuItemList){const e=this.trackView.track.contextMenuItemList(t);e&&(n=e)}n.length>0&&n.push({label:pt("<HR>")}),n.push({label:"Save Image (PNG)",click:()=>this.saveImage()}),n.push({label:"Save Image (SVG)",click:()=>this.saveSVG()}),this.browser.menuPopup.presentTrackContextMenu(e,n)}).bind(this),e.addEventListener("contextmenu",this.boundContextMenuHandler)}removeViewportContextMenuHandler(e){e.removeEventListener("contextmenu",this.boundContextMenuHandler)}addViewportMouseDownHandler(e){this.boundMouseDownHandler=zo.bind(this),e.addEventListener("mousedown",this.boundMouseDownHandler)}removeViewportMouseDownHandler(e){e.removeEventListener("mousedown",this.boundMouseDownHandler)}addViewportTouchStartHandler(e){this.boundTouchStartHandler=zo.bind(this),e.addEventListener("touchstart",this.boundTouchStartHandler)}removeViewportTouchStartHandler(e){e.removeEventListener("touchstart",this.boundTouchStartHandler)}addViewportMouseUpHandler(e){this.boundMouseUpHandler=Vo.bind(this),e.addEventListener("mouseup",this.boundMouseUpHandler)}removeViewportMouseUpHandler(e){e.removeEventListener("mouseup",this.boundMouseUpHandler)}addViewportTouchEndHandler(e){this.boundTouchEndHandler=Vo.bind(this),e.addEventListener("touchend",this.boundTouchEndHandler)}removeViewportTouchEndHandler(e){e.removeEventListener("touchend",this.boundTouchEndHandler)}addViewportClickHandler(e){this.boundClickHandler=(function(e){if(this.enableClick){if(3===e.which||e.ctrlKey)return;if(pt(".igv-popover").hide(),this.browser.dragObject||this.browser.isScrolling)return;e.preventDefault(),e.stopPropagation();const t=bt(e,this.$viewport.get(0)).x,n=bt(e,this.canvas).x,i=this.referenceFrame,r=Math.floor(i.start+i.toBP(n)),s=Date.now();if(s-Fo<this.browser.constants.doubleClickDelay){Lo&&(window.clearTimeout(Lo),Lo=void 0);const e=Math.round(i.start+i.toBP(t));let n;if("all"===this.referenceFrame.chr.toLowerCase()){const t=this.browser.genome.getChromosomeCoordinate(e).chr;if(1===this.browser.referenceFrameList.length)n=t;else{const e=this.browser.referenceFrameList.map(({locusSearchString:e})=>e);e[this.browser.referenceFrameList.indexOf(this.referenceFrame)]=t,n=e.join(" ")}this.browser.search(n)}else this.browser.zoomWithScaleFactor(.5,e,this.referenceFrame)}else e.shiftKey&&"function"==typeof this.trackView.track.shiftClick?this.trackView.track.shiftClick(r,e):"function"==typeof this.trackView.track.popupData&&(Lo=setTimeout(()=>{const t=function(e,t){const n=jo(e,t);if(void 0===n)return;let i=t.trackView.track;const r=i.popupData(n),s=t.browser.fireEvent("trackclick",[i,r]);let o;return void 0===s||!0===s?r&&r.length>0&&(o=r.map(e=>e.name?`<div title="${e.value}"><span>${e.name}</span>&nbsp&nbsp&nbsp${e.value}</div>`:"<hr>"===e?e:e.html?e.html:`<div title="${e}">${e}</div>`).join("")):"string"==typeof s&&(o=s),o}(e,this);t&&(this.popover&&this.popover.dispose(),this.popover=new Gs(this.browser.columnContainer),this.popover.presentContentWithEvent(e,t)),window.clearTimeout(Lo),Lo=void 0},this.browser.constants.doubleClickDelay));Fo=s}}).bind(this),e.addEventListener("click",this.boundClickHandler)}removeViewportClickHandler(e){e.removeEventListener("click",this.boundClickHandler)}addTrackLabelClickHandler(e){this.boundTrackLabelClickHandler=(function(e){e.stopPropagation();const{track:t}=this.trackView;let n;n="function"==typeof t.description?t.description():t.description?`<div>${t.description}</div>`:t.url?jt(t.url)?`<div><b>Filename: </b>${t.url.name}`:`<div><b>URL: </b>${t.url}`:t.name,this.popover&&this.popover.dispose(),this.popover=new Gs(this.browser.columnContainer,t.name||"unnamed"),this.popover.presentContentWithEvent(e,n)}).bind(this),e.addEventListener("click",this.boundTrackLabelClickHandler)}removeTrackLabelClickHandler(e){e.removeEventListener("click",this.boundTrackLabelClickHandler)}}function zo(e){this.enableClick=!0,this.browser.mouseDownOnViewport(e,this),gt(e)}function Vo(e){this.browser.dragObject||this.browser.isScrolling?(this.browser.cancelTrackPan(),e.preventDefault(),e.stopPropagation(),this.enableClick=!1):(this.browser.cancelTrackPan(),this.browser.endTrackDrag())}function jo(e,t){const n=t.referenceFrame,i=bt(e,t.contentDiv),r=bt(e,t.canvas),s=n.start+n.toBP(i.x);if(void 0!==s&&null!==t.tile)return{event:e,viewport:t,referenceFrame:n,genomicLocation:s,x:i.x,y:i.y,canvasX:r.x,canvasY:r.y}}var Bo=function(e,t,n,i,r,s){this.chr=e,this.startBP=t,this.endBP=n,this.bpPerPixel=i,this.features=r,this.roiFeatures=s};Bo.prototype.containsRange=function(e,t,n,i){return this.bpPerPixel===i&&t>=this.startBP&&n<=this.endBP&&e===this.chr},Bo.prototype.overlapsRange=function(e,t,n){return this.chr===e&&n>=this.startBP&&t<=this.endBP};class Ho{constructor(e){this.rulerSweeper=ft({class:"igv-ruler-sweeper"}),e.contentDiv.appendChild(this.rulerSweeper),this.rulerViewport=e,this.isMouseHandlers=void 0,this.addBrowserObserver()}addBrowserObserver(){this.boundObserverHandler=(function(){Po.isWholeGenomeView(this.rulerViewport.referenceFrame.chr)?this.removeMouseHandlers():this.addMouseHandlers()}).bind(this),this.rulerViewport.browser.on("locuschange",this.boundObserverHandler)}removeBrowserObserver(){this.rulerViewport.browser.off("locuschange",this.boundObserverHandler)}addMouseHandlers(){if(!0===this.isMouseHandlers)return;let e,t,n,i,r,s;this.boundContentMouseDownHandler=(function(s){e=!0,t=!0;const{x:o}=bt(s,this.rulerViewport.contentDiv);i=n=o,r=1,this.rulerSweeper.style.display="block",this.rulerSweeper.style.left=`${i}px`,this.rulerSweeper.style.width=`${r}px`}).bind(this),this.rulerViewport.contentDiv.addEventListener("mousedown",this.boundContentMouseDownHandler),this.boundDocumentMouseMoveHandler=(function(o){let a;if(e&&t){const{x:e}=bt(o,this.rulerViewport.contentDiv);a=Math.max(Math.min(e,this.rulerViewport.contentDiv.clientWidth),0),s=a-n,r=Math.abs(s),this.rulerSweeper.style.width=`${r}px`,s<0&&(i=n+s,this.rulerSweeper.style.left=`${i}px`)}}).bind(this),document.addEventListener("mousemove",this.boundDocumentMouseMoveHandler),this.boundDocumentMouseUpHandler=(function(n){let s;!0===e&&!0===t&&(e=t=void 0,this.rulerSweeper.style.display="none",r>1&&(s={start:qo(this.rulerViewport.referenceFrame,i),end:qo(this.rulerViewport.referenceFrame,i+r)},Ko(this.rulerViewport.browser.genome.getChromosome(this.rulerViewport.referenceFrame.chr).bpLength,s,this.rulerViewport.browser.minimumBases()),this.rulerViewport.referenceFrame.bpPerPixel=(Math.round(s.end)-Math.round(s.start))/this.rulerViewport.contentDiv.clientWidth,this.rulerViewport.referenceFrame.start=Math.round(s.start),this.rulerViewport.referenceFrame.end=Math.round(s.end),this.rulerViewport.browser.updateViews(this.rulerViewport.referenceFrame)))}).bind(this),document.addEventListener("mouseup",this.boundDocumentMouseUpHandler),this.isMouseHandlers=!0}removeMouseHandlers(){this.rulerViewport.contentDiv.removeEventListener("mousedown",this.boundContentMouseDownHandler),document.removeEventListener("mousemove",this.boundDocumentMouseMoveHandler),document.removeEventListener("mouseup",this.boundDocumentMouseUpHandler),this.isMouseHandlers=!1}dispose(){this.removeBrowserObserver(),this.removeMouseHandlers(),this.rulerSweeper.remove()}}function qo(e,t){return e.start+t*e.bpPerPixel}let $o,Uo;class Wo extends No{constructor(e,t,n,i){super(e,t,n,i)}initializationHelper(){this.$viewport.get(0).dataset.rulerTrack="rulerTrack",this.rulerSweeper=new Ho(this);const e=this.$viewport.get(0);this.multiLocusPanelCloseButton=ft({class:"igv-multi-locus-close-button"}),e.appendChild(this.multiLocusPanelCloseButton),this.multiLocusPanelCloseButton.appendChild(yt("times-circle")),this.rulerLabel=ft({class:"igv-multi-locus-ruler-label"}),e.appendChild(this.rulerLabel),this.$tooltip=pt("<div>",{class:"igv-ruler-tooltip"}),this.$tooltip.height(this.$viewport.height()),this.$viewport.append(this.$tooltip),this.$tooltipContent=pt("<div>"),this.$tooltip.append(this.$tooltipContent),this.$tooltip.hide(),this.dismissLocusLabel(),this.addMouseHandlers()}addMouseHandlers(){this.addMultiLocusPanelCloseHandler(this.multiLocusPanelCloseButton),this.addRulerLableClickHandler(this.rulerLabel),Po.isWholeGenomeView(this.referenceFrame.chr)?this.addViewportClickHandler(this.$viewport.get(0)):this.removeViewportClickHandler(this.$viewport.get(0))}removeMouseHandlers(){this.removeMultiLocusPanelCloseHandler(this.multiLocusPanelCloseButton),this.removeRulerLableClickHandler(this.rulerLabel),this.removeViewportClickHandler(this.$viewport.get(0))}addMultiLocusPanelCloseHandler(e){this.boundMultiLocusPanelCloseHandler=(function(e){Uo===this&&(Uo=void 0),this.browser.removeMultiLocusPanel(this.referenceFrame)}).bind(this),e.addEventListener("click",this.boundMultiLocusPanelCloseHandler)}removeMultiLocusPanelCloseHandler(e){e.removeEventListener("click",this.boundMultiLocusPanelCloseHandler)}addRulerLableClickHandler(e){this.boundRulerLableClickHandler=(async function(){const e=this.browser.referenceFrameList.filter(e=>this.referenceFrame!==e);for(let t of e)await this.browser.removeMultiLocusPanel(t)}).bind(this),e.addEventListener("click",this.boundRulerLableClickHandler)}removeRulerLableClickHandler(e){e.removeEventListener("click",this.boundRulerLableClickHandler)}addViewportClickHandler(e){this.boundViewportClickHandler=(function(e){const t=this.browser.referenceFrameList.indexOf(this.referenceFrame),{x:n}=bt(e,this.$viewport.get(0)),i=Math.round(this.referenceFrame.start+this.referenceFrame.toBP(n)),{chr:r}=this.browser.genome.getChromosomeCoordinate(i);let s;if(1===this.browser.referenceFrameList.length)s=r;else{let e=this.browser.referenceFrameList.map(({locusSearchString:e})=>e);e[t]=r,s=e.join(" ")}this.browser.search(s)}).bind(this),e.addEventListener("click",this.boundViewportClickHandler)}removeViewportClickHandler(e){e.removeEventListener("click",this.boundViewportClickHandler)}presentLocusLabel(e){this.rulerLabel.innerHTML=this.referenceFrame.getMultiLocusLabel(e),this.rulerLabel.style.display="block",this.multiLocusPanelCloseButton.style.display="block"}dismissLocusLabel(){this.rulerLabel.style.display="none",this.multiLocusPanelCloseButton.style.display="none"}mouseMove(e){if(!0===this.browser.cursorGuideVisible){if(void 0===Uo?(Uo=this,this.$tooltip.show()):Uo.guid!==this.guid?(Uo.$tooltip&&Uo.$tooltip.hide(),this.$tooltip.show(),Uo=this):this.$tooltip.show(),this.browser.isMultiLocusWholeGenomeView()||Po.isWholeGenomeView(this.referenceFrame.chr))return void this.$tooltip.hide();const{x:t}=bt(e,this.$viewport.get(0)),{start:n,bpPerPixel:i,end:r}=this.referenceFrame,s=Math.round(.5+n+Math.max(0,t)*i);this.$tooltipContent.text(St(s));const{width:o}=this.$tooltipContent.get(0).getBoundingClientRect(),{width:a}=this.$viewport.get(0).getBoundingClientRect();return this.$tooltip.css({left:`${qr(t,0,a-o)}px`}),clearTimeout($o),$o=setTimeout(()=>{this.$tooltip&&this.$tooltip.hide()},1e4),{start:n,bp:s,end:r}}}startSpinner(){}stopSpinner(){}dispose(){this.rulerSweeper.dispose(),super.dispose()}}class Go extends No{constructor(e,t,n,i){super(e,t,n,i)}initializationHelper(){this.$ideogramCanvas=pt("<canvas>",{class:"igv-ideogram-canvas"}),this.$ideogramCanvas.insertBefore(this.$canvas);const e=this.$ideogramCanvas.get(0);this.ideogram_ctx=e.getContext("2d"),this.$canvas.remove(),this.canvas=void 0,this.ctx=void 0,this.addMouseHandlers()}addMouseHandlers(){this.addViewportClickHandler(this.$viewport.get(0))}removeMouseHandlers(){this.removeViewportClickHandler(this.$viewport.get(0))}addViewportClickHandler(e){this.boundClickHandler=(function(e){const{xNormalized:t,width:n}=bt(e,this.ideogram_ctx.canvas),{bpLength:i}=this.browser.genome.getChromosome(this.referenceFrame.chr),r=this.referenceFrame.bpPerPixel*n/i;let s=t;s-r/2<0&&(s=r/2),s+r/2>1&&(s=1-r/2);const o=Math.round((s-r/2)*i),a=Math.round((s+r/2)*i);this.referenceFrame.start=o,this.referenceFrame.end=a,this.referenceFrame.bpPerPixel=(a-o)/n,this.browser.updateViews(this.referenceFrame,this.browser.trackViews,!0)}).bind(this),e.addEventListener("click",this.boundClickHandler)}removeViewportClickHandler(e){e.removeEventListener("click",this.boundClickHandler)}setWidth(e){this.$viewport.width(e)}drawSVGWithContext(e,t,n,i,r,s,o){e.saveWithTranslationAndClipRect(i,r,s,t,n,o),this.trackView.track.draw({context:e,referenceFrame:this.referenceFrame,pixelWidth:t,pixelHeight:n}),e.restore()}async repaint(){this.draw({referenceFrame:this.referenceFrame})}draw({referenceFrame:e}){this.$canvas.hide(),Ks.configureHighDPICanvas(this.ideogram_ctx,this.$viewport.width(),this.$viewport.height()),this.trackView.track.draw({context:this.ideogram_ctx,referenceFrame:e,pixelWidth:this.$viewport.width(),pixelHeight:this.$viewport.height()})}startSpinner(){}stopSpinner(){}}function Yo(e){const t=new Set(["boolean","number","string","symbol"]);return void 0!==e&&(t.has(typeof e)||e.substring||e.toFixed)}function Zo(e,t){return Object.assign({oauthToken:e.oauthToken,headers:e.headers,withCredentials:e.withCredentials,filename:e.filename},t)}const Xo=function(e){var t,n;return e.length>0?(t=Number.MAX_VALUE,n=-Number.MAX_VALUE,e.forEach(function(e){Number.isNaN(e.value)||(t=Math.min(t,e.value),n=Math.max(n,e.value))}),n>0&&(t=Math.min(0,t)),n<0&&(n=0)):(t=0,n=100),{min:t,max:n}},Ko=function(e,t,n){let i=t.start,r=t.end;if(void 0===r)i-=n/2,r=i+n,r>e?(r=e,i=r-n):i<0&&(i=0,r=n);else if(r-i<n){const t=(r+i)/2;t-n/2<0?(i=0,r=i+n):t+n/2>e?(r=e,i=r-n):(i=t-n/2,r=i+n)}t.start=Math.ceil(i),t.end=Math.floor(r)};async function Qo(e){if(xt(e)&&e.startsWith("https://drive.google.com")){if(void 0===Ft())throw Error("Google drive is referenced, but API key is not defined.  An API key is required for Google Drive access");const t=await async function(e){let t="https://www.googleapis.com/drive/v3/files/"+Dt(e)+"?supportsTeamDrives=true";const n=Ft();n&&(t+="&key="+n);const i=await fetch(t);let r=await i.json();if(r.error&&404===r.error.code){const{access_token:e}=await Lt("https://www.googleapis.com/auth/drive.readonly");if(!e)throw Error(r.error);{const n=await fetch(t,{headers:{Authorization:`Bearer ${e}`}});if(r=await n.json(),r.error)throw Error(r.error)}}return r}(e);return t.originalFileName||t.name}return Vt(e)}function Jo(e){var t,n;return e>1e7?(t=" mb",n=e/1e6,Math.floor(n).toString()+t):e>1e4?(t=" kb",n=e/1e3,St(Math.floor(n))+t):St(e)+" bp"}function ea(e){return xt(e)&&e.startsWith("data:")}function ta(e,t){const n=ft({class:t});e.appendChild(n)}function na(e,t){t.parentNode.insertBefore(e,t)}function ia(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function ra(e,t,n,i){return"ruler"===e.track.type?new Wo(e,t,n,i):"ideogram"===e.track.type?new Go(e,t,n,i):new No(e,t,n,i)}const sa={textAlign:"start",textBaseline:"bottom",strokeStyle:"black",fillStyle:"black"};class oa{constructor(e,t,n,i){this.guid=vt(),this.trackView=e,this.browser=e.browser,this.viewport=ft({class:"igv-viewport"}),t.appendChild(this.viewport),e.track.height&&(this.viewport.style.height=`${e.track.height}px`),this.canvas=document.createElement("canvas"),this.viewport.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.trackScrollDelta=0,this.contentTop=0,this.setWidth(i),!1===this.browser.showSampleNames&&this.hide(),this.addMouseHandlers()}checkCanvas(){const e=window.devicePixelRatio,t=this.viewport.clientHeight,n=this.browser.sampleNameViewportWidth;if(this.canvas.width!==n*e||this.canvas.height!==t*e){const i=this.canvas;i.width=n*e,i.height=t*e,i.style.width=`${n}px`,i.style.height=`${t}px`,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(e,e)}}setTop(e){if("function"==typeof this.trackView.track.getSamples){this.contentTop=e;const t=this.trackView.track.getSamples();this.repaint(t)}}setWidth(e){this.viewport.innerWidth=e,this.checkCanvas()}show(){this.viewport.style.display="block"}hide(){this.viewport.style.display="none"}async repaint(e){this.checkCanvas(),this.draw({context:this.ctx,samples:e})}draw({context:e,samples:t}){if(!t||0===t.names.length)return;!function(e,{textAlign:t,textBaseline:n,fillStyle:i},r){const s=Math.min(r,10);e.font=`${s}px sans-serif`,e.textAlign=t,e.textBaseline=n,e.fillStyle=i}(e,sa,t.height),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=function(e){const{r:t,g:n,b:i}=to;return`rgb(${t},${n},${i})`}();const n=this.viewport.getBoundingClientRect().height;let i=(t.yOffset||0)+this.contentTop;for(let r of t.names){if(i>n)break;if(i+t.height>0){const n=r,s=aa(e,n,i,t.height);e.fillText(n,4,s)}i+=t.height}}renderSVGContext(e,{deltaX:t,deltaY:n}){if("function"==typeof this.trackView.track.getSamples){const i=this.trackView.track.getSamples(),r=0,{width:s,height:o}=this.viewport.getBoundingClientRect(),a=`${(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,"")}_sample_names_guid_${vt()}`;e.saveWithTranslationAndClipRect(a,t,n+r,s,o,-r),this.draw({context:e,samples:i}),e.restore()}}addMouseHandlers(){this.addViewportContextMenuHandler(this.viewport)}removeMouseHandlers(){this.removeViewportContextMenuHandler(this.viewport)}addViewportContextMenuHandler(e){this.boundContextMenuHandler=(function(e){e.preventDefault(),e.stopPropagation(),this.browser.inputDialog.present({label:"Name Panel Width",value:this.browser.sampleNameViewportWidth,callback:e=>{this.browser.sampleNameViewportWidth=parseInt(e);for(let{sampleNameViewport:t}of this.browser.trackViews)t.setWidth(this.browser.sampleNameViewportWidth);this.browser.resize()}},e)}).bind(this),e.addEventListener("contextmenu",this.boundContextMenuHandler)}removeViewportContextMenuHandler(e){e.removeEventListener("contextmenu",this.boundContextMenuHandler)}dispose(){this.removeMouseHandlers(),this.viewport.remove()}}function aa(e,t,n,i){return n+i-function(e,t,n){const{actualBoundingBoxAscent:i,actualBoundingBoxDescent:r}=e.measureText(t);return(n-(i+r))/2}(e,t,i)}class la extends qs{constructor({parent:e,width:t}){super({parent:e,width:t,border:"1px solid gray"})}configure(e,t){this.colorHandlers=t,this.setActiveColorHandler("color"),this.createSwatches(e)}setActiveColorHandler(e){this.activeColorHandler=this.colorHandlers[e]}createSwatches(e){this.container.querySelectorAll(".igv-ui-color-swatch").forEach(e=>e.remove());const t=Object.values(Jr);for(let n of t){const e=ft({class:"igv-ui-color-swatch"});this.container.appendChild(e),this.decorateSwatch(e,n)}if(e)for(let n of e){const e=ft({class:"igv-ui-color-swatch"});this.container.appendChild(e),this.decorateSwatch(e,n)}}decorateSwatch(e,t){e.style.backgroundColor=t,e.addEventListener("mouseenter",()=>e.style.borderColor=t),e.addEventListener("mouseleave",()=>e.style.borderColor="white"),e.addEventListener("click",e=>{e.stopPropagation(),this.activeColorHandler(t)}),e.addEventListener("touchend",e=>{e.stopPropagation(),this.activeColorHandler(t)})}}const ca=function(e){this.popover=ft({class:"igv-menu-popup"}),e.appendChild(this.popover);const t=ft({class:"igv-menu-popup-header"});this.popover.appendChild(t),wt(t,()=>this.hide()),this.popoverContent=ft(),this.popover.appendChild(this.popoverContent),Zr(this.popover,t),t.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault()}),this.hide()};ca.prototype.hide=function(){this.popover.style.display="none"},ca.prototype.presentMenuList=function(e){if(ha(),e.length>0){this.popoverContent.innerHTML="",e=Cs.trackMenuItemListHelper(e,this);for(let n of e){n.init&&n.init();let t=n.object;0===e.indexOf(n)&&t.removeClass("igv-track-menu-border-top"),t.hasClass("igv-track-menu-border-top")||t.hasClass("igv-menu-popup-check-container")||t.is("div")&&t.addClass("igv-menu-popup-shim"),this.popoverContent.appendChild(t.get(0))}this.popover.style.display="flex";const{width:t}=this.popover.getBoundingClientRect();this.popover.style.left=-t+"px",this.popover.style.top="0px"}},ca.prototype.presentTrackContextMenu=function(e,t){this.popoverContent.innerHTML="";const n=(i=this.popover,t.map(e=>{let t;if("string"==typeof e&&"<hr/>"===e)t=document.createElement("hr");else if("string"==typeof e)t=ft({class:"context-menu"}),t.innerHTML=e;else if("Node"==typeof e)t=e;else{if("function"==typeof e.init&&e.init(),"checkbox"===e.type)t=Ss("Show all bases",e.value);else if("color"===e.type){const n=new la({parent:i.parentElement,width:364});n.configure(void 0,{color:t=>e.click(t)}),t=ft({class:"context-menu"}),"string"==typeof e.label&&(t.innerHTML=e.label);const r=e=>{n.show(),mt(i),e.preventDefault(),e.stopPropagation()};t.addEventListener("click",r),t.addEventListener("touchend",r),t.addEventListener("mouseup",function(e){e.preventDefault(),e.stopPropagation()})}else t=ft({class:"context-menu"}),"string"==typeof e.label&&(t.innerHTML=e.label);if(e.click&&"color"!==e.type){function n(t){e.click(),mt(i),t.preventDefault(),t.stopPropagation()}t.addEventListener("click",n),t.addEventListener("touchend",n),t.addEventListener("mouseup",function(e){e.preventDefault(),e.stopPropagation()})}}return{el:t,init:e.init}}));var i;for(let{el:r}of n)this.popoverContent.appendChild(r);!function(e,t){t.style.display="flex";const{x:n,y:i}=bt(e,t.parentNode),{width:r}=t.getBoundingClientRect(),s=n+r,{width:o}=t.parentNode.getBoundingClientRect();t.style.left=`${s>o?n-(s-o):n}px`,t.style.top=`${i}px`}(e,this.popover)},ca.prototype.dispose=function(){this.popoverContent.innerHTML="",this.popover.innerHTML="",Object.keys(this).forEach(function(e){this[e]=void 0})};const ha=()=>{const e=document.querySelectorAll(".igv-menu-popup");for(let t=0;t<e.length;t++)e[t].style.display="none"},ua=new Set(["ruler","sequence","ideogram"]),da=new Set(["ruler","sequence","ideogram"]);class pa{constructor(e,t,n){this.namespace=`trackview-${vt()}`,this.browser=e,this.track=n,n.trackView=this,this.addDOMToColumnContainer(e,t,e.referenceFrameList)}startSpinner(){this.viewports&&this.viewports.length>0&&this.viewports[0].startSpinner()}stopSpinner(){this.viewports&&this.viewports.length>0&&this.viewports[0].stopSpinner()}addDOMToColumnContainer(e,t,n){this.axis=this.createAxis(e,this.track),this.viewports=[];const i=e.calculateViewportWidth(n.length),r=t.querySelectorAll(".igv-column");for(let s=0;s<r.length;s++){const e=ra(this,r[s],n[s],i);this.viewports.push(e)}this.sampleNameViewport=new oa(this,e.columnContainer.querySelector(".igv-sample-name-column"),void 0,e.sampleNameViewportWidth),this.createTrackScrollbar(e),this.createTrackDragHandle(e),this.createTrackGearPopup(e)}createAxis(e,t){const n=ft();if(e.columnContainer.querySelector(".igv-axis-column").appendChild(n),n.style.height=`${t.height}px`,"function"==typeof t.paintAxis){t.dataRange&&n.addEventListener("click",()=>{e.dataRangeDialog.configure(this),e.dataRangeDialog.present(pt(e.columnContainer))});const{width:i,height:r}=n.getBoundingClientRect();this.axisCanvas=document.createElement("canvas"),this.axisCanvas.style.width=`${i}px`,this.axisCanvas.style.height=`${r}px`,n.appendChild(this.axisCanvas)}return n}resizeAxisCanvas(e,t){this.axis.style.width=`${e}px`,this.axis.style.height=`${t}px`,"function"==typeof this.track.paintAxis&&(this.axisCanvas.style.width=`${e}px`,this.axisCanvas.style.height=`${t}px`)}removeDOMFromColumnContainer(){this.boundAxisClickHander&&this.removeAxisEventListener(this.axis),this.axis.remove();for(let e of this.viewports)e.removeMouseHandlers(),e.$viewport.remove();this.sampleNameViewport.dispose(),this.removeTrackScrollMouseHandlers(),this.outerScroll.remove(),this.removeTrackDragMouseHandlers(),this.dragHandle.remove(),this.removeTrackGearMouseHandlers(),this.gearContainer.remove()}renderSVGContext(e,{deltaX:t,deltaY:n}){!function(e,t,n,i,r){if("function"==typeof t.paintAxis){const{y:s,width:o,height:a}=n.getBoundingClientRect(),l=`${(t.name||t.id).replace(/\W/g,"")}_axis_guid_${vt()}`;e.saveWithTranslationAndClipRect(l,i,s+r,o,a,0),t.paintAxis(e,o,a),e.restore()}}(e,this.track,this.axisCanvas,t,n);const{width:i}=this.axis.getBoundingClientRect(),{y:r}=this.viewports[0].$viewport.get(0).getBoundingClientRect();let s={deltaX:i+t,deltaY:r+n};for(let o of this.viewports){o.renderSVGContext(e,s);const{width:t}=o.$viewport.get(0).getBoundingClientRect();s.deltaX+=t}!0===this.browser.showSampleNames&&this.sampleNameViewport.renderSVGContext(e,s)}dataRange(){return this.track.dataRange?this.track.dataRange:void 0}setDataRange(e,t){void 0!==e&&(this.track.dataRange.min=e),void 0!==t&&(this.track.dataRange.max=t),this.track.autoscale=!1,this.repaintViews()}presentColorPicker(e){if(!1===da.has(this.track.type)){const t=[],n=this.track.color||this.track.defaultColor;xt(n)&&t.push(n),this.track.altColor&&xt(this.track.altColor)&&t.push(this.track.altColor);const i=t.map(e=>e.startsWith("#")?e:e.startsWith("rgb(")?Gr.rgbToHex(e):Gr.colorNameToHex(e));this.browser.genericColorPicker.configure(i,{color:e=>{this.track.color=e,this.repaintViews()},altColor:e=>{this.track.altColor=e,this.repaintViews()}}),this.browser.genericColorPicker.setActiveColorHandler(e),this.browser.genericColorPicker.show()}}setTrackHeight(e,t){t||(this.track.minHeight&&(e=Math.max(this.track.minHeight,e)),this.track.maxHeight&&(e=Math.min(this.track.maxHeight,e))),this.track.height=e,this.track.config.height=e,this.resizeAxisCanvas(this.axis.clientWidth,this.track.height),"function"==typeof this.track.paintAxis&&this.paintAxis();for(let{$viewport:n}of this.viewports)n.height(e);if(this.sampleNameViewport.viewport.style.height=`${e}px`,"function"!=typeof this.track.computePixelHeight)for(let n of this.viewports)n.setContentHeight(e);this.repaintViews(),!1===ua.has(this.track.type)&&this.updateScrollbar(),this.dragHandle.style.height=`${e}px`,this.gearContainer.style.height=`${e}px`}updateScrollbar(){const e=this.viewports[0].$viewport.height();this.outerScroll.style.height=`${e}px`;const t=fa(this.viewports),n=Math.round(e/t*e);t>e?(this.innerScroll.style.display="block",this.innerScroll.style.height=`${n}px`):this.innerScroll.style.display="none"}moveScroller(e){const t=pt(this.innerScroll).position().top+e,n=Math.min(Math.max(0,t),this.outerScroll.clientHeight-this.innerScroll.clientHeight);pt(this.innerScroll).css("top",`${n}px`);const i=fa(this.viewports),r=-Math.round(n*(i/this.viewports[0].$viewport.height()));for(let s of this.viewports)s.setTop(r);this.sampleNameViewport.trackScrollDelta=e,this.sampleNameViewport.setTop(r)}isLoading(){for(let e of this.viewports)if(e.isLoading())return!0}resize(e){for(let t of this.viewports)t.setWidth(e);this.updateViews(!0)}repaintViews(){for(let e of this.viewports)e.repaint();"function"==typeof this.track.paintAxis&&this.paintAxis(),this.repaintSamples()}repaintSamples(){if("function"==typeof this.track.getSamples){const e=this.track.getSamples();this.sampleNameViewport.repaint(e)}}setTrackLabelName(e){this.viewports.forEach(t=>t.setTrackLabel(e))}async updateViews(e){if(!this.browser||!this.browser.referenceFrameList)return;const t=this.viewports.filter(e=>e.isVisible());t.forEach(e=>e.shift());const n=this.browser.dragObject;if(n)return;const i=this.viewportsToReload(e);for(let r of i)await r.loadFeatures();if("function"==typeof this.track.variantRowCount&&i.length>0){let e=0;for(let t of this.viewports)t.tile&&t.tile.features&&(e=Math.max(e,t.tile.features.reduce((e,t)=>Math.max(e,t.row||0),0)));if(this.track.nVariantRows!==e+1){this.track.variantRowCount(e+1);for(let e of this.viewports)e.checkContentHeight()}}if(!this.disposed){if(this.track.autoscale){let e=[];for(let n of t){const t=n.referenceFrame,i=t.start,r=i+t.toBP(pt(n.contentDiv).width());if(n.tile&&n.tile.features)if("function"==typeof n.tile.features.getMax){const t=n.tile.features.getMax(i,r);e.push({value:t})}else e=e.concat(xs(n.tile.features,i,r))}this.track.dataRange="function"==typeof this.track.doAutoscale?this.track.doAutoscale(e):Xo(e)}if(n||!this.track.autoscale&&!this.track.autoscaleGroup)for(let e of i)e.repaint();else for(let e of t)e.repaint();this.adjustTrackHeight(),this.repaintSamples(),this.updateRulerViewportLabels()}}updateRulerViewportLabels(){const e=this.browser.calculateViewportWidth(this.viewports.length);for(let t of this.viewports)"ruler"===this.track.type&&(this.viewports.length>1?t.presentLocusLabel(e):t.dismissLocusLabel())}async getInViewFeatures(e){if(!this.browser||!this.browser.referenceFrameList)return[];const t=this.viewportsToReload(e).map(function(e){return e.loadFeatures()});await Promise.all(t);let n=[];for(let i of this.viewports)if(i.tile&&i.tile.features){const e=i.referenceFrame,t=e.start,r=t+e.toBP(pt(i.contentDiv).width());if("function"==typeof i.tile.features.getMax){const e=i.tile.features.getMax(t,r);n.push({value:e})}else n=n.concat(xs(i.tile.features,t,r))}return n}checkContentHeight(){for(let e of this.viewports)e.checkContentHeight();this.adjustTrackHeight()}adjustTrackHeight(){var e=fa(this.viewports);if(this.track.autoHeight?this.setTrackHeight(e,!1):this.track.paintAxis&&this.paintAxis(),!1===ua.has(this.track.type)){const e=this.viewports[0].getContentTop(),t=this.viewports.map(e=>e.getContentHeight()),n=Math.min(...t),i=Math.min(0,this.viewports[0].$viewport.height()-n);if(e<i)for(let r of this.viewports)r.$content.css("top",`${i}px`);this.updateScrollbar()}}viewportsToReload(e){return this.viewports.filter(t=>{if(!t.isVisible())return!1;if(t.checkZoomIn()){const n=t.referenceFrame,i=t.referenceFrame.chr,r=n.start,s=r+n.toBP(pt(t.contentDiv).width()),o=n.bpPerPixel;return e||!t.tile||t.tile.invalidate||!t.tile.containsRange(i,r,s,o)}return!1})}createTrackScrollbar(e){const t=ft();if(e.columnContainer.querySelector(".igv-scrollbar-column").appendChild(t),t.style.height=`${this.track.height}px`,this.outerScroll=t,!1===ua.has(this.track.type)){const n=ft();t.appendChild(n),this.innerScroll=n,this.addTrackScrollMouseHandlers(e)}}createTrackDragHandle(e){this.dragHandle=ft({class:"ideogram"===this.track.type||"ruler"===this.track.type?"igv-track-drag-shim":"igv-track-drag-handle"}),e.columnContainer.querySelector(".igv-track-drag-column").appendChild(this.dragHandle),this.dragHandle.style.height=`${this.track.height}px`,this.addTrackDragMouseHandlers(e)}createTrackGearPopup(e){this.gearContainer=ft(),e.columnContainer.querySelector(".igv-gear-menu-column").appendChild(this.gearContainer),this.gearContainer.style.height=`${this.track.height}px`,!0===this.track.ignoreTrackMenu||(this.gear=ft(),this.gearContainer.appendChild(this.gear),this.gear.appendChild(yt("cog")),this.trackGearPopup=new ca(this.gear),this.addTrackGearMouseHandlers())}addAxisEventListener(e){this.boundAxisClickHander=(function(e){this.browser.dataRangeDialog.configure(this),this.browser.dataRangeDialog.present(pt(this.browser.columnContainer))}).bind(this),e.addEventListener("click",this.boundAxisClickHander)}removeAxisEventListener(e){e.removeEventListener("click",this.boundAxisClickHander)}addTrackScrollMouseHandlers(e){this.boundTrackScrollMouseDownHandler=(function(t){t.stopPropagation();const{y:n}=gt(t);pt(this.innerScroll).data("yDown",n.toString()),this.boundColumnContainerMouseMoveHandler=(function(e){e.stopPropagation();const{y:t}=gt(e);this.moveScroller(t-parseInt(pt(this.innerScroll).data("yDown"))),pt(this.innerScroll).data("yDown",t.toString())}).bind(this),e.columnContainer.addEventListener("mousemove",this.boundColumnContainerMouseMoveHandler)}).bind(this),this.innerScroll.addEventListener("mousedown",this.boundTrackScrollMouseDownHandler),this.boundColumnContainerMouseUpHandler=(function(t){e.columnContainer.removeEventListener("mousemove",this.boundColumnContainerMouseMoveHandler)}).bind(this),e.columnContainer.addEventListener("mouseup",this.boundColumnContainerMouseUpHandler)}removeTrackScrollMouseHandlers(){!1===ua.has(this.track.type)&&(this.innerScroll.removeEventListener("mousedown",this.boundTrackScrollMouseDownHandler),this.browser.columnContainer.removeEventListener("mouseup",this.boundColumnContainerMouseUpHandler),this.browser.columnContainer.removeEventListener("mousemove",this.boundColumnContainerMouseMoveHandler))}addTrackDragMouseHandlers(e){if("ideogram"===this.track.type||"ruler"===this.track.type);else{let t;this.boundTrackDragMouseDownHandler=(function(n){n.preventDefault(),t=n.target,t.classList.add("igv-track-drag-handle-hover"),e.startTrackDrag(this)}).bind(this),this.dragHandle.addEventListener("mousedown",this.boundTrackDragMouseDownHandler),this.boundDocumentTrackDragMouseUpHandler=(function(n){e.endTrackDrag(),t&&n.target!==t&&t.classList.remove("igv-track-drag-handle-hover"),t=void 0}).bind(this),document.addEventListener("mouseup",this.boundDocumentTrackDragMouseUpHandler),this.boundTrackDragMouseEnterHandler=(function(n){n.preventDefault(),void 0===t&&n.target.classList.add("igv-track-drag-handle-hover"),e.updateTrackDrag(this)}).bind(this),this.dragHandle.addEventListener("mouseenter",this.boundTrackDragMouseEnterHandler),this.dragHandle.addEventListener("mouseout",e=>{e.preventDefault(),void 0===t&&e.target.classList.remove("igv-track-drag-handle-hover")}),this.boundTrackDragMouseOutHandler=(function(e){e.preventDefault(),void 0===t&&e.target.classList.remove("igv-track-drag-handle-hover")}).bind(this),this.dragHandle.addEventListener("mouseout",this.boundTrackDragMouseOutHandler)}}removeTrackDragMouseHandlers(){"ideogram"===this.track.type||"ruler"===this.track.type||(this.dragHandle.removeEventListener("mousedown",this.boundTrackDragMouseDownHandler),document.removeEventListener("mouseup",this.boundDocumentTrackDragMouseUpHandler),this.dragHandle.removeEventListener("mouseup",this.boundTrackDragMouseEnterHandler),this.dragHandle.removeEventListener("mouseout",this.boundTrackDragMouseOutHandler))}addTrackGearMouseHandlers(){!0===this.track.ignoreTrackMenu||(this.boundTrackGearClickHandler=(function(e){e.preventDefault(),e.stopPropagation(),this.trackGearPopup.presentMenuList(Cs.trackMenuItemList(this))}).bind(this),this.gear.addEventListener("click",this.boundTrackGearClickHandler))}removeTrackGearMouseHandlers(){!0===this.track.ignoreTrackMenu||this.gear.removeEventListener("click",this.boundTrackGearClickHandler)}dispose(){this.removeAxisEventListener(this.axis),this.axis.remove();for(let t of this.viewports)t.dispose();this.sampleNameViewport.dispose(),this.removeTrackScrollMouseHandlers(),this.outerScroll.remove(),this.removeTrackDragMouseHandlers(),this.dragHandle.remove(),this.removeTrackGearMouseHandlers(),this.gearContainer.remove(),"function"==typeof this.track.dispose&&this.track.dispose();const e=this.track;"function"==typeof e.dispose&&e.dispose();for(let t of Object.keys(e))e[t]=void 0;for(let t of Object.keys(this))this[t]=void 0;this.alert&&this.alert.container.remove(),this.disposed=!0}paintAxis(){if("function"==typeof this.track.paintAxis){const{width:e,height:t}=this.axisCanvas.getBoundingClientRect(),n=window.devicePixelRatio||1;this.axisCanvas.height=n*t,this.axisCanvas.width=n*e;const i=this.axisCanvas.getContext("2d");i.scale(n,n),this.track.paintAxis(i,e,t)}}}function fa(e){const t=e.map(e=>e.getContentHeight());return Math.max(...t)}function ma(e,t){if(e.length<6)console.log("Skipping line: "+e.join(" "));else{var n={chr1:e[0],start1:Number.parseInt(e[1]),end1:Number.parseInt(e[2]),chr2:e[3],start2:Number.parseInt(e[4]),end2:Number.parseInt(e[5])};if(!(isNaN(n.start1)||isNaN(n.end1)||isNaN(n.start2)||isNaN(n.end2))){if(e.length>6&&"."!==e[6]&&(n.name=e[6]),e.length>7&&"."!==e[7]&&(n.score=parseFloat(e[7])),e.length>8&&"."!==e[8]&&(n.strand1=e[8]),e.length>9&&"."!==e[9]&&(n.strand2=e[9]),t){const i=t.colorColumn;i&&i<e.length&&(n.color=Gr.createColorString(e[i]));const r=t.thicknessColumn;r&&r<e.length&&(n.thickness=e[r]),e.length>10&&t.columnNames&&t.columnNames.length===e.length&&(n.extras=e.slice(10))}return n.chr1===n.chr2&&(n.chr=n.chr1,n.start=Math.min(n.start1,n.start2),n.end=Math.max(n.end1,n.end2)),n}}}function ga(e,t){if(!(e.length<8))return{chr:e[0],start:Number.parseInt(e[1]),end:Number.parseInt(e[2]),color:Gr.createColorString(e[6]),value:Number.parseFloat(e[7])}}function va(e,t){if(!(e.length<6))return{chr:e[0],start:e[1],end:e[2],chr1:e[8],start1:Number.parseInt(e[9]),end1:Number.parseInt(e[10]),chr2:e[13],start2:Number.parseInt(e[14]),end2:Number.parseInt(e[15]),name:e[3],score:Number.parseFloat(e[4]),value:Number.parseFloat(e[5]),color:"."===e[7]?void 0:"0"===e[7]?"rgb(0,0,0)":e[7]};console.log("Skipping line: "+e.join(" "))}const ba=new Set(["transcript","primary_transcript","processed_transcript","mRNA","mrna","lnc_RNA","miRNA","ncRNA","rRNA","scRNA","snRNA","snoRNA","tRNA"]),ya=new Set(["CDS","cds"]),_a=new Set(["start_codon","stop_codon"]),wa=new Set(["5UTR","3UTR","UTR","five_prime_UTR","three_prime_UTR","3'-UTR","5'-UTR"]),xa=new Set(["exon","coding-exon"]),Sa=new Set;for(let ed of[ya,_a,wa,xa])for(let e of ed)Sa.add(e);function Ca(e){return e.includes("intron")}function ka(e){return ya.has(e)||_a.has(e)}function Ea(e){return wa.has(e)}function Aa(e){return ba.has(e)||e.endsWith("RNA")||e.endsWith("transcript")}function Ra(e){return Sa.has(e)||e.endsWith("RNA")||Ca(e)}const Ta=new Set(["id","parent","name"]);class Ia{constructor(e){Object.assign(this,e)}popupData(e){const t=this.geneObject?this.geneObject.popupData():[];if(this.geneObject&&t.push("<hr/>"),this.name&&t.push({name:"Name",value:this.name}),t.push({name:"Type",value:this.type}),t.push({name:"Source",value:this.source}),this.attributeString){const e=La(this.attributeString,this.delim);for(let[n,i]of e)void 0!==i&&i.length>0&&!Ta.has(n.toLowerCase())&&t.push({name:n+":",value:i})}return t.push({name:"Location",value:`${this.chr}:${St(this.start+1)}-${St(this.end)}`}),t}getAttributeValue(e){if(this.hasOwnProperty(e))return this[e];if(this._attributeCache||(this._attributeCache=new Map),this._attributeCache.has(e))return this._attributeCache.get(e);{const t=La(this.attributeString,this.delim);let n;for(let[i,r]of t)if(i===e){n=r;break}return this._attributeCache.set(e,n),n}}}class Da extends Ia{constructor(e){super(e),this.exons=[],this.parts=[]}addExon(e){this.exons.push(e),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)}addPart(e){this.parts.push(e)}assembleParts(){if(0===this.parts.length)return;this.parts.sort(function(e,t){return e.start-t.start});let e=this.parts[0].start,t=this.parts[0].end;for(let n=1;n<this.parts.length;n++){const i=this.parts[n];Ca(i.type)||(i.start<=t?t=Math.max(t,i.end):(this.findExonContaining({start:e,end:t})||this.exons.push({start:e,end:t,psuedo:!0}),e=i.start,t=i.end))}this.findExonContaining({start:e,end:t})||(this.exons.push({start:e,end:t,psuedo:!0}),this.start=Math.min(this.start,e),this.end=Math.max(this.end,t));for(let n of this.parts){const e=n.type;ka(e)?this.addCDS(n):Ea(e)&&this.addUTR(n)}}findExonContaining({start:e,end:t}){for(let n of this.exons)if(n.end>=t&&n.start<=e)return n}addCDS(e){let t;const n=this.exons;for(let i of n)if(i.start<=e.start&&i.end>=e.end){t=i;break}t?(t.cdStart=t.cdStart?Math.min(e.start,t.cdStart):e.start,t.cdEnd=t.cdEnd?Math.max(e.end,t.cdEnd):e.end):console.error("No exon found spanning "+e.start+"-"+e.end),this.cdStart=this.cdStart?Math.min(e.start,this.cdStart):e.start,this.cdEnd=this.cdEnd?Math.max(e.end,this.cdEnd):e.end}addUTR(e){let t;const n=this.exons;for(let i=0;i<n.length;i++)if(n[i].start<=e.start&&n[i].end>=e.end){t=n[i];break}t?e.start===t.start&&e.end===t.end?t.utr=!0:(e.end<t.end&&(t.cdStart=e.end),e.start>t.start&&(t.cdEnd=e.start)):console.error("No exon found spanning "+cds.start+"-"+cds.end)}finish(){this.assembleParts();var e=this.cdStart,t=this.cdEnd;this.exons.sort(function(e,t){return e.start-t.start}),e&&this.exons.forEach(function(n){(n.end<e||n.start>t)&&(n.utr=!0)})}popupData(e){const t=super.popupData(e);for(let n of this.exons)if(!n.pseudo&&e>=n.start&&e<n.end&&"function"==typeof n.popupData){t.push("<hr/>");const i=n.popupData(e);for(let e of i)t.push(e)}for(let n of this.parts)if(e>=n.start&&e<n.end&&"function"==typeof n.popupData){t.push("<hr/>");const i=n.popupData(e);for(let e of i)t.push(e)}return t}}function Oa(e,t){if(e.length<9)return;const n="gff3"===t.format?"=":" ";return new Ia({source:e[1],type:e[2],chr:e[0],start:parseInt(e[3])-1,end:parseInt(e[4]),score:"."===e[5]?0:parseFloat(e[5]),strand:e[6],phase:"."===e[7]?0:parseInt(e[7]),attributeString:e[8],delim:n})}function Pa(e,t){const n=Oa(e,t);if(!n)return;const i=La(n.attributeString,n.delim);for(let[r,s]of i){const e=r.toLowerCase();"color"===e||"colour"===e?n.color=Gr.createColorString(s):"ID"===r?n.id=s:"Parent"===r&&(n.parent=s)}return n}function Ma(e,t){const n=Oa(e,t);if(!n)return;const i=La(n.attributeString,n.delim);let r,s;switch(n.type){case"gene":r="gene_id";break;case"transcript":r="transcript_id",s="gene_id";break;default:s="transcript_id"}for(let[o,a]of i){const e=o.toLowerCase();"color"===e||"colour"===e?n.color=Gr.createColorString(a):o===r?n.id=a:o===s&&(n.parent=a)}return n}function La(e,t){var n=[];for(let i of e.split(";")){i=i.trim();const e=i.indexOf(t);if(e>0&&e<i.length-1){const t=i.substring(0,e);let r=Fa(decodeURIComponent(i.substring(e+1).trim()));n.push([t,r])}}return n}function Fa(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.substr(1,e.length-2)),e}class Na{constructor(e){this.message=e}}function za(e,t){if(e.length<3)return;const n=e[0],i=parseInt(e[1]),r=e.length>2?parseInt(e[2]):i+1;if(isNaN(i)||isNaN(r))return new Na("Unparsable bed record.");const s=new Ya({chr:n,start:i,end:r,score:1e3});try{if(e.length>3){if(e[3].indexOf(";")>0&&e[3].indexOf("=")>0){const t=La(e[3],"=");s.attributes={};for(let e of t)s.attributes[e[0]]=e[1]}s.name||(s.name="."===e[3]?"":e[3])}if(e.length>4&&(s.score="."===e[4]?0:parseFloat(e[4]),isNaN(s.score)))return s;if(e.length>5&&(s.strand=e[5],"."!==s.strand&&"+"!==s.strand&&"-"!==s.strand))return s;if(e.length>6&&(s.cdStart=parseInt(e[6]),isNaN(s.cdStart)))return s;if(e.length>7&&(s.cdEnd=parseInt(e[7]),isNaN(s.cdEnd)))return s;if(e.length>8&&"."!==e[8]&&"0"!==e[8]&&(s.color=Gr.createColorString(e[8])),e.length>11){const t=parseInt(e[9]);if(t>1e3)return s;const n=e[10].replace(/,$/,"").split(","),r=e[11].replace(/,$/,"").split(",");if(n.length!==r.length||t!==n.length)return s;const o=[];for(let e=0;e<t;e++){const t=i+parseInt(r[e]),s=t+parseInt(n[e]);o.push({start:t,end:s})}qa(o,s.cdStart,s.cdEnd),s.exons=o}if(t){let n=t.thicknessColumn,i=t.colorColumn;i&&i<e.length&&(s.color=Gr.createColorString(e[i])),n&&n<e.length&&(s.thickness=e[n])}}catch(o){}return s}function Va(e,t){if(!(e.length<=15))return{swScore:Number.parseInt(e[1]),milliDiv:Number.parseInt(e[2]),milliDel:Number.parseInt(e[3]),milliIns:Number.parseInt(e[4]),chr:e[5],start:Number.parseInt(e[6]),end:Number.parseInt(e[7]),strand:e[9],repName:e[10],repClass:e[11],repFamily:e[12],repStart:Number.parseInt(e[13]),repEnd:Number.parseInt(e[14]),repLeft:Number.parseInt(e[15])}}function ja(e,t){var n=void 0===t.shift?0:1;if(e.length<=9+n)return;const i=parseInt(e[5+n]),r=parseInt(e[6+n]);var s={name:e[0+n],chr:e[1+n],strand:e[2+n],start:parseInt(e[3+n]),end:parseInt(e[4+n]),cdStart:i,cdEnd:r,id:e[0+n]},o=parseInt(e[7+n]),a=e[8+n].split(","),l=e[9+n].split(","),c=[];for(let h=0;h<o;h++){const e=parseInt(a[h]),t=parseInt(l[h]);c.push({start:e,end:t})}return qa(c,i,r),s.exons=c,s}function Ba(e,t){var n=void 0===t.shift?0:1;if(e.length<=11+n)return;const i=parseInt(e[5+n]),r=parseInt(e[6+n]),s={name:e[11+n],chr:e[1+n],strand:e[2+n],start:parseInt(e[3+n]),end:parseInt(e[4+n]),cdStart:i,cdEnd:r,id:e[0+n]},o=parseInt(e[7+n]),a=e[8+n].split(","),l=e[9+n].split(","),c=[];for(let h=0;h<o;h++){const e=parseInt(a[h]),t=parseInt(l[h]);c.push({start:e,end:t})}return qa(c,i,r),s.exons=c,s}function Ha(e,t){var n=void 0===t.shift?0:1;if(e.length<=10+n)return;const i=parseInt(e[6+n]),r=parseInt(e[7+n]);var s={name:e[0+n],id:e[1+n],chr:e[2+n],strand:e[3+n],start:parseInt(e[4+n]),end:parseInt(e[5+n]),cdStart:i,cdEnd:r},o=parseInt(e[8+n]),a=e[9+n].split(","),l=e[10+n].split(","),c=[];for(let h=0;h<o;h++){const e=parseInt(a[h]),t=parseInt(l[h]);c.push({start:e,end:t})}return qa(c,i,r),s.exons=c,s}function qa(e,t,n){for(let i of e){const e=i.end,r=i.start;e<t||r>n?i.utr=!0:(t>=r&&t<=e&&(i.cdStart=t),n>=r&&n<=e&&(i.cdEnd=n))}}function $a(e,t){var n,i,r,s,o,a,l;if(!(e.length<9))return n=e[0],i=parseInt(e[1]),r=parseInt(e[2]),o=e[3],a=parseFloat(e[4]),s=e[5].trim(),l=parseFloat(e[6]),0===a&&(a=l),{chr:n,start:i,end:r,name:o,score:a,strand:s,signal:l,pValue:parseFloat(e[7]),qValue:parseFloat(e[8])}}function Ua(e,t){if(e.length<=3)return;const n={chr:e[0],start:parseInt(e[1]),end:parseInt(e[2]),value:parseFloat(e[3])};if(t){let i=t.colorColumn;i&&i<e.length&&(n.color=Gr.createColorString(e[i]))}return n}function Wa(e,t){const n=t.wig;if(n&&"fixedStep"===n.format){const t=n.index*n.step+n.start,i=t+n.span,r=parseFloat(e[0]);return++n.index,isNaN(r)?null:{chr:n.chrom,start:t,end:i,value:r}}if(n&&"variableStep"===n.format){if(e.length<2)return null;const t=parseInt(e[0],10)-1,i=t+n.span,r=parseFloat(e[1]);return isNaN(r)?null:{chr:n.chrom,start:t,end:i,value:r}}return Ua(e)}function Ga(e,t){if(e.length<6)return;const n=["bin","chr","start","end","name","score","strand","refNCBI","refUCSC","observed","molType","class","valid","avHet","avHetSE","func","locType","weight","exceptions","submitterCount","submitters","alleleFreqCount","alleles","alleleNs","alleleFreqs","bitfields"],i={chr:e[1],start:Number.parseInt(e[2]),end:Number.parseInt(e[3]),name:e[4],score:Number.parseInt(e[5])},r=Math.min(e.length,n.length);for(let s=6;s<r;s++)i[n[s]]=e[s];return i}class Ya{constructor(e){Object.assign(this,e)}getAttributeValue(e){return this.hasOwnProperty(e)?this[e]:this.attributes?this.attributes[e]:void 0}}function Za(e,t){if(!(e.length<7)){var n=e[0],i=e[1],r=parseInt(e[2]),s=parseInt(e[3]),o=parseInt(e[4]),a=parseInt(e[5]),l={chr:n,name:i,junction_left:r,junction_right:s,num_junction_reads:o,num_spanning_frags:a,spanning_frag_coords:[],start:-1,end:-1},c=r,h=s;if(a>0)for(var u=e[6].split(","),d=0;d<u.length;d++){var p=u[d].split("-"),f=p[0],m=p[1];f<c&&(c=f),m>h&&(h=m),l.spanning_frag_coords.push({left:f,right:m})}return l.start=c,l.end=h,l}}function Xa(e,t){if(e.length<7)return null;const n={chr:e[0],start:parseInt(e[1])-1,end:parseInt(e[2]),"Strongest SNP-risk allele":e[3],"Disease/Phenotype":e[4],"P-value":e[5],"Odds ratio or beta":e[6]};return e.length>6&&(n.PUBMEDID=`<a target = "blank" href = "https://www.ncbi.nlm.nih.gov/pubmed/${e[7]}">${e[7]}</a>`),n}function Ka(e,t){const n=t.customFormat;if(e.length<n.fields.length)return;const i=n.coords||0,r=e[n.chr],s=parseInt(e[n.start])-i,o={chr:r,start:s,end:void 0!==n.end?parseInt(e[n.end]):s+1};return n.fields&&n.fields.forEach(function(t,i){i!==n.chr&&i!==n.start&&i!==n.end&&(o[t]=e[i])}),o}function Qa(e,t){const n=t.columnNames;if(!n)throw Error("Sample names are not defined.   Missing column headers?");const i=n.length-3,r=e[0],s=parseInt(e[1]),o=parseInt(e[2]),a=e.slice(3).map(parseFloat);return a.length==i?{chr:r,start:s,end:o,values:a}:void console.warn(`${r}:${s}-${o} row contains ${a.length} sample columns instead of the expected ${i} columns. Skipping...`)}class Ja{constructor(e){this.config=e,this.header={},e.nameField&&(this.header.nameField=e.nameField),this.skipRows=0,e.decode?(this.decode=e.decode,this.delimiter=e.delimiter||"\t"):e.format&&(this.header.format=e.format.toLowerCase(),this.setDecoder(this.header.format)),this.delimiter||(this.delimiter="\t")}async parseHeader(e){let t,n,i=this.header;for(;void 0!==(n=await e.nextLine());)if(n.startsWith("track")||n.startsWith("#track")){let e=el(n);Object.assign(i,e)}else if(n.startsWith("browser"));else if(n.startsWith("#columns")){let e=tl(n);Object.assign(i,e)}else if(n.startsWith("##gff-version 3"))i.format="gff3";else if(n.startsWith("#gffTags"))i.gffTags=!0;else{if(n.startsWith("fixedStep")||n.startsWith("variableStep"))break;if(n.startsWith("#")){const e=n.split(this.delimiter||"\t");e.length>1&&(t=e)}else{this.setDecoder(i.format);const e=n.split(this.delimiter||"\t");try{const n=Object.assign({columnNames:t},i);if(this.decode(e,n))break;e.length>1&&(t=e)}catch(r){e.length>1&&(t=e)}}}if(t){i.columnNames=t;for(let e=0;e<t.length;e++)"color"===t[e]||"colour"===t[e]?i.colorColumn=e:"thickness"===t[e]&&(i.thicknessColumn=e)}return this.header=i,i}async parseFeatures(e){const t=[],n=this.decode,i=this.header.format,r=this.delimiter||"\t";let s,o=0,a=0;for(;void 0!==(s=await e.nextLine());){if(o++,o<=this.skipRows)continue;if(!s||s.startsWith("track")||s.startsWith("#")||s.startsWith("browser"))continue;if("wig"===i&&s.startsWith("fixedStep")){this.header.wig=nl(s);continue}if("wig"===i&&s.startsWith("variableStep")){this.header.wig=il(s);continue}const e=s.split(r);if(e.length<1)continue;const l=n(e,this.header);l instanceof Na?(a++,a>0&&console.error(`Error parsing line '${s}': ${l.message}`)):l&&t.push(l)}return n===ma&&function(e){if(0==e.length)return;const t=e[0];if(void 0===t.score&&void 0!==t.name){for(let t of e)if(!("number"==typeof(n=t.name)?n-n==0:"string"==typeof n&&""!==n.trim()&&(Number.isFinite?Number.isFinite(+n):isFinite(+n)))&&"."!==t.name)return;for(let t of e)t.score=parseFloat(t.name),delete t.name}var n;const i=e.filter(e=>e.chr1!==e.chr2);for(let r of i){const t=Object.assign({},r);t.dup=!0,e.push(t),r.chr=r.chr1,r.start=r.start1,r.end=r.end1,t.chr=t.chr2,t.start=t.start2,t.end=t.end2}}(t),t}setDecoder(e){switch(e){case"narrowpeak":case"broadpeak":case"regionpeak":case"peaks":this.decode=$a,this.delimiter=this.config.delimiter||/\s+/;break;case"bedgraph":this.decode=Ua,this.delimiter=/\s+/;break;case"wig":this.decode=Wa,this.delimiter=this.config.delimiter||/\s+/;break;case"gff3":case"gff":this.decode=Pa,this.delimiter="\t";break;case"gtf":this.decode=Ma,this.delimiter="\t";break;case"fusionjuncspan":this.decode=Za,this.delimiter=this.config.delimiter||/\s+/;break;case"gtexgwas":this.skipRows=1,this.decode=Xa,this.delimiter="\t";break;case"refflat":this.decode=Ha,this.delimiter=this.config.delimiter||/\s+/;break;case"genepred":this.decode=ja,this.delimiter=this.config.delimiter||/\s+/;break;case"genepredext":this.decode=Ba,this.delimiter=this.config.delimiter||/\s+/;break;case"ensgene":this.decode=ja,this.header.shift=1,this.delimiter=this.config.delimiter||/\s+/;break;case"refgene":this.decode=Ba,this.delimiter=this.config.delimiter||/\s+/,this.header.shift=1;break;case"bed":this.decode=za,this.delimiter=this.config.delimiter||/\s+/;break;case"bedpe":this.decode=ma,this.delimiter=this.config.delimiter||"\t";break;case"bedpe-domain":this.decode=ga,this.headerLine=!0,this.delimiter=this.config.delimiter||"\t";break;case"bedpe-loop":this.decode=ma,this.delimiter=this.config.delimiter||"\t",this.header={colorColumn:7};break;case"interact":this.decode=va,this.delimiter=this.config.delimiter||/\s+/;break;case"snp":this.decode=Ga,this.delimiter="\t";break;case"rmsk":this.decode=Va,this.delimiter="\t";break;case"gcnv":this.decode=Qa,this.delimiter="\t";break;default:const n=(t=e,Js&&Js[t]?function(e){const t=e.fields,n=["chr","start","end"];for(let i=0;i<t.length;i++)for(let r of n)r===t[i]&&(e[r]=i);return e}(Js[t]):void 0);void 0!==n?(this.decode=Ka,this.header.customFormat=n,this.delimiter=n.delimiter||"\t"):(this.decode=za,this.delimiter=this.config.delimiter||/\s+/)}var t}}function el(e){const t={},n=e.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g);let i;const r=[];for(let o of n)o&&0!==o.trim().length&&(o.endsWith("=")?i=o:i?(r.push(i+o),i=void 0):r.push(o));for(let o of r){if(!o)return;var s=o.split("=",2);if(2===s.length){const e=s[0].trim(),n=s[1].trim();if(t.hasOwnProperty(e)){let i=t[e];Array.isArray(i)?i.push(n):t[e]=[i,n]}else t[e]=n}}return"interact"==t.type?t.format="interact":"gcnv"===t.type&&(t.format="gcnv"),t}function tl(e){let t={},n=e.split(/\s+/);return 2===n.length&&n[1].split(";").forEach(function(e){let n=e.split("=");"color"===n[0]?t.colorColumn=Number.parseInt(n[1])-1:"thickness"===n[0]&&(t.thicknessColumn=Number.parseInt(n[1])-1)}),t}function nl(e){const t=e.split(/\s+/);return{format:"fixedStep",chrom:t[1].split("=")[1],start:parseInt(t[2].split("=")[1],10)-1,step:parseInt(t[3].split("=")[1],10),span:t.length>4?parseInt(t[4].split("=")[1],10):1,index:0}}function il(e){const t=e.split(/\s+/);return{format:"variableStep",chrom:t[1].split("=")[1],span:t.length>2?parseInt(t[2].split("=")[1],10):1}}class rl{constructor(e){switch(this.type=e||"seg",this.type){case"mut":this.sampleColumn=3,this.chrColumn=0,this.startColumn=1,this.endColumn=2,this.dataColumn=4;break;case"maf":this.sampleColumn=15,this.chrColumn=4,this.startColumn=5,this.endColumn=6,this.dataColumn=8;break;default:this.sampleColumn=0,this.chrColumn=1,this.startColumn=2,this.endColumn=3}}async parseHeader(e){let t;for(;void 0!==(t=await e.nextLine());)if(!t.startsWith("#")){const e=t.split("\t");this.header={headings:e};break}return this.header}async parseFeatures(e){const t=[];let n;this.header||(this.header=await this.parseHeader(e)),"seg"===this.type&&(this.dataColumn=this.header.headings.length-1),this.header.headings.length>5&&(n=this.extractExtraColumns(this.header.headings));const i=this.header.headings[this.dataColumn];let r;for(;void 0!==(r=await e.nextLine());){const e=r.split("\t"),s="seg"===this.type?parseFloat(e[this.dataColumn]):e[this.dataColumn];if(e.length>this.dataColumn){const r=new sl({sample:e[this.sampleColumn],chr:e[this.chrColumn],start:parseInt(e[this.startColumn])-1,end:parseInt(e[this.endColumn]),value:s,valueColumnName:i});if(n){const t=this.extractExtraColumns(e);r.setAttributes({names:n,values:t})}t.push(r)}}return t}extractExtraColumns(e){const t=[];for(let n=0;n<e.length;n++)n!==this.chrColumn&&n!==this.startColumn&&n!==this.endColumn&&n!==this.sampleColumn&&t.push(e[n]);return t}}class sl{constructor({sample:e,chr:t,start:n,end:i,value:r,valueColumnName:s}){this.sample=e,this.chr=t,this.start=n,this.end=i,this.value=r,this.valueColumnName=s}setAttributes({names:e,values:t}){this.attributeNames=e,this.attributeValues=t}getAttribute(e){if(this.attributeNames){const t=this.attributeNames.indexOf(e);if(t>=0)return this.attributeValues[t]}}popupData(){const e=new Set(["chr","start","end","sample","value","row","color","sampleKey","uniqueSampleKey","sampleId","chromosome","uniquePatientKey"]),t=this.chr+":"+St(this.start+1)+"-"+St(this.end),n=[{name:"Sample",value:this.sample},{name:"Location",value:t},{name:this.valueColumnName?Et(this.valueColumnName):"Value",value:this.value}];if(this.attributeNames&&this.attributeNames.length>0)for(let i=0;i<this.attributeNames.length;i++)!e.has(this.attributeNames[i])&this.valueColumnName!==this.attributeNames[i]&&n.push({name:Et(this.attributeNames[i]),value:this.attributeValues[i]});return n}}class ol{constructor(e,t){this.browser=t,this.init(e)}init(e){e.displayMode&&(e.displayMode=e.displayMode.toUpperCase()),this.config=e,this.url=e.url,this.type=e.type,this.description=e.description,this.supportHiDPI=void 0===e.supportHiDPI||e.supportHiDPI,e.name||e.label?this.name=e.name||e.label:jt(e.url)?this.name=e.url.name:xt(e.url)&&!e.url.startsWith("data:")&&(this.name=Vt(e.url)),this.id=void 0===this.config.id?this.name:this.config.id,this.order=e.order,this.color=e.color,this.altColor=e.altColor,this.defaultColor="civic-ws"===e.sourceType?"rgb(155,20,20)":"rgb(0,0,150)",this.autoscaleGroup=e.autoscaleGroup,this.removable=void 0===e.removable||e.removable,this.height=e.height||100,this.autoHeight=e.autoHeight,this.minHeight=e.minHeight||Math.min(25,this.height),this.maxHeight=e.maxHeight||Math.max(1e3,this.height),this.visibilityWindow=e.visibilityWindow,this.trackView=void 0}get name(){return this._name}set name(e){this._name=e,this.trackView&&this.trackView.setTrackLabelName(e)}updateConfig(e){this.init(e)}getState(){const e={};for(let t of Object.keys(this.config))t.startsWith("_")||"function"==typeof this.config[t]||(e[t]=this.config[t]);for(let t of Object.keys(e)){if(t.startsWith("_"))continue;const n=this[t];n&&(Yo(n)||"boolean"==typeof n)&&(e[t]=n)}this.color&&(e.color=this.color),this.altColor&&(e.altColor=this.altColor),!this.autoscale&&this.dataRange&&(e.min=this.dataRange.min,e.max=this.dataRange.max);for(let t of Object.keys(e)){if("function"==typeof e[t])throw Error(`Property '${t}' of track '${this.name} is a function. Functions cannot be saved in sessions.`);if(jt(e[t]))throw Error(`Track ${this.name} is a local file. Sessions cannot be saved with local file references.`);if(e[t]instanceof Promise)throw Error(`Property '${t}' of track '${this.name} is a Promise. Promises cannot be saved in sessions.`)}return e}supportsWholeGenome(){return!1}hasSamples(){return!1}getGenomeId(){return this.browser.genome?this.browser.genome.id:void 0}setTrackProperties(e){const t={};let n;for(let r of Object.keys(e))switch(r.toLowerCase()){case"usescore":t.useScore=1===e[r]||"1"===e[r]||"on"===e[r]||!0===e[r];break;case"visibility":switch(e[r]){case"2":case"3":case"pack":case"full":t.displayMode="EXPANDED";break;case"4":case"squish":t.displayMode="SQUISHED";break;case"1":case"dense":t.displayMode="COLLAPSED"}break;case"color":case"altcolor":t[r]=e[r].startsWith("rgb(")?e[r]:"rgb("+e[r]+")";break;case"featurevisiblitywindow":case"visibilitywindow":t.visibilityWindow=Number.parseInt(e[r]);break;case"maxheightpixels":n=e[r].split(":"),3===n.length&&(t.minHeight=Number.parseInt(n[2]),t.height=Number.parseInt(n[1]),t.maxHeight=Number.parseInt(n[0]));break;case"viewlimits":if(!this.config.autoscale){n=e[r].split(":");let i,s=0;1==n.length?i=Number.parseFloat(n[0]):2==n.length&&(s=Number.parseFloat(n[0]),i=Number.parseFloat(n[1])),t.autoscale=!1,t.dataRange={min:s,max:i}}case"name":t[r]=e[r];break;case"url":t.infoURL=e[r];break;case"type":const i=e[r];al.has(i)&&(t[r]=al.get(i));break;case"graphtype":t.graphType=e[r];break;default:t[r]=e[r]}for(let r of Object.keys(t))if((!this.config.hasOwnProperty(r)||"name"===r&&this.config._derivedName)&&(this[r]=t[r],"height"===r&&this.trackView))try{const e=Number.parseInt(t[r]);this.trackView.setTrackHeight(e)}catch(i){console.error(i)}}getVisibilityWindow(){return this.visibilityWindow}clickedFeatures(e,t){if(t||(t=e.viewport.getCachedFeatures()),!t||0===t.length)return[];const n=e.genomicLocation,i=e.referenceFrame.bpPerPixel>.2?3*e.referenceFrame.bpPerPixel:.2;return xs(t,n-i,n+i)}extractPopupData(e,t){const n=new Set(["row","color","chr","start","end","cdStart","cdEnd","strand","alpha"]),i=[];let r,s;for(let a in e)if(e.hasOwnProperty(a)&&!n.has(a)&&Yo(e[a])){let t=e[a];i.push({name:Et(a),value:t}),"alleles"===a?r=e[a]:"alleleFreqs"===a&&(s=e[a])}if(r&&s){r.endsWith(",")&&(r=r.substr(0,r.length-1)),s.endsWith(",")&&(s=s.substr(0,s.length-1));let n=r.split(","),o=s.split(",");if(o.length>1){let r=[];for(let e=0;e<o.length;e++)r.push({a:n[e],af:Number.parseFloat(o[e])});r.sort(function(e,t){return e.af-t.af});let s=r[r.length-1].a;if(1===s.length)for(let n=r.length-2;n>=0;n--){let o=r[n].a;if(1===o.length){t||(t=this.getGenomeId());const n=ol.getCravatLink(e.chr,e.start+1,s,o,t);console.log(n),n&&(i.push("<hr/>"),i.push({html:n}),i.push("<hr/>"))}}}}if(e.attributes)for(let a of Object.keys(e.attributes))i.push({name:a,value:e.attributes[a]});let o=`${e.chr}:${St(e.start+1)}-${St(e.end)}`;return e.strand&&(o+=` (${e.strand})`),i.push({name:"Location",value:o}),i}static getCravatLink(e,t,n,i,r){if("hg38"===r||"GRCh38"===r)return`<a target="_blank" href="https://run.opencravat.org/result/nocache/variant.html?chrom=${e.startsWith("chr")?e:"chr"+e}&pos=${t}&ref_base=${n}&alt_base=${i}">Cravat ${n}->${i}</a>`}}const al=new Map([["wiggle_0","wig"],["bed","bed"],["bigBed","bigBed"],["bigWig","bigWig"]]),ll=new Set(["A","C","T","G"].map(e=>e.charCodeAt(0)));function cl(e){return new hl(e)}class hl{constructor(e){var t,n;this.chr=e[0],this.pos=parseInt(e[1]),this.names=e[2],this.referenceBases=e[3],this.alternateBases=e[4],this.quality=e[5],this.filter=e[6],this.info=(n={},(t=e[7])&&t.split(";").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n),this.init()}init(){const e=this.referenceBases,t=this.alternateBases;if(this.info&&(this.info.VT?this.type=this.info.VT:this.info.SVTYPE?this.type="SV":this.info.PERIOD&&(this.type="STR")),void 0===this.type&&(this.type=function(e,t){const n=e.length;if(void 0===t)return"UNKNOWN";if(0===t.trim().length||"<NON_REF>"===t||"<*>"===t||"."===t)return"NONVARIANT";{const e=t.split(",").map(function(e){return 1===n&&1===e.length?"SNP":"<NON_REF>"===e?"NONVARIANT":"OTHER"});let i=e[0];for(let t of e)if(t!==i)return"MIXED";return i}}(e,t)),"NONVARIANT"===this.type&&(this.heterozygosity=0),this.info.END)this.start=this.pos-1,this.end=this.info.CHR2&&this.info.CHR2!==this.chr?this.start+1:Number.parseInt(this.info.END);else if("NONVARIANT"===this.type)this.start=this.pos-1,this.end=this.start+e.length;else{const n=t.split(",").filter(e=>e.length>0);this.alleles=[],this.start=void 0,this.end=void 0;for(let t of n)if(this.alleles.push(t),"SV"!==this.type&&ul(t)){let n=t.length,i=e.length;const r=Math.min(n,i);let s=0;for(;s<r&&e.charCodeAt(s)===t.charCodeAt(s);)s++,n--,i--;for(;n>0&&i>0;){const r=s+i-1;if(t.charCodeAt(s+n-1)!==e.charCodeAt(r))break;n--,i--}for(;n>0&&i>0;){const r=s;if(t.charCodeAt(s)!==e.charCodeAt(r))break;s++,n--,i--}const o=this.pos+s-1,a=o+i;this.start=void 0===this.start?o:Math.min(this.start,o),this.end=void 0===this.end?a:Math.max(this.end,a)}void 0===this.start&&(this.start=this.pos-1,this.end=this.pos)}}popupData(e,t){const n=`${St(this.pos)}`,i=this.start===this.end?`${St(this.start)} | ${St(this.start+1)}`:`${St(this.start+1)}-${St(this.end)}`,r=[{name:"Chr",value:this.chr},{name:"Pos",value:n},{name:"Loc",value:i},{name:"Names",value:this.names?this.names:""},{name:"Ref",value:this.referenceBases},{name:"Alt",value:this.alternateBases.replace("<","&lt;")},{name:"Qual",value:this.quality},{name:"Filter",value:this.filter}];if("SNP"===this.type){let e=this.referenceBases;if(1===e.length){let n=this.alternateBases.split(",");for(let i of n)if(1===i.length){let n=ol.getCravatLink(this.chr,this.pos,e,i,t);n&&(r.push("<hr/>"),r.push({html:n}))}}}if(this.hasOwnProperty("heterozygosity")&&r.push({name:"Heterozygosity",value:this.heterozygosity}),this.info){r.push({html:'<hr style="border-top: dotted 1px;border-color: #c9c3ba" />'});for(let e of Object.keys(this.info))r.push({name:e,value:dl(decodeURIComponent(this.info[e]))})}return r}isRefBlock(){return"NONVARIANT"===this.type}}function ul(e){for(let t=0;t<e.length;t++)if(!ll.has(e.charCodeAt(t)))return!1;return!0}function dl(e,t){return void 0===t&&(t=","),Array.isArray(e)?e.join(t):e}class pl{construtor(){}async parseHeader(e,t){const n={};n.chrAliasTable=new Map;let i=await e.nextLine();if(!i.startsWith("##fileformat"))throw new Error("Invalid VCF file: missing fileformat line");for(n.version=i.substr(13);void 0!==(i=await e.nextLine())&&i.startsWith("#");){let e;const s={};if(i.startsWith("##")){if(i.startsWith("##INFO")||i.startsWith("##FILTER")||i.startsWith("##FORMAT")){const t=i.indexOf("<"),o=i.lastIndexOf(">");if(!(t>2&&o>0)){console.log("Malformed VCF header line: "+i);continue}const a=i.substring(2,t-1);n[a]||(n[a]={});const l=kt(i.substring(t+1,o-1),",");for(let n of l){var r=n.split("=");r.length>1&&("ID"===r[0]?e=r[1]:s[r[0]]=r[1])}e&&(n[a][e]=s)}else if(i.startsWith("##contig")&&t){const e=i.indexOf("<ID=");let r=i.indexOf(",",e);-1==r&&(r=i.indexOf(">",e));const s=i.substring(e+4,r),o=t.getChromosomeName(s);n.chrAliasTable.set(o,s)}}else if(i.startsWith("#CHROM")){const e=i.split("\t");if(e.length>8){n.callSets=[];for(let t=9;t<e.length;t++)n.callSets.push({id:t,name:e[t]})}}}return this.header=n,n}async parseFeatures(e){const t=[],n=this.header.callSets,i=8+(n?n.length+1:0);let r;for(;void 0!==(r=await e.nextLine());)if(r&&!r.startsWith("#")){const e=r.split("\t");if(e.length===i){const i=cl(e);if(i.header=this.header,t.push(i),e.length>9){const t=fl(e[8].split(":"));i.calls={};for(let r=9;r<e.length;r++){const s=e[r],o=n[r-9],a={callSetName:o.name,info:{}};i.calls[o.id]=a,s.split(":").forEach(function(e,n){switch(n){case t.genotypeIndex:a.genotype=[],e.split(/[\|\/]/).forEach(function(e){a.genotype.push("."===e?e:parseInt(e))});break;default:a.info[t.fields[n]]=e}})}}}}return t}}function fl(e){const t={genotypeIndex:-1,fields:e};for(let n=0;n<e.length;n++)"GT"===e[n]&&(t.genotypeIndex=n);return t}function ml(e){return"string"==typeof e||e instanceof String?new gl(e):new vl(e)}class gl{constructor(e){this.data=e,this.ptr=0}nextLine(){var e=this.ptr,t=this.data.indexOf("\n",e),n=this.data;if(t>0)return this.ptr=t+1,t>e&&"\r"===n.charAt(t-1)?n.substring(e,t-1):n.substring(e,t);var i=n.length;return this.ptr=i,e>=i?void 0:n.substring(e)}}class vl{constructor(e){this.data=e,this.length=this.data.length,this.ptr=0}nextLine(){var e,t;if(t="",!(this.ptr>=this.length)){for(var n=this.ptr;n<this.length;n++)if("\r"!==(e=String.fromCharCode(this.data[n]))){if("\n"===e)break;t+=e}return this.ptr=n+1,t}}}class bl{constructor(e){if(this.config=e,e.columns){if(void 0===e.columns.chromosome||void 0===e.columns.position||void 0===e.columns.value)throw Error("columns property must define chrCol, posCol, and valueCol");this.posCol=e.columns.position-1,this.chrCol=e.columns.chromosome-1,this.pvalueCol=e.columns.value-1}else this.posCol=2,this.chrCol=1,this.pvalueCol=3}async parseHeader(e){const t=await e.nextLine();return this.parseHeaderLine(t)}parseHeaderLine(e){if(this.columns=e.split(/\t/),!this.config.columns)for(let t=0;t<this.columns.length;t++)switch(this.columns[t].toLowerCase()){case"chr":case"chromosome":case"chr_id":this.chrCol=t;break;case"bp":case"pos":case"position":case"chr_pos":this.posCol=t;break;case"p":case"pval":case"pvalue":case"p-value":case"p.value":this.valueCol=t}return this.columns}async parseFeatures(e){const t=[],n=e.nextLine();let i;for(this.columns||this.parseHeaderLine(n);void 0!==(i=e.nextLine());){const e=i.split(/\t/);if(e.length===this.columns.length){const n=e[this.chrCol],r=parseInt(e[this.posCol])-1,s=r+1,o=parseFloat(e[this.valueCol]);t.push(new yl({chr:n,start:r,end:s,value:o,line:i,columns:this.columns}))}}return t}}class yl{constructor({chr:e,start:t,end:n,value:i,line:r,columns:s}){this.chr=e,this.start=t,this.end=n,this.value=i,this.line=r,this.columns=s}popupData(){const e=this.line.split(/\t/);return this.columns.map(function(t,n){return{name:t,value:e[n]}})}getAttribute(e){const t=this.line.split(/\t/);for(let n=0;n<this.columns.length;n++)if(this.columns[n]===e)return t[n]}}var _l=new RegExp("([^:]*)\\(([^)]*)\\)"),wl=new RegExp("([^:]*):([^(]*)\\(([^)]*)\\)");class xl{constructor(e){const t=e?e.decode:void 0;this.nameField=e?e.nameField:void 0,this.skipRows=0,this.decode=t||Rl,this.delimiter="\t"}async parseHeader(e){let t,n;for(;(t=await e.nextLine())&&(t.startsWith("track")||t.startsWith("#")||t.startsWith("browser"));)if(t.startsWith("track")||t.startsWith("#track")){let e=kl(t);n?Object.assign(n,e):n=e}else if(t.startsWith("#columns")){let e=El(t);n?Object.assign(n,e):n=e}else t.startsWith("##gff-version 3")&&(this.format="gff3",n||(n={}),n.format="gff3");return this.header=n,n}async parseFeatures(e){const t=[],n=this.decode,i=this.delimiter||"\t";let r,s=0;for(;void 0!==(r=e.nextLine());){if(s++,s<=this.skipRows||r.startsWith("track")||r.startsWith("#")||r.startsWith("browser"))continue;let e=o();if(e.length<1)continue;if(!this.aed){this.aed=Cl(e);continue}const i=n.call(this,e,void 0);i&&t.push(i)}return t;function o(){for(var e,t,n=[],s="",o=!1;r||""===r;){for(e=0;e<r.length;e++)(t=r.charAt(e))===i?o?s+=t:(n.push(s),s=""):'"'===t?e+1<r.length&&'"'===r.charAt(e+1)?(o&&(s+='"'),e++):o=!o:s+=t;if(!o)break;s+="\n",r=nextLine()}return n.push(s),n}}}function Sl(e){var t=wl.exec(e);if(t)return{namespace:t[1],name:t[2],type:t[3]};if(t=_l.exec(e))return{namespace:"?",name:t[1],type:t[2]};throw new Error("Error parsing the header row of AED file - column not in ns:name(ns:type) format")}function Cl(e){var t,n,i;for(t={columns:[],metadata:{}},n=0;n<e.length;n++)i=Sl(e[n]),t.columns.push(i);return t}function kl(e){const t={},n=e.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g);let i;const r=[];for(let o of n)o&&0!==o.trim().length&&(o.endsWith("=")>0?i=o:i?(r.push(i+o),i=void 0):r.push(o));for(let o of r){if(!o)return;var s=o.split("=",2);if(2===s.length){const e=s[0].trim(),n=s[1].trim();t[e]=n}}return t}function El(e){let t={},n=e.split(/\s+/);return 2===n.length&&n[1].split(";").forEach(function(e){let n=e.split("=");"color"===n[0]?t.colorColumn=Number.parseInt(n[1])-1:"thickness"===n[0]&&(t.thicknessColumn=Number.parseInt(n[1])-1)}),t}function Al(e,t){var n,i,r=e.columns;this.aed=e,this.allColumns=t,this.chr=null,this.start=null,this.end=null,this.score=1e3,this.strand=".",this.cdStart=null,this.cdEnd=null,this.name=null,this.color=null;for(let o=0;o<t.length;o++)if(n=t[o]){"aed:Integer"===(i=r[o]).type&&(n=parseInt(n));var s=[];if(i.namespace.length>0)for(let e=0;e<i.namespace.length;e++)s.push(i.namespace.charCodeAt(e));"bio"===i.namespace.trim()?"sequence"===i.name?this.chr=n:"start"===i.name?this.start=n:"end"===i.name?this.end=n:"cdsMin"===i.name?this.cdStart=n:"cdsMax"===i.name?this.cdEnd=n:"strand"===i.name&&(this.strand=n):"aed"===i.namespace?"name"===i.name&&(this.name=n):"style"===i.namespace&&"color"===i.name&&(this.color=Gr.createColorString(n))}}function Rl(e,t){var n,i,r,s,o,a,l=0,c=this.aed.columns;if(e.length===c.length){for(a=0;a<e.length;a++)""!==(r=e[a])&&l++,"name"===(s=c[a]).name&&"aed"===s.namespace?n=r:"value"===s.name&&"aed"===s.namespace&&(i=r);if(2===l&&n&&i)return o=Sl(n),this.aed.metadata[o.namespace]||(this.aed.metadata[o.namespace]={}),void(this.aed.metadata[o.namespace][o.name]||(this.aed.metadata[o.namespace][o.name]={type:o.type,value:i}));var h=new Al(this.aed,e);if(h.chr&&(h.start||0===h.start)&&h.end)return h;console.log("Cannot parse feature: "+e.join(","))}else console.log("Corrupted AED file row: "+e.join(","))}Al.prototype.popupData=function(){for(var e=[],t=this.aed,n=0;n<this.allColumns.length;n++){var i=this.allColumns[n],r=t.columns[n].name;"sequence"!==r&&"color"!==r&&i&&e.push({name:r,value:i})}return e};class Tl{constructor(e,t){this.littleEndian=void 0===t||t,this.position=0,this.view=e,this.length=e.byteLength}available(){return this.length-this.position}remLength(){return this.length-this.position}hasNext(){return this.position<this.length-1}getByte(){var e=this.view.getUint8(this.position,this.littleEndian);return this.position++,e}getShort(){var e=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,e}getUShort(){var e=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,e}getInt(){var e=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,e}getUInt(){var e=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,e}getLong(){var e=[];e[0]=this.view.getUint8(this.position),e[1]=this.view.getUint8(this.position+1),e[2]=this.view.getUint8(this.position+2),e[3]=this.view.getUint8(this.position+3),e[4]=this.view.getUint8(this.position+4),e[5]=this.view.getUint8(this.position+5),e[6]=this.view.getUint8(this.position+6),e[7]=this.view.getUint8(this.position+7);var t=0;if(this.littleEndian)for(let n=e.length-1;n>=0;n--)t=256*t+e[n];else for(let n=0;n<e.length;n++)t=256*t+e[n];return this.position+=8,t}getString(e){for(var t,n="";0!==(t=this.view.getUint8(this.position++))&&(n+=String.fromCharCode(t),!e||n.length!==e););return n}getFixedLengthString(e){var t,n,i="";for(t=0;t<e;t++)(n=this.view.getUint8(this.position++))>0&&(i+=String.fromCharCode(n));return i}getFixedLengthTrimmedString(e){var t,n,i="";for(t=0;t<e;t++)(n=this.view.getUint8(this.position++))>32&&(i+=String.fromCharCode(n));return i}getFloat(){var e=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,e}getDouble(){var e=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,e}skip(e){return this.position+=e,this.position}getVPointer(){var e=this.position,t=this.view.getUint8(e+1)<<8|this.view.getUint8(e),n=4294967296*(255&this.view.getUint8(e+6))+16777216*(255&this.view.getUint8(e+5))+65536*(255&this.view.getUint8(e+4))+256*(255&this.view.getUint8(e+3))+(255&this.view.getUint8(e+2));return this.position+=8,new Il(n,t)}}class Il{constructor(e,t){this.block=e,this.offset=t}isLessThan(e){return this.block<e.block||this.block===e.block&&this.offset<e.offset}isGreaterThan(e){return this.block>e.block||this.block===e.block&&this.offset>e.offset}print(){return this.block+":"+this.offset}}class Dl{constructor(e){this.tabix=!0}parse(e,t){const n=new Tl(new DataView(e)),i=n.getInt();if(21582659!==i)throw 38359875===i?Error("CSI version 2 is not supported.  Please enter an issue at https://github.com/igvteam/igv.js"):Error("Not a CSI index");if(this.indices=[],this.blockMin=Number.MAX_SAFE_INTEGER,this.blockMax=0,this.sequenceIndexMap={},this.minShift=n.getInt(),this.depth=n.getInt(),n.getInt()>=28){n.getInt(),n.getInt(),n.getInt(),n.getInt(),n.getInt(),n.getInt();const e=n.getInt(),i=n.position+e;let r=0;for(;n.position<i;){let e=n.getString();t&&(e=t.getChromosomeName(e)),this.sequenceIndexMap[e]=r,r++}}const r=this.bin_limit()+1,s=n.getInt();for(let o=0;o<s;o++){const e=[],t=[],i=n.getInt();for(let s=0;s<i;s++){const i=n.getInt();if(t[i]=n.getVPointer(),i>r)n.getInt(),n.getVPointer(),n.getVPointer(),n.getLong(),n.getLong();else{e[i]=[];const t=n.getInt();for(let r=0;r<t;r++){const t=n.getVPointer(),r=n.getVPointer();t&&r&&(t.block<this.blockMin&&(this.blockMin=t.block),r.block>this.blockMax&&(this.blockMax=r.block),e[i].push([t,r]))}}}i>0&&(this.indices[o]={binIndex:e,loffset:t})}}blocksForRange(e,t,n){const i=this.indices[e];if(i){const e=this.reg2bins(t,n);if(0==e.length)return[];const r=[];for(let t of e)for(let e=t[0];e<=t[1];e++)if(i.binIndex[e]){const t=i.binIndex[e],n=t.length;for(let i=0;i<n;++i)r.push({minv:t[i][0],maxv:t[i][1],bin:e})}return function(e,t){const n=[];let i=null;return 0===e.length?e:(e.sort(function(e,t){const n=e.minv.block-t.minv.block;return 0!==n?n:e.minv.offset-t.minv.offset}),e.forEach(function(e){var r,s;t&&!e.maxv.isGreaterThan(t)||(null===i?(n.push(e),i=e):(s=e).minv.block-(r=i).maxv.block<65e3&&s.maxv.block-r.minv.block<5e6?e.maxv.isGreaterThan(i.maxv)&&(i.maxv=e.maxv):(n.push(e),i=e))}),n)}(r,i.loffset[e[0]])}return[]}reg2bins(e,t){(e-=1)<1&&(e=1),t>2**50&&(t=2**34),t-=1;let n=0,i=0,r=this.minShift+3*this.depth;const s=[];for(;n<=this.depth;r-=3,i+=1<<3*n,n+=1){const n=i+(e>>r),o=i+(t>>r);if(o-n+s.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);s.push([n,o])}return s}bin_limit(){return((1<<3*(this.depth+1))-1)/7}}async function Ol(e,t,n){const i=[];let r=Number.MAX_SAFE_INTEGER,s=0;const o=new Tl(new DataView(e)),a=o.getInt(),l={};if(!(21578050===a||t&&21578324===a))throw new Error(indexURL+" is not a "+(t?"tabix":"bai")+" file");{const e=o.getInt();if(t){o.getInt(),o.getInt(),o.getInt(),o.getInt(),o.getInt(),o.getInt(),o.getInt();for(let t=0;t<e;t++){let e=o.getString();n&&(e=n.getChromosomeName(e)),l[e]=t}}for(let t=0;t<e;t++){const e={},n=[],a=o.getInt();for(let t=0;t<a;t++){const t=o.getInt();if(37450===t)o.getInt(),o.getVPointer(),o.getVPointer(),o.getLong(),o.getLong();else{e[t]=[];const n=o.getInt();for(let i=0;i<n;i++){const n=o.getVPointer(),i=o.getVPointer();n&&i&&(n.block<r&&(r=n.block),i.block>s&&(s=i.block),e[t].push([n,i]))}}}const l=o.getInt();for(let t=0;t<l;t++){const e=o.getVPointer();n.push(e)}a>0&&(i[t]={binIndex:e,linearIndex:n})}}return new Pl(i,r,s,l,t)}class Pl{constructor(e,t,n,i,r){this.firstAlignmentBlock=t,this.lastAlignmentBlock=n,this.indices=e,this.sequenceIndexMap=i,this.tabix=r}blocksForRange(e,t,n){const i=this.indices[e];if(i){const e=function(e,t){const n=[];return t>=1<<29&&(t=1<<29),--t,n.push([0,0]),n.push([1+(e>>26),1+(t>>26)]),n.push([9+(e>>23),9+(t>>23)]),n.push([73+(e>>20),73+(t>>20)]),n.push([585+(e>>17),585+(t>>17)]),n.push([4681+(e>>14),4681+(t>>14)]),n}(t,n),r=[];for(let t of e)for(let e=t[0];e<=t[1];e++)if(i.binIndex[e]){const t=i.binIndex[e],n=t.length;for(let i=0;i<n;++i)r.push({minv:t[i][0],maxv:t[i][1],bin:e})}const s=i.linearIndex.length;let o=null;const a=Math.min(t>>14,s-1),l=Math.min(n>>14,s-1);for(let t=a;t<=l;++t){const e=i.linearIndex[t];e&&(o&&!e.isLessThan(o)||(o=e))}return function(e,t){const n=[];let i=null;return 0===e.length?e:(e.sort(function(e,t){const n=e.minv.block-t.minv.block;return 0!==n?n:e.minv.offset-t.minv.offset}),e.forEach(function(e){var r,s;t&&!e.maxv.isGreaterThan(t)||(null===i?(n.push(e),i=e):(s=e).minv.block-(r=i).maxv.block<65e3&&s.maxv.block-r.minv.block<5e6?e.maxv.isGreaterThan(i.maxv)&&(i.maxv=e.maxv):(n.push(e),i=e))}),n)}(r,o)}return[]}}class Ml{constructor(e){this.chrIndex=e}blocksForRange(e,t,n){const i=this.chrIndex[e];if(i){const e=i.blocks,r=i.binWidth,s=Math.max(t-i.longestFeature,0),o=Math.floor(s/r);if(o>=e.length)return[];{const t=Math.min(Math.floor((n-1)/r),e.length-1),i=e[o].min,s=e[t].max;return 0==s-i?[]:[{minv:{block:i,offset:0},maxv:{block:s,offset:0}}]}}}}async function Ll(e,t,n){let i=await rs.loadArrayBuffer(e,Zo(t)),r=new DataView(i);switch(31===r.getUint8(0)&&139===r.getUint8(1)&&(i=Nr(i).buffer,r=new DataView(i)),r.getInt32(0,!0)){case 21578050:return async function(e,t){return Ol(e,!1,t)}(i,n);case 21578324:return async function(e,t){return Ol(e,!0,t)}(i,n);case 21582659:return async function(e,t){const n=new Dl;return n.parse(e,t),n}(i,n);case 1480870228:return async function(e,t){const n={},i=new Tl(new DataView(e));!function(e){e.getInt(),e.getInt();const t=e.getInt();if(e.getString(),e.getLong(),e.getLong(),e.getString(),e.getInt(),t>=3){let t=e.getInt();for(;t-- >0;)e.getString(),e.getString()}}(i);let r=i.getInt();for(;r-- >0;){const e=s(i);n[e.chr]=e}return new Ml(n);function s(e){let n=e.getString();t&&(n=t.getChromosomeName(n));const i=e.getInt(),r=e.getInt(),s=e.getInt();e.getInt(),e.getInt();let o=e.getLong();const a=new Array;for(let t=0;t<r;t++){const t=e.getLong();a.push({min:o,max:t}),o=t}return{chr:n,blocks:a,longestFeature:s,binWidth:i}}}(i,n);case 38359875:throw Error("CSI version 2 is not supported.");default:throw Error(`Unrecognized index type: ${e}`)}}class Fl{constructor(e){this.config=e,this.filePtr=0,this.bufferPtr=0}async nextLine(){let e;try{for(;;){const t=this.buffer?this.buffer.length:0;for(;this.bufferPtr<t;){const t=String.fromCharCode(this.buffer[this.bufferPtr++]);if("\r"!==t){if("\n"===t)return e;e=e?e+t:t}}if(this.eof)return e;await this.readNextBlock()}}catch(t){return console.warn(t),this.eof=!0,e}}async readNextBlock(){const e=Zo(this.config,{range:{start:this.filePtr,size:26}}),t=zr(await rs.loadArrayBuffer(this.config.url,e));if(0===t)this.eof=!0,this.buffer=void 0;else{const e=Zo(this.config,{range:{start:this.filePtr,size:t}}),n=await rs.loadArrayBuffer(this.config.url,e);n.byteLength<t&&(this.eof=!0),this.buffer=Nr(n),this.bufferPtr=0,this.filePtr+=n.byteLength}}}class Nl{constructor(e,t){var n;this.config=e||{},this.genome=t,this.indexURL=e.indexURL,this.indexed=e.indexed,jt(this.config.url)?this.filename=this.config.url.name:ea(this.config.url)?(this.indexed=!1,this.dataURI=e.url):(n=Nt(this.config.url),this.filename=e.filename||n.file),this.parser=this.getParser(this.config),"vcf"!==this.config.format||this.config.indexURL||console.warn("Warning: index file not specified.  The entire vcf file will be loaded.")}async readFeatures(e,t,n){return await this.getIndex()?(this.indexed=!0,this.loadFeaturesWithIndex(e,t,n)):this.dataURI?(this.indexed=!1,this.loadFeaturesFromDataURI()):(this.indexed=!1,this.loadFeaturesNoIndex())}async readHeader(){if(this.dataURI)return await this.loadFeaturesFromDataURI(this.dataURI),this.header;if(this.config.indexURL){const e=await this.getIndex();if(!e)throw new Error("Unable to load index: "+this.config.indexURL);let t;if(e.tabix)t=new Fl(this.config);else{const n=Object.values(e.chrIndex).flatMap(e=>e.blocks).map(e=>e.max).reduce((e,t)=>Math.min(e,t),Number.MAX_SAFE_INTEGER),i=Zo(this.config,{bgz:e.tabix,range:{start:0,size:n}});t=ml(await rs.loadString(this.config.url,i))}return this.header=await this.parser.parseHeader(t),this.header}{const e=Zo(this.config),t=await rs.loadString(this.config.url,e);let n=ml(t);return this.header=await this.parser.parseHeader(n),n=ml(t),this.features=await this.parser.parseFeatures(n),this.header}}getParser(e){switch(e.format){case"vcf":return new pl(e);case"seg":return new rl("seg");case"mut":return new rl("mut");case"maf":return new rl("maf");case"gwas":return new bl(e);case"aed":return new xl(e);default:return new Ja(e)}}async loadFeaturesNoIndex(){if(this.features){const e=this.features;return delete this.features,e}{const e=Zo(this.config),t=await rs.loadString(this.config.url,e);if(!this.header){const e=ml(t);this.header=await this.parser.parseHeader(e)}const n=ml(t);return await this.parser.parseFeatures(n)}}async loadFeaturesWithIndex(e,t,n){const i=this.config,r=this.parser,s=this.index.tabix,o=s?this.index.sequenceIndexMap[e]:e;if(void 0===o)return[];const a=this.genome,l=this.index.blocksForRange(o,t,n);if(l&&0!==l.length){const o=[];for(let c of l){const l=c.minv.block,h=c.minv.offset,u=c.maxv.offset;let d;if(s){let e=0;if(u>0){const t=Zo(i,{range:{start:c.maxv.block,size:26}});e=zr(await rs.loadArrayBuffer(i.url,t))}d=c.maxv.block+e}else d=c.maxv.block;const p=Zo(i,{range:{start:l,size:d-l+1}});let f;f=s?Nr(await rs.loadArrayBuffer(i.url,p)):await rs.loadString(i.url,p);const m=ml(h?f.slice(h):f),g=await r.parseFeatures(m);let v=!1;for(let i=0;i<g.length;i++){const r=g[i];if((a?a.getChromosomeName(r.chr):r.chr)!==e){if(0===o.length)continue;break}if(r.start>n){o.push(r);break}r.end>=t&&r.start<=n&&(v||(v=!0,i>0&&o.push(g[i-1])),o.push(r))}}return o.sort(function(e,t){return e.start-t.start}),o}return[]}async getIndex(){return this.index||!this.config.indexURL||(this.index=await this.loadIndex()),this.index}async loadIndex(){return Ll(this.config.indexURL,this.config,this.genome)}async loadFeaturesFromDataURI(){if(this.features){const e=this.features;return delete this.features,e}{const e=Hr(this.dataURI);let t=ml(e);return this.header=await this.parser.parseHeader(t),this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),t=ml(e),this.features=await this.parser.parseFeatures(t),this.features}}}const zl=xt;class Vl{constructor(e){this.config=e}async readFeatures(e,t,n){let i;i="function"==typeof this.config.url?this.config.url({chr:e,start:t,end:n}):this.config.url.replace("$CHR",e).replace("$START",t).replace("$END",n);let r,s=Object.assign({},this.config);void 0!==this.config.body&&(s.body="function"==typeof this.config.body?this.config.body({chr:e,start:t,end:n}):this.config.body.replace("$CHR",e).replace("$START",t).replace("$END",n));const o=await rs.load(i,s);if(o&&(r="function"==typeof this.config.parser?this.config.parser(o):zl(o)?JSON.parse(o):o),this.config.mappings){let e=Object.keys(this.config.mappings);for(let t of r)for(let n of e)t[n]=t[this.config.mappings[n]]}return r}}const jl=function(e,t){this.config=e,this.genome=t,this.expandQueryInterval=!1};jl.prototype.readFeatures=function(e,t,n){const i=Math.max(0,Math.floor(t));let r=Math.ceil(n);if(this.genome){const t=this.genome.getChromosome(e);t&&r>t.bpLength&&(r=t.bpLength)}return rs.loadJson(this.config.url+"?db="+this.config.db+"&table="+this.config.tableName+"&chr="+e+"&start="+i+"&end="+r,this.config).then(function(e){return e?(e.forEach(function(e){e.hasOwnProperty("exonStarts")&&e.hasOwnProperty("exonEnds")&&e.hasOwnProperty("exonCount")&&e.hasOwnProperty("cdsStart")&&e.hasOwnProperty("cdsEnd")&&function(e){var t,n,i,r,s,o;t=e.exonCount,n=e.exonStarts.split(","),i=e.exonEnds.split(","),r=[];for(var a=0;a<t;a++){var l={start:s=parseInt(n[a]),end:o=parseInt(i[a])};(e.cdsStart>o||e.cdsEnd<e.cdsStart)&&(l.utr=!0),e.cdsStart>=s&&e.cdsStart<=o&&(l.cdStart=e.cdsStart),e.cdsEnd>=s&&e.cdsEnd<=o&&(l.cdEnd=e.cdsEnd),r.push(l)}e.exons=r}(e)}),e):null})};const Bl=["Name","gene_name","gene","gene_id","alias","locus","name"];class Hl{constructor(e){this.format=e.format,this.nameField=e.nameField,this.filterTypes=void 0===e.filterTypes?new Set(["chromosome"]):new Set(e.filterTypes)}combineFeatures(e,t){let n;const i=this.filterTypes;if(e=e.filter(e=>void 0===i||!i.has(e.type)),"gff3"===this.format){const t=this.combineFeaturesById(e);n=this.combineFeaturesByType(t)}else n=this.combineFeaturesByType(e);return n.sort(function(e,t){return e.start-t.start}),this.numberExons(n,t),this.nameFeatures(n),n}combineFeaturesById(e){const t=new Map,n=[];for(let i of e)if(Ra(i.type)||Aa(i.type)||!i.id)n.push(i);else{let e=t.get(i.chr);e||(e=new Map,t.set(i.chr,e));let n=e.get(i.id);n?n.push(i):e.set(i.id,[i])}for(let i of t.values())for(let e of i.values())if(e.length>1){const t=e[0];t.exons=[];for(let n of e)t.start=Math.min(t.start,n.start),t.end=Math.max(t.end,n.end),t.exons.push({start:n.start,end:n.end});n.push(t)}else n.push(e[0]);return n}combineFeaturesByType(e){const t=e.filter(e=>"gene"===e.type||e.type.endsWith("_gene")),n=Object.create(null);for(let c of t)n[c.id]=c;const i=Object.create(null),r=[],s=new Set,o=this.filterTypes;e=e.filter(e=>void 0===o||!o.has(e.type));for(let c of e)if("biological_region"===c.type&&console.log(),Aa(c.type)){const e=c.id;if(void 0!==e){const t=new Da(c);i[e]=t,r.push(t),s.add(c);const o=n[c.parent];o&&(t.geneObject=o,s.add(o))}}for(let c of e)if(Ra(c.type)){const e=l(c);if(e)for(let t of e){let n=i[t];if(!n&&"gtf"===this.format){const e=Object.assign({},c);e.type="transcript",n=new Da(e),i[t]=n,r.push(n)}if(void 0!==n){if(xa.has(c.type))if(e.length>1){const e=new Ia(c);n.addExon(e)}else n.addExon(c);else n.addPart(c);s.add(c)}}}r.forEach(function(e){"function"==typeof e.finish&&e.finish()});const a=e.filter(e=>!s.has(e));for(let c of a)r.push(c);return r;function l(e){return e.parent&&""!==e.parent.trim()?e.parent.trim().split(","):null}}numberExons(e,t){for(let n of e)if(n.exons&&(!t||n.end<=t.end&&n.start>t.start))for(let e=0;e<n.exons.length;e++)n.exons[e].number="-"===n.strand?n.exons.length-e:e+1}nameFeatures(e){for(let t of e)if(t.attributeString){const e=La(t.attributeString,"gff3"===this.format?"=":" "),n=new Map(e);if(this.nameField)t.name=n.get(this.nameField);else for(let i of Bl)if(n.has(i)){t.name=n.get(i);break}}}}const ql=function(e){this.config=e,this.url=e.url,this.tissueId=e.tissueSiteDetailId,this.indexed=!0,this.datasetId=e.datasetId||"gtex_v8"};ql.prototype.readFeatures=async function(e,t,n){let i=e.startsWith("chr")?e:"chr"+e,r=Math.floor(t),s=Math.ceil(n),o=this.url+"?chromosome="+i+"&start="+r+"&end="+s+"&tissueSiteDetailId="+this.tissueId+"&datasetId="+this.datasetId;const a=await rs.loadJson(o,{withCredentials:this.config.withCredentials});return a&&a.singleTissueEqtl?(a.singleTissueEqtl.forEach(function(e){e.chr=e.chromosome,e.position=e.pos,e.start=e.pos-1,e.end=e.start+1,e.snp=e.snpId,e.geneName=e.geneSymbol,e.geneId=e.gencodeId}),a.singleTissueEqtl):void 0};const $l=function(e){this.config=e,this.url=e.url,this.cellConditionId=e.cellConditionId,this.valueThreshold=e.valueThreshold?e.valueThreshold:.05};$l.prototype.readFeatures=function(e,t,n){var i=this,r=this.url+"?chromosome="+e+"&start="+t+"&end="+n+"&cell_condition_id="+this.cellConditionId;return new Promise(function(e,t){rs.loadJson(r,{withCredentials:i.config.withCredentials}).then(function(t){t?(t.eqtls.forEach(function(e){e.chr=e.chromosome,e.start=e.position,e.end=e.position+1}),e(t.eqtls)):e(null)}).catch(function(e){t(e)})})};const Ul=rs.apiKey;function Wl(e){var t=e.url+"/"+e.entity+"/"+e.entityId;return e.headers={"Cache-Control":"no-cache"},rs.loadJson(t,e)}function Gl(e){return new Promise(function(t,n){var i=e.results?e.results:[],r=e.url,s=e.body,o=e.decode,a="?",l=e.fields;return Ul&&(r=r+a+"key="+Ul,a="&"),l&&(r=r+a+"fields="+l),function e(a){a?s.pageToken=a:void 0!==s.pageToken&&delete s.pageToken;var l=JSON.stringify(s);rs.loadJson(r,{sendData:l,contentType:"application/json",headers:{"Cache-Control":"no-cache"}}).then(function(n){var r,s;n?((s=o?o(n):n)&&s.forEach(function(e){i.push(e)}),(r=n.nextPageToken)?e(r):t(i)):t(i)}).catch(function(e){n(e)})}()})}const Yl=function(e,t){this.config=e,this.genome=t,this.url=e.url,this.variantSetId=e.variantSetId,this.callSetIds=e.callSetIds,this.includeCalls=void 0===e.includeCalls||e.includeCalls};Yl.prototype.readHeader=function(){var e=this;return e.header?Promise.resolve(e.header):(e.header={},!1===e.includeCalls?Promise.resolve(e.header):Gl({url:e.url+"/callsets/search",fields:"nextPageToken,callSets(id,name)",body:{variantSetIds:Array.isArray(e.variantSetId)?e.variantSetId:[e.variantSetId],pageSize:"10000"},decode:function(t){if(e.callSetIds){var n=[],i=new Set;return e.callSetIds.forEach(function(e){i.add(e)}),t.callSets.forEach(function(e){i.has(e.id)&&n.push(e)}),n}return t.callSets}}).then(function(t){return e.header.callSets=t,e.header}))},Yl.prototype.readFeatures=function(e,t,n){const i=this,r=this.genome;return i.readHeader().then(function(e){return new Promise(function(e,t){i.chrAliasTable?e(i.chrAliasTable):i.readMetadata().then(function(t){i.metadata=t.metadata,i.chrAliasTable={},t.referenceBounds&&r&&t.referenceBounds.forEach(function(e){var t=e.referenceName,n=r.getChromosomeName(t);i.chrAliasTable[n]=t}),e(i.chrAliasTable)})})}).then(function(r){var s=r.hasOwnProperty(e)?r[e]:e;return Gl({url:i.url+"/variants/search",fields:i.includeCalls?void 0:"nextPageToken,variants(id,variantSetId,names,referenceName,start,end,referenceBases,alternateBases,quality,filter,info)",body:{variantSetIds:Array.isArray(i.variantSetId)?i.variantSetId:[i.variantSetId],callSetIds:i.callSetIds?i.callSetIds:void 0,referenceName:s,start:t.toString(),end:n.toString(),pageSize:"10000"},decode:function(e){var t,n=[];return e.variants.forEach(function(e){(t=function(e){var t=new hl;return t.chr=e.referenceName,t.start=parseInt(e.start),t.end=parseInt(e.end),t.pos=t.start+1,t.names=dl(e.names,"; "),t.referenceBases=e.referenceBases,t.alternateBases=dl(e.alternateBases),t.quality=e.quality,t.filter=dl(e.filter),t.info={},e.info&&Object.keys(e.info).forEach(function(n){var i,r=e.info[n];i=Array.isArray(r)?r.join(","):r,t.info[n]=i}),t.calls={},e.calls&&e.calls.forEach(function(e){t.calls[e.callSetId]=e}),init(t),t}(e)).isRefBlock()||n.push(t)}),n}})})},Yl.prototype.readMetadata=function(){return Wl({url:this.url,entity:"variantsets",entityId:this.variantSetId})};class Zl{constructor(e){this.config=e}async readFeatures(e,t,n){const i=(await rs.loadJson(this.config.url+"/variants/?count=50000")).records,r=[];for(let s of i)if(s.coordinates){const e=s.coordinates;e.chromosome&&r.push(new Xl(e.chromosome,e.start-1,e.stop,s)),e.chromosome2&&r.push(new Xl(e.chromosome2,e.start2-1,e.stop2,s))}return r}}class Xl{constructor(e,t,n,i){if(this.chr=e,this.start=t,this.end=n,this.id=i.id,this.entrezName=i.entrez_name,this.name=i.name,this.actionabilityScore=i.civic_actionability_score,i.coordinates.reference_bases&&(this.refBases=i.coordinates.reference_bases),i.coordinates.variant_bases&&(this.altBases=i.coordinates.variant_bases),i.variant_types&&(this.variant_types=i.variant_types),this.locationString=this.chr+":"+St(this.start+1)+"-"+St(this.end),void 0!==this.actionabilityScore){let e;if(this.actionabilityScore<=10)e=.2;else{const t=Math.min(30,this.actionabilityScore);e=.2+.8*Math.log10((t-10)/2)}this.alpha=e}}popupData(){const e=[t("CIViC","https://civicdb.org/links/variants/"+this.id)];if(e.push({name:"Entrez",value:t(this.entrezName,"https://ghr.nlm.nih.gov/gene/"+this.entrezName)}),e.push({name:"Name",value:this.name}),this.variant_types&&this.variant_types.length>0){const t=1===this.variant_types.length?"Type":"Types";let n;for(let e of this.variant_types)n?n+=", "+e.display_name:n=e.display_name;e.push({name:t,value:n})}return e.push({name:"Actionability",value:this.actionabilityScore}),e.push({name:"Location",value:this.locationString}),e;function t(e,t){return"<a target='_blank' href='"+t+"'>"+e+"</a>"}}}function Kl(e,t){t=t||Number.MAX_SAFE_INTEGER;const n=[];e.sort(function(e,t){return e.start-t.start}),n.push(-1e3);for(let i of e){let e=0;const r=Math.min(n.length,t);for(e=0;e<r;e++)if(i.start>n[e]){i.row=e,n[e]=i.end;break}i.row=e,n[e]=i.end}}class Ql{constructor(e,t){if(this.config=e,this.genome=t,this.format=e.format?e.format.toUpperCase():"BAM","BAM"!==this.format&&"VCF"!==this.format)throw Error(`htsget format ${e.format} is not supported`)}async readHeaderData(){const e=`${Jl(this.config)}?class=header&format=${this.format}`,t=await rs.loadJson(e,Zo(this.config));return await this.loadUrls(t.htsget.urls)}async readData(e,t,n){const i=`${Jl(this.config)}?format=${this.format}&referenceName=${e}&start=${Math.floor(t)}&end=${Math.ceil(n)}`,r=await rs.loadJson(i,Zo(this.config));return this.loadUrls(r.htsget.urls)}async loadUrls(e){const t=[];for(let n of e)if(n.url.startsWith("data:"))t.push(Promise.resolve(ec(n.url)));else{const e=Zo(this.config||{});n.headers&&(e.headers=Object.assign(e.headers||{},n.headers)),t.push(rs.loadArrayBuffer(n.url,e))}return function(e){let t=0;for(let r of e)t+=r.byteLength;let n=0;const i=new Uint8Array(t);for(let r of e){const e=new Uint8Array(r);i.set(e,n),n+=e.length}return i}(await Promise.all(t))}static async inferFormat(e){try{const t=Jl(e),n=`${t}${t.includes("?")?"&":"?"}class=header`,i=await rs.loadJson(n,Zo(e));if(i.htsget){const t=i.htsget.format;if("BAM"!==t&&"VCF"!==t)throw Error(`htsget format ${t} is not supported`);e.format=t.toLowerCase(),e.sourceType="htsget",e.name||(e.name=await Qo(e.url))}}catch(t){}}}function Jl(e){if(e.url&&e.endpoint&&e.id)return e.url+e.endpoint+e.id;if(e.endpoint&&e.id)return e.endpoint+e.id;if(e.url)return e.url.startsWith("htsget://")?e.url.replace("htsget://","https://"):e.url;throw Error("Must specify either 'url', or 'endpoint' and 'id")}function ec(e){const t=e.split(","),n=t[0].split(":")[1];let i=t[1];i=n.indexOf("base64")>=0?atob(i):decodeURI(i);const r=new Uint8Array(i.length);for(var s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r}class tc extends Ql{constructor(e,t){super(e,t),this.parser=new pl}async readHeader(){if(!this.header){const e=ml(await this.readHeaderData());this.header=await this.parser.parseHeader(e,this.genome),this.chrAliasTable=this.header.chrAliasTable}return this.header}async readFeatures(e,t,n){if(this.config.format&&"VCF"!==this.config.format.toUpperCase())throw Error(`htsget format ${this.config.format} is not supported`);this.chrAliasTable||await this.readHeader();let i=this.chrAliasTable.has(e)?this.chrAliasTable.get(e):e;const r=ml(await this.readData(i,t,n));return this.parser.parseFeatures(r)}}class nc{constructor(e,t){this.config=e||{},this.genome=t,this.sourceType=void 0===e.sourceType?"file":e.sourceType,this.visibilityWindow=e.visibilityWindow;const n=new Set(["bigwig","bw","bigbed","bb","tdf"]);if(e.features&&Array.isArray(e.features)){let n=function(e,t){if(!e||0===e.length)return[];if(void 0===e[0].chr&&void 0!==e[0].chr1){const n=[];for(let i of e)t&&(i.chr1=t.getChromosomeName(i.chr1),i.chr2=t.getChromosomeName(i.chr2)),i.chr1===i.chr2?(i.chr=i.chr1,i.start=Math.min(i.start1,i.start2),i.end=Math.max(i.end1,i.end2)):n.push(i);for(let t of n){const n=Object.assign({dup:!0},t);e.push(n),t.chr=t.chr1,t.start=t.start1,t.end=t.end1,n.chr=n.chr2,n.start=n.start2,n.end=n.end2}}else if(t)for(let n of e)n.chr=t.getChromosomeName(n.chr);return e}(e.features,t);ic(n),e.mappings&&function(e,t){let n=Object.keys(t);e.forEach(function(e){n.forEach(function(n){e[n]=e[t[n]]})})}(n,e.mappings),this.queryable=!1,this.featureCache=new ys(n,t)}else e.reader?(this.reader=e.reader,this.queryable=void 0===e.queryable||e.queryable,this.expandQuery=!!e.expandQuery):"ga4gh"===e.sourceType?(this.reader=new Yl(e,t),this.queryable=!0):"immvar"===e.sourceType?(this.reader=new $l(e),this.queryable=!0):"eqtl"===e.type&&"gtex-ws"===e.sourceType?(this.reader=new ql(e),this.queryable=!0,this.expandQuery=!!e.expandQuery):"htsget"===e.sourceType?this.reader=new tc(e,t):"ucscservice"===e.sourceType?(this.reader=new jl(e.source),this.queryable=!0):"custom"===e.sourceType||void 0!==e.source?(this.reader=new Vl(e.source),this.queryable=void 0===e.source.queryable||e.source.queryable,this.expandQuery=!!e.expandQuery):"civic-ws"===e.sourceType?(this.reader=new Zl(e),this.queryable=!1,this.expandQuery=!!e.expandQuery):(this.reader=new Nl(e,t),void 0!==e.queryable?this.queryable=e.queryable:n.has(e.format)&&(this.queryable=n.has(e.format)||this.reader.indexed))}supportsWholeGenome(){return!this.queryable&&(void 0===this.visibilityWindow||this.visibilityWindow<=0)}async trackType(){const e=await this.getHeader();return e?e.type:void 0}async getHeader(){if(!this.header)if(this.reader&&"function"==typeof this.reader.readHeader){const e=await this.reader.readHeader();e?(this.header=e,e.format&&(this.config.format=e.format)):this.header={}}else this.header={};return this.header}async getFeatures({chr:e,start:t,end:n,visibilityWindow:i}){const r=this.genome,s=r?r.getChromosomeName(e):e,o="all"===s.toLowerCase();return(o&&!this.getWGFeatures||this.config.disableCache||!this.featureCache||!this.featureCache.containsRange(new Ao(s,t,n)))&&await this.loadFeatures(t,n,i,s),o?(this.wgFeatures||(this.wgFeatures=this.queryable?[]:this.getWGFeatures(this.featureCache.getAllFeatures())),this.wgFeatures):this.featureCache.queryFeatures(s,t,n)}async loadFeatures(e,t,n,i){const r=this.reader;let s=e,o=t;if((!n||n<=0)&&!1!==this.expandQuery){const e=this.genome?this.genome.getChromosome(i):void 0;s=0,o=e?e.bpLength:Number.MAX_SAFE_INTEGER}else if(n>t-e&&!1!==this.expandQuery){const i=Math.min(4.1*(t-e),n);s=Math.max(0,(e+t)/2-i),o=e+i}let a=await r.readFeatures(i,s,o);void 0===this.queryable&&(this.queryable=r.indexed);const l=this.queryable?new Ao(i,s,o):void 0;a?(!1===this.config.assembleGFF||"gtf"!==this.config.format&&"gff3"!==this.config.format&&"gff"!==this.config.format||(a=new Hl(this.config).combineFeatures(a,l)),"wig"!==this.config.format&&"junctions"!==this.config.type&&ic(a,this.config.maxRows||Number.MAX_SAFE_INTEGER),this.featureCache=new ys(a,this.genome,l),(this.config.searchable||this.config.searchableFields)&&this.addFeaturesToDB(a)):this.featureCache=new ys([],l)}addFeaturesToDB(e){for(let t of e)if(t.name&&(this.genome.featureDB[t.name.toUpperCase()]=t),t.gene&&t.gene.name&&(this.genome.featureDB[t.gene.name.toUpperCase()]=t),this.config.searchableFields)for(let e of this.config.searchableFields){const n=t.getAttributeValue(e);n&&(n.indexOf(" ")>0?(this.genome.featureDB[n.replaceAll(" ","+").toUpperCase()]=t,this.genome.featureDB[n.replaceAll(" ","%20").toUpperCase()]=t):this.genome.featureDB[n.toUpperCase()]=t)}}getWGFeatures(e){const t=this.genome,n=new Set(t.wgChromosomeNames),i=[];for(let r of t.wgChromosomeNames){const s=e[r];if(s)for(let e of s){let r=t.getChromosomeName(e.chr);if(n.has(r)){const n=Object.assign({},e);n.chr="all",n.start=t.getGenomeCoordinate(e.chr,e.start),n.end=t.getGenomeCoordinate(e.chr,e.end),n._f=e,n.exons&&delete n.exons,i.push(n)}}}return i.sort(function(e,t){return e.start-t.start}),i}}function ic(e,t){if(t=t||1e3,null==e||0===e.length)return;const n={},i=[];for(let r of e){const e=r.chr;let t=n[e];t||(t=[],n[e]=t,i.push(e)),t.push(r)}for(let r of i)Kl(n[r],t)}class rc{constructor(e,t,n){this.path=e.url,this.bufferSize=n||512e3,this.range={start:-1,size:-1},this.config=e}async dataViewForRange(e,t){if(!(this.data&&this.range.start<=e.start&&this.range.start+this.range.size>=e.start+e.size)){let t;t=e.size?Math.max(this.bufferSize,e.size):this.bufferSize;const n={start:e.start,size:t},i=await rs.loadArrayBuffer(this.path,Zo(this.config,{range:n}));this.data=i,this.range=n}const n=this.data.byteLength,i=e.start-this.range.start;return t?new Uint8Array(this.data,i,n-i):new DataView(this.data,i,n-i)}}class sc{constructor(e,t){this.path=e.url,this.genome=t,this.rpTreeCache={},this.config=e,this.loader=ea(this.path)?new gc(this.path):rs}async readWGFeatures(e,t){return await this.loadHeader(),this.readFeatures(this.chromTree.idToChrom[0],0,this.chromTree.idToChrom[this.chromTree.idToChrom.length-1],Number.MAX_VALUE,e,t)}async readFeatures(e,t,n,i,r,s){await this.loadHeader();const o=this.chromTree.chromToID[e],a=this.chromTree.chromToID[n];if(void 0===o||void 0===a)return[];let l,c;if("bigwig"===this.type){const e=await this.getZoomHeaders();let t=r?function(e,t){let n;for(let i=0;i<t.length;i++){const r=t[i];if(r.reductionLevel<e){n=r;break}}return n}(r,e):void 0;t?(l=t.indexOffset,c=mc):(l=this.header.fullIndexOffset,c=pc)}else l=this.header.fullIndexOffset,c=fc.call(this);const h=await this.loadRPTree(l),u=await h.findLeafItemsOverlapping(o,t,a,i);if(u&&0!==u.length){let e=Number.MAX_VALUE,n=0;for(let t of u)e=Math.min(e,t.dataOffset),n=Math.max(n,t.dataOffset+t.dataSize);const r=n-e,l=await this.loader.loadArrayBuffer(this.config.url,Zo(this.config,{range:{start:e,size:r}})),h=[];for(let d of u){const n=new Uint8Array(l,d.dataOffset-e,d.dataSize);let r;r=this.header.uncompressBuffSize>0?Fr(n):n,c.call(this,new DataView(r.buffer),o,t,a,i,h,this.chromTree.idToChrom,s)}return h.sort(function(e,t){return e.start-t.start}),h}return[]}async getZoomHeaders(){return this.zoomLevelHeaders||await this.loadHeader(),this.zoomLevelHeaders}async loadHeader(){if(this.header)return this.header;{let e,t=await this.loader.loadArrayBuffer(this.path,Zo(this.config,{range:{start:0,size:64}}));this.littleEndian=!0;let n=new Tl(new DataView(t)),i=n.getUInt();if(2291137574===i)this.type="bigwig";else if(2273964779===i)this.type="bigbed";else{this.littleEndian=!1,n.littleEndian=!1,n.position=0;let e=n.getUInt();654085990===e?this.type="bigwig":3958540679===e&&(this.type="bigbed")}e={bwVersion:n.getUShort(),nZoomLevels:n.getUShort(),chromTreeOffset:n.getLong(),fullDataOffset:n.getLong(),fullIndexOffset:n.getLong(),fieldCount:n.getUShort(),definedFieldCount:n.getUShort(),autoSqlOffset:n.getLong(),totalSummaryOffset:n.getLong(),uncompressBuffSize:n.getInt(),extensionOffset:n.getLong()};const r=64;let s={start:r,size:e.fullDataOffset-r+5};t=await this.loader.loadArrayBuffer(this.path,Zo(this.config,{range:s}));const o=e.nZoomLevels;n=new Tl(new DataView(t)),this.zoomLevelHeaders=[],this.firstZoomDataOffset=Number.MAX_SAFE_INTEGER;for(let a=1;a<=o;a++){const e=o-a,t=new oc(e,n);this.firstZoomDataOffset=Math.min(t.dataOffset,this.firstZoomDataOffset),this.zoomLevelHeaders[e]=t}if(e.autoSqlOffset>0){n.position=e.autoSqlOffset-r;const t=n.getString();t&&(this.autoSql=function(e){let t;const n=[];let i=!1;const r=e.trim().split(/\s*[\r\n]+\s*/g);for(let s of r)if(s.startsWith("table"))t=s.split(/\s+/)[1].trim();else if(s.startsWith("("))i=!0;else if(s.startsWith(")"));else if(i&&s.length>0){const e=s.indexOf(";"),t=s.substr(0,e).split(/\s+/),i=s.substr(e+1).replace(/"/g,"").trim();n.push({type:t[0],name:t[1],description:i})}return{table:t,fields:n}}(t))}if(e.totalSummaryOffset>0&&(n.position=e.totalSummaryOffset-r,this.totalSummary=new uc(n)),!(e.chromTreeOffset>0))throw"BigWig chromosome tree offset <= 0";return n.position=e.chromTreeOffset-r,this.chromTree=new cc(n,r,this.genome),n.position=e.fullDataOffset-r,e.dataCount=n.getInt(),this.setDefaultVisibilityWindow(e),this.header=e,this.header}}async loadRPTree(e){let t=this.rpTreeCache[e];return t||(t=new ac(e,this.config,this.littleEndian,this.loader),await t.load(),this.rpTreeCache[e]=t,t)}async getType(){return await this.loadHeader(),this.type}async getTrackType(){return await this.loadHeader(),"bigwig"===this.type?"wig":this.autoSql&&"chromatinInteract"===this.autoSql.table?"interact":"annotation"}setDefaultVisibilityWindow(e){if("bigwig"===this.type)this.visibilityWindow=-1;else{let t=this.genome?this.genome.getGenomeLength():3088286401;this.visibilityWindow=e.dataCount<1e3?-1:t/e.dataCount*1e3}}}class oc{constructor(e,t){this.index=e,this.reductionLevel=t.getInt(),this.reserved=t.getInt(),this.dataOffset=t.getLong(),this.indexOffset=t.getLong()}}class ac{constructor(e,t,n,i){this.config=t,this.loader=i,this.fileOffset=e,this.path=t.url,this.littleEndian=n}async load(){const e=this.fileOffset+48,t=ea(this.path)?this.loader:new rc(this.config,512e3);return this.rootNode=await this.readNode(e,t),this}async readNode(e,t){let n=await t.dataViewForRange({start:e,size:4},!1),i=new Tl(n,this.littleEndian);const r=1===i.getByte();i.getByte();const s=i.getUShort();let o={start:e+=4,size:s*(r?32:24)};n=await t.dataViewForRange(o,!1);const a=new Array(s);if(i=new Tl(n),r){for(let e=0;e<s;e++){let t={isLeaf:!0,startChrom:i.getInt(),startBase:i.getInt(),endChrom:i.getInt(),endBase:i.getInt(),dataOffset:i.getLong(),dataSize:i.getLong()};a[e]=t}return new lc(a)}for(let l=0;l<s;l++){let e={isLeaf:!1,startChrom:i.getInt(),startBase:i.getInt(),endChrom:i.getInt(),endBase:i.getInt(),childOffset:i.getLong()};a[l]=e}return new lc(a)}async findLeafItemsOverlapping(e,t,n,i){let r=this;return new Promise(function(s,o){let a=[],l=new Set,c=ea(r.path)?r.loader:new rc(r.config,512e3);l.add(0),function h(u,d){hc(u,e,t,n,i)&&u.items.forEach(function(s){hc(s,e,t,n,i)&&(s.isLeaf?a.push(s):s.childNode?h(s.childNode):(l.add(s.childOffset),r.readNode(s.childOffset,c).then(function(e){s.childNode=e,h(e,s.childOffset)}).catch(o)))}),void 0!==d&&l.delete(d),0===l.size&&s(a)}(r.rootNode,0)})}}class lc{constructor(e){this.items=e;let t,n,i=Number.MAX_SAFE_INTEGER,r=0,s=Number.MAX_SAFE_INTEGER,o=0;for(t=0;t<e.length;t++)n=e[t],i=Math.min(i,n.startChrom),r=Math.max(r,n.endChrom),s=Math.min(s,n.startBase),o=Math.max(o,n.endBase);this.startChrom=i,this.endChrom=r,this.startBase=s,this.endBase=o}}class cc{constructor(e,t,n){let i=e.getInt(),r=e.getInt(),s=e.getInt(),o=e.getInt(),a=e.getLong(),l=e.getLong(),c={},h=[];this.header={magic:i,blockSize:r,keySize:s,valSize:o,itemCount:a,reserved:l},this.chromToID=c,this.idToChrom=h,function e(i,r){r>=0&&(i.position=r);let o=i.getByte();i.getByte();let a,l,u,d,p,f,m=i.getUShort();if(1===o)for(a=0;a<m;a++)l=i.getFixedLengthTrimmedString(s),u=i.getInt(),i.getInt(),n&&(l=n.getChromosomeName(l)),c[l]=u,h[u]=l;else for(a=0;a<m;a++)l=i.getFixedLengthTrimmedString(s),d=i.getLong(),p=d-t,f=i.position,e(i,p),i.position=f}(e,-1)}}function hc(e,t,n,i,r){return e?(i>e.startChrom||i===e.startChrom&&r>=e.startBase)&&(t<e.endChrom||t===e.endChrom&&n<=e.endBase):(console.log("null item for "+t+" "+n+" "+r),!1)}class uc{constructor(e){e?(this.basesCovered=e.getLong(),this.minVal=e.getDouble(),this.maxVal=e.getDouble(),this.sumData=e.getDouble(),this.sumSquares=e.getDouble(),dc.call(this)):(this.basesCovered=0,this.minVal=0,this.maxVal=0,this.sumData=0,this.sumSquares=0,this.mean=0,this.stddev=0)}}function dc(){let e=this.basesCovered;e>0&&(this.mean=this.sumData/e,this.stddev=Math.sqrt(this.sumSquares/(e-1)),this.defaultRange={min:this.minVal<0?this.mean-2*this.stddev:0,max:this.maxVal>0?this.mean+2*this.stddev:0})}function pc(e,t,n,i,r,s,o){const a=new Tl(e),l=a.getInt();let c=a.getInt(),h=a.getInt();const u=a.getInt(),d=a.getInt(),p=a.getByte();a.getByte();let f=a.getUShort();if(l>=t&&l<=i)for(;f-- >0;){let e;switch(p){case 1:c=a.getInt(),h=a.getInt(),e=a.getFloat();break;case 2:c=a.getInt(),e=a.getFloat(),h=c+d;break;case 3:e=a.getFloat(),h=c+d,c+=u}if(!(l<t||l===t&&h<n)){if(l>i||l===i&&c>=r)break;Number.isFinite(e)&&s.push({chr:o[l],start:c,end:h,value:e})}}}function fc(){const e=function(e,t,n){if(n&&"chromatinInteract"===n.table)return function(e,t){return e.chr1=t[5],e.start1=Number.parseInt(t[6]),e.end1=Number.parseInt(t[7]),e.chr2=t[10],e.start2=Number.parseInt(t[11]),e.end2=Number.parseInt(t[12]),e.name=t[0],e.score=Number.parseFloat(t[1]),e.value=Number.parseFloat(t[2]),e.color="."===t[4]?void 0:"0"===t[4]?"rgb(0,0,0)":t[4],e};{const i=e-3;return function(r,s){if(i>0&&(r.name=s[0]),i>1&&(r.score=parseFloat(s[1])),i>2&&(r.strand=s[2]),i>3&&(r.cdStart=parseInt(s[3])),i>4&&(r.cdEnd=parseInt(s[4])),i>5&&"."!==s[5]&&"0"!==s[5]&&"-1"!==s[5]){const e=Gr.createColorString(s[5]);r.color=e.startsWith("rgb")?e:void 0}if(i>8){const e=parseInt(s[6]),t=s[7].split(","),n=s[8].split(","),i=[];for(let s=0;s<e;s++){const e=r.start+parseInt(n[s]),o=e+parseInt(t[s]);i.push({start:e,end:o})}r.exons=i}if(n)for(let i=e;i<t;i++)i<n.fields.length&&(r[n.fields[i].name]=s[i-3])}}}(this.header.definedFieldCount,this.header.fieldCount,this.autoSql);return function(t,n,i,r,s,o,a){const l=new Tl(t);for(;l.remLength()>=13;){const t=l.getInt(),c=a[t],h=l.getInt(),u=l.getInt(),d=l.getString();if(!(t<n||t===n&&u<i)){if(t>r||t===r&&h>=s)break;if(u>0){const t={chr:c,start:h,end:u};o.push(t);const n=d.split("\t");e(t,n)}}}}}function mc(e,t,n,i,r,s,o,a){const l=new Tl(e);for(;l.remLength()>=32;){const e=l.getInt(),c=o[e],h=l.getInt(),u=l.getInt(),d=l.getInt(),p=l.getFloat(),f=l.getFloat(),m=l.getFloat();let g;switch(l.getFloat(),a){case"min":g=p;break;case"max":g=f;break;default:g=0===d?0:m/d}if(!(e<t||e===t&&u<n)){if(e>i||e===i&&h>=r)break;Number.isFinite(g)&&s.push({chr:c,start:h,end:u,value:g})}}}class gc{constructor(e){this.data=Hr(e).buffer}loadArrayBuffer(e,t){const n=t.range;return n?this.data.slice(n.start,n.start+n.size):this.data}async dataViewForRange(e,t){const n=Math.min(this.data.byteLength-e.start,e.size);return t?new Uint8Array(this.data,e.start,n):new DataView(this.data,e.start,n)}}class vc{constructor(e,t){this.reader=new sc(e,t),this.genome=t,this.format=e.format||"bigwig",this.wgValues={}}async getFeatures({chr:e,start:t,end:n,bpPerPixel:i,windowFunction:r}){const s="all"===e.toLowerCase()?await this.getWGValues(r):await this.reader.readFeatures(e,t,e,n,i,r);return"bigwig"===this.reader.type||Kl(s),s}async getHeader(){return this.reader.loadHeader()}getDefaultRange(){return void 0!==this.reader.totalSummary?this.reader.totalSummary.defaultRange:void 0}async defaultVisibilityWindow(){return this.reader.defaultVisibilityWindow}async getWGValues(e){const t=this.genome;if(this.wgValues[e])return this.wgValues[e];{const n=t.getGenomeLength()/1e3,i=await this.reader.readWGFeatures(n,e);let r=[];for(let e of i){const n=t.getCumulativeOffset(e.chr),i=Object.assign({},e);i.chr="all",i.start=n+e.start,i.end=n+e.end,r.push(i)}return this.wgValues[e]=r,r}}supportsWholeGenome(){return"bigwig"===this.reader.type||this.defaultVisibilityWindow()<=0}async trackType(){return this.reader.getTrackType()}}class bc{constructor(e,t){this.config=e,this.genome=t,this.path=e.url,this.groupCache={},this.datasetCache={}}async readHeader(){if(void 0!==this.magic)return this;let e=await rs.loadArrayBuffer(this.path,Zo(this.config,{range:{start:0,size:64e3}})),t=new Tl(new DataView(e));if(this.magic=t.getInt(),this.version=t.getInt(),this.indexPos=t.getLong(),this.indexSize=t.getInt(),t.getInt(),this.version>=2){let e=t.getInt();for(this.windowFunctions=[];e-- >0;)this.windowFunctions.push(t.getString())}this.trackType=t.getString(),this.trackLine=t.getString();let n=t.getInt();for(this.trackNames=[];n-- >0;)this.trackNames.push(t.getString());this.genomeID=t.getString(),this.flags=t.getInt(),this.compressed=0!=(1&this.flags),e=await rs.loadArrayBuffer(this.path,Zo(this.config,{range:{start:this.indexPos,size:this.indexSize}})),t=new Tl(new DataView(e)),this.datasetIndex={};let i=t.getInt();for(;i-- >0;){const e=t.getString(),n=t.getLong(),i=t.getInt();this.datasetIndex[e]={position:n,size:i}}for(this.groupIndex={},i=t.getInt();i-- >0;){const e=t.getString(),n=t.getLong(),i=t.getInt();this.groupIndex[e]={position:n,size:i}}return this}async readDataset(e,t,n){const i=e+"_"+t+"_"+n;if(this.datasetCache[i])return this.datasetCache[i];{await this.readHeader();const r=this.version<2?"":"/"+t,s="all"===e.toLowerCase()||void 0===n?"0":n.toString();let o;o="raw"===t?"/"+e+"/raw":"/"+e+"/z"+s+r;const a=this.datasetIndex[o];if(void 0===a)return;const l=await rs.loadArrayBuffer(this.path,Zo(this.config,{range:{start:a.position,size:a.size}}));if(!l)return;const c=new Tl(new DataView(l));let h=c.getInt();const u={};for(;h-- >0;)u[c.getString()]=c.getString();const d=c.getString(),p=c.getFloat();let f=c.getInt();const m=[];for(;f-- >0;)m.push({position:c.getLong(),size:c.getInt()});const g={name:o,attributes:u,dataType:d,tileWidth:p,tiles:m};return this.datasetCache[i]=g,g}}async readRootGroup(){const e=this.genome,t=this.groupCache["/"];if(t)return t;{const t=await this.readGroup("/"),n=t.chromosomes,i=t.maxZoom;i&&(this.maxZoom=Number(i));const r=t.totalCount;r&&(t.totalCount=Number.parseFloat(r));const s={};return n&&n.split(",").forEach(function(t){const n=e.getChromosomeName(t);s[n]=t}),this.chrAliasTable=s,this.groupCache["/"]=t,t}}async readGroup(e){const t=this.groupCache[e];if(t)return t;{await this.readHeader();const t=this.groupIndex[e];if(void 0===t)return;const n=await rs.loadArrayBuffer(this.path,Zo(this.config,{range:{start:t.position,size:t.size}}));if(!n)return;const i=new Tl(new DataView(n)),r={name:e};let s=i.getInt();for(;s-- >0;){const e=i.getString(),t=i.getString();r[e]=t}return this.groupCache[e]=r,r}}async readTiles(e,t){if(e.sort(function(e,t){return e.position-t.position}),0===(e=e.filter(function(e){return e.size>0})).length)return Promise.resolve([]);const n=e[e.length-1],i=e[0].position,r=n.position+n.size-i,s=await rs.loadArrayBuffer(this.path,Zo(this.config,{range:{start:i,size:r}})),o=[];for(let a of e){const e=a.position-i,n=a.size;if(n>0){let i;i=this.compressed?Fr(s.slice(e,e+n)).buffer:s.slice(e,e+n);const r=new Tl(new DataView(i)),a=r.getString();let l;switch(a){case"fixedStep":l=yc(r,t);break;case"variableStep":l=_c(r,t);break;case"bed":case"bedWithName":l=wc(r,t,a);break;default:throw"Unknown tile type: "+a}o.push(l)}}return o}async readTile(e,t){let n=await rs.loadArrayBuffer(this.path,Zo(this.config,{range:{start:e.position,size:e.size}}));this.compressed&&(n=Fr(n).buffer);const i=new Tl(new DataView(n)),r=i.getString();switch(r){case"fixedStep":return yc(i,t);case"variableStep":return _c(i,t);case"bed":case"bedWithName":return wc(i,t,r);default:throw"Unknown tile type: "+r}}}function yc(e,t){const n=e.getInt(),i=e.getInt(),r=e.getFloat(),s=[];let o=t;for(;o-- >0;){let t=n;const i=[];for(;t-- >0;)i.push(e.getFloat());s.push(i)}return{type:"fixedStep",start:i,span:r,data:s,nTracks:t,nPositions:n}}function _c(e,t){const n=e.getInt(),i=e.getFloat(),r=e.getInt(),s=[];let o=r;for(;o-- >0;)s.push(e.getInt());e.getInt();const a=[];let l=t;for(;l-- >0;){o=r;const t=[];for(;o-- >0;)t.push(e.getFloat());a.push(t)}return{type:"variableStep",tileStart:n,span:i,start:s,data:a,nTracks:t,nPositions:r}}function wc(e,t,n){const i=e.getInt();let r=i;const s=[];for(;r-- >0;)s.push(e.getInt());r=i;const o=[];for(;r-- >0;)o.push(e.getInt());e.getInt();const a=[];let l=t;for(;l-- >0;){let t=i;const n=[];for(;t-- >0;)n.push(e.getFloat());a.push(n)}if("bedWithName"===n){r=i;const t=[];for(;r-- >0;)t.push(e.getString())}return{type:n,start:s,end:o,data:a,nTracks:t,nPositions:i}}class xc{constructor(e,t){this.genome=t,this.windowFunction=e.windowFunction||"mean",this.reader=new bc(e,t)}async getFeatures({chr:e,start:t,end:n,bpPerPixel:i}){const r=new Ao(e,t,n),s=this.genome;if(!this.rootGroup&&(this.rootGroup=await this.reader.readRootGroup(),!this.normalizationFactor)){const e=this.rootGroup.totalCount;e&&(this.normalizationFactor=1e6/e)}if("all"===e.toLowerCase())return[];r.bpPerPixel=i;const o=function(e,t,n){var i=n.getChromosome(e).bpLength;return Math.ceil(Math.log(Math.max(0,i/(700*t)))/Ec)}(e,i,s);let a=this.reader.chrAliasTable[e],l=this.reader.maxZoom;void 0===a&&(a=e),void 0===l&&(l=-1);const c=o>l?"raw":this.windowFunction,h=await this.reader.readDataset(a,c,o);if(null==h)return[];const u=h.tileWidth,d=Math.floor(t/u),p=Math.floor(n/u),f=await this.reader.readTiles(h.tiles.slice(d,p+1),1),m=[];for(let g of f)switch(g.type){case"bed":Sc(g,e,t,n,0,m);break;case"variableStep":Cc(g,e,t,n,0,m);break;case"fixedStep":kc(g,e,t,n,0,m);break;default:throw"Unknown tile type: "+g.type}return m.sort(function(e,t){return e.start-t.start}),m}supportsWholeGenome(){return!1}}function Sc(e,t,n,i,r,s){const o=e.nPositions,a=e.start,l=e.end,c=e.data[0];for(let h=0;h<o;h++){const e=a[h],r=l[h];if(!(r<n)){if(e>i)break;s.push({chr:t,start:e,end:r,value:c[h]})}}}function Cc(e,t,n,i,r,s){const o=e.nPositions,a=e.start,l=e.span,c=e.data[0];for(let h=0;h<o;h++){const e=a[h],r=e+l;if(!(r<n)){if(e>i)break;s.push({chr:t,start:e,end:r,value:c[h]})}}}function kc(e,t,n,i,r,s){const o=e.nPositions;let a=e.start;const l=e.span,c=e.data[0];for(let h=0;h<o;h++){const e=a+l;if(a>i)break;e>=n&&(Number.isNaN(c[h])||s.push({chr:t,start:a,end:e,value:c[h]})),a=e}}var Ec=Math.log(2);function Ac(e,t){const n=e.format?e.format.toLowerCase():void 0;return"bigwig"===n||"bigbed"===n||"bb"===n?new vc(e,t):"tdf"===n?new xc(e,t):new nc(e,t)}const Rc=[["A","T"],["G","C"],["Y","R"],["W","S"],["K","M"],["D","H"],["B","V"]],Tc=new Map;for(let ed of Rc){const e=ed[0],t=ed[1];Tc.set(e,t),Tc.set(t,e),Tc.set(e.toLowerCase(),t.toLowerCase()),Tc.set(t.toLowerCase(),e.toLowerCase())}const Ic={getTissueInfo:function(e,t){return rs.loadJson((t=t||"https://gtexportal.org/rest/v1")+"/dataset/tissueInfo?datasetId="+(e=e||"gtex_v8"),{})},trackConfiguration:function(e,t){return{type:"eqtl",sourceType:"gtex-ws",url:(t=t||"https://gtexportal.org/rest/v1")+"/association/singleTissueEqtlByLocation",tissueSiteDetailId:e.tissueSiteDetailId,name:e.tissueSiteDetailId.split("_").join(" "),visibilityWindow:25e4}}};function Dc(e,t,n){let i=(e.start-t)/n,r=(e.end-t)/n,s=r-i;return s<3&&(s=3,i-=1.5),{px:i,px1:r,pw:s}}function Oc(e,t,n,i,r,s){try{r.save(),r.fillStyle=this.defaultColor,r.strokeStyle=this.defaultColor;const i=Mc.call(this,e);let o,a;r.fillStyle=i,r.strokeStyle=i,"SQUISHED"===this.displayMode&&void 0!==e.row?(o=this.featureHeight/2,a=this.margin+this.squishedRowHeight*e.row):"EXPANDED"===this.displayMode&&void 0!==e.row?(o=this.featureHeight,a=this.margin+this.expandedRowHeight*e.row):(o=this.featureHeight,a=this.margin);const l=s.pixelWidth,c=a+o/2,h=o/2,u=c-h/2,d=e.exons?e.exons.length:0,p=Dc(e,t,n),f=this.arrowSpacing,m="+"===e.strand?1:"-"===e.strand?-1:0;if(0===d){const e=Math.max(0,p.px),t=Math.min(l,p.px1),n=Math.max(p.pw,t-e);if(r.fillRect(e,a,n,o),0!==m){r.fillStyle="white",r.strokeStyle="white";for(let n=e+f/2;n<t;n+=f)Ks.strokeLine(r,n-2*m,c-2,n,c),Ks.strokeLine(r,n-2*m,c+2,n,c);r.fillStyle=i,r.strokeStyle=i}}else{Ks.strokeLine(r,p.px+1,c,p.px1-1,c);const s=Math.max(0,p.px)+f/2,g=Math.min(l,p.px1);for(let e=s;e<g;e+=f)Ks.strokeLine(r,e-2*m,c-2,e,c),Ks.strokeLine(r,e-2*m,c+2,e,c);for(let p=0;p<d;p++){const s=e.exons[p];let d,g=Math.round((s.start-t)/n),v=Math.round((s.end-t)/n),b=Math.max(1,v-g);if(!(g+b<0)){if(g>l)break;if(s.utr)r.fillRect(g,u,b,h);else if(s.cdStart&&(d=Math.round((s.cdStart-t)/n),r.fillRect(g,u,d-g,h),b-=d-g,g=d),s.cdEnd&&(d=Math.round((s.cdEnd-t)/n),r.fillRect(d,u,v-d,h),b-=v-d,v=d),b=Math.max(b,1),r.fillRect(g,a,b,o),b>f+5&&0!==m){r.fillStyle="white",r.strokeStyle="white";for(let e=g+f/2;e<v;e+=f)Ks.strokeLine(r,e-2*m,c-2,e,c),Ks.strokeLine(r,e-2*m,c+2,e,c);r.fillStyle=i,r.strokeStyle=i}}}}s.drawLabel&&"SQUISHED"!==this.displayMode&&Pc.call(this,r,e,p.px,p.px1,a,s.referenceFrame,s)}finally{r.restore()}}function Pc(e,t,n,i,r,s,o){try{e.save();let a=t.name;if(void 0===a&&t.gene&&(a=t.gene.name),void 0===a&&(a=t.id||t.ID),!a||"."===a)return;let l=o.pixelXOffset||0;const c=(Math.max(n,-l)+Math.min(i,-l+o.viewportWidth))/2;let h;"COLLAPSED"===this.displayMode&&"SLANT"===this.labelDisplayMode&&(h={rotate:{angle:45}});const u=function(e,t){return t?e+20:e+25}(r,h);let d,p=Mc.call(this,t),f=!1;s.selection&&Ic.gtexLoaded&&(f=!0,d=s.selection.colorForGene(a));const m={textAlign:"SLANT"===this.labelDisplayMode?void 0:"center",fillStyle:d||p,strokeStyle:d||p},g=e.measureText(a),v=c-g.width/2,b=c+g.width/2;(o.labelAllFeatures||v>o.rowLastX[t.row]||f)&&(o.rowLastX[t.row]=b,Ks.fillText(e,a,c,u,m,h))}finally{e.restore()}}function Mc(e){let t;if(this.altColor&&"-"===e.strand)t="function"==typeof this.altColor?this.altColor(e):this.altColor;else if(this.color)t="function"==typeof this.color?this.color(e):this.color;else if(this.colorBy){const n=e.getAttributeValue?e.getAttributeValue(this.colorBy):e[this.colorBy];t=this.colorTable.getColor(n)}else t=e.color?e.color:this.defaultColor;if(e.alpha&&1!==e.alpha)t=Gr.addAlpha(t,e.alpha);else if(this.useScore&&e.score&&!Number.isNaN(e.score)){const n=function(e,t,n){const i=Math.floor((n-e)/((t-e)/9));return Math.min(1,.2+.8*i/9)}(this.config.min?this.config.min:0,this.config.max?this.config.max:1e3,e.score);e.alpha=n,t=Gr.addAlpha(t,n)}return t}const Lc=new Set(["nonsense","missense","stop-loss","frameshift","cds-indel"]),Fc=new Set(["coding-synon"]),Nc=new Set(["splice-3","splice-5"]),zc=new Set(["untranslated-5","untranslated-3"]);function Vc(e,t,n,i,r){var s,o,a,l=Dc(e,t,n),c=this.margin,h=this.snpColors.length;switch(s="squished"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight,this.colorBy){case"function":o=e.func.split(",").map(function(e){return Lc.has(e)||Nc.has(e)?h-1:Fc.has(e)?h-2:zc.has(e)?h-3:0}).reduce(function(e,t){return Math.max(e,t)});break;case"class":o="deletion"===(a=e.class)?h-1:"mnp"===a?h-2:"microsatellite"===a||"named"===a?h-3:0}r.fillStyle=this.snpColors[o],r.fillRect(l.px,c,l.pw,s)}function jc(e,t,n,i,r){const s="EXPANDED"===this.displayMode?this.expandedRowHeight:this.squishedRowHeight;let o=this.margin;"COLLAPSED"!==this.displayMode&&void 0!==e.row&&(o+=e.row*s);const a=o+.5*s,l=a-.5*s,c=a+.5*s,h=Math.round((e.junction_left-t)/n),u=Math.round((e.junction_right-t)/n);r.beginPath(),r.moveTo(h,a),r.bezierCurveTo(h,l,u,l,u,a),r.lineWidth=1+Math.log(e.num_junction_reads)/Math.log(2),r.strokeStyle="blue",r.stroke();const d=e.spanning_frag_coords;for(let p=0;p<d.length;p++){const e=d[p],i=Math.round((e.left-t)/n),s=Math.round((e.right-t)/n);r.beginPath(),r.moveTo(i,a),r.bezierCurveTo(i,c,s,c,s,a),r.lineWidth=1,r.strokeStyle="purple",r.stroke()}}class Bc extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.type=e.type||"annotation",this.maxRows=void 0===e.maxRows?1e3:e.maxRows,this.displayMode=e.displayMode||"EXPANDED",this.labelDisplayMode=e.labelDisplayMode,e._featureSource?(this.featureSource=e._featureSource,delete e._featureSource):this.featureSource=e.featureSource?e.featureSource:Ac(e,this.browser.genome),this.autoHeight=e.autoHeight,this.margin=void 0===e.margin?10:e.margin,this.featureHeight=e.featureHeight||14,"FusionJuncSpan"===e.type?(this.render=e.render||jc,this.squishedRowHeight=e.squishedRowHeight||50,this.expandedRowHeight=e.expandedRowHeight||50,this.height=e.height||this.margin+2*this.expandedRowHeight):"snp"===e.type?(this.render=e.render||Vc,this.snpColors=["rgb(0,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,0,0)"],this.colorBy="function",this.expandedRowHeight=e.expandedRowHeight||10,this.squishedRowHeight=e.squishedRowHeight||5,this.height=e.height||30):(this.render=e.render||Oc,this.arrowSpacing=30,function(e){function t(){e.trackView&&"SQUISHED"!==e.displayMode&&e.trackView.repaintViews()}e.browser.on&&(e.browser.on("trackdragend",t),e.browser.on("trackremoved",function n(i){e.browser.un&&e===i&&(e.browser.un("trackdragend",t),e.browser.un("trackremoved",n))}))}(this),this.squishedRowHeight=e.squishedRowHeight||15,this.expandedRowHeight=e.expandedRowHeight||30,this.height=e.height||this.margin+2*this.expandedRowHeight,e.colorBy&&(e.colorBy.field&&(e.colorTable=e.colorBy.pallete||e.colorBy.palette,e.colorBy=e.colorBy.field),this.colorBy=e.colorBy,this.colorTable=e.colorTable?new ro(e.colorTable):new io("Set1"))),this.useScore=e.useScore}async postInit(){return"function"==typeof this.featureSource.getHeader&&(this.header=await this.featureSource.getHeader()),this.header&&this.setTrackProperties(this.header),void 0===this.visibilityWindow&&"function"==typeof this.featureSource.defaultVisibilityWindow&&(this.visibilityWindow=await this.featureSource.defaultVisibilityWindow(),this.featureSource.visibilityWindow=this.visibilityWindow),this}supportsWholeGenome(){return(!1===this.config.indexed||!this.config.indexURL)&&!1!==this.config.supportsWholeGenome}async getFeatures(e,t,n,i){return this.featureSource.getFeatures({chr:e,start:t,end:n,bpPerPixel:i,visibilityWindow:this.visibilityWindow})}computePixelHeight(e){if("COLLAPSED"===this.displayMode)return this.margin+this.expandedRowHeight;{let t=0;if(e&&"function"==typeof e.forEach)for(let n of e)n.row&&n.row>t&&(t=n.row);return this.margin+(t+1)*("SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight)}}draw(e){const t=e.features,n=e.context,i=e.bpPerPixel,r=e.bpStart,s=e.pixelWidth,o=e.pixelHeight,a=r+s*i+1;if(this.config.isMergedTrack||Ks.fillRect(n,0,e.pixelTop,s,o,{fillStyle:"rgb(255, 255, 255)"}),t){const l=[];e.rowLastX=[];for(let n of t){const t=n.row||0;void 0===l[t]?l[t]=1:l[t]++,e.rowLastX[t]=-Number.MAX_SAFE_INTEGER}let c=[];for(let h of t){if(h.end<r)continue;if(h.start>a)break;const t="COLLAPSED"===this.displayMode?0:h.row,u=s/l[t];e.drawLabel=e.labelAllFeatures||u>10;const d=Math.ceil((h.end-r)/i),p=c[t];if(!p||d>p){this.render.call(this,h,r,i,o,n,e);const s=Math.floor((h.start-r)/i);p&&s-p<=0&&(n.globalAlpha=.5,Ks.strokeLine(n,s,0,s,o,{strokeStyle:"rgb(255, 255, 255)"}),n.globalAlpha=1),c[t]=d}}}else console.log("No feature list")}clickedFeatures(e,t){const n=e.y-this.margin,i=super.clickedFeatures(e,t);let r;switch(this.displayMode){case"SQUISHED":r=Math.floor(n/this.squishedRowHeight);break;case"EXPANDED":r=Math.floor(n/this.expandedRowHeight);break;default:r=void 0}return i.filter(function(e){return void 0===r||void 0===e.row||r===e.row})}popupData(e,t){t=this.clickedFeatures(e,t);const n=e.genomicLocation,i=[];for(let r of t){const e=r._f||r,t="function"==typeof e.popupData?e.popupData(n):this.extractPopupData(e);if(t){i.length>0&&i.push("<hr/><hr/>");const s=this.infoURL||this.config.infoURL;for(let e of t)if(i.push(e),s&&e.name&&"name"===e.name.toLowerCase()&&e.value&&xt(e.value)&&!e.value.startsWith("<")){const t=(this.infoURL||this.config.infoURL).replace("$$",r.name);i.push({name:"Info",value:`<a target="_blank" href=${t}>${e.value}</a>`})}const o="gff"===this.config.format||"gff3"===this.config.format||"gtf"===this.config.format;if(e.exons)for(let t=0;t<e.exons.length;t++){const r=e.exons[t];if(n>=r.start&&n<=r.end){const n=o?r.number:"-"===e.strand?e.exons.length-t:t+1;n&&(i.push("<hr/>"),i.push({name:"Exon Number",value:n}));break}}}}return i}menuItemList(){const e=this,t=[];if(this.render===Vc){t.push("<hr/>");for(let e of["function","class"])t.push({object:pt(Ss("Color by "+e,e===this.colorBy)),click:()=>{this.colorBy=e,this.trackView.repaintViews()}})}return t.push("<hr/>"),["COLLAPSED","SQUISHED","EXPANDED"].forEach(function(n){t.push({object:pt(Ss({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[n],n===e.displayMode)),click:function(){e.displayMode=n,e.config.displayMode=n,e.trackView.checkContentHeight(),e.trackView.repaintViews()}})}),t}contextMenuItemList(e){const t=this.clickedFeatures(e);t.length>1&&t.sort((e,t)=>e.end-e.start-(t.end-t.start));const n=t[0];return n.end-n.start<=1e6?[{label:"Copy feature sequence",click:async()=>{let e=await this.browser.genome.getSequence(n.chr,n.start,n.end);"-"===n.strand&&(e=function(e){let t="",n=e.length;for(;n-- >0;){const i=e[n];t+=Tc.has(i)?Tc.get(i):i}return t}(e)),navigator.clipboard.writeText(e)}},"<hr/>"]:void 0}description(){if(Vc===this.render){let e="<html>"+this.name+"<hr/>";return e+="<em>Color By Function:</em><br>",e+='<span style="color:red">Red</span>: Coding-Non-Synonymous, Splice Site<br>',e+='<span style="color:green">Green</span>: Coding-Synonymous<br>',e+='<span style="color:blue">Blue</span>: Untranslated<br>',e+='<span style="color:black">Black</span>: Intron, Locus, Unknown<br><br>',e+="<em>Color By Class:</em><br>",e+='<span style="color:red">Red</span>: Deletion<br>',e+='<span style="color:green">Green</span>: MNP<br>',e+='<span style="color:blue">Blue</span>: Microsatellite, Named<br>',e+='<span style="color:black">Black</span>: Indel, Insertion, SNP',e+="</html>",e}return this.name}dispose(){this.trackView=void 0}}function Hc(e,t,n){var i,r,s,o,a,l,c,h={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};function u(e){return 0===e?"0":Math.abs(e)>=10?e.toFixed():Math.abs(e)>=1?e.toFixed(1):e.toFixed(2)}void 0!==this.dataRange&&void 0!==this.dataRange.max&&void 0!==this.dataRange.min&&(Ks.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"}),a={x:r=c=.95*t,y:s=o=.01*n},Ks.strokeLine(e,i=c-8,s,r,o,h),Ks.fillText(e,u(this.dataRange.max),i+4,s+12,h),l={x:r,y:s=o=.99*n},Ks.strokeLine(e,i,s,r,o,h),Ks.fillText(e,u(this.dataRange.min),i+4,s-4,h),Ks.strokeLine(e,a.x,a.y,l.x,l.y,h))}class qc extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.type="wig",this.height=e.height||50,this.featureType="numeric",this.paintAxis=Hc;const t=e.format?e.format.toLowerCase():e.format;this.featureSource="bigwig"===t?new vc(e,this.browser.genome):"tdf"===t?new xc(e,this.browser.genome):Ac(e,this.browser.genome),this.autoscale=e.autoscale||void 0===e.max,this.autoscale||(this.dataRange={min:e.min||0,max:e.max}),this.windowFunction=e.windowFunction||"mean",this.graphType=e.graphType||"bar",this.normalize=e.normalize,this.scaleFactor=e.scaleFactor}async postInit(){const e=await this.getHeader();e&&this.setTrackProperties(e)}async getFeatures(e,t,n,i){const r=await this.featureSource.getFeatures({chr:e,start:t,end:n,bpPerPixel:i,windowFunction:this.windowFunction});if(this.normalize&&this.featureSource.normalizationFactor){const e=this.featureSource.normalizationFactor;for(let t of r)t.value*=e}if(this.scaleFactor){const e=this.scaleFactor;for(let t of r)t.value*=e}return r}menuItemList(){return Cs.numericDataMenuItems(this.trackView)}async getHeader(){return"function"==typeof this.featureSource.getHeader&&(this.header=await this.featureSource.getHeader()),this.header}draw(e){const t=e.features,n=e.context,i=e.bpPerPixel,r=e.bpStart,s=e.pixelHeight,o=r+e.pixelWidth*i+1;let a=-1,l=-1;const c=this.color||"rgb(150,150,150)";let h;"string"==typeof c&&c.startsWith("rgb(")&&(h=Gr.addAlpha(c,.1));const u=e=>(this.dataRange.max-e)/(this.dataRange.max-this.dataRange.min)*s;if(t&&t.length>0&&(void 0===this.dataRange.min&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){const d=0==this.dataRange.min?s:u(0);for(let e of t){if(e.end<r)continue;if(e.start>o)break;const t=Math.floor((e.start-r)/i);if(isNaN(t))continue;let s=u(e.value);const h=Math.ceil((e.end-r)/i),p=Math.max(1,h-t);let f=e.value<0&&this.altColor?this.altColor:c;const m="function"==typeof f?f(e.value):f;if("points"===this.graphType)Ks.fillCircle(n,t+p/2,s,(this.config.pointSize||3)/2,{fillStyle:m,strokeStyle:m});else{let i=s-d;Math.abs(i)<1&&(i=i<0?-1:1);const r=t+p;(r>a||e.value>=0&&e.value>l||e.value<0&&e.value<1)&&Ks.fillRect(n,t,d,p,i,{fillStyle:m}),l=e.value,a=r}}if(this.dataRange.min<0){const t=this.dataRange.max/(this.dataRange.max-this.dataRange.min)*e.pixelHeight;Ks.strokeLine(n,0,t,e.pixelWidth,t,{strokeStyle:h})}}if(this.config.hasOwnProperty("guideLines"))for(let d of this.config.guideLines)if(d.hasOwnProperty("color")&&d.hasOwnProperty("y")&&d.hasOwnProperty("dotted")){let t=u(d.y),n={strokeStyle:d.color,strokeWidth:2};d.dotted?Ks.dashedLine(e.context,0,t,e.pixelWidth,t,5,n):Ks.strokeLine(e.context,0,t,e.pixelWidth,t,n)}}popupData(e,t){if((t=this.clickedFeatures(e,t))&&t.length>0){const n=e.genomicLocation,i=[];t.sort(function(e,t){return Math.abs((e.start+e.end)/2-n)-Math.abs((t.start+t.end)/2-n)});const r=t.length>10?t.slice(0,10):t;r.sort(function(e,t){return e.start-t.start});for(let e of r)if(e){i.length>0&&i.push("<hr/>");let t=e.end-e.start==1?St(e.start+1):St(e.start+1)+"-"+St(e.end);i.push({name:"Position:",value:t}),i.push({name:"Value:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",value:St(e.value)})}return r.length<t.length&&i.push("<hr/>..."),i}return[]}supportsWholeGenome(){return"function"==typeof this.featureSource.supportsWholeGenome&&this.featureSource.supportsWholeGenome()}dispose(){this.trackView=void 0}}function $c(e){this.thresholds=e.thresholds,this.colors=e.colors}function Uc(e){this.scale=e,this.lowColor="rgb("+e.lowR+","+e.lowG+","+e.lowB+")",this.highColor="rgb("+e.highR+","+e.highG+","+e.highB+")",this.diff=e.high-e.low}$c.prototype.getColor=function(e){for(let t of this.thresholds)if(e<t)return this.colors[this.thresholds.indexOf(t)];return this.colors[this.colors.length-1]},Uc.prototype.getColor=function(e){var t,n=this.scale;return e<=n.low?this.lowColor:e>=n.high?this.highColor:(t=(e-n.low)/this.diff,"rgb("+Math.floor(n.lowR+t*(n.highR-n.lowR))+","+Math.floor(n.lowG+t*(n.highG-n.lowG))+","+Math.floor(n.lowB+t*(n.highB-n.lowB))+")")};class Wc{constructor(e){this.color=e}getColor(){return this.color}}class Gc extends ol{constructor(e,t){super(e,t)}init(e){if(super.init(e),this.type=e.type||"seg","maf"===this.type&&(this.type="mut"),this.isLog=e.isLog,this.displayMode=e.displayMode||"EXPANDED",this.height=e.height||300,this.maxHeight=e.maxHeight||500,this.squishedRowHeight=e.sampleSquishHeight||e.squishedRowHeight||2,this.expandedRowHeight=e.sampleExpandHeight||e.expandedRowHeight||13,this.sampleHeight=this.squishedRowHeight,e.color?this.color=e.color:(this.posColorScale=e.posColorScale||new Uc({low:.1,lowR:255,lowG:255,lowB:255,high:1.5,highR:255,highG:0,highB:0}),this.negColorScale=e.negColorScale||new Uc({low:-1.5,lowR:0,lowG:0,lowB:255,high:-.1,highR:255,highG:255,highB:255}),"mut"===this.type&&(this.colorTable=new ro(e.colorTable||Yc))),this.sampleKeys=[],this.sampleNames=new Map,e.samples){for(let t of e.samples)this.sampleKeys.push(t),this.sampleNames.set(t,t);this.explicitSamples=!0}this.featureSource=Ac(this.config,this.browser.genome),this.initialSort=e.sort}async postInit(){"function"==typeof this.featureSource.getHeader&&(this.header=await this.featureSource.getHeader()),this.header&&this.setTrackProperties(this.header)}menuItemList(){const e=[],t={SQUISHED:"Squish",EXPANDED:"Expand",FILL:"Fill"};e.push("<hr/>"),e.push("DisplayMode:");const n="seg"===this.type?["SQUISHED","EXPANDED","FILL"]:["SQUISHED","EXPANDED"];for(let i of n){const n=Ss(t[i],i===this.displayMode);e.push({object:pt(n),click:()=>{this.displayMode=i,this.config.displayMode=i,this.trackView.checkContentHeight(),this.trackView.repaintViews(),this.trackView.moveScroller(this.trackView.sampleNameViewport.trackScrollDelta)}})}return e}hasSamples(){return!0}getSamples(){return{names:this.sampleKeys.map(e=>this.sampleNames.get(e)),height:this.sampleHeight,yOffset:0}}async getFeatures(e,t,n){const i=await this.featureSource.getFeatures({chr:e,start:t,end:n});if(this.initialSort){const e=this.initialSort;this.sortSamples(e.chr,e.start,e.end,e.direction,i),this.initialSort=void 0}return i}draw({context:e,pixelTop:t,pixelWidth:n,pixelHeight:i,features:r,bpPerPixel:s,bpStart:o}){if(Ks.fillRect(e,0,0,n,i,{fillStyle:"rgb(255, 255, 255)"}),r&&r.length>0){this.checkForLog(r),this.updateSampleKeys(r);const a={};let l;switch(this.sampleKeys.forEach(function(e,t){a[e]=t}),this.displayMode){case"FILL":this.sampleHeight=i/this.sampleKeys.length,l=0;break;case"SQUISHED":this.sampleHeight=this.squishedRowHeight,l=0;break;default:this.sampleHeight=this.expandedRowHeight,l=1}const c=this.sampleHeight;for(let e of r)e.pixelRect=void 0;const h=t+i,u=o+n*s+1,d=s;this.sampleYStart=void 0;for(let n of r){if(n.end<o)continue;if(n.start>u)break;n.row=a[n.sampleKey||n.sample];const i=n.row*c+l;if(void 0===this.sampleYStart&&(this.sampleYStart=i),i+c<t||i>h)continue;const r=Math.max(n.start,o);let s=Math.round((r-o)/d);const p=Math.min(n.end,u),f=Math.round((p-o)/d);let m,g,v=Math.max(1,f-s);if(this.color?m="function"==typeof this.color?this.color(n):this.color:this.colorTable&&(m=this.colorTable.getColor(n.value.toLowerCase())),"mut"===this.type)g=c-2*l,v<3&&(v=3,s-=1);else{let e=n.value;this.isLog||(e=$r(e/2)),m=e<-.1?this.negColorScale.getColor(e):e>.1?this.posColorScale.getColor(e):"white";let t=c;if(c<.25){const n=.1+2*Math.abs(e);t=Math.min(1,n*c)}g=t-2*l}n.pixelRect={x:s,y:i,w:v,h:g},e.fillStyle=m,e.fillRect(s,i,v,g)}}}checkForLog(e){if(void 0===this.isLog){this.isLog=!1;for(let t of e)if(t.value<0)return void(this.isLog=!0)}}computePixelHeight(e){if(!e)return 0;const t="SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight;return this.updateSampleKeys(e),this.sampleKeys.length*t}async sortSamples(e,t,n,i,r){if(r||(r=await this.featureSource.getFeatures({chr:e,start:t,end:n})),!r)return;this.updateSampleKeys(r);const s={},o="ASC"===i?1:-1;"mut"===this.type?(()=>{for(let e of r){if(e.end<t)continue;if(e.start>n)break;const i=e.sampleKey||e.sample;(!s.hasOwnProperty(i)||e.value.localeCompare(s[i])>0)&&(s[i]=e.value)}this.sampleKeys.sort(function(e,t){return o*(s[e]||"").localeCompare(s[t]||"")})})():(()=>{const e=n-t+1;for(let i of r){if(i.end<t)continue;if(i.start>n)break;const r=Math.max(t,i.start),o=Math.min(n,i.end),a=i.sampleKey||i.sample;s[a]=(s[a]||0)+(o-r)/e*i.value}this.sampleKeys.sort(function(e,t){let n=s[e],i=s[t];return n||(n=o*Number.MAX_VALUE),i||(i=o*Number.MAX_VALUE),n===i?0:n>i?o:-1*o})})(),this.trackView.repaintViews()}clickedFeatures(e,t){const n=super.clickedFeatures(e,t),i=e.y;return n.filter(function(e){const t=e.pixelRect;return t&&i>=t.y&&i<=t.y+t.h})}popupData(e,t){t=this.clickedFeatures(e);const n=[];for(let i of t){n.length>0&&(n.push("<hr/>"),n.push("<hr/>"));const e=i._f||i,t="function"==typeof e.popupData?e.popupData():this.extractPopupData(e);Array.prototype.push.apply(n,t)}return n}contextMenuItemList(e){const t=e.genomicLocation,n=this.config.sort?"ASC"===this.config.sort.direction?"DESC":"ASC":"DESC",i=e.viewport.referenceFrame.toBP(2.5),r=t=>{const n=e.viewport.getCachedFeatures();this.sortSamples(t.chr,t.start,t.end,t.direction,n)};return[{label:"seg"===this.type?"Sort by value":"Sort by type",click:s=>{const o={direction:n,chr:e.viewport.referenceFrame.chr,start:t-i,end:t+i};r(o),this.config.sort=o}}]}supportsWholeGenome(){return(!1===this.config.indexed||!this.config.indexURL)&&!1!==this.config.supportsWholeGenome}updateSampleKeys(e){if(!this.explicitSamples)for(let t of e){const e=t.sampleKey||t.sample;this.sampleNames.has(e)||(this.sampleNames.set(e,t.sample),this.sampleKeys.push(e))}}}const Yc={indel:"rgb(0,200,0)","targeted region":"rgb(236,155,43)",truncating:"rgb(\t150,0,0)","non-coding transcript":"rgb(0,0,150)",synonymous:"rgb(109,165,95)",silent:"rgb(109,135,80)",missense_mutation:"rgb(72,130,187)",missense:"rgb(72,130,187)","splice site":"rgb(143,83,155)",splice_region:"rgb(143,83,155)",nonsense:"rgb(216, 57,81)",nonsense_mutation:"rgb(216, 57,81)",frame_shift_del:"rgb(226,135,65)",frame_shift_ins:"rgb(226,135,65)",in_frame_del:"rgb(247,235,94)",in_frame_ins:"rgb(247,235,94)","*other*":"rgb(159,91,50)"};class Zc extends ol{constructor(e,t){super(e,t)}init(e){if(!e.tracks)throw Error("Error: no tracks defined for merged track"+e);super.init(e)}get height(){return this._height}set height(e){if(this._height=e,this.tracks)for(let t of this.tracks)t.height=e,t.config.height=e}async postInit(){this.tracks=[];const e=[];for(let t of this.config.tracks){t.isMergedTrack=!0;const n=await this.browser.createTrack(t);n?(n.autoscale=!1,this.tracks.push(n)):console.warn("Could not create track "+t),"function"==typeof n.postInit&&e.push(n.postInit())}return this.height=this.config.height||100,Promise.all(e)}async getFeatures(e,t,n,i){const r=this.tracks.map(r=>r.getFeatures(e,t,n,i));return Promise.all(r)}draw(e){var t,n,i,r,s,o,a;for(i=e.features,o=0,a=-Number.MAX_VALUE,i.forEach(function(e,t){e.forEach(function(e){void 0===e.value||Number.isNaN(e.value)||(o=Math.min(o,e.value),a=Math.max(a,e.value))})}),s={min:o,max:a},t=0,n=this.tracks.length;t<n;t++)(r=Object.assign({},e)).features=i[t],this.tracks[t].dataRange=s,this.tracks[t].draw(r)}paintAxis(e,t,n){var i,r,s;for(i=0,r=this.tracks.length;i<r;i++)if("function"==typeof(s=this.tracks[i]).paintAxis){s.paintAxis(e,t,n);break}}popupData(e,t){const n=t||e.viewport.getCachedFeatures();if(n&&n.length===this.tracks.length){const t=[];for(let i=0;i<this.tracks.length;i++){i>0&&t.push("<hr/>"),t.push(`<div style=background-color:rgb(245,245,245);border-bottom-style:dashed;border-bottom-width:1px;padding-bottom:5px;padding-top:10px;font-weight:bold;font-size:larger >${this.tracks[i].name}</div>`);const r=this.tracks[i].popupData(e,n[i]);t.push(...r)}return t}}supportsWholeGenome(){return this.tracks.every(e=>e.supportsWholeGenome())}}class Xc{constructor(e){this.paired=!0,this.firstAlignment=e,this.chr=e.chr,this.readName=e.readName,e.start<e.mate.position?(this.start=e.start,this.scStart=e.scStart,this.connectingStart=e.start+e.lengthOnRef,this.connectingEnd=e.mate.position):(this.start=e.mate.position,this.scStart=this.start,this.connectingStart=e.mate.position,this.connectingEnd=e.start),this.end=Math.max(e.mate.position,e.start+e.lengthOnRef),this.lengthOnRef=this.end-this.start;let t=Math.max(this.end,e.scStart+e.scLengthOnRef);this.scLengthOnRef=t-this.scStart}setSecondAlignment(e){this.secondAlignment=e;const t=this.firstAlignment;e.start>t.start?this.connectingEnd=e.start:this.connectingStart=e.start+e.lengthOnRef,this.start=Math.min(t.start,e.start),this.end=Math.max(t.start+t.lengthOnRef,e.start+e.lengthOnRef),this.lengthOnRef=this.end-this.start,this.scStart=Math.min(t.scStart,e.scStart);const n=Math.max(t.scStart+t.scLengthOnRef,e.scStart+e.scLengthOnRef);this.scLengthOnRef=n-this.scStart}containsLocation(e,t){const n=t?this.scStart:this.start;return e>=n&&e<=n+(t?this.scLengthOnRef:this.lengthOnRef)}alignmentContaining(e,t){return this.firstAlignment.containsLocation(e,t)?this.firstAlignment:this.secondAlignment&&this.secondAlignment.containsLocation(e,t)?this.secondAlignment:void 0}popupData(e){let t=this.firstAlignment.popupData(e);return this.secondAlignment&&(t.push("-------------------------------"),t=t.concat(this.secondAlignment.popupData(e))),t}isPaired(){return!0}firstOfPairStrand(){return this.firstAlignment.isFirstOfPair()?this.firstAlignment.strand:this.secondAlignment&&this.secondAlignment.isFirstOfPair()?this.secondAlignment.strand:this.firstAlignment.mate.strand}}const Kc=xt,Qc=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)};class Jc{constructor(){this.alignments=[],this.score=void 0}findAlignment(e){const t=(e,t)=>t>=e.start&&t<e.start+e.lengthOnRef;let n;for(let i=0;i<this.alignments.length;i++){const r=this.alignments[i];if(e>=r.start&&e<r.start+r.lengthOnRef){r.paired?r.firstAlignment&&t(r.firstAlignment,e)?n=r.firstAlignment:r.secondAlignment&&t(r.secondAlignment,e)&&(n=r.secondAlignment):n=r;break}}return n}updateScore(e,t){this.score=this.calculateScore(e,t)}calculateScore({position:e,option:t,direction:n,tag:i},r){t||(t="BASE");const s=this.findAlignment(e);if(void 0===s)return Number.MAX_VALUE*(n?1:-1);let o;switch(t){case"NUCLEOTIDE":case"BASE":return function(e,t,n){let i;const r=Math.floor(n)-t.start;if(r<t.sequence.length&&(i=t.sequence.charAt(r)),!i)return 0;const s=e.readBaseAt(n),o=e.readBaseQualityAt(n),a=t.coverageMap,l=Math.floor(n-a.bpStart),c=a.coverage[l];let h=0;if(e.insertions)for(let u of e.insertions)u.start===n&&(h=-c.ins);if(s)i=i.toUpperCase(),"N"===s&&0===h?h=2:i!==s&&"="!==s||0!==h?"X"!==s&&i===s||(h-=c["pos"+s]+c["neg"+s]+o/1e3):h=4-o/1e3;else{const e=c.del;e>0?h-=e:0===h&&(h=1)}return h}(s,r,e);case"STRAND":return s.strand?1:-1;case"START":return s.start;case"TAG":{const e=s.tags()[i];return void 0!==e?Kc(e)?Qc(e):e:Number.MAX_VALUE}case"READ_NAME":return Qc(s.readName);case"INSERT_SIZE":return-Math.abs(s.fragmentLength);case"GAP_SIZE":return-s.gapSizeAt(e);case"MATE_CHR":return o=s.mate,o?o.chr===s.chr?Number.MAX_VALUE-1:Qc(o.chr):Number.MAX_VALUE;case"MQ":return void 0===s.mq?Number.MAX_VALUE:-s.mq;default:return Number.MAX_VALUE}}}function eh(e){return e.isPaired()&&e.mate&&e.isMateMapped()&&e.chr===e.mate.chr&&(e.isFirstOfPair()||e.isSecondOfPair())&&!(e.isSecondary()||e.isSupplementary())}function th(e){const t=[];for(let n of e)for(let e of n.alignments)e instanceof Xc?(e.firstAlignment&&t.push(e.firstAlignment),e.secondAlignment&&t.push(e.secondAlignment)):t.push(e);return t}function nh(e,t,n,i){if(e){if(0===e.length)return[];{e.sort(function(e,t){return i?e.scStart-t.scStart:e.start-t.start});const s=e[0];let o=Math.max(t,i?s.scStart:s.start),a=o;const l=[];for(let t of e){const e=Math.max(0,(i?t.scStart:t.start)-o);void 0===l[e]&&(l[e]=[]),l[e].push(t)}let c=0,h=0;const u=[],d=2;try{for(;c<e.length;){const e=new Jc;for(;a<=n;){let t,r;for(;!t&&a<=n;)r=a-o,void 0===l[r]?++a:t=l[r];if(!t)break;const s=t.pop();0===t.length&&(l[r]=void 0),e.alignments.push(s),a=i?s.scStart+s.scLengthOnRef+d:s.start+s.lengthOnRef+d,++c}if(e.alignments.length>0&&u.push(e),a=o,c===h)break;h=c}}catch(r){throw console.error(r),r}return u}}}class ih{constructor(e,t,n,i,r,s,o){this.chr=e,this.start=Math.floor(t),this.end=Math.ceil(n),this.length=n-t,this.alleleFreqThreshold=void 0===o?.2:o,this.coverageMap=new sh(e,t,n,this.alleleFreqThreshold),this.alignments=[],this.downsampledIntervals=[],this.samplingWindowSize=void 0===i?100:i,this.samplingDepth=void 0===r?1e3:r,this.pairsSupported=void 0===s||s,this.paired=!1,this.pairsCache={},this.downsampledReads=new Set,this.currentBucket=new rh(this.start,this.start+this.samplingWindowSize,this),this.filter=function(e){return e.isMapped()&&!e.isFailsVendorQualityCheck()},this.pairedEndStats=new lh}push(e){!1!==this.filter(e)&&(e.isPaired()&&this.pairedEndStats.push(e),this.coverageMap.incCounts(e),this.pairsSupported&&this.downsampledReads.has(e.readName)||(e.start>=this.currentBucket.end&&(this.finishBucket(),this.currentBucket=new rh(e.start,e.start+this.samplingWindowSize,this)),this.currentBucket.addAlignment(e)))}forEach(e){this.alignments.forEach(e)}finish(){void 0!==this.currentBucket&&this.finishBucket(),this.alignments.sort(function(e,t){return e.start-t.start}),this.pairsCache=void 0,this.downsampledReads=void 0,this.pairedEndStats.compute()}contains(e,t,n){return this.chr===e&&this.start<=t&&this.end>=n}hasDownsampledIntervals(){return this.downsampledIntervals&&this.downsampledIntervals.length>0}finishBucket(){this.alignments=this.alignments.concat(this.currentBucket.alignments),this.currentBucket.downsampledCount>0&&this.downsampledIntervals.push(new ah(this.currentBucket.start,this.currentBucket.end,this.currentBucket.downsampledCount)),this.paired=this.paired||this.currentBucket.paired}setViewAsPairs(e){let t;t=e?function(e){const t={},n=[];for(let i of e)for(let e of i.alignments)if(eh(e)){let i=t[e.readName];i?(i.setSecondAlignment(e),t[e.readName]=void 0):(i=new Xc(e),t[e.readName]=i,n.push(i))}else n.push(e);return n}(this.packedAlignmentRows):th(this.packedAlignmentRows),this.packedAlignmentRows=nh(t,this.start,this.end)}setShowSoftClips(e){const t=this.allAlignments();this.packedAlignmentRows=nh(t,this.start,this.end,e)}allAlignments(){const e=[];for(let t of this.packedAlignmentRows)for(let n of t.alignments)e.push(n);return e}getMax(e,t){return this.coverageMap.getMax(e,t)}}class rh{constructor(e,t,n){this.start=e,this.end=t,this.alignments=[],this.downsampledCount=0,this.samplingDepth=n.samplingDepth,this.pairsSupported=n.pairsSupported,this.downsampledReads=n.downsampledReads,this.pairsCache=n.pairsCache}addAlignment(e){var t,n,i;if(this.pairsSupported&&eh(e)&&(i=this.pairsCache[e.readName]))return i.setSecondAlignment(e),void(this.pairsCache[e.readName]=void 0);this.alignments.length<this.samplingDepth?this.pairsSupported&&eh(e)?(i=new Xc(e),this.paired=!0,this.pairsCache[e.readName]=i,this.alignments.push(i)):this.alignments.push(e):((t=Math.floor(Math.random()*(this.samplingDepth+this.downsampledCount-1)))<this.samplingDepth?(n=this.alignments[t],this.pairsSupported&&eh(e)?(void 0!==this.pairsCache[n.readName]&&(this.pairsCache[n.readName]=void 0),i=new Xc(e),this.paired=!0,this.pairsCache[e.readName]=i,this.alignments[t]=i):this.alignments[t]=e,this.downsampledReads.add(n.readName)):this.downsampledReads.add(e.readName),this.downsampledCount++)}}class sh{constructor(e,t,n,i){this.chr=e,this.bpStart=t,this.length=n-t,this.coverage=new Array(this.length),this.maximum=0,this.threshold=i,this.qualityWeight=!0}getMax(e,t){let n=0;const i=this.coverage.length;for(let r=0;r<i;r++){const i=this.bpStart+r;if(i>t)break;const s=this.coverage[r];i>=e&&s&&(n=Math.max(n,s.total))}return n}incCounts(e){var t=this;if(void 0===e.blocks?n(e):e.blocks.forEach(function(e){n(e)}),e.gaps)for(let i of e.gaps)if("D"===i.type){const e=i.start-t.bpStart;for(let n=e;n<e+i.len;n++)n<0||(this.coverage[n]||(this.coverage[n]=new oh(t.threshold)),this.coverage[n].del++)}if(e.insertions)for(let i of e.insertions){const e=i.start-this.bpStart;e<0||(this.coverage[e]||(this.coverage[e]=new oh(t.threshold)),this.coverage[e].ins++)}function n(n){if("S"===n.type)return;const i=e.seq,r=e.qual,s=n.seqOffset;for(let o=n.start-t.bpStart,a=0;a<n.len;o++,a++){t.coverage[o]||(t.coverage[o]=new oh(t.threshold));const n=null==i?"N":i.charAt(s+a),l=r&&s+a<r.length?r[s+a]:30;t.coverage[o][e.strand?"pos"+n:"neg"+n]+=1,t.coverage[o]["qual"+n]+=l,t.coverage[o].total+=1,t.coverage[o].qual+=l,t.maximum=Math.max(t.coverage[o].total,t.maximum)}}}}class oh{constructor(e){this.qualityWeight=!0,this.posA=0,this.negA=0,this.posT=0,this.negT=0,this.posC=0,this.negC=0,this.posG=0,this.negG=0,this.posN=0,this.negN=0,this.pos=0,this.neg=0,this.qualA=0,this.qualT=0,this.qualC=0,this.qualG=0,this.qualN=0,this.qual=0,this.total=0,this.del=0,this.ins=0,this.threshold=e}isMismatch(e){const t=this.threshold*(this.qualityWeight&&this.qual?this.qual:this.total);let n=0;for(let i of["A","T","C","G"])i!==e&&(n+=this.qualityWeight&&this.qual?this["qual"+i]:this["pos"+i]+this["neg"+i]);return n>=t}}class ah{constructor(e,t,n){this.start=e,this.end=t,this.counts=n}popupData(e){return[{name:"start",value:this.start+1},{name:"end",value:this.end},{name:"# downsampled:",value:this.counts}]}}class lh{constructor(e,t){this.totalCount=0,this.frCount=0,this.rfCount=0,this.ffCount=0,this.sumF=0,this.sumF2=0}push(e){if(e.isProperPair()){var t=Math.abs(e.fragmentLength);this.sumF+=t,this.sumF2+=t*t;var n=e.pairOrientation;if("string"==typeof n&&4===n.length)switch(""+n.charAt(0)+n.charAt(2)){case"FF":case"RR":this.ffCount++;break;case"FR":this.frCount++;break;case"RF":this.rfCount++}this.totalCount++}}compute(){if(this.totalCount>100){this.ffCount/this.totalCount>.9?this.orienation="ff":this.frCount/this.totalCount>.9?this.orienation="fr":this.rfCount/this.totalCount>.9&&(this.orienation="rf");var e=this.sumF/this.totalCount,t=Math.sqrt((this.totalCount*this.sumF2-this.sumF*this.sumF)/(this.totalCount*this.totalCount));this.lowerFragmentLength=e-3*t,this.upperFragmentLength=e+3*t}}}const ch={c:1,C:1,s:2,S:2,i:4,I:4,f:4};class hh{constructor(){this.hidden=!1}isMapped(){return 0==(4&this.flags)}isPaired(){return 0!=(1&this.flags)}isProperPair(){return 0!=(2&this.flags)}isFirstOfPair(){return 0!=(64&this.flags)}isSecondOfPair(){return 0!=(128&this.flags)}isSecondary(){return 0!=(256&this.flags)}isSupplementary(){return 0!=(2048&this.flags)}isFailsVendorQualityCheck(){return 0!=(512&this.flags)}isDuplicate(){return 0!=(1024&this.flags)}isMateMapped(){return 0==(8&this.flags)}isNegativeStrand(){return 0!=(16&this.flags)}isMateNegativeStrand(){return 0!=(32&this.flags)}tags(){return this.tagDict||(this.tagBA?(this.tagDict=function(e){let t=0;const n=e.length,i={};for(;t<n;){const n=String.fromCharCode(e[t])+String.fromCharCode(e[t+1]);t+=2;const s=String.fromCharCode(e[t++]);let o;if("A"===s)o=String.fromCharCode(e[t]),t++;else if("i"===s||"I"===s)o=dh(e,t),t+=4;else if("c"===s)o=mh(e,t),t++;else if("C"===s)o=gh(e,t),t++;else if("s"===s||"S"===s)o=ph(e,t),t+=2;else if("f"===s)o=fh(e,t),t+=4;else if("Z"===s)for(o="";;){var r=e[t++];if(0===r)break;o+=String.fromCharCode(r)}else{if("B"!==s){o="Error unknown type: "+s,i[n]=o;break}{const r=String.fromCharCode(e[t++]);let s=ch[r];if(void 0===s){i[n]=`Error: unknown element type '${r}'`;break}t+=4+dh(e,t)*s,o="[not shown]"}}i[n]=o}return i}(this.tagBA),this.tagBA=void 0):this.tagDict={}),this.tagDict}containsLocation(e,t){const n=t?this.scStart:this.start;return e>=n&&e<=n+(t?this.scLengthOnRef:this.lengthOnRef)}popupData(e){const t=[];if(e=Math.floor(e),this.insertions){const i=this.seq;for(let r of this.insertions){var n=r.start;if(e===n||e===n-1)return t.push({name:"Insertion",value:i.substr(r.seqOffset,r.len)}),t.push({name:"Location",value:n}),t}}t.push({name:"Read Name",value:this.readName}),t.push("<hr/>"),t.push({name:"Alignment Start",value:St(1+this.start),borderTop:!0}),t.push({name:"Read Strand",value:!0===this.strand?"(+)":"(-)",borderTop:!0}),t.push({name:"Cigar",value:this.cigar}),t.push({name:"Mapped",value:s(this.isMapped())}),t.push({name:"Mapping Quality",value:this.mq}),t.push({name:"Secondary",value:s(this.isSecondary())}),t.push({name:"Supplementary",value:s(this.isSupplementary())}),t.push({name:"Duplicate",value:s(this.isDuplicate())}),t.push({name:"Failed QC",value:s(this.isFailsVendorQualityCheck())}),this.isPaired()&&(t.push("<hr/>"),t.push({name:"First in Pair",value:!this.isSecondOfPair(),borderTop:!0}),t.push({name:"Mate is Mapped",value:s(this.isMateMapped())}),this.pairOrientation&&t.push({name:"Pair Orientation",value:this.pairOrientation}),this.isMateMapped()&&(t.push({name:"Mate Chromosome",value:this.mate.chr}),t.push({name:"Mate Start",value:this.mate.position+1}),t.push({name:"Mate Strand",value:!0===this.mate.strand?"(+)":"(-)"}),t.push({name:"Insert Size",value:this.fragmentLength}))),t.push("<hr/>");const i=this.tags();let r=!0;for(let o in i)i.hasOwnProperty(o)&&(r?(t.push({name:o,value:i[o],borderTop:!0}),r=!1):t.push({name:o,value:i[o]}));return t.push("<hr/>"),t.push({name:"Genomic Location: ",value:St(1+e)}),t.push({name:"Read Base:",value:this.readBaseAt(e)}),t.push({name:"Base Quality:",value:this.readBaseQualityAt(e)}),t;function s(e){return e?"Yes":"No"}}readBaseAt(e){const t=uh(this.blocks,e);if(t){if("*"===this.seq)return"*";{const n=t.seqIndexAt(e);return this.seq[n]}}}readBaseQualityAt(e){const t=uh(this.blocks,e);if(t){if("*"===this.qual)return 30;{const n=t.seqIndexAt(e);return n>=0&&this.qual&&n<this.qual.length?this.qual[n]:30}}}gapSizeAt(e){if(this.gaps)for(let t of this.gaps)if(e>=t.start&&e<t.start+t.len)return t.len;return 0}}function uh(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(t>=i.start&&t<i.start+i.len)return i}}function dh(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function ph(e,t){return e[t+1]<<8|e[t]}function fh(e,t){return new DataView(e.buffer).getFloat32(t)}function mh(e,t){return new DataView(e.buffer).getInt8(t)}function gh(e,t){return new DataView(e.buffer).getUint8(t)}class vh{constructor(e){e&&Object.assign(this,e)}seqIndexAt(e){return Math.floor(e)-this.start+this.seqOffset}}class bh{constructor(e){e||(e={}),this.vendorFailed=void 0===e.vendorFailed||e.vendorFailed,this.duplicates=void 0===e.duplicates||e.duplicates,this.secondary=e.secondary||!1,this.supplementary=e.supplementary||!1,this.mqThreshold=void 0===e.mqThreshold?0:e.mqThreshold,e.readgroups&&(this.readgroups=new Set(e.readgroups))}pass(e){if(this.vendorFailed&&e.isFailsVendorQualityCheck())return!1;if(this.duplicates&&e.isDuplicate())return!1;if(this.secondary&&e.isSecondary())return!1;if(this.supplementary&&e.isSupplementary())return!1;if(e.mq<this.mqThreshold)return!1;if(this.readgroups){var t=e.tags().RG;return this.readgroups.has(t)}return!0}}const yh=["=","A","C","x","G","x","x","x","T","x","x","x","x","x","x","N"],_h=["M","I","D","N","S","H","P","=","X","?","?","?","?","?","?","?"],wh=Ch(new Uint8Array([66,65,77,1]),0),xh={readHeader:function(e,t,n){return rs.loadArrayBuffer(e,t).then(function(e){var t;return t=Nr(e),xh.decodeBamHeader(t,n)})},decodeBamHeader:function(e,t){var n,i,r,s,o;if((n=Ch(e,0))!==wh)throw new Error("BAM header errror: bad magic number.  This could be caused by either a corrupt or missing file.");i=Ch(e,4);for(var a=0;a<i;++a)String.fromCharCode(e[a+8]);var l=Ch(e,i+8),c=i+12;for(r={},s=[],o={},a=0;a<l;++a){for(var h=Ch(e,c),u="",d=0;d<h-1;++d)u+=String.fromCharCode(e[c+4+d]);Ch(e,c+h+4),r[u]=a,s[a]=u,t&&(o[t.getChromosomeName(u)]=u),c=c+8+h}return{magicNumber:n,size:c,chrNames:s,chrToIndex:r,chrAliasTable:o}},bam_tag2cigar:function(e,t,n,i,r,s){function o(e){return"C"===e||"c"===e||"A"===e?1:"S"===e||"s"===e?2:"I"===e||"i"===e||"f"===e?4:0}if(1!==s.length||r.start<0)return!1;for(var a=n+(i+1>>1)+i;a+4<t&&"CG"!==String.fromCharCode(e[a])+String.fromCharCode(e[a+1]);){var l=String.fromCharCode(e[a+2]);if("B"===l)a+=8+o(l=String.fromCharCode(e[a+3]))*Ch(e,a+4);else if("Z"===l||"H"===l)for(a+=3;0!==e[a++];);else a+=3+o(l)}if(a>=t)return!1;if("B"!==String.fromCharCode(e[a+2])||"I"!==String.fromCharCode(e[a+3]))return!1;var c=Ch(e,a+4),h=a+8;if(h+4*c>t)return!1;var u="",d=0;s.length=0,a=h;for(var p=0;p<c;++p,a+=4){var f=Ch(e,a),m=f>>4,g=_h[15&f];"M"!==g&&"EQ"!==g&&"X"!==g&&"D"!==g&&"N"!==g&&"="!==g||(d+=m),u=u+m+g,s.push({len:m,ltr:g})}return r.cigar=u,r.lengthOnRef=d,!0},decodeBamRecords:function(e,t,n,i,r,s,o,a){for(;t<e.length;){const d=t+Ch(e,t)+4,p=new hh,f=Ch(e,t+4),m=Ch(e,t+8);if(d>e.length)return void console.log("finished block (no return value");if(f<0){t=d;continue}if(void 0!==r&&(f>r||m>o))return console.log("decodeBamRecords: got to end"),!0;if(void 0!==r&&f<r){t=d;continue}const g=Ch(e,t+12),v=(65280&g)>>8,b=255&g,y=Ch(e,t+16),_=(4294901760&y)>>16,w=65535&y,x=Ch(e,t+20),S=Ch(e,t+24),C=Ch(e,t+28),k=Ch(e,t+32);let E=[];for(let n=0;n<b-1;++n)E.push(String.fromCharCode(e[t+36+n]));E=E.join(""),console.log("readName: "+E);let A=0,R="",T=t+36+b;const I=[];let D;for(let t=0;t<w;++t){var l=Ch(e,T),c=l>>4,h=_h[15&l];"M"!==h&&"EQ"!==h&&"X"!==h&&"D"!==h&&"N"!==h&&"="!==h||(A+=c),R=R+c+h,T+=4,D={len:c,ltr:h},I.push(D)}if(p.chr=i[f],p.start=m,p.flags=_,p.strand=!(16&_),p.readName=E,p.cigar=R,p.lengthOnRef=A,p.fragmentLength=k,p.mq=v,xh.bam_tag2cigar(e,d,T,x,p,I),p.end=p.start+p.lengthOnRef,p.end<s){t=d;continue}let O=[];const P=x+1>>1;for(let t=0;t<P;++t){var u=e[T+t];O.push(yh[(240&u)>>4]),O.push(yh[15&u])}O=O.slice(0,x).join(""),T+=P;const M=[];for(let t=0;t<x;++t)M.push(e[T+t]);T+=x,S>=0&&(p.mate={chr:i[S],position:C,strand:!(32&_)}),p.seq=O,p.qual=M,p.tagBA=new Uint8Array(e.buffer.slice(T,d)),this.setPairOrientation(p),(void 0===a||a.pass(p))&&(Sh(p,I),n.push(p)),t=d}},decodeSamRecords:function(e,t,n,i,r,s){var o,a,l,c,h,u,d,p,f,m;for(c=(o=Ct(e)).length,a=0;a<c;a++)if(h=o[a].split("\t"),(f=new hh).chr=h[2],f.start=Number.parseInt(h[3])-1,f.flags=Number.parseInt(h[1]),f.readName=h[0],f.strand=!(16&f.flags),f.mq=Number.parseInt(h[4]),f.cigar=h[5],f.fragmentLength=Number.parseInt(h[8]),f.seq=h[9],"*"!==f.chr&&f.isMapped()&&f.chr===n){if(f.start>r)break;if(p=0,(m=kh(f.cigar)).forEach(function(e){var t=e.ltr;"M"!==t&&"EQ"!==t&&"X"!==t&&"D"!==t&&"N"!==t&&"="!==t||(p+=e.len)}),f.lengthOnRef=p,!(f.start+p<i)){for(u=h[10],f.qual=[],l=0;l<u.length;l++)f.qual[l]=u.charCodeAt(l)-33;f.tagDict=h.length<11?{}:Eh(h.slice(11)),f.isMateMapped()&&(f.mate={chr:"="===(d=h[6])?f.chr:d,position:Number.parseInt(h[7]),strand:!(32&f.flags)}),this.setPairOrientation(f),(void 0===s||s.pass(f))&&(Sh(f,m),t.push(f))}}},setReaderDefaults:function(e,t){e.filter=new bh(t.filter),t.readgroup&&(e.filter.readgroups=new Set([t.readgroup])),e.alleleFreqThreshold=void 0===t.alleleFreqThreshold?.2:t.alleleFreqThreshold,e.samplingWindowSize=void 0===t.samplingWindowSize?100:t.samplingWindowSize,e.samplingDepth=void 0===t.samplingDepth?500:t.samplingDepth,e.samplingDepth>1e4&&(console.log("Warning: attempt to set sampling depth > maximum value of 10000"),e.samplingDepth=1e4),e.pairsSupported=!!t.viewAsPairs||void 0===t.pairsSupported||t.pairsSupported},setPairOrientation:function(e){if(e.isMapped()&&e.mate&&e.isMateMapped()&&e.mate.chr===e.chr){var t=e.strand?"F":"R",n=e.mate,i=n.strand?"F":"R",r=" ",s=" ";e.isFirstOfPair()?(r="1",s="2"):e.isSecondOfPair()&&(r="2",s="1");var o=[],a=e.fragmentLength,l=e.end-e.start;0===a&&(a=(e.start<n.position?n.position+l:n.position-l)-e.start),a>0?(o[0]=t,o[1]=r,o[2]=i,o[3]=s):(o[2]=t,o[3]=r,o[0]=i,o[1]=s),e.pairOrientation=o.join("")}}};function Sh(e,t){const n=[];let i,r,s=0,o=e.start;e.scStart=e.start,e.scLengthOnRef=e.lengthOnRef;for(let a of t){let t;switch(a.ltr){case"H":case"P":break;case"S":t=o,e.scLengthOnRef+=a.len,0===n.length&&(e.scStart-=a.len,t-=a.len),n.push(new vh({start:t,seqOffset:s,len:a.len,type:"S"})),s+=a.len;break;case"N":case"D":void 0===r&&(r=[]),r.push({start:o,len:a.len,type:a.ltr}),o+=a.len;break;case"I":void 0===i&&(i=[]),i.push(new vh({start:o,len:a.len,seqOffset:s,type:"I"})),s+=a.len;break;case"M":case"EQ":case"=":case"X":n.push(new vh({start:o,seqOffset:s,len:a.len,type:"M"})),s+=a.len,o+=a.len;break;default:console.log("Error processing cigar element: "+a.len+a.ltr)}}e.blocks=n,e.insertions=i,e.gaps=r}function Ch(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function kh(e){var t,n,i,r,s,o,a,l,c;for(t=[],n=[],s=null,r=e.length,i=0;i<r;i++)(c=(o=e.charAt(i)).charCodeAt(0))>=48&&c<=57?n.push(o):(a=o,l=Number.parseInt(n.join("")),n=[],null!==s&&s.ltr===a?s.len+=l:t.push(s={len:l,ltr:a}));return t}function Eh(e){var t={};return e.forEach(function(e){var n=e.split(":");t[n[0]]=n[2]}),t}class Ah{constructor(e,t){this.config=e,this.genome=t,this.bamPath=e.url,this.isDataUri=ea(e.url),xh.setReaderDefaults(this,e)}async readAlignments(e,t,n){if(this.alignmentCache){const i=this.header,r=i.chrAliasTable.hasOwnProperty(e)?i.chrAliasTable[e]:e,s=this.alignmentCache.queryFeatures(r,t,n),o=new ih(e,t,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold);for(let e of s)o.push(e);return o.finish(),o}if(this.isDataUri){const i=Nr(function(e){const t=e.split(","),n=t[0].split(":")[1];let i=t[1];i=n.indexOf("base64")>=0?atob(i):decodeURI(i);const r=new Uint8Array(i.length);for(var s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r}(this.bamPath).buffer);return this.parseAlignments(i),this.fetchAlignments(e,t,n)}{const i=Nr(await rs.loadArrayBuffer(this.bamPath,Zo(this.config)));return this.parseAlignments(i),this.fetchAlignments(e,t,n)}}parseAlignments(e){const t=[];this.header=xh.decodeBamHeader(e),xh.decodeBamRecords(e,this.header.size,t,this.header.chrNames),this.alignmentCache=new ys(t,this.genome)}fetchAlignments(e,t,n){const i=this.header.chrAliasTable.hasOwnProperty(e)?this.header.chrAliasTable[e]:e,r=this.alignmentCache.queryFeatures(i,t,n),s=new ih(e,t,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported);for(let o of r)s.push(o);return s.finish(),s}}class Rh{constructor(e,t){this.config=e,this.genome=t,this.bamPath=e.url,this.baiPath=e.indexURL,xh.setReaderDefaults(this,e)}async readAlignments(e,t,n){console.log("in bamreader.readalignments");const i=(await this.getChrIndex())[this.chrAliasTable.hasOwnProperty(e)?this.chrAliasTable[e]:e],r=new ih(e,t,n,this.config.samplingWindowSize,this.config.samplingDepth,this.config.pairsSupported,this.config.alleleFreqThreshold);if(void 0===i)return r;{const e=(await this.getIndex()).blocksForRange(i,t,n);if(!e||0===e.length)return r;for(let o of e){let e;if(0===o.maxv.offset)e=0;else{const t=Zo(this.config,{range:{start:o.maxv.block,size:26}});e=zr(await rs.loadArrayBuffer(this.bamPath,t))}const a=o.minv.block,l={start:a,size:o.maxv.block+e-a+1};var s=Nr(await rs.loadArrayBuffer(this.bamPath,Zo(this.config,{range:l})));if(console.log("loaded chunk"),xh.decodeBamRecords(s,o.minv.offset,r,this.indexToChr,i,t,n,this.filter)){console.log("done loading chunks");break}}return r.finish(),r}}async getHeader(){if(!this.header){const e=this.genome,t=await this.getIndex();let n;if(t.firstAlignmentBlock){const e=Zo(this.config,{range:{start:t.firstAlignmentBlock,size:26}}),i=zr(await rs.loadArrayBuffer(this.bamPath,e));n=t.firstAlignmentBlock+i}else n=64e3;const i=Zo(this.config,{range:{start:0,size:n}});this.header=await xh.readHeader(this.bamPath,i,e)}return this.header}async getIndex(){const e=this.genome;return this.index||(this.index=await Ll(this.baiPath,this.config,e)),this.index}async getChrIndex(){if(this.chrToIndex)return this.chrToIndex;{const e=await this.getHeader();return this.chrToIndex=e.chrToIndex,this.indexToChr=e.chrNames,this.chrAliasTable=e.chrAliasTable,this.chrToIndex}}}class Th{constructor(e,t){this.config=e,this.genome=t;const n={};e.sources.sequences.forEach(function(i){const r=t?t.getChromosomeName(i):i;n[r]=function(e,t,n){const i={url:e.sources.url.replace("$CHR",n)};e.sources.indexURL&&(i.indexURL=e.sources.indexURL.replace("$CHR",n));const r=Object.assign(e,i);return new Rh(r,t)}(e,t,i)}),this.bamReaders=n,xh.setReaderDefaults(this,e)}async readAlignments(e,t,n){if(this.bamReaders.hasOwnProperty(e)){let i=this.bamReaders[e];return await i.readAlignments(e,t,n)}return new ih(e,t,n)}}const Ih=function(e,t){this.config=e,this.genome=t,xh.setReaderDefaults(this,e)};function Dh(){const e=this,t=this.genome;if(this.header)return Promise.resolve(this.header);{const n=this.config.url+"?file="+this.config.alignmentFile+"&options=-b,-H",i=Zo(this.config);return xh.readHeader(n,i,t).then(function(t){return e.header=t,t})}}Ih.prototype.readAlignments=function(e,t,n){var i=this;return Dh.call(i).then(function(r){var s;return s=r.chrAliasTable.hasOwnProperty(e)?r.chrAliasTable[e]:e,rs.loadString(i.config.url+"?reference="+i.config.referenceFile+"&file="+i.config.alignmentFile+"&region="+s+":"+t+"-"+n,Zo(i.config)).then(function(r){var o;return o=new ih(e,t,n,i.samplingWindowSize,i.samplingDepth,i.pairsSupported,i.alleleFreqThreshold),xh.decodeSamRecords(r,o,s,t,n,i.filter),o})})};class Oh extends Ql{constructor(e,t){super(e,t),xh.setReaderDefaults(this,e)}async readAlignments(e,t,n){if(!this.header){const e=Nr((await this.readHeaderData()).buffer);this.header=xh.decodeBamHeader(e,this.genome),this.chrAliasTable=new Map;for(let t of Object.keys(this.header.chrAliasTable))this.chrAliasTable.set(t,this.header.chrAliasTable[t])}let i=this.chrAliasTable.has(e)?this.chrAliasTable.get(e):e;const r=Nr((await this.readData(i,t,n)).buffer),s=this.header.chrToIndex[e],o=new ih(e,t,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold);return xh.decodeBamRecords(r,this.header.size,o,this.header.chrNames,s,t,n),o.finish(),o}}const Ph=eval,Mh=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=163)}([function(e,t,n){var i=n(13),r=n(81).f,s=n(107),o=n(3),a=n(15),l=n(20),c=n(24),h=function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,u,d,p,f,m,g,v,b=e.target,y=e.global,_=e.stat,w=e.proto,x=y?i:_?i[b]:(i[b]||{}).prototype,S=y?o:o[b]||(o[b]={}),C=S.prototype;for(d in t)n=!s(y?d:b+(_?".":"#")+d,e.forced)&&x&&c(x,d),f=S[d],n&&(m=e.noTargetGet?(v=r(x,d))&&v.value:x[d]),p=n&&m?m:t[d],n&&typeof f==typeof p||(g=e.bind&&n?a(p,i):e.wrap&&n?h(p):w&&"function"==typeof p?a(Function.call,p):p,(e.sham||p&&p.sham||f&&f.sham)&&l(g,"sham",!0),S[d]=g,w&&(c(o,u=b+"Prototype")||l(o,u,{}),o[u][d]=p,e.real&&C&&!C[d]&&l(C,d,p)))}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){var i=n(14);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){e.exports={}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i=n(13),r=n(61),s=n(64),o=n(110),a=i.Symbol,l=r("wks");e.exports=function(e){return l[e]||(l[e]=o&&a[e]||(o?a:s)("Symbol."+e))}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var i=n(2),r=n(119),s=n(29),o=n(15),a=n(90),l=n(120),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,h,u){var d,p,f,m,g,v,b=o(t,n,h?2:1);if(u)d=e;else{if("function"!=typeof(p=a(e)))throw TypeError("Target is not iterable");if(r(p)){for(f=0,m=s(e.length);m>f;f++)if((g=h?b(i(v=e[f])[0],v[1]):b(e[f]))&&g instanceof c)return g;return new c(!1)}d=p.call(e)}for(;!(v=d.next()).done;)if((g=l(d,b,v.value,h))&&g instanceof c)return g;return new c(!1)}).stop=function(e){return new c(!0,e)}},function(e,t,n){var i=n(1),r=i(n(7)),s=i(n(32)),o=i(n(27)),a=i(n(33)),l=i(n(265)),c=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,a.default)(t,e),t}((0,l.default)(Error)),h=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,a.default)(t,e),t}((0,l.default)(Error)),u=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,a.default)(t,e),t}(c),d=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,a.default)(t,e),t}(u),p=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,a.default)(t,e),t}(c),f=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,a.default)(t,e),t}(c);e.exports={CramBufferOverrunError:d,CramMalformedError:u,CramUnimplementedError:h,CramSizeLimitError:p,CramArgumentError:f}},function(e,t,n){var i=n(196);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,n){var i=n(3),r=n(24),s=n(95),o=n(21).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||o(t,e,{value:s.f(e)})}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){(function(t){var n="object",i=function(e){return e&&e.Math==Math&&e};e.exports=i(typeof globalThis==n&&globalThis)||i(typeof window==n&&window)||i(typeof self==n&&self)||i(typeof t==n&&t)||Function("return this")()}).call(this,n(23))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(5);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=n(167)},function(e,t,n){var i=n(12);e.exports=!i(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(3);e.exports=function(e){return i[e+"Prototype"]}},function(e,t,n){(function(e){var i=n(165),r=n(166),s=n(105);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,n)}function c(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t),e}(e,t,n,i):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,n),r=(e=a(e,i)).write(t,n);return r!==i&&(e=e.slice(0,r)),e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):d(e,t);if("Buffer"===t.type&&s(t.data))return d(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(h(t),e=a(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return B(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){var s,o=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var h=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===l)return h*o}else-1!==h&&(s-=s-h),h=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var u=!0,d=0;d<l;d++)if(c(e,s+d)!==c(t,d)){u=!1;break}if(u)return s}return-1}function y(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function _(e,t,n,i){return q(B(t,e.length-n),e,n,i)}function w(e,t,n,i){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function x(e,t,n,i){return w(e,t,n,i)}function S(e,t,n,i){return q(H(t),e,n,i)}function C(e,t,n,i){return q(function(e,t){for(var n,i,r=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(n=e.charCodeAt(s))>>8,r.push(n%256),r.push(i);return r}(t,e.length-n),e,n,i)}function k(e,t,n){return i.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var s,o,a,l,c=e[r],h=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u<=n)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(s=e[r+1]))&&(l=(31&c)<<6|63&s)>127&&(h=l);break;case 3:o=e[r+2],128==(192&(s=e[r+1]))&&128==(192&o)&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=e[r+2],a=e[r+3],128==(192&(s=e[r+1]))&&128==(192&o)&&128==(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(i.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),i.push(h),r+=u}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=A));return n}(i)}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,i){return h(t),t<=0?a(e,t):void 0!==n?"string"==typeof i?a(e,t).fill(n,i):a(e,t).fill(n):a(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,s=Math.min(n,i);r<s;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(i,r),h=e.slice(t,n),u=0;u<a;++u)if(c[u]!==h[u]){s=c[u],o=h[u];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function R(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function T(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function I(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=t;s<n;++s)r+=j(e[s]);return r}function D(e,t,n){for(var i=e.slice(t,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,i,r,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function M(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,s=Math.min(e.length-n,2);r<s;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function L(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,s=Math.min(e.length-n,4);r<s;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function F(e,t,n,i,r,s){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,i,s){return s||F(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function z(e,t,n,i,s){return s||F(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;n=new l(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=this[e],r=1,s=0;++s<t&&(r*=256);)i+=this[e+s]*r;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=this[e],r=1,s=0;++s<t&&(r*=256);)i+=this[e+s]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=t,r=1,s=this[e+--i];i>0&&(r*=256);)s+=this[e+--i]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[t]=255&e;++s<n&&(r*=256);)this[t+s]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,s=i-n;if(this===e&&n<t&&t<i)for(r=s-1;r>=0;--r)e[r+t]=this[r+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=l.isBuffer(e)?e:B(new l(e,i).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var i=e.length,r=null,s=[],o=0;o<i;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function H(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(23))},function(e,t,n){var i=n(17),r=n(21),s=n(43);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(17),r=n(106),s=n(2),o=n(62),a=Object.defineProperty;t.f=i?a:function(e,t,n){if(s(e),t=o(t,!0),s(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(49);e.exports=function(e){return Object(i(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(4),r=n(142);e.exports=i?r:function(e){return Map.prototype.entries.call(e)}},function(e,t,n){var i=n(3),r=n(13),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e])||s(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},function(e,t,n){var i=n(255),r=n(139);function s(t){return e.exports=s=r?i:function(e){return e.__proto__||i(e)},s(t)}e.exports=s},function(e,t,n){var i=n(60),r=n(49);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(83),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){e.exports=n(184)},function(e,t,n){var i=n(185);function r(e,t,n,r,s,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):i.resolve(c).then(r,s)}e.exports=function(e){return function(){var t=this,n=arguments;return new i(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,l,"next",e)}function l(e){r(o,i,s,a,l,"throw",e)}a(void 0)})}}},function(e,t,n){var i=n(225),r=n(254);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},function(e,t,n){var i=n(140),r=n(96);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=i(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports={}},function(e,t,n){var i=n(21).f,r=n(20),s=n(24),o=n(174),a=n(6)("toStringTag"),l=o!=={}.toString;e.exports=function(e,t,n,c){if(e){var h=n?e:e.prototype;s(h,a)||i(h,a,{configurable:!0,value:t}),c&&l&&r(h,"toString",o)}}},function(e,t,n){e.exports=n(181)},function(e,t){var n,i,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,c=[],h=!1,u=-1;function d(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!h){var e=a(d);h=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||h||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){var i=n(70),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var s=n(57);s.inherits=n(47);var o=n(127),a=n(93);s.inherits(u,o);for(var l=r(a.prototype),c=0;c<l.length;c++){var h=l[c];u.prototype[h]||(u.prototype[h]=a.prototype[h])}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||i.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},function(e,t,n){var i=n(1),r=i(n(7)),s=i(n(10)),o=n(9).CramBufferOverrunError,a={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if((0,r.default)(this,e),this.parameters=t,this.dataType=n,!n)throw new TypeError("must provide a data type to codec constructor");if(!a[n])throw new TypeError("invalid data type ".concat(n))}return(0,s.default)(e,[{key:"_getBits",value:function(e,t,n){var i=0;if(t.bytePosition+(7-t.bitPosition+n)/8>e.length)throw new o("read error during decoding. the file seems to be truncated.");for(var r=n;r;r-=1)i<<=1,i|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return i}}]),e}();e.exports=l},function(e,t,n){n(168);var i=n(176),r=n(13),s=n(20),o=n(35),a=n(6)("toStringTag");for(var l in i){var c=r[l],h=c&&c.prototype;h&&!h[a]&&s(h,a,l),o[l]=o.Array}},function(e,t,n){var i,r,s,o=n(169),a=n(13),l=n(14),c=n(20),h=n(24),u=n(63),d=n(50);if(o){var p=new(0,a.WeakMap),f=p.get,m=p.has,g=p.set;i=function(e,t){return g.call(p,e,t),t},r=function(e){return f.call(p,e)||{}},s=function(e){return m.call(p,e)}}else{var v=u("state");d[v]=!0,i=function(e,t){return c(e,v,t),t},r=function(e){return h(e,v)?e[v]:{}},s=function(e){return h(e,v)}}e.exports={set:i,get:r,has:s,enforce:function(e){return s(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(2),r=n(173),s=n(85),o=n(50),a=n(112),l=n(79),c=n(63)("IE_PROTO"),h=function(){},u=function(){var e,t=l("iframe"),n=s.length;for(t.style.display="none",a.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[s[n]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[c]=e):n=u(),void 0===t?n:r(n,t)},o[c]=!0},function(e,t,n){var i=n(15),r=n(60),s=n(22),o=n(29),a=n(113),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,h=4==e,u=6==e,d=5==e||u;return function(p,f,m,g){for(var v,b,y=s(p),_=r(y),w=i(f,m,3),x=o(_.length),S=0,C=g||a,k=t?C(p,x):n?C(p,0):void 0;x>S;S++)if((d||S in _)&&(b=w(v=_[S],S,y),e))if(t)k[S]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:l.call(k,v)}else if(h)return!1;return u?-1:c||h?h:k}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t,n){var i=n(187).charAt,r=n(42),s=n(80),o=r.set,a=r.getterFor("String Iterator");s(String,"String",function(e){o(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=a(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})})},function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){var i=n(157),r=n(384),s=n(158);e.exports=function(e,t){return i(e)||r(e,t)||s()}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){e.exports={}},function(e,t,n){var i=n(111),r=n(85);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(20);e.exports=function(e,t,n,r){r&&r.enumerable?e[t]=n:i(e,t,n)}},function(e,t,n){var i=n(34);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(12);e.exports=function(e,t){var n=[][e];return!n||!i(function(){n.call(null,t||function(){throw 1},1)})}},function(e,t,n){var i=n(2),r=n(5),s=n(6)("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||null==(n=i(o)[s])?t:r(n)}},function(e,t,n){var i=n(5),r=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new r(e)}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(19).Buffer)},function(e,t,n){var i=n(1)(n(76)),r=n(331),s=n(9).CramBufferOverrunError;e.exports={itf8Size:function(e){return-128&e?-16384&e?-2097152&e?-268435456&e?5:4:3:2:1},parseItf8:function(e,t){var n,i=t,r=e[i];if(r<128?(n=r,i+=1):r<192?(n=16383&(r<<8|e[i+1]),i+=2):r<224?(n=2097151&(r<<16|e[i+1]<<8|e[i+2]),i+=3):r<240?(n=268435455&(r<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),i+=4):(n=(15&r)<<28|e[i+1]<<20|e[i+2]<<12|e[i+3]<<4|15&e[i+4],i+=5),i>e.length)throw new s("Attempted to read beyond end of buffer; this file seems truncated.");return[n,i-t]},parseItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.parse(e),s=r.offset,o=r.result;return o._endPosition=s+i,o._size=s-n,o},tinyMemoize:function(e,t){var n=e.prototype[t],r="_memo_".concat(t);e.prototype[t]=function(){var e=this;if(!(r in this)){var t=n.call(this);this[r]=t,i.default.resolve(t).catch(function(){delete e[r]})}return this[r]}},sequenceMD5:function(e){return r(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}}},function(e,t,n){var i=n(351),r=n(152),s=n(362);e.exports=function(e){return i(e)||r(e)||s()}},function(e,t,n){var i=n(12),r=n(34),s="".split;e.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==r(e)?s.call(e,""):Object(e)}:Object},function(e,t,n){var i=n(13),r=n(171),s=n(4),o=i["__core-js_shared__"]||r("__core-js_shared__",{});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.2.1",mode:s?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(14);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(61),r=n(64),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!i.call({1:2},1);t.f=s?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(24),r=n(22),s=n(63),o=n(109),a=s("IE_PROTO"),l=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=r(e),i(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n){var i=n(34),r=n(6)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:s?i(t):"Object"==(o=i(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){var i=n(12),r=n(6)("species");e.exports=function(e){return!i(function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){(function(t){e.exports=void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?{nextTick:function(e,n,i,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,i)});case 4:return t.nextTick(function(){e.call(null,n,i,r)});default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return t.nextTick(function(){e.apply(null,s)})}}}:t}).call(this,n(38))},function(e,t,n){var i=n(19),r=i.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=o),s(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var s=0;s<i;s++)e[r+s]=t[n+s]},flattenChunks:function(e){var t,n,i,r,s,o;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(o=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)o.set(s=e[t],r),r+=s.length;return o}},o={arraySet:function(e,t,n,i,r){for(var s=0;s<i;s++)e[r+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,s)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(i)},function(e,t,n){var i=n(1)(n(7)),r=n(9).CramMalformedError,s=n(74),o=function e(){(0,i.default)(this,e),this.F=void 0,this.C=void 0};function a(e,t,n,i){return n*(e>>i)+(e&(1<<i)-1)-t}var l={FC:o,AriDecoder:function e(){(0,i.default)(this,e),this.fc=new Array(256);for(var t=0;t<this.fc.length;t+=1)this.fc[t]=new o;this.R=null},Symbol:function e(){(0,i.default)(this,e),this.start=void 0,this.freq=void 0},symbolInit:function(e,t,n){if(!(t<=65536))throw new r("assertion failed: start <= 1<<16");if(!(n<=65536-t))throw new r("assertion failed: freq <= 1<<16");e.start=t,e.freq=n},advanceStep:a,advanceSymbolStep:function(e,t,n){return a(e,t.start,t.freq,n)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,n,i){return function(e,t,n,i,r){if((e=i*(e>>r)+(e&(1<<r)-1)-n)<s.RANS_BYTE_L)do{e=e<<8|255&t.get()}while(e<s.RANS_BYTE_L);return e}(e,t,n.start,n.freq,i)},renormalize:function(e,t){if(e<s.RANS_BYTE_L)do{e=e<<8|255&t.get()}while(e<s.RANS_BYTE_L);return e}};e.exports=l},function(e,t,n){e.exports={TF_SHIFT:12,TOTFREQ:4096,RANS_BYTE_L:1<<23}},function(e,t,n){e.exports=n(322)},function(e,t,n){e.exports=n(330)},function(e,t,n){e.exports=n(347)},function(e,t){e.exports=function(){}},function(e,t,n){var i=n(13),r=n(14),s=i.document,o=r(s)&&r(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},function(e,t,n){var i=n(0),r=n(172),s=n(66),o=n(86),a=n(36),l=n(20),c=n(52),h=n(6),u=n(4),d=n(35),p=n(108),f=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,g=h("iterator"),v=function(){return this};e.exports=function(e,t,n,h,p,b,y){r(n,t,h);var _,w,x,S=function(e){if(e===p&&R)return R;if(!m&&e in E)return E[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},C=t+" Iterator",k=!1,E=e.prototype,A=E[g]||E["@@iterator"]||p&&E[p],R=!m&&A||S(p),T="Array"==t&&E.entries||A;if(T&&(_=s(T.call(new e)),f!==Object.prototype&&_.next&&(u||s(_)===f||(o?o(_,f):"function"!=typeof _[g]&&l(_,g,v)),a(_,C,!0,!0),u&&(d[C]=v))),"values"==p&&A&&"values"!==A.name&&(k=!0,R=function(){return A.call(this)}),u&&!y||E[g]===R||l(E,g,R),d[t]=R,p)if(w={values:S("values"),keys:b?R:S("keys"),entries:S("entries")},y)for(x in w)!m&&!k&&x in E||c(E,x,w[x]);else i({target:t,proto:!0,forced:m||k},w);return w}},function(e,t,n){var i=n(17),r=n(65),s=n(43),o=n(28),a=n(62),l=n(24),c=n(106),h=Object.getOwnPropertyDescriptor;t.f=i?h:function(e,t){if(e=o(e),t=a(t,!0),c)try{return h(e,t)}catch(e){}if(l(e,t))return s(!r.f.call(e,t),e[t])}},function(e,t,n){var i=n(28),r=n(29),s=n(84),o=function(e){return function(t,n,o){var a,l=i(t),c=r(l.length),h=s(o,c);if(e&&n!=n){for(;c>h;)if((a=l[h++])!=a)return!0}else for(;c>h;h++)if((e||h in l)&&l[h]===n)return e||h||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(83),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(2),r=n(175);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,s){return i(n),r(s),t?e.call(n,s):n.__proto__=s,n}}():void 0)},function(e,t,n){var i=n(62),r=n(21),s=n(43);e.exports=function(e,t,n){var o=i(t);o in e?r.f(e,o,s(0,n)):e[o]=n}},function(e,t){},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(67),r=n(35),s=n(6)("iterator");e.exports=function(e){if(null!=e)return e[s]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var i,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,s,o;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=c(e))>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,console&&console.warn&&console.warn(a)}return e}function u(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,e))}function d(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function p(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)s(l,this,t);else{var c=l.length,h=m(l,c);for(n=0;n<c;++n)s(h[n],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,d(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,i,r,s,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){(t=e.exports=n(127)).Stream=t,t.Readable=t,t.Writable=n(93),t.Duplex=n(39),t.Transform=n(131),t.PassThrough=n(207)},function(e,t,n){(function(t,i,r){var s=n(70);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(void 0),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var a,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:s.nextTick;b.WritableState=v;var c=n(57);c.inherits=n(47);var h,u={deprecate:n(206)},d=n(128),p=n(71).Buffer,f=r.Uint8Array||function(){},m=n(129);function g(){}function v(e,t){a=a||n(39);var i=t instanceof a;this.objectMode=!!(e=e||{}).objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,c=e.writableHighWaterMark;this.highWaterMark=r||0===r?r:i&&(c||0===c)?c:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===e.decodeStrings),this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(s.nextTick(r,i),s.nextTick(C,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),C(e,t))}(e,n,i,t,r);else{var o=x(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),i?l(_,e,n,o,r):_(e,n,o,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function b(e){if(a=a||n(39),!(h.call(b,this)||this instanceof a))return new b(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function y(e,t,n,i,r,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function _(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),C(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=new Array(t.bufferedRequestCount),r=t.corkedRequestsFree;r.entry=n;for(var s=0,a=!0;n;)i[s]=n,n.isBuf||(a=!1),n=n.next,s+=1;i.allBuffers=a,y(e,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk;if(y(e,t,!1,t.objectMode?1:l.length,l,n.encoding,n.callback),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),C(e,t)})}function C(e,t){var n=x(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(b,d),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===b&&e&&e._writableState instanceof v}})):h=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,n){var i,r=this._writableState,o=!1,a=!r.objectMode&&(p.isBuffer(i=e)||i instanceof f);return a&&!p.isBuffer(e)&&(e=function(e){return p.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=g),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),s.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),s.nextTick(i,o),r=!1),r}(this,r,e,n))&&(r.pendingcb++,o=function(e,t,n,i,r,s){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,n)),t}(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var a=t.objectMode?1:i.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,a,i,r,s);return l}(this,r,a,e,t,n)),o},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,C(e,t),n&&(t.finished?s.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(38),n(204).setImmediate,n(23))},function(e,t,n){e.exports=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}},function(e,t,n){t.f=n(6)},function(e,t,n){var i=n(139);function r(t,n){return e.exports=r=i||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,n){e.exports=n(310)},function(e,t,n){e.exports=n(319)},function(e,t,n){e.exports=n(342)},function(e,t,n){e.exports={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},function(e,t,n){e.exports=n(368)},function(e,t,n){e.exports=n(396)},function(e,t,n){e.exports=n(399)},function(e,t,n){var i=n(164);e.exports=i},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var i=n(17),r=n(12),s=n(79);e.exports=!i&&!r(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(12),r=/#|\.prototype\./,s=function(e,t){var n=a[o(e)];return n==c||n!=l&&("function"==typeof t?i(t):!!t)},o=s.normalize=function(e){return String(e).replace(r,".").toLowerCase()},a=s.data={},l=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},function(e,t,n){var i,r,s,o=n(66),a=n(20),l=n(24),c=n(6),h=n(4),u=c("iterator"),d=!1;[].keys&&("next"in(s=[].keys())?(r=o(o(s)))!==Object.prototype&&(i=r):d=!0),null==i&&(i={}),h||l(i,u)||a(i,u,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},function(e,t,n){var i=n(12);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var i=n(12);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(e,t,n){var i=n(24),r=n(28),s=n(82).indexOf,o=n(50);e.exports=function(e,t){var n,a=r(e),l=0,c=[];for(n in a)!i(o,n)&&i(a,n)&&c.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~s(c,n)||c.push(n));return c}},function(e,t,n){var i=n(26);e.exports=i("document","documentElement")},function(e,t,n){var i=n(14),r=n(53),s=n(6)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[s])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(0),r=n(12),s=n(53),o=n(14),a=n(22),l=n(29),c=n(87),h=n(113),u=n(68),d=n(6)("isConcatSpreadable"),p=!r(function(){var e=[];return e[d]=!1,e.concat()[0]!==e}),f=u("concat"),m=function(e){if(!o(e))return!1;var t=e[d];return void 0!==t?!!t:s(e)};i({target:"Array",proto:!0,forced:!p||!f},{concat:function(e){var t,n,i,r,s,o=a(this),u=h(o,0),d=0;for(t=-1,i=arguments.length;t<i;t++)if(m(s=-1===t?o:arguments[t])){if(d+(r=l(s.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,d++)n in s&&c(u,d,s[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(u,d++,s)}return u.length=d,u}})},function(e,t,n){n(88),n(46),n(41),n(188),n(125),n(191);var i=n(3);e.exports=i.Promise},function(e,t,n){var i=n(13);e.exports=i.Promise},function(e,t,n){var i=n(52);e.exports=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:i(e,r,t[r],n);return e}},function(e,t,n){var i=n(26),r=n(21),s=n(6),o=n(17),a=s("species");e.exports=function(e){var t=i(e);o&&t&&!t[a]&&(0,r.f)(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(6),r=n(35),s=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[s]===e)}},function(e,t,n){var i=n(2);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var s=e.return;throw void 0!==s&&i(s.call(e)),t}}},function(e,t,n){var i=n(6)("iterator"),r=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){r=!0}};o[i]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s={};s[i]=function(){return{next:function(){return{done:n=!0}}}},e(s)}catch(e){}return n}},function(e,t,n){var i,r,s,o=n(13),a=n(12),l=n(34),c=n(15),h=n(112),u=n(79),d=o.location,p=o.setImmediate,f=o.clearImmediate,m=o.process,g=o.MessageChannel,v=o.Dispatch,b=0,y={},_=function(e){if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},w=function(e){return function(){_(e)}},x=function(e){_(e.data)},S=function(e){o.postMessage(e+"",d.protocol+"//"+d.host)};p&&f||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(b),b},f=function(e){delete y[e]},"process"==l(m)?i=function(e){m.nextTick(w(e))}:v&&v.now?i=function(e){v.now(w(e))}:g?(s=(r=new g).port2,r.port1.onmessage=x,i=c(s.postMessage,s,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||a(S)?i="onreadystatechange"in u("script")?function(e){h.appendChild(u("script")).onreadystatechange=function(){h.removeChild(this),_(e)}}:function(e){setTimeout(w(e),0)}:(i=S,o.addEventListener("message",x,!1))),e.exports={set:p,clear:f}},function(e,t,n){var i=n(26);e.exports=i("navigator","userAgent")||""},function(e,t,n){var i=n(2),r=n(14),s=n(56);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(0),r=n(5),s=n(56),o=n(69),a=n(8);i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=s.f(t),i=n.resolve,l=n.reject,c=o(function(){var n=r(t.resolve),s=[],o=0,l=1;a(e,function(e){var r=o++,a=!1;s.push(void 0),l++,n.call(t,e).then(function(e){a||(a=!0,s[r]={status:"fulfilled",value:e},--l||i(s))},function(e){a||(a=!0,s[r]={status:"rejected",reason:e},--l||i(s))})}),--l||i(s)});return c.error&&l(c.value),n.promise}})},function(e,t,n){(function(e){var i=n(19).Buffer,r=n(200).Transform,s=n(212),o=n(133),a=n(132).ok,l=n(19).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=1/0,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(s),u=0;u<h.length;u++){var d=h[u];d.match(/^Z/)&&Object.defineProperty(t,d,{enumerable:!0,value:s[d],writable:!1})}for(var p={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},f=Object.keys(p),m=0;m<f.length;m++){var g=f[m];p[p[g]]=g}function v(e,t,n){var r=[],s=0;function o(){for(var t;null!==(t=e.read());)r.push(t),s+=t.length;e.once("readable",o)}function a(){var t,o=null;s>=l?o=new RangeError(c):t=i.concat(r,s),r=[],e.close(),n(o,t)}e.on("error",function(t){e.removeListener("end",a),e.removeListener("readable",o),n(t)}),e.on("end",a),e.end(t),o()}function b(e,t){if("string"==typeof t&&(t=i.from(t)),!i.isBuffer(t))throw new TypeError("Not a string or buffer");return e._processChunk(t,e._finishFlushFlag)}function y(e){if(!(this instanceof y))return new y(e);A.call(this,e,s.DEFLATE)}function _(e){if(!(this instanceof _))return new _(e);A.call(this,e,s.INFLATE)}function w(e){if(!(this instanceof w))return new w(e);A.call(this,e,s.GZIP)}function x(e){if(!(this instanceof x))return new x(e);A.call(this,e,s.GUNZIP)}function S(e){if(!(this instanceof S))return new S(e);A.call(this,e,s.DEFLATERAW)}function C(e){if(!(this instanceof C))return new C(e);A.call(this,e,s.INFLATERAW)}function k(e){if(!(this instanceof k))return new k(e);A.call(this,e,s.UNZIP)}function E(e){return e===s.Z_NO_FLUSH||e===s.Z_PARTIAL_FLUSH||e===s.Z_SYNC_FLUSH||e===s.Z_FULL_FLUSH||e===s.Z_FINISH||e===s.Z_BLOCK}function A(e,n){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,r.call(this,e),e.flush&&!E(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!E(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||s.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:s.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!i.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new s.Zlib(n);var a=this;this._hadError=!1,this._handle.onerror=function(e,n){R(a),a._hadError=!0;var i=new Error(e);i.errno=n,i.code=t.codes[n],a.emit("error",i)};var l=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(l=e.level);var c=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,l,e.memLevel||t.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=i.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function R(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function T(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),t.Deflate=y,t.Inflate=_,t.Gzip=w,t.Gunzip=x,t.DeflateRaw=S,t.InflateRaw=C,t.Unzip=k,t.createDeflate=function(e){return new y(e)},t.createInflate=function(e){return new _(e)},t.createDeflateRaw=function(e){return new S(e)},t.createInflateRaw=function(e){return new C(e)},t.createGzip=function(e){return new w(e)},t.createGunzip=function(e){return new x(e)},t.createUnzip=function(e){return new k(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new y(t),e,n)},t.deflateSync=function(e,t){return b(new y(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new w(t),e,n)},t.gzipSync=function(e,t){return b(new w(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new S(t),e,n)},t.deflateRawSync=function(e,t){return b(new S(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new k(t),e,n)},t.unzipSync=function(e,t){return b(new k(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new _(t),e,n)},t.inflateSync=function(e,t){return b(new _(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new x(t),e,n)},t.gunzipSync=function(e,t){return b(new x(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new C(t),e,n)},t.inflateRawSync=function(e,t){return b(new C(t),e)},o.inherits(A,r),A.prototype.params=function(n,i,r){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(i!=t.Z_FILTERED&&i!=t.Z_HUFFMAN_ONLY&&i!=t.Z_RLE&&i!=t.Z_FIXED&&i!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+i);if(this._level!==n||this._strategy!==i){var o=this;this.flush(s.Z_SYNC_FLUSH,function(){a(o._handle,"zlib binding closed"),o._handle.params(n,i),o._hadError||(o._level=n,o._strategy=i,r&&r())})}else e.nextTick(r)},A.prototype.reset=function(){return a(this._handle,"zlib binding closed"),this._handle.reset()},A.prototype._flush=function(e){this._transform(i.alloc(0),"",e)},A.prototype.flush=function(t,n){var r=this,o=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=s.Z_FULL_FLUSH),o.ended?n&&e.nextTick(n):o.ending?n&&this.once("end",n):o.needDrain?n&&this.once("drain",function(){return r.flush(t,n)}):(this._flushFlag=t,this.write(i.alloc(0),"",n))},A.prototype.close=function(t){R(this,t),e.nextTick(T,this)},A.prototype._transform=function(e,t,n){var r,o=this._writableState,a=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||i.isBuffer(e)?this._handle?(a?r=this._finishFlushFlag:(r=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH)),void this._processChunk(e,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},A.prototype._processChunk=function(e,t,n){var r=e&&e.length,s=this._chunkSize-this._offset,o=0,h=this,u="function"==typeof n;if(!u){var d,p=[],f=0;this.on("error",function(e){d=e}),a(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,o,r,this._buffer,this._offset,s)}while(!this._hadError&&b(m[0],m[1]));if(this._hadError)throw d;if(f>=l)throw R(this),new RangeError(c);var g=i.concat(p,f);return R(this),g}a(this._handle,"zlib binding closed");var v=this._handle.write(t,e,o,r,this._buffer,this._offset,s);function b(l,c){if(this&&(this.buffer=null,this.callback=null),!h._hadError){var d=s-c;if(a(d>=0,"have should not go down"),d>0){var m=h._buffer.slice(h._offset,h._offset+d);h._offset+=d,u?h.push(m):(p.push(m),f+=m.length)}if((0===c||h._offset>=h._chunkSize)&&(s=h._chunkSize,h._offset=0,h._buffer=i.allocUnsafe(h._chunkSize)),0===c){if(o+=r-l,r=l,!u)return!0;var g=h._handle.write(t,e,o,r,h._buffer,h._offset,h._chunkSize);return g.callback=b,void(g.buffer=e)}if(!u)return!1;n()}}v.buffer=e,v.callback=b},o.inherits(y,A),o.inherits(_,A),o.inherits(w,A),o.inherits(x,A),o.inherits(S,A),o.inherits(C,A),o.inherits(k,A)}).call(this,n(38))},function(e,t,n){(function(t,i){var r=n(70);e.exports=y;var s,o=n(105);y.ReadableState=b,n(91);var a=function(e,t){return e.listeners(t).length},l=n(128),c=n(71).Buffer,h=t.Uint8Array||function(){},u=n(57);u.inherits=n(47);var d=n(201),p=void 0;p=d&&d.debuglog?d.debuglog("stream"):function(){};var f,m=n(202),g=n(129);u.inherits(y,l);var v=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var i=t instanceof(s=s||n(39));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,o=e.readableHighWaterMark;this.highWaterMark=r||0===r?r:i&&(o||0===o)?o:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(130).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function y(e){if(s=s||n(39),!(this instanceof y))return new y(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function _(e,t,n,i,r){var s,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,C(e)}}(e,o)):(r||(s=function(e,t){var n,i;return c.isBuffer(i=t)||i instanceof h||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),i?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):E(e,o)):w(e,o,t,!1))):i||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),E(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},y.prototype.unshift=function(e){return _(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return f||(f=n(130).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var x=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(k,e):k(e))}function k(e){p("emit readable"),e.emit("readable"),I(e)}function E(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function R(e){p("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(r+=o===s.length?s:s.slice(0,e),0==(e-=o)){o===s.length?(++i,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}(e,t):function(e,t){var n=c.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var s=i.data,o=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,o),0==(e-=o)){o===s.length?(++r,t.head=i.next?i.next:t.tail=null):(t.head=i,i.data=s.slice(o));break}++r}return t.length-=r,n}(e,t),i}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):C(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&O(this),null;var i,r=t.needReadable;return p("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",r=!0),t.ended||t.reading?p("reading or ended",r=!1):r&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(i=e>0?D(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==i&&this.emit("data",i),i},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,p("pipe count=%d opts=%j",s.pipesCount,t);var l=t&&!1===t.end||e===i.stdout||e===i.stderr?b:c;function c(){p("onend"),e.end()}s.endEmitted?r.nextTick(l):n.once("end",l),e.on("unpipe",function t(i,r){p("onunpipe"),i===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),e.removeListener("close",g),e.removeListener("finish",v),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",t),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",f),u=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||h())});var h=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,I(e))}}(n);e.on("drain",h);var u=!1,d=!1;function f(t){p("ondata"),d=!1,!1!==e.write(t)||d||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==M(s.pipes,e))&&!u&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function m(t){p("onerror",t),b(),e.removeListener("error",m),0===a(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",v),b()}function v(){p("onfinish"),e.removeListener("close",g),b()}function b(){p("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",g),e.once("finish",v),e.emit("pipe",n),s.flowing||(p("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<r;s++)i[s].emit("unpipe",this,n);return this}var o=M(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.addListener=y.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&C(this):r.nextTick(R,this))}return n},y.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(T,e,t))}(this,e)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",function(){if(p("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(r){p("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))}),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var s=0;s<v.length;s++)e.on(v[s],this.emit.bind(this,v[s]));return this._read=function(t){p("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=D}).call(this,n(23),n(38))},function(e,t,n){e.exports=n(91).EventEmitter},function(e,t,n){var i=n(70);function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){var i=n(71).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=h,this.end=u,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){e.exports=o;var i=n(39),r=n(57);function s(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);i.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){l(e,t,n)}):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=n(47),r.inherits(o,i),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){(function(t){var i=n(213);function r(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,r=0,s=Math.min(n,i);r<s;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0}function s(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n(133),a=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c="foo"===(function(){}).name;function h(e){return Object.prototype.toString.call(e)}function u(e){return!s(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var d=e.exports=b,p=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(o.isFunction(e)){if(c)return e.name;var t=e.toString().match(p);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(c||!o.isFunction(e))return o.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,i,r){throw new d.AssertionError({message:n,actual:e,expected:t,operator:i,stackStartFunction:r})}function b(e,t){e||v(e,!0,t,"==",d.ok)}function y(e,t,n,i){if(e===t)return!0;if(s(e)&&s(t))return 0===r(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(u(e)&&u(t)&&h(e)===h(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(s(e)!==s(t))return!1;var a=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),function(e,t,n,i){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=_(e),s=_(t);if(r&&!s||!r&&s)return!1;if(r)return y(e=l.call(e),t=l.call(t),n);var a,c,h=S(e),u=S(t);if(h.length!==u.length)return!1;for(h.sort(),u.sort(),c=h.length-1;c>=0;c--)if(h[c]!==u[c])return!1;for(c=h.length-1;c>=0;c--)if(!y(e[a=h[c]],t[a],n,i))return!1;return!0}(e,t,n,i))}return n?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,n,i){var r;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(e){var t;try{e()}catch(e){t=e}return t}(t),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!r&&v(r,n,"Missing expected exception"+i);var s="string"==typeof i,a=!e&&r&&!n;if((!e&&o.isError(r)&&s&&w(r,n)||a)&&v(r,n,"Got unwanted exception"+i),e&&r&&n&&!w(r,n)||!e&&r)throw r}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(g(e.actual),128)+" "+e.operator+" "+m(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var i=n.stack,r=f(t),s=i.indexOf("\n"+r);if(s>=0){var o=i.indexOf("\n",s+1);i=i.substring(o+1)}this.stack=i}}},o.inherits(d.AssertionError,Error),d.fail=v,d.ok=b,d.equal=function(e,t,n){e!=t&&v(e,t,n,"==",d.equal)},d.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",d.notEqual)},d.deepEqual=function(e,t,n){y(e,t,!1)||v(e,t,n,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,n){y(e,t,!0)||v(e,t,n,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,n){y(e,t,!1)&&v(e,t,n,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,n,i){y(t,n,!0)&&v(t,n,i,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",d.strictEqual)},d.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",d.notStrictEqual)},d.throws=function(e,t,n){x(!0,e,t,n)},d.doesNotThrow=function(e,t,n){x(!1,e,t,n)},d.ifError=function(e){if(e)throw e},d.strict=i(function e(t,n){t||v(t,!0,n,"==",e)},d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var S=Object.keys||function(e){var t=[];for(var n in e)a.call(e,n)&&t.push(n);return t}}).call(this,n(23))},function(e,t,n){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},r=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,s=i.length,o=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),l=i[n];n<s;l=i[++n])m(l)||!_(l)?o+=" "+l:o+=" "+a(l);return o},t.deprecate=function(n,i){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,i).apply(this,arguments)};var r=!1;return function(){if(!r){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}};var s,o={};function a(e,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),f(n)?i.showHidden=n:n&&t._extend(i,n),b(i.showHidden)&&(i.showHidden=!1),b(i.depth)&&(i.depth=2),b(i.colors)&&(i.colors=!1),b(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),h(i,e,i.depth)}function l(e,t){var n=a.styles[t];return n?"\x1b["+a.colors[n][0]+"m"+e+"\x1b["+a.colors[n][1]+"m":e}function c(e,t){return e}function h(e,n,i){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return v(r)||(r=h(e,r,i)),r}var s=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,n);if(s)return s;var o=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),x(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(n);if(0===o.length){if(S(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return u(n)}var l,c="",_=!1,C=["{","}"];return p(n)&&(_=!0,C=["[","]"]),S(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]"),y(n)&&(c=" "+RegExp.prototype.toString.call(n)),w(n)&&(c=" "+Date.prototype.toUTCString.call(n)),x(n)&&(c=" "+u(n)),0!==o.length||_&&0!=n.length?i<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=_?function(e,t,n,i,r){for(var s=[],o=0,a=t.length;o<a;++o)R(t,String(o))?s.push(d(e,t,n,i,String(o),!0)):s.push("");return r.forEach(function(r){r.match(/^\d+$/)||s.push(d(e,t,n,i,r,!0))}),s}(e,n,i,a,o):o.map(function(t){return d(e,n,i,a,t,_)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(l,c,C)):C[0]+c+C[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,i,r,s){var o,a,l;if((l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=e.stylize(l.set?"[Getter/Setter]":"[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),R(i,r)||(o="["+r+"]"),a||(e.seen.indexOf(l.value)<0?(a=m(n)?h(e,l.value,null):h(e,l.value,n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),b(o)){if(s&&r.match(/^\d+$/))return a;(o=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function y(e){return _(e)&&"[object RegExp]"===C(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===C(e)}function x(e){return _(e)&&("[object Error]"===C(e)||e instanceof Error)}function S(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(b(s)&&(s=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(s)){var i=e.pid;o[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,i,e)}}else o[n]=function(){};return o[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=y,t.isObject=_,t.isDate=w,t.isError=x,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(214);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(215),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise(function(e,i){t=e,n=i}),r=[],s=0;s<arguments.length;s++)r.push(arguments[s]);r.push(function(e,i){e?n(e):t(i)});try{e.apply(this,r)}catch(e){n(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return r.apply(s,arguments)};t.apply(this,n).then(function(t){e.nextTick(o,null,t)},function(t){e.nextTick(I,t,o)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(this,n(38))},function(e,t,n){e.exports=function(e,t,n,i){for(var r=65535&e|0,s=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{s=s+(r=r+t[i++]|0)|0}while(--o);r%=65521,s%=65521}return r|s<<16|0}},function(e,t,n){var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},function(e,t,n){n(11)("iterator")},function(e,t,n){var i=n(111),r=n(85).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){e.exports=n(259)},function(e,t,n){e.exports=n(262)},function(e,t,n){var i=n(50),r=n(14),s=n(24),o=n(21).f,a=n(64),l=n(271),c=a("meta"),h=0,u=Object.isExtensible||function(){return!0},d=function(e){o(e,c,{value:{objectID:"O"+ ++h,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,c)){if(!u(e))return"F";if(!t)return"E";d(e)}return e[c].objectID},getWeakData:function(e,t){if(!s(e,c)){if(!u(e))return!0;if(!t)return!1;d(e)}return e[c].weakData},onFreeze:function(e){return l&&p.REQUIRED&&u(e)&&!s(e,c)&&d(e),e}};i[c]=!0},function(e,t,n){var i=n(2),r=n(90);e.exports=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},function(e,t,n){var i=n(298),r=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===r||e instanceof Array&&t===r.indexOf?i:t}},function(e,t,n){var i=n(303),r=Function.prototype;e.exports=function(e){var t=e.bind;return e===r||e instanceof Function&&t===r.bind?i:t}},function(e,t,n){var i=n(5),r=n(14),s=[].slice,o={},a=function(e,t,n){if(!(t in o)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";o[t]=Function("C,a","return new C("+i.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=s.call(arguments,1),o=function(){var i=n.concat(s.call(arguments));return this instanceof o?a(t,i.length,i):t.apply(e,i)};return r(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t){e.exports=i;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function i(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=r;var s={},o={};function a(e,t){var n,i,r;return t?(r=0<=(e>>>=0)&&e<256)&&(i=o[e])?i:(n=c(e,(0|e)<0?-1:0,!0),r&&(o[e]=n),n):(r=-128<=(e|=0)&&e<128)&&(i=s[e])?i:(n=c(e,e<0?-1:0,!1),r&&(s[e]=n),n)}function l(e,t){if(isNaN(e))return t?b:v;if(t){if(e<0)return b;if(e>=f)return S}else{if(e<=-m)return C;if(e+1>=m)return x}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new i(e,t,n)}i.fromInt=a,i.fromNumber=l,i.fromBits=c;var h=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return u(e.substring(1),t,n).neg();for(var r=l(h(n,8)),s=v,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+a),n);if(a<8){var d=l(h(n,a));s=s.mul(d).add(l(c))}else s=(s=s.mul(r)).add(l(c))}return s.unsigned=t,s}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?u(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=u,i.fromValue=d;var p=4294967296,f=p*p,m=f/2,g=a(1<<24),v=a(0);i.ZERO=v;var b=a(0,!0);i.UZERO=b;var y=a(1);i.ONE=y;var _=a(1,!0);i.UONE=_;var w=a(-1);i.NEG_ONE=w;var x=c(-1,2147483647,!1);i.MAX_VALUE=x;var S=c(-1,-1,!0);i.MAX_UNSIGNED_VALUE=S;var C=c(0,-2147483648,!1);i.MIN_VALUE=C;var k=i.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=l(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=l(h(e,6),this.unsigned),s=this,o="";;){var a=s.div(r),c=(s.sub(a.mul(r)).toInt()>>>0).toString(e);if((s=a).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(y)},k.neg=k.negate,k.add=function(e){r(e)||(e=d(e));var t=0,n=0,i=0,s=0;return i+=(s+=(65535&this.low)+(65535&e.low))>>>16,n+=(i+=(this.low>>>16)+(e.low>>>16))>>>16,t+=(n+=(65535&this.high)+(65535&e.high))>>>16,t+=(this.high>>>16)+(e.high>>>16),c((i&=65535)<<16|(s&=65535),(t&=65535)<<16|(n&=65535),this.unsigned)},k.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return v;if(r(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(C))return e.isOdd()?C:v;if(e.eq(C))return this.isOdd()?C:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=65535&this.high,i=this.low>>>16,s=65535&this.low,o=65535&e.high,a=e.low>>>16,h=65535&e.low,u=0,p=0,f=0,m=0;return f+=(m+=s*h)>>>16,p+=(f+=i*h)>>>16,f&=65535,p+=(f+=s*a)>>>16,u+=(p+=t*h)>>>16,p&=65535,u+=(p+=i*a)>>>16,p&=65535,u+=(p+=s*o)>>>16,u+=(this.high>>>16)*h+t*a+i*o+s*(e.high>>>16),c((f&=65535)<<16|(m&=65535),(u&=65535)<<16|(p&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,i,s;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return _;s=b}else{if(this.eq(C))return e.eq(y)||e.eq(w)?C:e.eq(C)?y:(t=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:w:(i=this.sub(e.mul(t)),s=t.add(i.div(e)));if(e.eq(C))return this.unsigned?b:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=v}for(i=this;i.gte(e);){t=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:h(2,o-48),u=l(t),p=u.mul(e);p.isNegative()||p.gt(i);)p=(u=l(t-=a,this.unsigned)).mul(e);u.isZero()&&(u=y),s=s.add(u),i=i.sub(p)}return s},k.div=k.divide,k.modulo=function(e){return r(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return c(~this.low,~this.high,this.unsigned)},k.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){e.exports=n(335)},function(e,t,n){var i=n(17),r=n(51),s=n(28),o=n(65).f,a=function(e){return function(t){for(var n,a=s(t),l=r(a),c=l.length,h=0,u=[];c>h;)n=l[h++],i&&!o.call(a,n)||u.push(e?[n,a[n]]:a[n]);return u}};e.exports={entries:a(!0),values:a(!1)}},function(e,t,n){e.exports=n(338)},function(e,t,n){e.exports=n(352)},function(e,t,n){var i=n(355),r=n(153);e.exports=function(e){if(r(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return i(e)}},function(e,t,n){e.exports=n(360)},function(e,t,n){e.exports=n(372)},function(e,t,n){var i=n(13),r=n(375).trim,s=n(156),o=i.parseInt,a=/^[+-]?0[Xx]/,l=8!==o(s+"08")||22!==o(s+"0x16");e.exports=l?function(e,t){var n=r(String(e));return o(n,t>>>0||(a.test(n)?16:10))}:o},function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(e,t,n){var i=n(151);e.exports=function(e){if(i(e))return e}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){e.exports=n(393)},function(e,t,n){var i=n(419),r=n(426),s=n(429);function o(e){var t=i.parse(e);return"file:"===t.protocol?new s(unescape(t.pathname)):new r(e)}e.exports={LocalFile:s,RemoteFile:r,fromUrl:o,open:function(e,t,n){if(n)return n;if(e)return o(e);if(t)return new s(t);throw new Error("no url, path, or filehandle provided, cannot open")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.promisify=r;var i="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function r(e){if("function"!=typeof e)throw new TypeError("Argument to promisify must be a function");var t=e[i],n=r.Promise||Promise;if("function"!=typeof n)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var i=this,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return new n(function(n,r){s.push(function(e){if(e)return r(e);for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(1===s.length||!t)return n(s[0]);var a={};s.forEach(function(e,n){var i=t[n];i&&(a[i]=e)}),n(a)}),e.call.apply(e,[i].concat(s))})}}r.argumentNames=i,r.Promise=void 0},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(449),r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")},s=void 0===r().AbortController?i.AbortController:r().AbortController;t.AbortController=s;var o=void 0===r().AbortController?i.AbortSignal:r().AbortSignal;t.AbortSignal=o}).call(this,n(23))},function(e,t,n){var i=n(104),r=n(432),s=n(439);e.exports={CramFile:i,IndexedCramFile:r,CraiIndex:s}},function(e,t,n){(function(t){var i,r=n(1),s=r(n(16)),o=r(n(37)),a=r(n(30)),l=r(n(31)),c=r(n(7)),h=r(n(10)),u=n(126),d=n(224),p=n(94),f=n(9),m=f.CramUnimplementedError,g=f.CramMalformedError,v=n(309),b=n(318),y=b.cramFileDefinition,_=b.getSectionParsers,w=n(329),x=n(160).open,S=n(58),C=S.parseItem,k=S.tinyMemoize,E=n(430).parseHeaderText,A=function(){function e(t){(0,c.default)(this,e),this.file=x(t.url,t.path,t.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=t.seqFetch,this.options={checkSequenceMD5:!1!==t.checkSequenceMD5,cacheSize:void 0!==t.cacheSize?t.cacheSize:2e4},this.featureCache=new p({maxSize:this.options.cacheSize})}var n,i,r,s,f,b,S,k,A,R;return(0,h.default)(e,[{key:"toString",value:function(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}},{key:"read",value:function(e,t,n,i){return this.file.read(e,t,n,i)}},{key:"stat",value:function(){return this.file.stat()}},{key:"getDefinition",value:(R=(0,l.default)(a.default.mark(function e(){var n,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.allocUnsafe(y.maxLength),e.next=3,this.file.read(n,0,y.maxLength,0);case 3:if(2===(i=y.parser.parse(n).result).majorVersion||3===i.majorVersion){e.next=6;break}throw new m("CRAM version ".concat(i.majorVersion," not supported"));case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)})),function(){return R.apply(this,arguments)})},{key:"getSamHeader",value:(A=(0,l.default)(a.default.mark(function e(){var t,n,i,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContainerById(0);case 2:if(t=e.sent){e.next=5;break}throw new g("file contains no containers");case 5:return e.next=7,t.getFirstBlock();case 7:return i=(n=e.sent.content).readInt32LE(0),r=n.toString("utf8",4,4+i),this.header=r,e.abrupt("return",E(r));case 14:case"end":return e.stop()}},e,this)})),function(){return A.apply(this,arguments)})},{key:"getHeaderText",value:(k=(0,l.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSamHeader();case 2:return e.abrupt("return",this.header);case 3:case"end":return e.stop()}},e,this)})),function(){return k.apply(this,arguments)})},{key:"getSectionParsers",value:(S=(0,l.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return e.abrupt("return",_(e.sent.majorVersion));case 5:case"end":return e.stop()}},e,this)})),function(){return S.apply(this,arguments)})},{key:"getContainerById",value:(b=(0,l.default)(a.default.mark(function e(t){var n,i,r,s,o,l,c,h;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return i=(n=e.sent).cramFileDefinition.maxLength,e.next=6,this.file.stat();case 6:r=e.sent.size,s=n.cramContainerHeader1,l=0;case 10:if(!(l<=t)){e.next=36;break}if(!(i+s.maxLength+8>=r)){e.next=13;break}return e.abrupt("return",void 0);case 13:return o=this.getContainerAtPosition(i),e.next=16,o.getHeader();case 16:if(c=e.sent){e.next=19;break}throw new g("container ".concat(t," not found in file"));case 19:if(0!==l){e.next=32;break}i=c._endPosition,h=0;case 22:if(!(h<c.numBlocks)){e.next=30;break}return e.next=25,this.readBlock(i);case 25:i=e.sent._endPosition;case 27:h+=1,e.next=22;break;case 30:e.next=33;break;case 32:i+=c._size+c.length;case 33:l+=1,e.next=10;break;case 36:return e.abrupt("return",o);case 37:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"checkCrc32",value:(f=(0,l.default)(a.default.mark(function e(n,i,r,s){var l,c,h,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.allocUnsafe(i),e.next=3,this.file.read(l,0,i,n);case 3:if((c=d.unsigned(l))===r){e.next=6;break}throw new g((0,o.default)(h=(0,o.default)(u="crc mismatch in ".concat(s,": recorded CRC32 = ")).call(u,r,", but calculated CRC32 = ")).call(h,c));case 6:case"end":return e.stop()}},e,this)})),function(e,t,n,i){return f.apply(this,arguments)})},{key:"containerCount",value:(s=(0,l.default)(a.default.mark(function e(){var t,n,i,r,s,o,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return t=e.sent,e.next=5,this.file.stat();case 5:n=e.sent.size,i=t.cramContainerHeader1,r=0,s=t.cramFileDefinition.maxLength;case 10:if(!(s+i.maxLength+8<n)){e.next=33;break}return e.next=13,this.getContainerAtPosition(s).getHeader();case 13:if(o=e.sent){e.next=16;break}return e.abrupt("break",33);case 16:if(0!==r){e.next=29;break}s=o._endPosition,l=0;case 19:if(!(l<o.numBlocks)){e.next=27;break}return e.next=22,this.readBlock(s);case 22:s=e.sent._endPosition;case 24:l+=1,e.next=19;break;case 27:e.next=30;break;case 29:s+=o._size+o.length;case 30:r+=1,e.next=10;break;case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"getContainerAtPosition",value:function(e){return new w(this,e)}},{key:"readBlockHeader",value:(r=(0,l.default)(a.default.mark(function e(n){var i,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return i=e.sent.cramBlockHeader,e.next=6,this.file.stat();case 6:if(!(n+i.maxLength>=e.sent.size)){e.next=10;break}return e.abrupt("return",void 0);case 10:return r=t.allocUnsafe(i.maxLength),e.next=13,this.file.read(r,0,i.maxLength,n);case 13:return e.abrupt("return",C(r,i.parser,0,n));case 14:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_parseSection",value:(i=(0,l.default)(a.default.mark(function e(n,i){var r,s,l,c,h,u=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=u.length>2&&void 0!==u[2]?u[2]:n.maxLength,!(l=u.length>3?u[3]:void 0)){e.next=6;break}c=l,e.next=15;break;case 6:return e.next=8,this.file.stat();case 8:if(!(i+s>=e.sent.size)){e.next=12;break}return e.abrupt("return",void 0);case 12:return c=t.allocUnsafe(s),e.next=15,this.file.read(c,0,s,i);case 15:if((h=C(c,n.parser,0,i))._size===s){e.next=18;break}throw new g((0,o.default)(r="section read error: requested size ".concat(s," does not equal parsed size ")).call(r,h._size));case 18:return e.abrupt("return",h);case 19:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"_uncompress",value:function(e,t,n){if("gzip"===e)u.gunzipSync(t).copy(n);else{if("rans"!==e)throw new m("".concat(e," decompression not yet implemented"));v.uncompress(t,n)}}},{key:"readBlock",value:(n=(0,l.default)(a.default.mark(function e(n){var i,r,s,o,l,c,h;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return i=e.sent.majorVersion,e.next=6,this.getSectionParsers();case 6:return r=e.sent,e.next=9,this.readBlockHeader(n);case 9:if(o=(s=e.sent)._endPosition,s.contentPosition=s._endPosition,l=t.allocUnsafe(s.uncompressedSize),"raw"===s.compressionMethod){e.next=20;break}return c=t.allocUnsafe(s.compressedSize),e.next=17,this.read(c,0,s.compressedSize,o);case 17:this._uncompress(s.compressionMethod,c,l),e.next=22;break;case 20:return e.next=22,this.read(l,0,s.uncompressedSize,o);case 22:if(s.content=l,!(i>=3)){e.next=35;break}return e.next=26,this._parseSection(r.cramBlockCrc32,o+s.compressedSize);case 26:if(s.crc32=(h=e.sent).crc32,!this.validateChecksums){e.next=31;break}return e.next=31,this.checkCrc32(n,s._size+s.compressedSize,s.crc32,"block data");case 31:s._endPosition=h._endPosition,s._size=s.compressedSize+r.cramBlockCrc32.maxLength,e.next=37;break;case 35:s._endPosition=o+s.compressedSize,s._size=s.compressedSize;case 37:return e.abrupt("return",s);case 38:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),e}();(0,s.default)(i="getDefinition getSectionParsers getSamHeader".split(" ")).call(i,function(e){return k(A,e)}),e.exports=A}).call(this,n(19).Buffer)},function(e,t,n){t.byteLength=function(e){var t=c(e),n=t[1];return 3*(t[0]+n)/4-n},t.toByteArray=function(e){var t,n,i=c(e),o=i[0],a=i[1],l=new s(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),h=0,u=a>0?o-4:o;for(n=0;n<u;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[h++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,s=[],o=0,a=n-r;o<a;o+=16383)s.push(h(e,o,o+16383>a?a:o+16383));return 1===r?s.push(i[(t=e[n-1])>>2]+i[t<<4&63]+"=="):2===r&&s.push(i[(t=(e[n-2]<<8)+e[n-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),s.join("")};for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)i[a]=o[a],r[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function h(e,t,n){for(var r,s=[],o=t;o<n;o+=3)s.push(i[(r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,c=l>>1,h=-7,u=n?r-1:0,d=n?-1:1,p=e[t+u];for(u+=d,s=p&(1<<-h)-1,p>>=-h,h+=a;h>0;s=256*s+e[t+u],u+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+e[t+u],u+=d,h-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=c}return(p?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,n,i,r,s){var o,a,l,c=8*s-r-1,h=(1<<c)-1,u=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(t*l-1)*Math.pow(2,r),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[n+p]=255&o,p+=f,o/=256,c-=8);e[n+p-f]|=128*m}},function(e,t,n){n(41);var i=n(177),r=n(67),s=Array.prototype,o={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.forEach;return e===s||e instanceof Array&&t===s.forEach||o.hasOwnProperty(r(e))?i:t}},function(e,t,n){var i=n(28),r=n(78),s=n(35),o=n(42),a=n(80),l=o.set,c=o.getterFor("Array Iterator");e.exports=a(Array,"Array",function(e,t){l(this,{type:"Array Iterator",target:i(e),index:0,kind:t})},function(){var e=c(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var i=n(13),r=n(170),s=i.WeakMap;e.exports="function"==typeof s&&/native code/.test(r.call(s))},function(e,t,n){var i=n(61);e.exports=i("native-function-to-string",Function.toString)},function(e,t,n){var i=n(13),r=n(20);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(108).IteratorPrototype,r=n(44),s=n(43),o=n(36),a=n(35),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=r(i,{next:s(1,n)}),o(e,c,!1,!0),a[c]=l,e}},function(e,t,n){var i=n(17),r=n(21),s=n(2),o=n(51);e.exports=i?Object.defineProperties:function(e,t){s(e);for(var n,i=o(t),a=i.length,l=0;a>l;)r.f(e,n=i[l++],t[n]);return e}},function(e,t,n){var i=n(67),r={};r[n(6)("toStringTag")]="z",e.exports="[object z]"!==String(r)?function(){return"[object "+i(this)+"]"}:r.toString},function(e,t,n){var i=n(14);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){e.exports=n(178)},function(e,t,n){n(179);var i=n(18);e.exports=i("Array").forEach},function(e,t,n){var i=n(0),r=n(180);i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(e,t,n){var i=n(45).forEach,r=n(54);e.exports=r("forEach")?function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(e,t,n){e.exports=n(182)},function(e,t,n){var i=n(183),r=Array.prototype;e.exports=function(e){var t=e.concat;return e===r||e instanceof Array&&t===r.concat?i:t}},function(e,t,n){n(114);var i=n(18);e.exports=i("Array").concat},function(e,t,n){var i=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(e,t,n,i){var r=Object.create((t&&t.prototype instanceof m?t:m).prototype),s=new A(i||[]);return r._invoke=function(e,t,n){var i=h;return function(r,s){if(i===d)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw s;return T()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=C(o,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=c(e,t,n);if("normal"===l.type){if(i=n.done?p:u,l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(e,n,s),r}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h="suspendedStart",u="suspendedYield",d="executing",p="completed",f={};function m(){}function g(){}function v(){}var b={};b[s]=function(){return this};var y=Object.getPrototypeOf,_=y&&y(y(R([])));_&&_!==n&&i.call(_,s)&&(b=_);var w=v.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(e,t){var n;this._invoke=function(r,s){function o(){return new t(function(n,o){!function n(r,s,o,a){var l=c(e[r],e,s);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,o,a)},function(e){n("throw",e,o,a)}):t.resolve(u).then(function(e){h.value=e,o(h)},function(e){return n("throw",e,o,a)})}a(l.arg)}(r,s,n,o)})}return n=n?n.then(o,o):o()}}function C(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var s=r.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(e){if(e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=w.constructor=v,v.constructor=g,v[a]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},x(S.prototype),S.prototype[o]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new S(l(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(w),w[a]="Generator",w[s]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=R,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:R(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},function(e,t,n){e.exports=n(186)},function(e,t,n){e.exports=n(115),n(192),n(193),n(194),n(195)},function(e,t,n){var i=n(83),r=n(49),s=function(e){return function(t,n){var s,o,a=String(r(t)),l=i(n),c=a.length;return l<0||l>=c?e?"":void 0:(s=a.charCodeAt(l))<55296||s>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):s:e?a.slice(l,l+2):o-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},function(e,t,n){var i,r,s,o,a=n(0),l=n(4),c=n(13),h=n(3),u=n(116),d=n(52),p=n(117),f=n(36),m=n(118),g=n(14),v=n(5),b=n(89),y=n(34),_=n(8),w=n(121),x=n(55),S=n(122).set,C=n(189),k=n(124),E=n(190),A=n(56),R=n(69),T=n(123),I=n(42),D=n(107),O=n(6)("species"),P="Promise",M=I.get,L=I.set,F=I.getterFor(P),N=u,z=c.TypeError,V=c.document,j=c.process,B=c.fetch,H=j&&j.versions,q=H&&H.v8||"",$=A.f,U=$,W="process"==y(j),G=!!(V&&V.createEvent&&c.dispatchEvent),Y=D(P,function(){var e=N.resolve(1),t=function(){},n=(e.constructor={})[O]=function(e){e(t,t)};return!((W||"function"==typeof PromiseRejectionEvent)&&(!l||e.finally)&&e.then(t)instanceof n&&0!==q.indexOf("6.6")&&-1===T.indexOf("Chrome/66"))}),Z=Y||!w(function(e){N.all(e).catch(function(){})}),X=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},K=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;C(function(){for(var r=t.value,s=1==t.state,o=0;i.length>o;){var a,l,c,h=i[o++],u=s?h.ok:h.fail,d=h.resolve,p=h.reject,f=h.domain;try{u?(s||(2===t.rejection&&te(e,t),t.rejection=1),!0===u?a=r:(f&&f.enter(),a=u(r),f&&(f.exit(),c=!0)),a===h.promise?p(z("Promise-chain cycle")):(l=X(a))?l.call(a,d,p):d(a)):p(r)}catch(e){f&&!c&&f.exit(),p(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&J(e,t)})}},Q=function(e,t,n){var i,r;G?((i=V.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:n},(r=c["on"+e])?r(i):"unhandledrejection"===e&&E("Unhandled promise rejection",n)},J=function(e,t){S.call(c,function(){var n,i=t.value;if(ee(t)&&(n=R(function(){W?j.emit("unhandledRejection",i,e):Q("unhandledrejection",e,i)}),t.rejection=W||ee(t)?2:1,n.error))throw n.value})},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){S.call(c,function(){W?j.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)})},ne=function(e,t,n,i){return function(r){e(t,n,r,i)}},ie=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,K(e,t,!0))},re=function(e,t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===n)throw z("Promise can't be resolved itself");var r=X(n);r?C(function(){var i={done:!1};try{r.call(n,ne(re,e,i,t),ne(ie,e,i,t))}catch(n){ie(e,i,n,t)}}):(t.value=n,t.state=1,K(e,t,!1))}catch(n){ie(e,{done:!1},n,t)}}};Y&&(N=function(e){b(this,N,P),v(e),i.call(this);var t=M(this);try{e(ne(re,this,t),ne(ie,this,t))}catch(e){ie(this,t,e)}},(i=function(e){L(this,{type:P,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(N.prototype,{then:function(e,t){var n=F(this),i=$(x(this,N));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=W?j.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&K(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=M(e);this.promise=e,this.resolve=ne(re,e,t),this.reject=ne(ie,e,t)},A.f=$=function(e){return e===N||e===s?new r(e):U(e)},l||"function"!=typeof u||(o=u.prototype.then,d(u.prototype,"then",function(e,t){var n=this;return new N(function(e,t){o.call(n,e,t)}).then(e,t)}),"function"==typeof B&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return k(N,B.apply(c,arguments))}}))),a({global:!0,wrap:!0,forced:Y},{Promise:N}),f(N,P,!1,!0),m(P),s=h.Promise,a({target:P,stat:!0,forced:Y},{reject:function(e){var t=$(this);return t.reject.call(void 0,e),t.promise}}),a({target:P,stat:!0,forced:l||Y},{resolve:function(e){return k(l&&this===s?N:this,e)}}),a({target:P,stat:!0,forced:Z},{all:function(e){var t=this,n=$(t),i=n.resolve,r=n.reject,s=R(function(){var n=v(t.resolve),s=[],o=0,a=1;_(e,function(e){var l=o++,c=!1;s.push(void 0),a++,n.call(t,e).then(function(e){c||(c=!0,s[l]=e,--a||i(s))},r)}),--a||i(s)});return s.error&&r(s.value),n.promise},race:function(e){var t=this,n=$(t),i=n.reject,r=R(function(){var r=v(t.resolve);_(e,function(e){r.call(t,e).then(n.resolve,i)})});return r.error&&i(r.value),n.promise}})},function(e,t,n){var i,r,s,o,a,l,c,h,u=n(13),d=n(81).f,p=n(34),f=n(122).set,m=n(123),g=u.MutationObserver||u.WebKitMutationObserver,v=u.process,b=u.Promise,y="process"==p(v),_=d(u,"queueMicrotask"),w=_&&_.value;w||(i=function(){var e,t;for(y&&(e=v.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?o():s=void 0,e}}s=void 0,e&&e.enter()},y?o=function(){v.nextTick(i)}:g&&!/(iphone|ipod|ipad).*applewebkit/i.test(m)?(a=!0,l=document.createTextNode(""),new g(i).observe(l,{characterData:!0}),o=function(){l.data=a=!a}):b&&b.resolve?(c=b.resolve(void 0),h=c.then,o=function(){h.call(c,i)}):o=function(){f.call(u,i)}),e.exports=w||function(e){var t={fn:e,next:void 0};s&&(s.next=t),r||(r=t,o()),s=t}},function(e,t,n){var i=n(13);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){var i=n(0),r=n(4),s=n(116),o=n(26),a=n(55),l=n(124),c=n(52);i({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=a(this,o("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then(function(){return n})}:e,n?function(n){return l(t,e()).then(function(){throw n})}:e)}}),r||"function"!=typeof s||s.prototype.finally||c(s.prototype,"finally",o("Promise").prototype.finally)},function(e,t,n){var i=n(0),r=n(66),s=n(86),o=n(44),a=n(43),l=n(8),c=n(20),h=function(e,t){var n=this;if(!(n instanceof h))return new h(e,t);s&&(n=s(new Error(t),r(n)));var i=[];return l(e,i.push,i),c(n,"errors",i),void 0!==t&&c(n,"message",String(t)),n};h.prototype=o(Error.prototype,{constructor:a(5,h),name:a(5,"AggregateError")}),i({global:!0},{AggregateError:h})},function(e,t,n){n(125)},function(e,t,n){var i=n(0),r=n(56),s=n(69);i({target:"Promise",stat:!0},{try:function(e){var t=r.f(this),n=s(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}})},function(e,t,n){var i=n(0),r=n(5),s=n(26),o=n(56),a=n(69),l=n(8);i({target:"Promise",stat:!0},{any:function(e){var t=this,n=o.f(t),i=n.resolve,c=n.reject,h=a(function(){var n=r(t.resolve),o=[],a=0,h=1,u=!1;l(e,function(e){var r=a++,l=!1;o.push(void 0),h++,n.call(t,e).then(function(e){l||u||(u=!0,i(e))},function(e){l||u||(l=!0,o[r]=e,--h||c(new(s("AggregateError"))(o,"No one promise resolved")))})}),--h||c(new(s("AggregateError"))(o,"No one promise resolved"))});return h.error&&c(h.value),n.promise}})},function(e,t,n){e.exports=n(197)},function(e,t,n){e.exports=n(198)},function(e,t,n){n(199);var i=n(3).Object,r=e.exports=function(e,t,n){return i.defineProperty(e,t,n)};i.defineProperty.sham&&(r.sham=!0)},function(e,t,n){var i=n(0),r=n(17);i({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:n(21).f})},function(e,t,n){e.exports=r;var i=n(91).EventEmitter;function r(){i.call(this)}n(47)(r,i),r.Readable=n(92),r.Writable=n(208),r.Duplex=n(209),r.Transform=n(210),r.PassThrough=n(211),r.Stream=r,r.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function s(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",s),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",l));var o=!1;function a(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(h(),0===i.listenerCount(this,"error"))throw e}function h(){n.removeListener("data",r),e.removeListener("drain",s),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",h),n.removeListener("close",h),e.removeListener("close",h)}return n.on("error",c),e.on("error",c),n.on("end",h),n.on("close",h),e.on("close",h),e.emit("pipe",n),e}},function(e,t){},function(e,t,n){var i=n(71).Buffer,r=n(203);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new s(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(205),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(23))},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var i,r,s,o,a,l=1,c={},h=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){f(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&f(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){s.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,i=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(f,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[l]=r,i(l),l++},d.clearImmediate=p}function p(e){delete c[e]}function f(e){if(h)setTimeout(f,0,e);else{var t=c[e];if(t){h=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(23),n(38))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,n(23))},function(e,t,n){e.exports=s;var i=n(131),r=n(57);function s(e){if(!(this instanceof s))return new s(e);i.call(this,e)}r.inherits=n(47),r.inherits(s,i),s.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(93)},function(e,t,n){e.exports=n(39)},function(e,t,n){e.exports=n(92).Transform},function(e,t,n){e.exports=n(92).PassThrough},function(e,t,n){(function(e,i){var r=n(132),s=n(216),o=n(217),a=n(220),l=n(223);for(var c in l)t[c]=l[c];function h(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,h.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,r(this.init_done,"close before init"),r(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||a.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},h.prototype.write=function(e,t,n,i,r,s,o){return this._write(!0,e,t,n,i,r,s,o)},h.prototype.writeSync=function(e,t,n,i,r,s,o){return this._write(!1,e,t,n,i,r,s,o)},h.prototype._write=function(n,s,o,a,l,c,h,u){if(r.equal(arguments.length,8),r(this.init_done,"write before init"),r(this.mode!==t.NONE,"already finalized"),r.equal(!1,this.write_in_progress,"write already in progress"),r.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,r.equal(!1,void 0===s,"must provide flush value"),this.write_in_progress=!0,s!==t.Z_NO_FLUSH&&s!==t.Z_PARTIAL_FLUSH&&s!==t.Z_SYNC_FLUSH&&s!==t.Z_FULL_FLUSH&&s!==t.Z_FINISH&&s!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),l=0,a=0),this.strm.avail_in=l,this.strm.input=o,this.strm.next_in=a,this.strm.avail_out=u,this.strm.output=c,this.strm.next_out=h,this.flush=s,!n)return this._process(),this._checkError()?this._afterSync():void 0;var d=this;return i.nextTick(function(){d._process(),d._after()}),this},h.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},h.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=a.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=a.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=a.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=a.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},h.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return this._error(null==this.dictionary?"Missing dictionary":"Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},h.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},h.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},h.prototype.init=function(e,n,i,s,o){r(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),r(e>=8&&e<=15,"invalid windowBits"),r(n>=-1&&n<=9,"invalid compression level"),r(i>=1&&i<=9,"invalid memlevel"),r(s===t.Z_FILTERED||s===t.Z_HUFFMAN_ONLY||s===t.Z_RLE||s===t.Z_FIXED||s===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,i,s,o),this._setDictionary()},h.prototype.params=function(){throw new Error("deflateParams Not supported")},h.prototype.reset=function(){this._reset(),this._setDictionary()},h.prototype._init=function(e,n,i,r,l){switch(this.level=e,this.windowBits=n,this.memLevel=i,this.strategy=r,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=a.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},h.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},h.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=a.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=h}).call(this,n(19).Buffer,n(38))},function(e,t,n){var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=o(e),c=1;c<arguments.length;c++){for(var h in n=Object(arguments[c]))r.call(n,h)&&(l[h]=n[h]);if(i){a=i(n);for(var u=0;u<a.length;u++)s.call(n,a[u])&&(l[a[u]]=n[a[u]])}}return l}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){var i,r=n(72),s=n(218),o=n(134),a=n(135),l=n(219),c=-2,h=258,u=262,d=103,p=113,f=666;function m(e,t){return e.msg=l[t],t}function g(e){return(e<<1)-(e>4?9:0)}function v(e){for(var t=e.length;--t>=0;)e[t]=0}function b(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function y(e,t){s._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,b(e.strm)}function _(e,t){e.pending_buf[e.pending++]=t}function w(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var n,i,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-u?e.strstart-(e.w_size-u):0,c=e.window,d=e.w_mask,p=e.prev,f=e.strstart+h,m=c[s+o-1],g=c[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+o]===g&&c[n+o-1]===m&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<f);if(i=h-(f-s),s=f-h,i>o){if(e.match_start=t,o=i,i>=a)break;m=c[s+o-1],g=c[s+o]}}}while((t=p[t&d])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead}function S(e){var t,n,i,s,l,c,h,d,p,f,m=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-u)){r.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=m?i-m:0}while(--n);t=n=m;do{i=e.prev[--t],e.prev[t]=i>=m?i-m:0}while(--n);s+=m}if(0===e.strm.avail_in)break;if(h=e.window,d=e.strstart+e.lookahead,f=void 0,(f=(c=e.strm).avail_in)>(p=s)&&(f=p),n=0===f?0:(c.avail_in-=f,r.arraySet(h,c.input,c.next_in,f,d),1===c.state.wrap?c.adler=o(c.adler,h,f,d):2===c.state.wrap&&(c.adler=a(c.adler,h,f,d)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=3)for(e.ins_h=e.window[l=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<u&&0!==e.strm.avail_in)}function C(e,t){for(var n,i;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-u&&(e.match_length=x(e,n)),e.match_length>=3)if(i=s._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function k(e,t){for(var n,i,r;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-u&&(e.match_length=x(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(y(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=s._tr_tally(e,0,e.window[e.strstart-1]))&&y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function E(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),v(this.dyn_ltree),v(this.dyn_dtree),v(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),v(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),v(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,s._tr_init(t),0):m(e,c)}function T(e){var t,n=R(e);return 0===n&&((t=e.state).window_size=2*t.w_size,v(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function I(e,t,n,i,s,o){if(!e)return c;var a=1;if(-1===t&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),s<1||s>9||8!==n||i<8||i>15||t<0||t>9||o<0||o>4)return m(e,c);8===i&&(i=9);var l=new A;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,T(e)}i=[new E(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,y(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-u&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&y(e,!1),1)}),new E(4,4,8,4,C),new E(4,5,16,8,C),new E(4,6,32,32,C),new E(4,4,16,16,k),new E(8,16,32,32,k),new E(8,16,128,128,k),new E(8,32,128,256,k),new E(32,128,258,1024,k),new E(32,258,258,4096,k)],t.deflateInit=function(e,t){return I(e,t,8,15,8,0)},t.deflateInit2=I,t.deflateReset=T,t.deflateResetKeep=R,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},t.deflate=function(e,t){var n,r,o,l;if(!e||!e.state||t>5||t<0)return e?m(e,c):c;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===f&&4!==t)return m(e,0===e.avail_out?-5:c);if(r.strm=e,n=r.last_flush,r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,_(r,31),_(r,139),_(r,8),r.gzhead?(_(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),_(r,255&r.gzhead.time),_(r,r.gzhead.time>>8&255),_(r,r.gzhead.time>>16&255),_(r,r.gzhead.time>>24&255),_(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),_(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(_(r,255&r.gzhead.extra.length),_(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=a(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(_(r,0),_(r,0),_(r,0),_(r,0),_(r,0),_(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),_(r,3),r.status=p);else{var u=8+(r.w_bits-8<<4)<<8;u|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(u|=32),u+=31-u%31,r.status=p,w(r,u),0!==r.strstart&&(w(r,e.adler>>>16),w(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),b(e),o=r.pending,r.pending!==r.pending_buf_size));)_(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),b(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,_(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),b(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,_(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.status=d)}else r.status=d;if(r.status===d&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&b(e),r.pending+2<=r.pending_buf_size&&(_(r,255&e.adler),_(r,e.adler>>8&255),e.adler=0,r.status=p)):r.status=p),0!==r.pending){if(b(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(n)&&4!==t)return m(e,-5);if(r.status===f&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&r.status!==f){var x=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var n,i,r,o,a=e.window;;){if(e.lookahead<=h){if(S(e),e.lookahead<=h&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=a[r=e.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){o=e.strstart+h;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);e.match_length=h-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=s._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(r,t):i[r.level].func(r,t);if(3!==x&&4!==x||(r.status=f),1===x||3===x)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===x&&(1===t?s._tr_align(r):5!==t&&(s._tr_stored_block(r,0,0,!1),3===t&&(v(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),b(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(_(r,255&e.adler),_(r,e.adler>>8&255),_(r,e.adler>>16&255),_(r,e.adler>>24&255),_(r,255&e.total_in),_(r,e.total_in>>8&255),_(r,e.total_in>>16&255),_(r,e.total_in>>24&255)):(w(r,e.adler>>>16),w(r,65535&e.adler)),b(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==d&&t!==p&&t!==f?m(e,c):(e.state=null,t===p?m(e,-3):0):c},t.deflateSetDictionary=function(e,t){var n,i,s,a,l,h,u,d,p=t.length;if(!e||!e.state)return c;if(2===(a=(n=e.state).wrap)||1===a&&42!==n.status||n.lookahead)return c;for(1===a&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(v(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,t,p-n.w_size,n.w_size,0),t=d,p=n.w_size),l=e.avail_in,h=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,S(n);n.lookahead>=3;){i=n.strstart,s=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--s);n.strstart=i,n.lookahead=2,S(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=h,e.input=u,e.avail_in=l,n.wrap=a,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){var i=n(72);function r(e){for(var t=e.length;--t>=0;)e[t]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);r(c);var h=new Array(60);r(h);var u=new Array(512);r(u);var d=new Array(256);r(d);var p=new Array(29);r(p);var f,m,g,v=new Array(30);function b(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function _(e){return e<256?u[e]:u[256+(e>>>7)]}function w(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function x(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function S(e,t,n){x(e,n[2*t],n[2*t+1])}function C(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function k(e,t,n){var i,r,s=new Array(16),o=0;for(i=1;i<=15;i++)s[i]=o=o+n[i-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=C(s[a]++,a))}}function E(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function A(e){e.bi_valid>8?w(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function R(e,t,n,i){var r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]}function T(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&R(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!R(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function I(e,t,n){var i,r,a,l,c=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],r=e.pending_buf[e.l_buf+c],c++,0===i?S(e,r,t):(S(e,(a=d[r])+256+1,t),0!==(l=s[a])&&x(e,r-=p[a],l),S(e,a=_(--i),n),0!==(l=o[a])&&x(e,i-=v[a],l))}while(c<e.last_lit);S(e,256,t)}function D(e,t){var n,i,r,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=o[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)T(e,s,n);r=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],T(e,s,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,s[2*r]=s[2*n]+s[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,s[2*n+1]=s[2*i+1]=r,e.heap[1]=r++,T(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,s,o,a,l=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,u=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(s=0;s<=15;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(s=l[2*l[2*(i=e.heap[n])+1]+1]+1)>f&&(s=f,m++),l[2*i+1]=s,i>c||(e.bl_count[s]++,o=0,i>=p&&(o=d[i-p]),e.opt_len+=(a=l[2*i])*(s+o),u&&(e.static_len+=a*(h[2*i+1]+o)));if(0!==m){do{for(s=f-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(s=f;0!==s;s--)for(i=e.bl_count[s];0!==i;)(r=e.heap[--n])>c||(l[2*r+1]!==s&&(e.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),i--)}}(e,t),k(s,c,e.bl_count)}function O(e,t,n){var i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++a<l&&r===o||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4))}function P(e,t,n){var i,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++a<l&&r===o)){if(a<c)do{S(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(S(e,r,e.bl_tree),a--),S(e,16,e.bl_tree),x(e,a-3,2)):a<=10?(S(e,17,e.bl_tree),x(e,a-3,3)):(S(e,18,e.bl_tree),x(e,a-11,7));a=0,s=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4)}}r(v);var M=!1;function L(e,t,n,r){x(e,0+(r?1:0),3),function(e,t,n,r){A(e),w(e,n),w(e,~n),i.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}t._tr_init=function(e){M||(function(){var e,t,n,i,r,l=new Array(16);for(n=0,i=0;i<28;i++)for(p[i]=n,e=0;e<1<<s[i];e++)d[n++]=i;for(d[n-1]=i,r=0,i=0;i<16;i++)for(v[i]=r,e=0;e<1<<o[i];e++)u[r++]=i;for(r>>=7;i<30;i++)for(v[i]=r<<7,e=0;e<1<<o[i]-7;e++)u[256+r++]=i;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,l[8]++;for(;e<=255;)c[2*e+1]=9,e++,l[9]++;for(;e<=279;)c[2*e+1]=7,e++,l[7]++;for(;e<=287;)c[2*e+1]=8,e++,l[8]++;for(k(c,287,l),e=0;e<30;e++)h[2*e+1]=5,h[2*e]=C(e,5);f=new b(c,s,257,286,15),m=new b(h,o,0,30,15),g=new b(new Array(0),a,0,19,7)}(),M=!0),e.l_desc=new y(e.dyn_ltree,f),e.d_desc=new y(e.dyn_dtree,m),e.bl_desc=new y(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,E(e)},t._tr_stored_block=L,t._tr_flush_block=function(e,t,n,i){var r,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),D(e,e.l_desc),D(e,e.d_desc),o=function(e){var t;for(O(e,e.dyn_ltree,e.l_desc.max_code),O(e,e.dyn_dtree,e.d_desc.max_code),D(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(s=e.static_len+3+7>>>3)<=(r=e.opt_len+3+7>>>3)&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?L(e,t,n,i):4===e.strategy||s===r?(x(e,2+(i?1:0),3),I(e,c,h)):(x(e,4+(i?1:0),3),function(e,t,n,i){var r;for(x(e,t-257,5),x(e,n-1,5),x(e,i-4,4),r=0;r<i;r++)x(e,e.bl_tree[2*l[r]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),I(e,e.dyn_ltree,e.dyn_dtree)),E(e),i&&A(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(d[n]+256+1)]++,e.dyn_dtree[2*_(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){x(e,2,3),S(e,256,c),function(e){16===e.bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){var i=n(72),r=n(134),s=n(135),o=n(221),a=n(222),l=-2,c=12,h=30;function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):l}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):l}function m(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?l:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,f(e))):l}function g(e,t){var n,i;return e?(i=new d,e.state=i,i.window=null,0!==(n=m(e,t))&&(e.state=null),n):l}var v,b,y=!0;function _(e){if(y){var t;for(v=new i.Buf32(512),b=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,b,0,e.work,{bits:5}),y=!1}e.lencode=v,e.lenbits=9,e.distcode=b,e.distbits=5}function w(e,t,n,r){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),r>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>r&&(s=r),i.arraySet(o.window,t,n-r,s,o.wnext),(r-=s)?(i.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}t.inflateReset=f,t.inflateReset2=m,t.inflateResetKeep=p,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var n,d,p,f,m,g,v,b,y,x,S,C,k,E,A,R,T,I,D,O,P,M,L,F,N=0,z=new i.Buf8(4),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;(n=e.state).mode===c&&(n.mode=13),m=e.next_out,p=e.output,f=e.next_in,d=e.input,b=n.hold,y=n.bits,x=g=e.avail_in,S=v=e.avail_out,M=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(2&n.wrap&&35615===b){n.check=0,z[0]=255&b,z[1]=b>>>8&255,n.check=s(n.check,z,2,0),b=0,y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",n.mode=h;break}if(8!=(15&b)){e.msg="unknown compression method",n.mode=h;break}if(y-=4,P=8+(15&(b>>>=4)),0===n.wbits)n.wbits=P;else if(P>n.wbits){e.msg="invalid window size",n.mode=h;break}n.dmax=1<<P,e.adler=n.check=1,n.mode=512&b?10:c,b=0,y=0;break;case 2:for(;y<16;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=h;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=h;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,n.check=s(n.check,z,2,0)),b=0,y=0,n.mode=3;case 3:for(;y<32;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}n.head&&(n.head.time=b),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,z[2]=b>>>16&255,z[3]=b>>>24&255,n.check=s(n.check,z,4,0)),b=0,y=0,n.mode=4;case 4:for(;y<16;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,n.check=s(n.check,z,2,0)),b=0,y=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(z[0]=255&b,z[1]=b>>>8&255,n.check=s(n.check,z,2,0)),b=0,y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((C=n.length)>g&&(C=g),C&&(n.head&&(P=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,d,f,C,P)),512&n.flags&&(n.check=s(n.check,d,C,f)),g-=C,f+=C,n.length-=C),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;C=0;do{P=d[f+C++],n.head&&P&&n.length<65536&&(n.head.name+=String.fromCharCode(P))}while(P&&C<g);if(512&n.flags&&(n.check=s(n.check,d,C,f)),g-=C,f+=C,P)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;C=0;do{P=d[f+C++],n.head&&P&&n.length<65536&&(n.head.comment+=String.fromCharCode(P))}while(P&&C<g);if(512&n.flags&&(n.check=s(n.check,d,C,f)),g-=C,f+=C,P)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=h;break}b=0,y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=c;break;case 10:for(;y<32;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}e.adler=n.check=u(b),b=0,y=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=v,e.next_in=f,e.avail_in=g,n.hold=b,n.bits=y,2;e.adler=n.check=1,n.mode=c;case c:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}switch(n.last=1&b,y-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(_(n),n.mode=20,6===t){b>>>=2,y-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=h}b>>>=2,y-=2;break;case 14:for(b>>>=7&y,y-=7&y;y<32;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=h;break}if(n.length=65535&b,b=0,y=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(C=n.length){if(C>g&&(C=g),C>v&&(C=v),0===C)break e;i.arraySet(p,d,f,C,m),g-=C,f+=C,v-=C,m+=C,n.length-=C;break}n.mode=c;break;case 17:for(;y<14;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(n.nlen=257+(31&b),y-=5,n.ndist=1+(31&(b>>>=5)),y-=5,n.ncode=4+(15&(b>>>=5)),b>>>=4,y-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=h;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}n.lens[V[n.have++]]=7&b,b>>>=3,y-=3}for(;n.have<19;)n.lens[V[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M=a(0,n.lens,0,19,n.lencode,0,n.work,L={bits:n.lenbits}),n.lenbits=L.bits,M){e.msg="invalid code lengths set",n.mode=h;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(N=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,T=65535&N,!((A=N>>>24)<=y);){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(T<16)b>>>=A,y-=A,n.lens[n.have++]=T;else{if(16===T){for(F=A+2;y<F;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(b>>>=A,y-=A,0===n.have){e.msg="invalid bit length repeat",n.mode=h;break}P=n.lens[n.have-1],C=3+(3&b),b>>>=2,y-=2}else if(17===T){for(F=A+3;y<F;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}y-=A,P=0,C=3+(7&(b>>>=A)),b>>>=3,y-=3}else{for(F=A+7;y<F;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}y-=A,P=0,C=11+(127&(b>>>=A)),b>>>=7,y-=7}if(n.have+C>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=h;break}for(;C--;)n.lens[n.have++]=P}}if(n.mode===h)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=h;break}if(n.lenbits=9,M=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,L={bits:n.lenbits}),n.lenbits=L.bits,M){e.msg="invalid literal/lengths set",n.mode=h;break}if(n.distbits=6,n.distcode=n.distdyn,M=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L={bits:n.distbits}),n.distbits=L.bits,M){e.msg="invalid distances set",n.mode=h;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(g>=6&&v>=258){e.next_out=m,e.avail_out=v,e.next_in=f,e.avail_in=g,n.hold=b,n.bits=y,o(e,S),m=e.next_out,p=e.output,v=e.avail_out,f=e.next_in,d=e.input,g=e.avail_in,b=n.hold,y=n.bits,n.mode===c&&(n.back=-1);break}for(n.back=0;R=(N=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,T=65535&N,!((A=N>>>24)<=y);){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(R&&0==(240&R)){for(I=A,D=R,O=T;R=(N=n.lencode[O+((b&(1<<I+D)-1)>>I)])>>>16&255,T=65535&N,!(I+(A=N>>>24)<=y);){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}b>>>=I,y-=I,n.back+=I}if(b>>>=A,y-=A,n.back+=A,n.length=T,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=c;break}if(64&R){e.msg="invalid literal/length code",n.mode=h;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(F=n.extra;y<F;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(N=n.distcode[b&(1<<n.distbits)-1])>>>16&255,T=65535&N,!((A=N>>>24)<=y);){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(0==(240&R)){for(I=A,D=R,O=T;R=(N=n.distcode[O+((b&(1<<I+D)-1)>>I)])>>>16&255,T=65535&N,!(I+(A=N>>>24)<=y);){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}b>>>=I,y-=I,n.back+=I}if(b>>>=A,y-=A,n.back+=A,64&R){e.msg="invalid distance code",n.mode=h;break}n.offset=T,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(F=n.extra;y<F;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=h;break}n.mode=25;case 25:if(0===v)break e;if(n.offset>(C=S-v)){if((C=n.offset-C)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=h;break}k=C>n.wnext?n.wsize-(C-=n.wnext):n.wnext-C,C>n.length&&(C=n.length),E=n.window}else E=p,k=m-n.offset,C=n.length;C>v&&(C=v),v-=C,n.length-=C;do{p[m++]=E[k++]}while(--C);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;p[m++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===g)break e;g--,b|=d[f++]<<y,y+=8}if(e.total_out+=S-=v,n.total+=S,S&&(e.adler=n.check=n.flags?s(n.check,p,S,m-S):r(n.check,p,S,m-S)),S=v,(n.flags?b:u(b))!==n.check){e.msg="incorrect data check",n.mode=h;break}b=0,y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===g)break e;g--,b+=d[f++]<<y,y+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=h;break}b=0,y=0}n.mode=29;case 29:M=1;break e;case h:M=-3;break e;case 31:return-4;case 32:default:return l}return e.next_out=m,e.avail_out=v,e.next_in=f,e.avail_in=g,n.hold=b,n.bits=y,(n.wsize||S!==e.avail_out&&n.mode<h&&(n.mode<27||4!==t))&&w(e,e.output,e.next_out,S-e.avail_out)?(n.mode=31,-4):(S-=e.avail_out,e.total_in+=x-=e.avail_in,e.total_out+=S,n.total+=S,n.wrap&&S&&(e.adler=n.check=n.flags?s(n.check,p,S,e.next_out-S):r(n.check,p,S,e.next_out-S)),e.data_type=n.bits+(n.last?64:0)+(n.mode===c?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===S||4===t)&&0===M&&(M=-5),M)},t.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:(n.head=t,t.done=!1,0):l},t.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&r(1,t,i,0)!==n.check?-3:w(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,0):l},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){e.exports=function(e,t){var n,i,r,s,o,a,l,c,h,u,d,p,f,m,g,v,b,y,_,w,x,S,C,k,E;k=e.input,r=(i=e.next_in)+(e.avail_in-5),E=e.output,o=(s=e.next_out)-(t-e.avail_out),a=s+(e.avail_out-257),l=(n=e.state).dmax,c=n.wsize,h=n.whave,u=n.wnext,d=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{f<15&&(p+=k[i++]<<f,p+=k[i++]<<(f+=8),f+=8),y=m[p&v];t:for(;;){if(p>>>=_=y>>>24,f-=_,0==(_=y>>>16&255))E[s++]=65535&y;else{if(!(16&_)){if(0==(64&_)){y=m[(65535&y)+(p&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&y,(_&=15)&&(f<_&&(p+=k[i++]<<f,f+=8),w+=p&(1<<_)-1,p>>>=_,f-=_),f<15&&(p+=k[i++]<<f,p+=k[i++]<<(f+=8),f+=8),y=g[p&b];n:for(;;){if(p>>>=_=y>>>24,f-=_,!(16&(_=y>>>16&255))){if(0==(64&_)){y=g[(65535&y)+(p&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&y,f<(_&=15)&&(p+=k[i++]<<f,(f+=8)<_&&(p+=k[i++]<<f,f+=8)),(x+=p&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=_,f-=_,x>(_=s-o)){if((_=x-_)>h&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,C=d,0===u){if(S+=c-_,_<w){w-=_;do{E[s++]=d[S++]}while(--_);S=s-x,C=E}}else if(u<_){if(S+=c+u-_,(_-=u)<w){w-=_;do{E[s++]=d[S++]}while(--_);if(S=0,u<w){w-=_=u;do{E[s++]=d[S++]}while(--_);S=s-x,C=E}}}else if(S+=u-_,_<w){w-=_;do{E[s++]=d[S++]}while(--_);S=s-x,C=E}for(;w>2;)E[s++]=C[S++],E[s++]=C[S++],E[s++]=C[S++],w-=3;w&&(E[s++]=C[S++],w>1&&(E[s++]=C[S++]))}else{S=s-x;do{E[s++]=E[S++],E[s++]=E[S++],E[s++]=E[S++],w-=3}while(w>2);w&&(E[s++]=E[S++],w>1&&(E[s++]=E[S++]))}break}}break}}while(i<r&&s<a);i-=w=f>>3,p&=(1<<(f-=w<<3))-1,e.next_in=i,e.next_out=s,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=p,n.bits=f}},function(e,t,n){var i=n(72),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,c,h,u,d){var p,f,m,g,v,b,y,_,w,x=d.bits,S=0,C=0,k=0,E=0,A=0,R=0,T=0,I=0,D=0,O=0,P=null,M=0,L=new i.Buf16(16),F=new i.Buf16(16),N=null,z=0;for(S=0;S<=15;S++)L[S]=0;for(C=0;C<l;C++)L[t[n+C]]++;for(A=x,E=15;E>=1&&0===L[E];E--);if(A>E&&(A=E),0===E)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(k=1;k<E&&0===L[k];k++);for(A<k&&(A=k),I=1,S=1;S<=15;S++)if(I<<=1,(I-=L[S])<0)return-1;if(I>0&&(0===e||1!==E))return-1;for(F[1]=0,S=1;S<15;S++)F[S+1]=F[S]+L[S];for(C=0;C<l;C++)0!==t[n+C]&&(u[F[t[n+C]]++]=C);if(0===e?(P=N=u,b=19):1===e?(P=r,M-=257,N=s,z-=257,b=256):(P=o,N=a,b=-1),O=0,C=0,S=k,v=h,R=A,T=0,m=-1,g=(D=1<<A)-1,1===e&&D>852||2===e&&D>592)return 1;for(;;){y=S-T,u[C]<b?(_=0,w=u[C]):u[C]>b?(_=N[z+u[C]],w=P[M+u[C]]):(_=96,w=0),p=1<<S-T,k=f=1<<R;do{c[v+(O>>T)+(f-=p)]=y<<24|_<<16|w|0}while(0!==f);for(p=1<<S-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,C++,0==--L[S]){if(S===E)break;S=t[n+u[C]]}if(S>A&&(O&g)!==m){for(0===T&&(T=A),v+=k,I=1<<(R=S-T);R+T<E&&!((I-=L[R+T])<=0);)R++,I<<=1;if(D+=1<<R,1===e&&D>852||2===e&&D>592)return 1;c[m=O&g]=A<<24|R<<16|v-h|0}}return 0!==O&&(c[v+O]=S-T<<24|64<<16|0),d.bits=A,0}},function(e,t,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){var i=n(19).Buffer,r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function s(e){if(i.isBuffer(e))return e;var t="function"==typeof i.alloc&&"function"==typeof i.from;if("number"==typeof e)return t?i.alloc(e):new i(e);if("string"==typeof e)return t?i.from(e):new i(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function o(e,t){e=s(e),i.isBuffer(t)&&(t=t.readUInt32BE(0));for(var n=-1^~~t,o=0;o<e.length;o++)n=r[255&(n^e[o])]^n>>>8;return-1^n}function a(){return e=o.apply(null,arguments),(t=s(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(r=new Int32Array(r)),a.signed=function(){return o.apply(null,arguments)},a.unsigned=function(){return o.apply(null,arguments)>>>0},e.exports=a},function(e,t,n){var i=n(226),r=n(229);function s(e){return(s="function"==typeof r&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e})(e)}function o(t){return e.exports=o="function"==typeof r&&"symbol"===s(i)?function(e){return s(e)}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":s(e)},o(t)}e.exports=o},function(e,t,n){e.exports=n(227)},function(e,t,n){e.exports=n(228)},function(e,t,n){n(136),n(46),n(41);var i=n(95);e.exports=i.f("iterator")},function(e,t,n){e.exports=n(230)},function(e,t,n){e.exports=n(231),n(249),n(250),n(251),n(252),n(253)},function(e,t,n){n(114),n(88),n(232),n(234),n(235),n(236),n(237),n(136),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248);var i=n(3);e.exports=i.Symbol},function(e,t,n){var i=n(0),r=n(13),s=n(4),o=n(17),a=n(110),l=n(12),c=n(24),h=n(53),u=n(14),d=n(2),p=n(22),f=n(28),m=n(62),g=n(43),v=n(44),b=n(51),y=n(137),_=n(233),w=n(138),x=n(81),S=n(21),C=n(65),k=n(20),E=n(52),A=n(61),R=n(63),T=n(50),I=n(64),D=n(6),O=n(95),P=n(11),M=n(36),L=n(42),F=n(45).forEach,N=R("hidden"),z=D("toPrimitive"),V=L.set,j=L.getterFor("Symbol"),B=Object.prototype,H=r.Symbol,q=r.JSON,$=q&&q.stringify,U=x.f,W=S.f,G=_.f,Y=C.f,Z=A("symbols"),X=A("op-symbols"),K=A("string-to-symbol-registry"),Q=A("symbol-to-string-registry"),J=A("wks"),ee=r.QObject,te=!ee||!ee.prototype||!ee.prototype.findChild,ne=o&&l(function(){return 7!=v(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=U(B,t);i&&delete B[t],W(e,t,n),i&&e!==B&&W(B,t,i)}:W,ie=function(e,t){var n=Z[e]=v(H.prototype);return V(n,{type:"Symbol",tag:e,description:t}),o||(n.description=t),n},re=a&&"symbol"==typeof H.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof H},se=function(e,t,n){e===B&&se(X,t,n),d(e);var i=m(t,!0);return d(n),c(Z,i)?(n.enumerable?(c(e,N)&&e[N][i]&&(e[N][i]=!1),n=v(n,{enumerable:g(0,!1)})):(c(e,N)||W(e,N,g(1,{})),e[N][i]=!0),ne(e,i,n)):W(e,i,n)},oe=function(e,t){d(e);var n=f(t),i=b(n).concat(he(n));return F(i,function(t){o&&!ae.call(n,t)||se(e,t,n[t])}),e},ae=function(e){var t=m(e,!0),n=Y.call(this,t);return!(this===B&&c(Z,t)&&!c(X,t))&&(!(n||!c(this,t)||!c(Z,t)||c(this,N)&&this[N][t])||n)},le=function(e,t){var n=f(e),i=m(t,!0);if(n!==B||!c(Z,i)||c(X,i)){var r=U(n,i);return!r||!c(Z,i)||c(n,N)&&n[N][i]||(r.enumerable=!0),r}},ce=function(e){var t=G(f(e)),n=[];return F(t,function(e){c(Z,e)||c(T,e)||n.push(e)}),n},he=function(e){var t=e===B,n=G(t?X:f(e)),i=[];return F(n,function(e){!c(Z,e)||t&&!c(B,e)||i.push(Z[e])}),i};a||(E((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=I(e),n=function(e){this===B&&n.call(X,e),c(this,N)&&c(this[N],t)&&(this[N][t]=!1),ne(this,t,g(1,e))};return o&&te&&ne(B,t,{configurable:!0,set:n}),ie(t,e)}).prototype,"toString",function(){return j(this).tag}),C.f=ae,S.f=se,x.f=le,y.f=_.f=ce,w.f=he,o&&(W(H.prototype,"description",{configurable:!0,get:function(){return j(this).description}}),s||E(B,"propertyIsEnumerable",ae,{unsafe:!0})),O.f=function(e){return ie(D(e),e)}),i({global:!0,wrap:!0,forced:!a,sham:!a},{Symbol:H}),F(b(J),function(e){P(e)}),i({target:"Symbol",stat:!0,forced:!a},{for:function(e){var t=String(e);if(c(K,t))return K[t];var n=H(t);return K[t]=n,Q[n]=t,n},keyFor:function(e){if(!re(e))throw TypeError(e+" is not a symbol");if(c(Q,e))return Q[e]},useSetter:function(){te=!0},useSimple:function(){te=!1}}),i({target:"Object",stat:!0,forced:!a,sham:!o},{create:function(e,t){return void 0===t?v(e):oe(v(e),t)},defineProperty:se,defineProperties:oe,getOwnPropertyDescriptor:le}),i({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:ce,getOwnPropertySymbols:he}),i({target:"Object",stat:!0,forced:l(function(){w.f(1)})},{getOwnPropertySymbols:function(e){return w.f(p(e))}}),q&&i({target:"JSON",stat:!0,forced:!a||l(function(){var e=H();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))})},{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(u(t)||void 0!==e)&&!re(e))return h(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!re(t))return t}),i[1]=t,$.apply(q,i)}}),H.prototype[z]||k(H.prototype,z,H.prototype.valueOf),M(H,"Symbol"),T[N]=!0},function(e,t,n){var i=n(28),r=n(137).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(i(e))}},function(e,t,n){n(11)("asyncIterator")},function(e,t){},function(e,t,n){n(11)("hasInstance")},function(e,t,n){n(11)("isConcatSpreadable")},function(e,t,n){n(11)("match")},function(e,t,n){n(11)("matchAll")},function(e,t,n){n(11)("replace")},function(e,t,n){n(11)("search")},function(e,t,n){n(11)("species")},function(e,t,n){n(11)("split")},function(e,t,n){n(11)("toPrimitive")},function(e,t,n){n(11)("toStringTag")},function(e,t,n){n(11)("unscopables")},function(e,t,n){n(36)(Math,"Math",!0)},function(e,t,n){var i=n(13);n(36)(i.JSON,"JSON",!0)},function(e,t,n){n(11)("asyncDispose")},function(e,t,n){n(11)("dispose")},function(e,t,n){n(11)("observable")},function(e,t,n){n(11)("patternMatch")},function(e,t,n){n(11)("replaceAll")},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){e.exports=n(256)},function(e,t,n){e.exports=n(257)},function(e,t,n){n(258);var i=n(3);e.exports=i.Object.getPrototypeOf},function(e,t,n){var i=n(0),r=n(12),s=n(22),o=n(66),a=n(109);i({target:"Object",stat:!0,forced:r(function(){o(1)}),sham:!a},{getPrototypeOf:function(e){return o(s(e))}})},function(e,t,n){e.exports=n(260)},function(e,t,n){n(261);var i=n(3);e.exports=i.Object.setPrototypeOf},function(e,t,n){n(0)({target:"Object",stat:!0},{setPrototypeOf:n(86)})},function(e,t,n){e.exports=n(263)},function(e,t,n){n(264);var i=n(3).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){n(0)({target:"Object",stat:!0,sham:!n(17)},{create:n(44)})},function(e,t,n){var i=n(140),r=n(266),s=n(27),o=n(96),a=n(295),l=n(300);function c(t){var n="function"==typeof r?new r:void 0;return e.exports=c=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return l(e,arguments,s(this).constructor)}return t.prototype=i(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},c(t)}e.exports=c},function(e,t,n){e.exports=n(267)},function(e,t,n){e.exports=n(268),n(273),n(275),n(277),n(279),n(280),n(281),n(282),n(283),n(284),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294)},function(e,t,n){n(269),n(88),n(46),n(41);var i=n(3);e.exports=i.Map},function(e,t,n){var i=n(270),r=n(272);e.exports=i("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},r,!0)},function(e,t,n){var i=n(0),r=n(13),s=n(141),o=n(12),a=n(20),l=n(8),c=n(89),h=n(14),u=n(36),d=n(21).f,p=n(45).forEach,f=n(17),m=n(42),g=m.set,v=m.getterFor;e.exports=function(e,t,n,m,b){var y,_=r[e],w=_&&_.prototype,x=m?"set":"add",S={};if(f&&"function"==typeof _&&(b||w.forEach&&!o(function(){(new _).entries().next()}))){y=t(function(t,n){g(c(t,y,e),{type:e,collection:new _}),null!=n&&l(n,t[x],t,m)});var C=v(e);p(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(e){var t="add"==e||"set"==e;e in w&&(!b||"clear"!=e)&&a(y.prototype,e,function(n,i){var r=C(this).collection;if(!t&&b&&!h(n))return"get"==e&&void 0;var s=r[e](0===n?0:n,i);return t?this:s})}),b||d(y.prototype,"size",{get:function(){return C(this).collection.size}})}else y=n.getConstructor(t,e,m,x),s.REQUIRED=!0;return u(y,e,!1,!0),S[e]=y,i({global:!0,forced:!0},S),b||n.setStrong(y,e,m),y}},function(e,t,n){var i=n(12);e.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,n){var i=n(21).f,r=n(44),s=n(117),o=n(15),a=n(89),l=n(8),c=n(80),h=n(118),u=n(17),d=n(141).fastKey,p=n(42),f=p.set,m=p.getterFor;e.exports={getConstructor:function(e,t,n,c){var h=e(function(e,i){a(e,h,t),f(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),u||(e.size=0),null!=i&&l(i,e[c],e,n)}),p=m(t),g=function(e,t,n){var i,r,s=p(e),o=v(e,t);return o?o.value=n:(s.last=o={index:r=d(t,!0),key:t,value:n,previous:i=s.last,next:void 0,removed:!1},s.first||(s.first=o),i&&(i.next=o),u?s.size++:e.size++,"F"!==r&&(s.index[r]=o)),e},v=function(e,t){var n,i=p(e),r=d(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return s(h.prototype,{clear:function(){for(var e=p(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,u?e.size=0:this.size=0},delete:function(e){var t=p(this),n=v(this,e);if(n){var i=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),t.first==n&&(t.first=i),t.last==n&&(t.last=r),u?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=p(this),i=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),s(h.prototype,n?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),u&&i(h.prototype,"size",{get:function(){return p(this).size}}),h},setStrong:function(e,t,n){var i=t+" Iterator",r=m(t),s=m(i);c(e,t,function(e,t){f(this,{type:i,target:e,state:r(e),kind:t,last:void 0})},function(){for(var e=s(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){n(0)({target:"Map",stat:!0},{from:n(274)})},function(e,t,n){var i=n(5),r=n(15),s=n(8);e.exports=function(e){var t,n,o,a,l=arguments.length,c=l>1?arguments[1]:void 0;return i(this),(t=void 0!==c)&&i(c),null==e?new this:(n=[],t?(o=0,a=r(c,l>2?arguments[2]:void 0,2),s(e,function(e){n.push(a(e,o++))})):s(e,n.push,n),new this(n))}},function(e,t,n){n(0)({target:"Map",stat:!0},{of:n(276)})},function(e,t,n){e.exports=function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}},function(e,t,n){var i=n(0),r=n(4),s=n(278);i({target:"Map",proto:!0,real:!0,forced:r},{deleteAll:function(){return s.apply(this,arguments)}})},function(e,t,n){var i=n(2),r=n(5);e.exports=function(){for(var e,t=i(this),n=r(t.delete),s=!0,o=0,a=arguments.length;o<a;o++)e=n.call(t,arguments[o]),s=s&&e;return!!s}},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(15),a=n(25),l=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{every:function(e){var t=s(this),n=a(t),i=o(e,arguments.length>1?arguments[1]:void 0,3);return!l(n,function(e,n){if(!i(n,e,t))return l.stop()},void 0,!0,!0).stopped}})},function(e,t,n){var i=n(0),r=n(4),s=n(26),o=n(2),a=n(5),l=n(15),c=n(55),h=n(25),u=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{filter:function(e){var t=o(this),n=h(t),i=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Map"))),d=a(r.set);return u(n,function(e,n){i(n,e,t)&&d.call(r,e,n)},void 0,!0,!0),r}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(15),a=n(25),l=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{find:function(e){var t=s(this),n=a(t),i=o(e,arguments.length>1?arguments[1]:void 0,3);return l(n,function(e,n){if(i(n,e,t))return l.stop(n)},void 0,!0,!0).result}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(15),a=n(25),l=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{findKey:function(e){var t=s(this),n=a(t),i=o(e,arguments.length>1?arguments[1]:void 0,3);return l(n,function(e,n){if(i(n,e,t))return l.stop(e)},void 0,!0,!0).result}})},function(e,t,n){var i=n(0),r=n(8),s=n(5);i({target:"Map",stat:!0},{groupBy:function(e,t){var n=new this;s(t);var i=s(n.has),o=s(n.get),a=s(n.set);return r(e,function(e){var r=t(e);i.call(n,r)?o.call(n,r).push(e):a.call(n,r,[e])}),n}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(25),a=n(285),l=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{includes:function(e){return l(o(s(this)),function(t,n){if(a(n,e))return l.stop()},void 0,!0,!0).stopped}})},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var i=n(0),r=n(8),s=n(5);i({target:"Map",stat:!0},{keyBy:function(e,t){var n=new this;s(t);var i=s(n.set);return r(e,function(e){i.call(n,t(e),e)}),n}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(25),a=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{keyOf:function(e){return a(o(s(this)),function(t,n){if(n===e)return a.stop(t)},void 0,!0,!0).result}})},function(e,t,n){var i=n(0),r=n(4),s=n(26),o=n(2),a=n(5),l=n(15),c=n(55),h=n(25),u=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{mapKeys:function(e){var t=o(this),n=h(t),i=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Map"))),d=a(r.set);return u(n,function(e,n){d.call(r,i(n,e,t),n)},void 0,!0,!0),r}})},function(e,t,n){var i=n(0),r=n(4),s=n(26),o=n(2),a=n(5),l=n(15),c=n(55),h=n(25),u=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{mapValues:function(e){var t=o(this),n=h(t),i=l(e,arguments.length>1?arguments[1]:void 0,3),r=new(c(t,s("Map"))),d=a(r.set);return u(n,function(e,n){d.call(r,e,i(n,e,t))},void 0,!0,!0),r}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(5),a=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{merge:function(e){for(var t=s(this),n=o(t.set),i=0;i<arguments.length;)a(arguments[i++],n,t,!0);return t}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(5),a=n(25),l=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{reduce:function(e){var t,n,i=s(this),r=a(i);if(o(e),arguments.length>1)t=arguments[1];else{if((n=r.next()).done)throw TypeError("Reduce of empty map with no initial value");t=n.value[1]}return l(r,function(n,r){t=e(t,r,n,i)},void 0,!0,!0),t}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(15),a=n(25),l=n(8);i({target:"Map",proto:!0,real:!0,forced:r},{some:function(e){var t=s(this),n=a(t),i=o(e,arguments.length>1?arguments[1]:void 0,3);return l(n,function(e,n){if(i(n,e,t))return l.stop()},void 0,!0,!0).stopped}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(5);i({target:"Map",proto:!0,real:!0,forced:r},{update:function(e,t){var n=s(this),i=arguments.length;o(t);var r=n.has(e);if(!r&&i<3)throw TypeError("Updating absent value");var a=r?n.get(e):o(i>2?arguments[2]:void 0)(e,n);return n.set(e,t(a,e,n)),n}})},function(e,t,n){var i=n(0),r=n(4),s=n(2),o=n(5);i({target:"Map",proto:!0,real:!0,forced:r},{updateOrInsert:function(e,t,n){var i=s(this);o(t),o(n);var r=i.has(e)?t(i.get(e)):n();return i.set(e,r),r}})},function(e,t,n){var i=n(296);e.exports=function(e){var t;return-1!==i(t=Function.toString.call(e)).call(t,"[native code]")}},function(e,t,n){e.exports=n(297)},function(e,t,n){e.exports=n(143)},function(e,t,n){n(299);var i=n(18);e.exports=i("Array").indexOf},function(e,t,n){var i=n(0),r=n(82).indexOf,s=n(54),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0,l=s("indexOf");i({target:"Array",proto:!0,forced:a||l},{indexOf:function(e){return a?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(301),r=n(305),s=n(96);function o(t,n,a){return e.exports=o=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r(Date,[],function(){})),!0}catch(e){return!1}}()?r:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(i(Function).apply(e,r));return n&&s(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},function(e,t,n){e.exports=n(302)},function(e,t,n){e.exports=n(144)},function(e,t,n){n(304);var i=n(18);e.exports=i("Function").bind},function(e,t,n){n(0)({target:"Function",proto:!0},{bind:n(145)})},function(e,t,n){e.exports=n(306)},function(e,t,n){e.exports=n(307)},function(e,t,n){n(308);var i=n(3);e.exports=i.Reflect.construct},function(e,t,n){var i=n(0),r=n(26),s=n(5),o=n(2),a=n(14),l=n(44),c=n(145),h=n(12),u=r("Reflect","construct"),d=h(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),p=!h(function(){u(function(){})}),f=d||p;i({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(e,t){s(e),o(t);var n=arguments.length<3?e:s(arguments[2]);if(p&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(c.apply(e,i))}var r=n.prototype,h=l(a(r)?r:Object.prototype),f=Function.apply.call(e,h,t);return a(f)?f:h}})},function(e,t,n){(function(t){var i=n(1),r=i(n(97)),s=i(n(7)),o=i(n(10)),a=n(9).CramMalformedError,l=n(73),c=n(315),h=n(316),u=n(317),d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,s.default)(this,e),this._buffer=t,this._position=n,this.length=t.length}return(0,o.default)(e,[{key:"get",value:function(){var e=this._buffer[this._position];return this._position+=1,e}},{key:"getByte",value:function(){return this.get()}},{key:"getByteAt",value:function(e){return this._buffer[e]}},{key:"position",value:function(){return this._position}},{key:"put",value:function(e){return this._buffer[this._position]=e,this._position+=1,e}},{key:"putAt",value:function(e,t){return this._buffer[e]=t,t}},{key:"setPosition",value:function(e){return this._position=e,e}},{key:"getInt",value:function(){var e=this._buffer.readInt32LE(this._position);return this._position+=4,e}},{key:"remaining",value:function(){return this._buffer.length-this._position}}]),e}();e.exports={uncompress:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return(0,r.default)(n).call(n,0),n;var s=new d(e,i),o=s.get();if(0!==o&&1!==o)throw new a("Invalid rANS order ".concat(o));if(s.getInt()!==s.remaining()-4)throw new a("Incorrect input length.");var p=s.getInt(),f=new d(n||t.allocUnsafe(p));if(f.length<p)throw new a("Output buffer too small to fit ".concat(p," bytes."));switch(o){case 0:return function(e,t){for(var n=new l.AriDecoder,i=new Array(256),r=0;r<i.length;r+=1)i[r]=new l.Symbol;return c.readStatsO0(e,n,i),h.uncompress(e,n,i,t),t}(s,f);case 1:return function(e,t){for(var n=new Array(256),i=0;i<n.length;i+=1)n[i]=new l.AriDecoder;for(var r=new Array(256),s=0;s<r.length;s+=1){r[s]=new Array(256);for(var o=0;o<r[s].length;o+=1)r[s][o]=new l.Symbol}return c.readStatsO1(e,n,r),u.uncompress(e,t,n,r),t}(s,f);default:throw new a("Invalid rANS order: ".concat(o))}}}}).call(this,n(19).Buffer)},function(e,t,n){e.exports=n(311)},function(e,t,n){var i=n(312),r=Array.prototype;e.exports=function(e){var t=e.fill;return e===r||e instanceof Array&&t===r.fill?i:t}},function(e,t,n){n(313);var i=n(18);e.exports=i("Array").fill},function(e,t,n){var i=n(0),r=n(314),s=n(78);i({target:"Array",proto:!0},{fill:r}),s("fill")},function(e,t,n){var i=n(22),r=n(84),s=n(29);e.exports=function(e){for(var t=i(this),n=s(t.length),o=arguments.length,a=r(o>1?arguments[1]:void 0,n),l=o>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);c>a;)t[a++]=e;return t}},function(e,t,n){var i=n(1)(n(97)),r=n(9).CramMalformedError,s=n(74),o=n(73);function a(e){if(!e)throw new r("assertion failed")}e.exports={readStatsO0:function(e,t,n){var r=0,l=0,c=255&e.get();do{var h;null==t.fc[c]&&(t.fc[c]=new o.FC),t.fc[c].F=255&e.get(),t.fc[c].F>=128&&(t.fc[c].F&=-129,t.fc[c].F=(127&t.fc[c].F)<<8|255&e.get()),t.fc[c].C=l,o.symbolInit(n[c],t.fc[c].C,t.fc[c].F),t.R||(t.R=new Array(s.TOTFREQ)),(0,i.default)(h=t.R).call(h,c,l,l+t.fc[c].F),l+=t.fc[c].F,0===r&&c+1===(255&e.getByteAt(e.position()))?(c=255&e.get(),r=255&e.get()):0!==r?(r-=1,c+=1):c=255&e.get()}while(0!==c);a(l<s.TOTFREQ)},readStatsO1:function(e,t,n){var r=0,l=255&e.get();do{var c=0,h=0,u=255&e.get();null==t[l]&&(t[l]=new o.AriDecoder);do{var d;null==t[l].fc[u]&&(t[l].fc[u]=new o.FC),t[l].fc[u].F=255&e.get(),t[l].fc[u].F>=128&&(t[l].fc[u].F&=-129,t[l].fc[u].F=(127&t[l].fc[u].F)<<8|255&e.get()),t[l].fc[u].C=h,0===t[l].fc[u].F&&(t[l].fc[u].F=s.TOTFREQ),null==n[l][u]&&(n[l][u]=new o.RansDecSymbol),o.symbolInit(n[l][u],t[l].fc[u].C,t[l].fc[u].F),null==t[l].R&&(t[l].R=new Array(s.TOTFREQ)),(0,i.default)(d=t[l].R).call(d,u,h,h+t[l].fc[u].F),a((h+=t[l].fc[u].F)<=s.TOTFREQ),0===c&&u+1===(255&e.getByteAt(e.position()))?(u=255&e.get(),c=255&e.get()):0!==c?(c-=1,u+=1):u=255&e.get()}while(0!==u);0===r&&l+1===(255&e.getByteAt(e.position()))?(l=255&e.get(),r=255&e.get()):0!==r?(r-=1,l+=1):l=255&e.get()}while(0!==l)}}},function(e,t,n){var i=n(9).CramMalformedError,r=n(74),s=n(73);e.exports={uncompress:function(e,t,n,o){for(var a,l=e.getInt(),c=e.getInt(),h=e.getInt(),u=e.getInt(),d=o.remaining(),p=-4&d,f=0;f<p;f+=4){var m=t.R[s.get(l,r.TF_SHIFT)],g=t.R[s.get(c,r.TF_SHIFT)],v=t.R[s.get(h,r.TF_SHIFT)],b=t.R[s.get(u,r.TF_SHIFT)];o.putAt(f,m),o.putAt(f+1,g),o.putAt(f+2,v),o.putAt(f+3,b),l=s.advanceSymbolStep(l,n[255&m],r.TF_SHIFT),c=s.advanceSymbolStep(c,n[255&g],r.TF_SHIFT),h=s.advanceSymbolStep(h,n[255&v],r.TF_SHIFT),u=s.advanceSymbolStep(u,n[255&b],r.TF_SHIFT),l=s.renormalize(l,e),c=s.renormalize(c,e),h=s.renormalize(h,e),u=s.renormalize(u,e)}switch(o.setPosition(p),3&d){case 0:break;case 1:a=t.R[s.get(l,r.TF_SHIFT)],s.advanceSymbol(l,e,n[255&a],r.TF_SHIFT),o.put(a);break;case 2:a=t.R[s.get(l,r.TF_SHIFT)],s.advanceSymbol(l,e,n[255&a],r.TF_SHIFT),o.put(a),a=t.R[s.get(c,r.TF_SHIFT)],s.advanceSymbol(c,e,n[255&a],r.TF_SHIFT),o.put(a);break;case 3:a=t.R[s.get(l,r.TF_SHIFT)],s.advanceSymbol(l,e,n[255&a],r.TF_SHIFT),o.put(a),a=t.R[s.get(c,r.TF_SHIFT)],s.advanceSymbol(c,e,n[255&a],r.TF_SHIFT),o.put(a),a=t.R[s.get(h,r.TF_SHIFT)],s.advanceSymbol(h,e,n[255&a],r.TF_SHIFT),o.put(a);break;default:throw new i("invalid output size encountered during rANS decoding")}o.setPosition(0)}}},function(e,t,n){var i=n(74),r=n(73);e.exports={uncompress:function(e,t,n,s){for(var o=t.remaining(),a=e.getInt(),l=e.getInt(),c=e.getInt(),h=e.getInt(),u=o>>2,d=0,p=u,f=2*u,m=3*u,g=0,v=0,b=0,y=0;d<u;d+=1,p+=1,f+=1,m+=1){var _=255&n[g].R[r.get(a,i.TF_SHIFT)],w=255&n[v].R[r.get(l,i.TF_SHIFT)],x=255&n[b].R[r.get(c,i.TF_SHIFT)],S=255&n[y].R[r.get(h,i.TF_SHIFT)];t.putAt(d,_),t.putAt(p,w),t.putAt(f,x),t.putAt(m,S),a=r.advanceSymbolStep(a,s[g][_],i.TF_SHIFT),l=r.advanceSymbolStep(l,s[v][w],i.TF_SHIFT),c=r.advanceSymbolStep(c,s[b][x],i.TF_SHIFT),h=r.advanceSymbolStep(h,s[y][S],i.TF_SHIFT),a=r.renormalize(a,e),l=r.renormalize(l,e),c=r.renormalize(c,e),h=r.renormalize(h,e),g=_,v=w,b=x,y=S}for(;m<o;m+=1){var C=255&n[y].R[r.get(h,i.TF_SHIFT)];t.putAt(m,C),h=r.advanceSymbol(h,e,s[y][C],i.TF_SHIFT),y=C}}}},function(e,t,n){var i=n(1),r=i(n(98)),s=i(n(16)),o=i(n(75)),a=n(326).Parser,l=(new a).itf8(),c={parser:(new a).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},h={parser:(new a).uint8("compressionMethod",{formatter:function(e){var t=["raw","gzip","bzip2","lzma","rans"][e];if(!t)throw new Error("compression method number ".concat(e," not implemented"));return t}}).uint8("contentType",{formatter:function(e){var t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error("invalid block content type id ".concat(e));return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},u={parser:(new a).uint32("crc32"),maxLength:4},d=(new a).itf8("size").buffer("ents",{length:"size",formatter:function(e){function t(t,n){for(var i=e.toString("utf8",t,n),r=[],s=0;s<i.length;s+=3)r.push(i.substr(s,3));return r}var n,i=[],r=0;for(n=0;n<e.length;n+=1)e[n]||(i.push(t(r,n)),r=n+1);return n>r&&i.push(t(r,n)),i}}),p=(new a).uint8(null,{formatter:function(e){return!!e}}),f=(new a).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new a).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:p,UI:p,PI:p,RN:p,AP:p,RR:p,SM:(new a).array(null,{type:"uint8",length:5}),TD:(new a).nest(null,{type:d,formatter:function(e){return e.ents}})}})});function m(e){for(var t={},n=0;n<e.ents.length;n+=1){var i=e.ents[n],r=i.key,s=i.value;t[r]&&console.warn("duplicate key ".concat(r," in map")),t[r]=s}return t}var g={cramFileDefinition:c,cramBlockHeader:h,cramBlockCrc32:u},v={cramUnmappedSliceHeader:function(e){var t=0,n=(new a).itf8("numRecords");return t+=5,e>=3?(n=n.ltf8("recordCounter"),t+=9):2===e&&(n=n.itf8("recordCounter"),t+=5),n=n.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:l,length:"numContentIds"}),t+=10,e>=2&&(n=n.array("md5",{type:"uint8",length:16}),t+=16),{parser:n,maxLength:function(e){return t+5*e}}},cramMappedSliceHeader:function(e){var t=(new a).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),n=20;return e>=3?(t=t.ltf8("recordCounter"),n+=9):2===e&&(t=t.itf8("recordCounter"),n+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:l,length:"numContentIds"}).itf8("refBaseBlockId"),n+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),n+=16),{parser:t,maxLength:function(e){return n+5*e}}},cramEncoding:function(e){return{parser:(new a).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new a,1:(new a).itf8("blockContentId"),2:(new a).itf8("offset").itf8("M"),3:a.start().itf8("numCodes").array("symbols",{length:"numCodes",type:l}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:l}),4:a.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new a).uint8("stopByte")[e>1?"itf8":"int"]("blockContentId"),6:(new a).itf8("offset").itf8("length"),7:(new a).itf8("offset").itf8("K"),8:(new a).itf8("offset").itf8("log2m"),9:(new a).itf8("offset")}})}},cramDataSeriesEncodingMap:function(e){return(new a).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new a).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap:function(e){return(new a).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new a).itf8("key",{formatter:function(e){return String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader:function(e){var t=new a;return{parser:t=t.nest("preservation",{type:f,formatter:m}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:m}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:m})}},cramContainerHeader1:function(e){var t=(new a).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),n=24;return e>=3?(t=t.ltf8("recordCounter"),n+=9):2===e&&(t=t.itf8("recordCounter"),n+=5),e>1&&(t=t.ltf8("numBases"),n+=9),{parser:t=t.itf8("numBlocks").itf8("numLandmarks"),maxLength:n+=10}},cramContainerHeader2:function(e){var t=(new a).itf8("numLandmarks").array("landmarks",{type:(new a).itf8(),length:"numLandmarks"}),n=0;return e>=3&&(t=t.uint32("crc32"),n=4),{parser:t,maxLength:function(e){return 5+5*e+n}}}};e.exports={cramFileDefinition:c,getSectionParsers:function(e){var t,n=(0,o.default)({},g);return(0,s.default)(t=(0,r.default)(v)).call(t,function(t){n[t]=v[t](e)}),n}}},function(e,t,n){e.exports=n(320)},function(e,t,n){n(321);var i=n(3);e.exports=i.Object.keys},function(e,t,n){var i=n(0),r=n(22),s=n(51);i({target:"Object",stat:!0,forced:n(12)(function(){s(1)})},{keys:function(e){return s(r(e))}})},function(e,t,n){e.exports=n(323)},function(e,t,n){n(324);var i=n(3);e.exports=i.Object.assign},function(e,t,n){var i=n(0),r=n(325);i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,t,n){var i=n(17),r=n(12),s=n(51),o=n(138),a=n(65),l=n(22),c=n(60),h=Object.assign;e.exports=!h||r(function(){var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=h({},e)[n]||"abcdefghijklmnopqrst"!=s(h({},t)).join("")})?function(e,t){for(var n=l(e),r=arguments.length,h=1,u=o.f,d=a.f;r>h;)for(var p,f=c(arguments[h++]),m=u?s(f).concat(u(f)):s(f),g=m.length,v=0;g>v;)p=m[v++],i&&!d.call(f,p)||(n[p]=f[p]);return n}:h},function(e,t,n){(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(327),s=n(328).Context,o=n(146);"undefined"!=typeof window&&(window.Buffer=e),"undefined"!=typeof self&&(self.Buffer=e);var a={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8,UInt64:8,Int64:8},l={},c=[];!function(){var e;for(e=1;e<=32;e++)c.push(e)}();var h={};Object.keys(a).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach(function(e){h[e.toLowerCase()]=e});var u=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};u.start=function(){return new u},Object.keys(a).forEach(function(e){u.prototype[e.toLowerCase()]=function(t,n){return this.setNextParser(e.toLowerCase(),t,n)};var t=e.replace(/BE|LE/,"").toLowerCase();t in u.prototype||(u.prototype[t]=function(e,n){return this[t+this.endian](e,n)})}),c.forEach(function(e){u.prototype["bit".concat(e.toString())]=function(t,n){return n||(n={}),n.length=e,this.setNextParser("bit",t,n)}}),u.prototype.namely=function(e){return l[e]=this,this.alias=e,this},u.prototype.skip=function(e,t){if(t&&t.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:e})},u.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},u.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},u.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"==typeof t.type&&!l[t.type]&&Object.keys(a).indexOf(h[t.type])<0)throw new Error('Specified primitive type "'.concat(t.type,'" is not supported.'));return this.setNextParser("array",e,t)},u.prototype.choice=function(e,t){if(1===arguments.length&&"object"===i(e)&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach(function(n){if(!t.choices[n])throw new Error("Choice Case ".concat(n," of ").concat(e," is not valid."));if("string"==typeof t.choices[n]&&!l[t.choices[n]]&&Object.keys(a).indexOf(h[t.choices[n]])<0)throw new Error('Specified primitive type "'.concat(t.choices[n],'" is not supported.'))},this),this.setNextParser("choice",e,t)},u.prototype.nest=function(e,t){if(1===arguments.length&&"object"===i(e)&&(t=e,e=null),!t.type)throw new Error("Type option of nest is not defined.");if(!(t.type instanceof u||l[t.type]))throw new Error("Type option of nest must be a Parser object.");if(!(t.type instanceof u||e))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",e,t)},u.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: ".concat(e))}return this},u.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},u.prototype.getCode=function(){var e=new s;return e.pushCode("if (!Buffer.isBuffer(buffer)) {"),e.generateError('"argument buffer is not a Buffer object"'),e.pushCode("}"),this.alias?this.addAliasedCode(e):this.addRawCode(e),this.alias?e.pushCode("return {0}(0)","___parser_"+this.alias):e.pushCode("return { offset: offset, result: vars };"),e.code},u.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),e.pushCode(this.constructorFn?"var vars = new constructorFn();":"var vars = {};"),this.generate(e),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };")},u.prototype.addAliasedCode=function(e){return e.pushCode("function {0}(offset) {","___parser_"+this.alias),e.pushCode(this.constructorFn?"var vars = new constructorFn();":"var vars = {};"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},u.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach(function(t){l[t].addAliasedCode(e)})},u.prototype.compile=function(){var e="(function(buffer, constructorFn, Long) { ".concat(this.getCode()," })");this.compiled=r.runInThisContext(e)},u.prototype.sizeOf=function(){var e=NaN;if(Object.keys(a).indexOf(this.type)>=0)e=a[this.type];else if("String"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Array"===this.type&&"number"==typeof this.options.length){var t=NaN;"string"==typeof this.options.type?t=a[h[this.options.type]]:this.options.type instanceof u&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"Skip"===this.type?e=this.options.length:"Nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e},u.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn,o)},u.prototype.setNextParser=function(e,t,n){var i=new u;return i.type=h[e],i.varName=t,i.options=n||i.options,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this},u.prototype.generate=function(e){this.type&&(this["generate".concat(this.type)](e),this.generateAssert(e));var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},u.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(i(this.options.assert)){case"function":e.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,t);break;case"number":e.pushCode("if ({0} !== {1}) {",this.options.assert,t);break;case"string":e.pushCode('if ("{0}" !== {1}) {',this.options.assert,t);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: {0} is " + {0}',t),e.pushCode("}")}},u.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},Object.keys(a).forEach(function(e){u.prototype["generate".concat(e)]=function(t){t.pushCode("UInt64"===e?"{0} = Long.fromBytes(buffer.slice(offset,offset+8), true, this.endian === 'le').toNumber();":"Int64"===e?"{0} = Long.fromBytes(buffer.slice(offset,offset+8), false, this.endian === 'le').toNumber();":"{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),e),t.pushCode("offset += {0};",a[e])}}),u.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var n=0;e.bitFields.forEach(function(e){n+=e.options.length});var i=e.generateTmpVariable();if(n<=8)e.pushCode("var {0} = buffer.readUInt8(offset);",i),n=8;else if(n<=16)e.pushCode("var {0} = buffer.readUInt16BE(offset);",i),n=16;else if(n<=24){var r=e.generateTmpVariable(),s=e.generateTmpVariable();e.pushCode("var {0} = buffer.readUInt16BE(offset);",r),e.pushCode("var {0} = buffer.readUInt8(offset + 2);",s),e.pushCode("var {2} = ({0} << 8) | {1};",r,s,i),n=24}else{if(!(n<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var {0} = buffer.readUInt32BE(offset);",i),n=32}e.pushCode("offset += {0};",n/8);var o=0,a="be"===this.endian;e.bitFields.forEach(function(t){e.pushCode("{0} = {1} >> {2} & {3};",t.varName,i,a?n-o-t.options.length:o,(1<<t.options.length)-1),o+=t.options.length}),e.bitFields=[]}},u.prototype.generateSkip=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += {0};",t)},u.prototype.generateString=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",n,this.options.length),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",t,this.options.encoding,n,this.options.length)):this.options.length?(e.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",t,this.options.encoding,e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))):this.options.zeroTerminated?(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.readUInt8(offset++) !== 0);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",t,this.options.encoding,n)):this.options.greedy&&(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.length > offset++);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset);",t,this.options.encoding,n)),this.options.stripNull&&e.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",t)},u.prototype.generateBuffer=function(e){"eof"===this.options.readUntil?e.pushCode("{0} = buffer.slice(offset);",e.generateVariable(this.varName)):(e.pushCode("{0} = buffer.slice(offset, offset + {1});",e.generateVariable(this.varName),e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))),this.options.clone&&e.pushCode("{0} = Buffer.from({0});",e.generateVariable(this.varName))},u.prototype.generateArray=function(e){var t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),i=this.options.type,r=e.generateTmpVariable(),s=e.generateVariable(this.varName),o=e.generateTmpVariable(),c=this.options.key,d="string"==typeof c;if(e.pushCode(d?"{0} = {};":"{0} = [];",s),"function"==typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",r):void 0!==n?e.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",r,n):e.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",r,t),"string"==typeof i)if(l[i]){var p=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",p,"___parser_"+i),e.pushCode("var {0} = {1}.result; offset = {1}.offset;",o,p),i!==this.alias&&e.addReference(i)}else e.pushCode("var {0} = buffer.read{1}(offset);",o,h[i]),e.pushCode("offset += {0};",a[h[i]]);else i instanceof u&&(e.pushCode("var {0} = {};",o),e.pushScope(o),i.generate(e),e.popScope());d?e.pushCode("{0}[{2}.{1}] = {2};",s,c,o):e.pushCode("{0}.push({1});",s,o),e.pushCode("}"),"function"==typeof this.options.readUntil&&e.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,o)},u.prototype.generateChoiceCase=function(e,t,n){if("string"==typeof n)if(l[n]){var i=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",i,"___parser_"+n),e.pushCode("{0} = {1}.result; offset = {1}.offset;",e.generateVariable(this.varName),i),n!==this.alias&&e.addReference(n)}else e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),h[n]),e.pushCode("offset += {0};",a[h[n]]);else n instanceof u&&(e.pushPath(t),n.generate(e),e.popPath(t))},u.prototype.generateChoice=function(e){var t=e.generateOption(this.options.tag);this.varName&&e.pushCode("{0} = {};",e.generateVariable(this.varName)),e.pushCode("switch({0}) {",t),Object.keys(this.options.choices).forEach(function(t){var n=this.options.choices[t];Number.isNaN(parseInt(t,10))?e.pushCode("case '{0}':",t):e.pushCode("case {0}:",t),this.generateChoiceCase(e,this.varName,n),e.pushCode("break;")},this),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + {0} + " at choice"',t),e.pushCode("}")},u.prototype.generateNest=function(e){var t=e.generateVariable(this.varName);if(this.options.type instanceof u)this.varName&&e.pushCode("{0} = {};",t),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(l[this.options.type]){var n=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",n,"___parser_"+this.options.type),e.pushCode("{0} = {1}.result; offset = {1}.offset;",t,n),this.options.type!==this.alias&&e.addReference(this.options.type)}},u.prototype.generateFormatter=function(e,t,n){"function"==typeof n&&e.pushCode("{0} = ({1}).call(this, {0});",t,n)},u.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},u.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},u.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},u.prototype.generateItf8=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();e.pushCode("\n    var ".concat(n," = buffer[offset];\n    if (").concat(n," < 0x80) {\n      ").concat(t," = ").concat(n,";\n      offset += 1;\n    } else if (").concat(n," < 0xc0) {\n      ").concat(t," = ((").concat(n,"<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (").concat(n," < 0xe0) {\n      ").concat(t," = ((").concat(n,"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (").concat(n," < 0xf0) {\n      ").concat(t," = ((").concat(n,"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ").concat(t," = ((").concat(n," & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  "))},u.prototype.ltf8=function(e,t){return this.setNextParser("ltf8",e,t)},u.prototype.generateLtf8=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();e.pushCode("\n  var ".concat(n," = buffer[offset];\n  if (").concat(n," < 0x80) {\n    ").concat(t," = ").concat(n,";\n    offset += 1;\n  } else if (").concat(n," < 0xc0) {\n    ").concat(t," = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (").concat(n," < 0xe0) {\n    ").concat(t," = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ").concat(t," = (((").concat(n," & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (").concat(n," < 0xf0) {\n    ").concat(t," = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (").concat(n," < 0xf8) {\n    ").concat(t," = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (").concat(n," < 0xfc) {\n    ").concat(t," = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (").concat(n," < 0xfe) {\n    ").concat(t," = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (").concat(n," < 0xff) {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 8;\n  } else {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 9;\n  }\n  "))},t.Parser=u}).call(this,n(19).Buffer)},function(e,t){var n=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},i=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},r=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),s=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function o(){}o.prototype={};var a=t.Script=function(e){if(!(this instanceof a))return new a(e);this.code=e};a.prototype.runInContext=function(e){if(!(e instanceof o))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var a=t.contentWindow,l=a.eval,c=a.execScript;!l&&c&&(c.call(a,"null"),l=a.eval),i(n(e),function(t){a[t]=e[t]}),i(s,function(t){e[t]&&(a[t]=e[t])});var h=n(a),u=l.call(a,this.code);return i(n(a),function(t){(t in e||-1===function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}(h,t))&&(e[t]=a[t])}),i(s,function(t){t in e||r(e,t,a[t])}),document.body.removeChild(t),u},a.prototype.runInThisContext=function(){return Ph(this.code)},a.prototype.runInNewContext=function(e){var t=a.createContext(e),r=this.runInContext(t);return e&&i(n(t),function(n){e[n]=t[n]}),r},i(n(a.prototype),function(e){t[e]=a[e]=function(t){var n=a(t);return n[e].apply(n,[].slice.call(arguments,1))}}),t.isContext=function(e){return e instanceof o},t.createScript=function(e){return t.Script(e)},t.createContext=a.createContext=function(e){var t=new o;return"object"==typeof e&&i(n(e),function(n){t[n]=e[n]}),t}},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};r.prototype.generateVariable=function(e){var t=[];for(Array.prototype.push.apply(t,this.scopes[this.scopes.length-1]);/^\$parent\./.test(e);)t.pop(),e=e.replace(/^\$parent\./,"");return e&&t.push(e),t.join(".")},r.prototype.generateOption=function(e){switch(i(e)){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return"(".concat(e,").call(").concat(this.generateVariable(),", vars)");default:return}},r.prototype.generateError=function(){var e=Array.prototype.slice.call(arguments),t=r.interpolate.apply(this,e);this.pushCode(this.isAsync?"return process.nextTick(function() { callback(new Error(".concat(t,"), vars); });"):"throw new Error(".concat(t,");"))},r.prototype.generateTmpVariable=function(){return"$tmp".concat(this.tmpVariableCount++)},r.prototype.pushCode=function(){var e=Array.prototype.slice.call(arguments);this.code+="".concat(r.interpolate.apply(this,e),"\n")},r.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},r.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},r.prototype.pushScope=function(e){this.scopes.push([e])},r.prototype.popScope=function(){this.scopes.pop()},r.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},r.prototype.markResolved=function(e){this.references[e].resolved=!0},r.prototype.markRequested=function(e){e.forEach((function(e){this.references[e].requested=!0}).bind(this))},r.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter(function(t){return!e[t].resolved&&!e[t].requested})},r.interpolate=function(e){var t=/{\d+}/g,n=e.match(t),i=Array.prototype.slice.call(arguments,1);return n&&n.forEach(function(t){var n=parseInt(t.substr(1,t.length-2),10);e=e.replace(t,i[n].toString())}),e},t.Context=r},function(e,t,n){(function(t){var i,r=n(1),s=r(n(16)),o=r(n(75)),a=r(n(37)),l=r(n(30)),c=r(n(31)),h=r(n(7)),u=r(n(10)),d=n(9).CramMalformedError,p=n(58),f=p.itf8Size,m=p.parseItem,g=p.tinyMemoize,v=n(334),b=n(390),y=function(){function e(t,n){(0,h.default)(this,e),this.file=t,this.filePosition=n}var n,i,r,s;return(0,u.default)(e,[{key:"getHeader",value:function(){return this._readContainerHeader(this.filePosition)}},{key:"getCompressionHeaderBlock",value:(s=(0,c.default)(l.default.mark(function e(){var t,n,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(e.sent.numRecords){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.file.getSectionParsers();case 7:return t=e.sent,e.next=10,this.getFirstBlock();case 10:if("COMPRESSION_HEADER"===(n=e.sent).contentType){e.next=13;break}throw new d("invalid content type ".concat(n.contentType," in what is supposed to be the compression header block"));case 13:return i=m(n.content,t.cramCompressionHeader.parser,0,n.contentPosition),n.content=i,e.abrupt("return",n);case 16:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"getFirstBlock",value:(r=(0,c.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return e.abrupt("return",this.file.readBlock(e.sent._endPosition));case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getCompressionScheme",value:(i=(0,c.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompressionHeaderBlock();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",new b(t.content));case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getSlice",value:function(e,t){return new v(this,e,t)}},{key:"_readContainerHeader",value:(n=(0,c.default)(l.default.mark(function e(n){var i,r,s,c,h,u,d,p,g,v,b,y;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return r=(i=e.sent).cramContainerHeader1,s=i.cramContainerHeader2,e.next=6,this.file.stat();case 6:if(!(n>=(c=e.sent.size))){e.next=10;break}return e.abrupt("return",void 0);case 10:return h=t.allocUnsafe(r.maxLength),e.next=13,this.file.read(h,0,r.maxLength,n);case 13:if(u=m(h,r.parser),d=f(u.numLandmarks),!(n+u.length>=c)){e.next=18;break}return console.warn((0,a.default)(p=(0,a.default)(g="".concat(this.file,": container header at ")).call(g,n," indicates that the container has length ")).call(p,u.length,", which extends beyond the length of the file. Skipping this container.")),e.abrupt("return",void 0);case 18:return v=t.allocUnsafe(s.maxLength(u.numLandmarks)),e.next=21,this.file.read(v,0,s.maxLength(u.numLandmarks),n+u._size-d);case 21:if(b=m(v,s.parser),!this.file.validateChecksums||void 0===b.crc32){e.next=25;break}return e.next=25,this.file.checkCrc32(n,u._size+b._size-d-4,b.crc32,"container header beginning at position ".concat(n));case 25:return y=(0,o.default)(u,b,{_size:u._size+b._size-d,_endPosition:u._size+b._size-d+n}),e.abrupt("return",y);case 27:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),e}();(0,s.default)(i="getHeader getCompressionHeaderBlock getCompressionScheme".split(" ")).call(i,function(e){return g(y,e)}),e.exports=y}).call(this,n(19).Buffer)},function(e,t,n){e.exports=n(115)},function(e,t,n){var i,r,s,o,a;i=n(332),r=n(147).utf8,s=n(333),o=n(147).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):r.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var n=i.bytesToWords(e),l=8*e.length,c=1732584193,h=-271733879,u=-1732584194,d=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var f=a._ff,m=a._gg,g=a._hh,v=a._ii;for(p=0;p<n.length;p+=16){var b=c,y=h,_=u,w=d;c=f(c,h,u,d,n[p+0],7,-680876936),d=f(d,c,h,u,n[p+1],12,-389564586),u=f(u,d,c,h,n[p+2],17,606105819),h=f(h,u,d,c,n[p+3],22,-1044525330),c=f(c,h,u,d,n[p+4],7,-176418897),d=f(d,c,h,u,n[p+5],12,1200080426),u=f(u,d,c,h,n[p+6],17,-1473231341),h=f(h,u,d,c,n[p+7],22,-45705983),c=f(c,h,u,d,n[p+8],7,1770035416),d=f(d,c,h,u,n[p+9],12,-1958414417),u=f(u,d,c,h,n[p+10],17,-42063),h=f(h,u,d,c,n[p+11],22,-1990404162),c=f(c,h,u,d,n[p+12],7,1804603682),d=f(d,c,h,u,n[p+13],12,-40341101),u=f(u,d,c,h,n[p+14],17,-1502002290),c=m(c,h=f(h,u,d,c,n[p+15],22,1236535329),u,d,n[p+1],5,-165796510),d=m(d,c,h,u,n[p+6],9,-1069501632),u=m(u,d,c,h,n[p+11],14,643717713),h=m(h,u,d,c,n[p+0],20,-373897302),c=m(c,h,u,d,n[p+5],5,-701558691),d=m(d,c,h,u,n[p+10],9,38016083),u=m(u,d,c,h,n[p+15],14,-660478335),h=m(h,u,d,c,n[p+4],20,-405537848),c=m(c,h,u,d,n[p+9],5,568446438),d=m(d,c,h,u,n[p+14],9,-1019803690),u=m(u,d,c,h,n[p+3],14,-187363961),h=m(h,u,d,c,n[p+8],20,1163531501),c=m(c,h,u,d,n[p+13],5,-1444681467),d=m(d,c,h,u,n[p+2],9,-51403784),u=m(u,d,c,h,n[p+7],14,1735328473),c=g(c,h=m(h,u,d,c,n[p+12],20,-1926607734),u,d,n[p+5],4,-378558),d=g(d,c,h,u,n[p+8],11,-2022574463),u=g(u,d,c,h,n[p+11],16,1839030562),h=g(h,u,d,c,n[p+14],23,-35309556),c=g(c,h,u,d,n[p+1],4,-1530992060),d=g(d,c,h,u,n[p+4],11,1272893353),u=g(u,d,c,h,n[p+7],16,-155497632),h=g(h,u,d,c,n[p+10],23,-1094730640),c=g(c,h,u,d,n[p+13],4,681279174),d=g(d,c,h,u,n[p+0],11,-358537222),u=g(u,d,c,h,n[p+3],16,-722521979),h=g(h,u,d,c,n[p+6],23,76029189),c=g(c,h,u,d,n[p+9],4,-640364487),d=g(d,c,h,u,n[p+12],11,-421815835),u=g(u,d,c,h,n[p+15],16,530742520),c=v(c,h=g(h,u,d,c,n[p+2],23,-995338651),u,d,n[p+0],6,-198630844),d=v(d,c,h,u,n[p+7],10,1126891415),u=v(u,d,c,h,n[p+14],15,-1416354905),h=v(h,u,d,c,n[p+5],21,-57434055),c=v(c,h,u,d,n[p+12],6,1700485571),d=v(d,c,h,u,n[p+3],10,-1894986606),u=v(u,d,c,h,n[p+10],15,-1051523),h=v(h,u,d,c,n[p+1],21,-2054922799),c=v(c,h,u,d,n[p+8],6,1873313359),d=v(d,c,h,u,n[p+15],10,-30611744),u=v(u,d,c,h,n[p+6],15,-1560198380),h=v(h,u,d,c,n[p+13],21,1309151649),c=v(c,h,u,d,n[p+4],6,-145523070),d=v(d,c,h,u,n[p+11],10,-1120210379),u=v(u,d,c,h,n[p+2],15,718787259),h=v(h,u,d,c,n[p+9],21,-343485551),c=c+b>>>0,h=h+y>>>0,u=u+_>>>0,d=d+w>>>0}return i.endian([c,h,u,d])})._ff=function(e,t,n,i,r,s,o){var a=e+(t&n|~t&i)+(r>>>0)+o;return(a<<s|a>>>32-s)+t},a._gg=function(e,t,n,i,r,s,o){var a=e+(t&i|n&~i)+(r>>>0)+o;return(a<<s|a>>>32-s)+t},a._hh=function(e,t,n,i,r,s,o){var a=e+(t^n^i)+(r>>>0)+o;return(a<<s|a>>>32-s)+t},a._ii=function(e,t,n,i,r,s,o){var a=e+(n^(t|~i))+(r>>>0)+o;return(a<<s|a>>>32-s)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=i.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):i.bytesToHex(n)}},function(e,t){var n,i;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],i=0;i<e.length;i+=3)for(var r=e[i]<<16|e[i+1]<<8|e[i+2],s=0;s<4;s++)t.push(8*i+6*s<=8*e.length?n.charAt(r>>>6*(3-s)&63):"=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],i=0,r=0;i<e.length;r=++i%4)0!=r&&t.push((n.indexOf(e.charAt(i-1))&Math.pow(2,-2*r+8)-1)<<2*r|n.indexOf(e.charAt(i))>>>6-2*r);return t}},e.exports=i},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){var i,r=n(1),s=r(n(148)),o=r(n(76)),a=r(n(150)),l=r(n(37)),c=r(n(30)),h=r(n(31)),u=r(n(7)),d=r(n(10)),p=r(n(99)),f=r(n(16)),m=r(n(77)),g=r(n(59)),v=n(9),b=v.CramMalformedError,y=v.CramBufferOverrunError,_=v.CramArgumentError,w=n(58),x=w.parseItem,S=w.tinyMemoize,C=w.sequenceMD5,k=n(100),E=n(363);function A(e,t,n,i){if(!i)throw new b("could not resolve intra-slice mate pairs, file seems truncated or malformed");var r=!!(i.mate||void 0!==i.mateRecordNumber&&i.mateRecordNumber!==t);n.readName||(n.readName=String(n.uniqueId),i.readName=n.readName),n.mate={sequenceId:i.sequenceId,alignmentStart:i.alignmentStart,uniqueId:i.uniqueId},i.readName&&(n.mate.readName=i.readName),i.mate||void 0!==i.mateRecordNumber||(i.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(i.mate.readName=n.readName)),n.flags|=k.BAM_FPAIRED,(0,p.default)(i)&k.BAM_FUNMAP&&(n.flags|=k.BAM_FMUNMAP),(0,p.default)(n)&k.BAM_FUNMAP&&(i.flags|=k.BAM_FMUNMAP),(0,p.default)(i)&k.BAM_FREVERSE&&(n.flags|=k.BAM_FMREVERSE),(0,p.default)(n)&k.BAM_FREVERSE&&(i.flags|=k.BAM_FMREVERSE),void 0===n.templateLength&&(r?function(e,t,n){var i=function t(n){var i=[n];if(n.mateRecordNumber>=0){var r=e[n.mateRecordNumber];if(!r)throw new b("intra-slice mate record not found, this file seems malformed");i.push.apply(i,(0,g.default)(t(r)))}return i}(n),r=(0,m.default)(i).call(i,function(e){return e.alignmentStart}),s=(0,m.default)(i).call(i,function(e){return e.alignmentStart+e.readLength-1}),o=Math.max.apply(Math,(0,g.default)(s))-Math.min.apply(Math,(0,g.default)(r))+1;o>=0&&(0,f.default)(i).call(i,function(e){if(void 0!==e.templateLength)throw new b("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=o})}(e,0,n):function(e,t){var n=Math.min(e.alignmentStart,t.alignmentStart),i=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-n+1;e.templateLength=i,t.templateLength=i}(n,i)),delete n.mateRecordNumber}var R=function(){function e(t,n){(0,u.default)(this,e),this.container=t,this.file=t.file,this.containerPosition=n}var t,n,i,r,p,g,v,w;return(0,d.default)(e,[{key:"getHeader",value:(w=(0,h.default)(c.default.mark(function e(){var t,n,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return t=e.sent,e.next=5,this.container.getHeader();case 5:return n=e.sent,e.next=8,this.file.readBlock(n._endPosition+this.containerPosition);case 8:if("MAPPED_SLICE_HEADER"!==(i=e.sent).contentType){e.next=13;break}i.content=x(i.content,t.cramMappedSliceHeader.parser,0,n._endPosition),e.next=18;break;case 13:if("UNMAPPED_SLICE_HEADER"!==i.contentType){e.next=17;break}i.content=x(i.content,t.cramUnmappedSliceHeader.parser,0,n._endPosition),e.next=18;break;case 17:throw new b("error reading slice header block, invalid content type ".concat(i._contentType));case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}},e,this)})),function(){return w.apply(this,arguments)})},{key:"getBlocks",value:(v=(0,h.default)(c.default.mark(function e(){var t,n,i,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:n=(t=e.sent)._endPosition,i=new Array(t.content.numBlocks),r=0;case 6:if(!(r<i.length)){e.next=14;break}return e.next=9,this.file.readBlock(n);case 9:i[r]=e.sent,n=i[r]._endPosition;case 11:r+=1,e.next=6;break;case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}},e,this)})),function(){return v.apply(this,arguments)})},{key:"getCoreDataBlock",value:(g=(0,h.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return e.abrupt("return",e.sent[0]);case 4:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"_getBlocksContentIdIndex",value:(p=(0,h.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return n={},(0,f.default)(t=e.sent).call(t,function(e){"EXTERNAL_DATA"===e.contentType&&(n[e.contentId]=e)}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"getBlockByContentId",value:(r=(0,h.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocksContentIdIndex();case 2:return e.abrupt("return",e.sent[t]);case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getReferenceRegion",value:(i=(0,h.default)(c.default.mark(function e(){var t,n,i,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(!((t=e.sent.content).refSeqId<0)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,this.container.getCompressionScheme();case 7:if(n=e.sent,!(t.refBaseBlockId>=0)){e.next=15;break}if(i=this.getBlockByContentId(t.refBaseBlockId)){e.next=12;break}throw new b("embedded reference specified, but reference block does not exist");case 12:if(!(t.span>i.uncompressedSize)){e.next=14;break}throw new b("Embedded reference is too small");case 14:return e.abrupt("return",{seq:i.data.toString("utf8"),start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 15:if(!n.referenceRequired&&!this.file.fetchReferenceSequenceCallback){e.next=24;break}if(this.file.fetchReferenceSequenceCallback){e.next=18;break}throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");case 18:return e.next=20,this.file.fetchReferenceSequenceCallback(t.refSeqId,t.refSeqStart,t.refSeqStart+t.refSeqSpan-1);case 20:if((r=e.sent).length===t.refSeqSpan){e.next=23;break}throw new _("seqFetch callback returned a reference sequence of the wrong length");case 23:return e.abrupt("return",{seq:r,start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 24:return e.abrupt("return",void 0);case 25:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getAllRecords",value:function(){return this.getRecords(function(){return!0})}},{key:"_fetchRecords",value:(n=(0,h.default)(c.default.mark(function e(){var t,n,i,r,s,o,h,u,d,p,f,g,v,_,w,x,S,k,R,T,I,D=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getDefinition();case 2:return t=e.sent.majorVersion,e.next=6,this.container.getCompressionScheme();case 6:return n=e.sent,e.next=9,this.getHeader();case 9:return i=e.sent,e.next=12,this._getBlocksContentIdIndex();case 12:if(r=e.sent,!(t>1&&this.file.options.checkSequenceMD5&&i.content.refSeqId>=0&&"0000000000000000"!==i.content.md5.join(""))){e.next=23;break}return e.next=16,this.getReferenceRegion();case 16:if(!(s=e.sent)){e.next=23;break}if(f=s.start,g=s.end,v=C(s.seq),_=(0,m.default)(o=i.content.md5).call(o,function(e){return(e<16?"0":"")+e.toString(16)}).join(""),v===_){e.next=23;break}throw new b((0,l.default)(h=(0,l.default)(u=(0,l.default)(d=(0,l.default)(p="MD5 checksum reference mismatch for ref ".concat(i.content.refSeqId," pos ")).call(p,f,"..")).call(d,g,". recorded MD5: ")).call(u,_,", calculated MD5: ")).call(h,v));case 23:return e.next=25,this.getCoreDataBlock();case 25:w=e.sent,x={lastAlignmentStart:i.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{getCursor:function(e){return this[e]||(this[e]={bitPosition:7,bytePosition:0}),this[e]}}},S=function(e){var t=n.getCodecForDataSeries(e);if(!t)throw new b("no codec defined for ".concat(e," data series"));return t.decode(D,w,r,x)},k=new Array(i.content.numRecords),R=0;case 30:if(!(R<k.length)){e.next=48;break}e.prev=31,k[R]=E(this,S,n,i,w,r,x,t,R),k[R].uniqueId=i.contentPosition+i.content.recordCounter+R+1,e.next=45;break;case 36:if(e.prev=36,e.t0=e.catch(31),!(e.t0 instanceof y)){e.next=44;break}return console.warn("read attempted beyond end of buffer, file seems truncated."),k=(0,a.default)(k).call(k,function(e){return!!e}),e.abrupt("break",48);case 44:throw e.t0;case 45:R+=1,e.next=30;break;case 48:for(T=0;T<k.length;T+=1)(I=k[T].mateRecordNumber)>=0&&A(k,T,k[T],k[I]);return e.abrupt("return",k);case 50:case"end":return e.stop()}},e,this,[[31,36]])})),function(){return n.apply(this,arguments)})},{key:"getRecords",value:(t=(0,h.default)(c.default.mark(function e(t){var n,i,r,l,u,d,p,f,g,v,b,y,_,w,x,S=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.file.featureCache.get(i=this.container.filePosition+this.containerPosition))||(r=this._fetchRecords(),this.file.featureCache.set(i,r)),e.t0=a.default,e.next=6,r;case 6:if(e.t1=n=e.sent,e.t2=n,e.t3=t,!(l=(0,e.t0)(e.t1).call(e.t2,e.t3)).length||!this.file.fetchReferenceSequenceCallback){e.next=24;break}return e.next=13,this.getHeader();case 13:if(!((u=e.sent).content.refSeqId>=0||-2===u.content.refSeqId)){e.next=24;break}return p=u.content.refSeqId>=0?u.content.refSeqId:void 0,e.next=18,this.container.getCompressionScheme();case 18:for(f=e.sent,g={},v=0;v<l.length;v+=1)(y=g[b=void 0!==p?p:l[v].sequenceId])||(g[b]=y={id:b,start:l[v].alignmentStart,end:-1/0}),(_=l[v].alignmentStart+(l[v].lengthOnRef||l[v].readLength)-1)>y.end&&(y.end=_),l[v].alignmentStart<y.start&&(y.start=l[v].alignmentStart);return e.next=23,o.default.all((0,m.default)(d=(0,s.default)(g)).call(d,function(){var e=(0,h.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(-1!==t.id&&t.start<=t.end)){e.next=4;break}return e.next=3,S.file.fetchReferenceSequenceCallback(t.id,t.start,t.end);case 3:t.seq=e.sent;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 23:for(w=0;w<l.length;w+=1)(x=g[void 0!==p?p:l[w].sequenceId])&&x.seq&&l[w].addReferenceSequence(x,f);case 24:return e.abrupt("return",l);case 25:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();(0,f.default)(i="getHeader getBlocks _getBlocksContentIdIndex".split(" ")).call(i,function(e){return S(R,e)}),e.exports=R},function(e,t,n){e.exports=n(336)},function(e,t,n){n(337);var i=n(3);e.exports=i.Object.values},function(e,t,n){var i=n(0),r=n(149).values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},function(e,t,n){e.exports=n(339)},function(e,t,n){var i=n(340),r=Array.prototype;e.exports=function(e){var t=e.filter;return e===r||e instanceof Array&&t===r.filter?i:t}},function(e,t,n){n(341);var i=n(18);e.exports=i("Array").filter},function(e,t,n){var i=n(0),r=n(45).filter;i({target:"Array",proto:!0,forced:!n(68)("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){e.exports=n(343)},function(e,t,n){var i=n(344),r=RegExp.prototype;e.exports=function(e){return!(e===r||e instanceof RegExp)||"flags"in e?e.flags:i(e)}},function(e,t,n){n(345);var i=n(346);e.exports=function(e){return i.call(e)}},function(e,t){},function(e,t,n){var i=n(2);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){e.exports=n(348)},function(e,t,n){var i=n(349),r=Array.prototype;e.exports=function(e){var t=e.map;return e===r||e instanceof Array&&t===r.map?i:t}},function(e,t,n){n(350);var i=n(18);e.exports=i("Array").map},function(e,t,n){var i=n(0),r=n(45).map;i({target:"Array",proto:!0,forced:!n(68)("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(151);e.exports=function(e){if(i(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t,n){e.exports=n(353)},function(e,t,n){n(354);var i=n(3);e.exports=i.Array.isArray},function(e,t,n){n(0)({target:"Array",stat:!0},{isArray:n(53)})},function(e,t,n){e.exports=n(356)},function(e,t,n){e.exports=n(357)},function(e,t,n){n(46),n(358);var i=n(3);e.exports=i.Array.from},function(e,t,n){var i=n(0),r=n(359);i({target:"Array",stat:!0,forced:!n(121)(function(e){Array.from(e)})},{from:r})},function(e,t,n){var i=n(15),r=n(22),s=n(120),o=n(119),a=n(29),l=n(87),c=n(90);e.exports=function(e){var t,n,h,u,d=r(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,b=c(d);if(g&&(m=i(m,f>2?arguments[2]:void 0,2)),null==b||p==Array&&o(b))for(n=new p(t=a(d.length));t>v;v++)l(n,v,g?m(d[v],v):d[v]);else for(u=b.call(d),n=new p;!(h=u.next()).done;v++)l(n,v,g?s(u,m,[h.value,v],!0):h.value);return n.length=v,n}},function(e,t,n){n(41),n(46),e.exports=n(361)},function(e,t,n){var i=n(67),r=n(6),s=n(35),o=r("iterator");e.exports=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||s.hasOwnProperty(i(t))}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){(function(t){var i=n(1),r=i(n(37)),s=i(n(364)),o=i(n(16)),a=i(n(99)),l=i(n(101)),c=i(n(59)),h=i(n(154)),u=i(n(376)),d=i(n(380)),p=i(n(48)),f=i(n(387)),m=n(146),g=n(9),v=g.CramMalformedError,b=g.CramUnimplementedError,y=n(389),_=n(100);function w(e){var t=(0,f.default)(e).call(e,0);return-1===t?e.toString("utf8"):e.toString("utf8",0,t)}function x(e,n){if(n.readInt32LE||(n=t.from(n)),"Z"===e)return w(n);if("A"===e)return String.fromCharCode(n[0]);if("I"===e){var i=m.fromBytesLE(n);if(i.greaterThan(d.default)||i.lessThan(u.default))throw new b("integer overflow");return i.toNumber()}if("i"===e)return n.readInt32LE(0);if("s"===e)return n.readInt16LE(0);if("S"===e)return n.readUInt16LE(0);if("c"===e)return n.readInt8(0);if("C"===e)return n.readUInt8(0);if("f"===e)return n.readFloatLE(0);if("H"===e){var r=w(n);return(0,h.default)(r.replace(/^0x/,""),16)}if("B"===e)return function(e){var t=String.fromCharCode(e[0]),n=e.readInt32LE(1),i={c:["readInt8",1],C:["readUInt8",1],s:["readInt16LE",2],S:["readUInt16LE",2],i:["readInt32LE",4],I:["readUInt32LE",4],f:["readFloatLE",4]}[t];if(!i)throw new v("invalid tag value array type '".concat(t,"'"));for(var r=(0,p.default)(i,2),s=r[0],o=r[1],a=new Array(n),l=5,c=0;c<n;c+=1)a[c]=e[s](l),l+=o;return a}(n);throw new v("Unrecognized tag type ".concat(e))}function S(e){if(e instanceof t)return w(e);if(e.length&&(0,f.default)(e)){if(!e[e.length-1]){var n=(0,f.default)(e).call(e,0);return String.fromCharCode.apply(String,(0,c.default)((0,l.default)(e).call(e,0,n)))}return String.fromCharCode.apply(String,(0,c.default)(e))}return String(e)}e.exports=function(e,t,n,i,l,c,h,u,d){var f=new y;if(f.flags=t("BF"),f.cramFlags=t("CF"),f.sequenceId=u>1&&-2===i.content.refSeqId?t("RI"):i.content.refSeqId,f.readLength=t("RL"),f.alignmentStart=t("AP"),n.APdelta&&(f.alignmentStart+=h.lastAlignmentStart),h.lastAlignmentStart=f.alignmentStart,f.readGroupId=t("RG"),n.readNamesIncluded&&(f.readName=S(t("RN"))),f.isDetached()){var m={};m.flags=t("MF"),n.readNamesIncluded||(m.readName=S(t("RN")),f.readName=m.readName),m.sequenceId=t("NS"),m.alignmentStart=t("NP"),((0,a.default)(m)||m.sequenceId>-1)&&(f.mate=m),f.templateSize=t("TS"),(0,a.default)(m)&_.CRAM_M_UNMAP&&(f.flags|=_.BAM_FMUNMAP),(0,a.default)(m)&_.CRAM_M_REVERSE&&(f.flags|=_.BAM_FMREVERSE)}else f.hasMateDownStream()&&(f.mateRecordNumber=t("NF")+d+1);var g=t("TL");if(g<0)throw new v("invalid TL index");for(var b=n.getTagNames(g),w=b.length,C=0;C<w;C+=1){var k=b[C],E=k.substr(0,2),A=k.substr(2,1),R=n.getCodecForTag(k);if(!R)throw new v("no codec defined for auxiliary tag ".concat(k));var T=R.decode(e,l,c,h);f.tags[E]=x(A,T)}if(f.isSegmentUnmapped())if(f.isUnknownBases())f.readBases=null,f.qualityScores=null;else{for(var I=new Array(f.readLength),D=0;D<I.length;D+=1)I[D]=t("BA");if(f.readBases=String.fromCharCode.apply(String,I),f.isPreservingQualityScores()){for(var O=0;O<I.length;O+=1)I[O]=t("QS");f.qualityScores=I}}else{var P,M=t("FN");M&&(f.readFeatures=function(e,t,n,i,r){var s=0,o=e.alignmentStart-1,a=new Array(t);function l(e){var t=(0,p.default)(e,2),i=t[0],r=n(t[1]);return"character"===i?String.fromCharCode(r):"string"===i?r.toString("utf8"):"numArray"===i?r.toArray():r}for(var c=0;c<t;c+=1){var h=String.fromCharCode(n("FC")),u=n("FP"),d={code:h},f={B:["character","BA"],S:["string",r>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[h];if(!f)throw new v('invalid read feature code "'.concat(h,'"'));d.data=l(f);var m={B:["number","QS"]}[h];m&&(d.data=[d.data,l(m)]),d.pos=s+=u,d.refPos=o+=u,"D"===h||"N"===h?o+=d.data:"I"===h||"S"===h?o-=d.data.length:"i"===h&&(o-=1),a[c]=d}return a}(f,M,t,0,u));var L,F=f.readLength;if(f.readFeatures&&(0,o.default)(P=f.readFeatures).call(P,function(e){var t=e.code,n=e.data;"D"===t||"N"===t?F+=n:"I"===t||"S"===t?F-=n.length:"i"===t&&(F-=1)}),(0,s.default)(F)&&(console.warn("".concat(f.readName||(0,r.default)(L="".concat(f.sequenceId,":")).call(L,f.alignmentStart)," record has invalid read features")),F=f.readLength),f.lengthOnRef=F,f.mappingQuality=t("MQ"),f.isPreservingQualityScores()){for(var N=new Array(f.readLength),z=0;z<N.length;z+=1)N[z]=t("QS");f.qualityScores=N}}return f}}).call(this,n(19).Buffer)},function(e,t,n){e.exports=n(365)},function(e,t,n){e.exports=n(366)},function(e,t,n){n(367);var i=n(3);e.exports=i.Number.isNaN},function(e,t,n){n(0)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},function(e,t,n){e.exports=n(369)},function(e,t,n){var i=n(370),r=Array.prototype;e.exports=function(e){var t=e.slice;return e===r||e instanceof Array&&t===r.slice?i:t}},function(e,t,n){n(371);var i=n(18);e.exports=i("Array").slice},function(e,t,n){var i=n(0),r=n(14),s=n(53),o=n(84),a=n(29),l=n(28),c=n(87),h=n(68),u=n(6)("species"),d=[].slice,p=Math.max;i({target:"Array",proto:!0,forced:!h("slice")},{slice:function(e,t){var n,i,h,f=l(this),m=a(f.length),g=o(e,m),v=o(void 0===t?m:t,m);if(s(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!s(n.prototype)?r(n)&&null===(n=n[u])&&(n=void 0):n=void 0,n===Array||void 0===n))return d.call(f,g,v);for(i=new(void 0===n?Array:n)(p(v-g,0)),h=0;g<v;g++,h++)g in f&&c(i,h,f[g]);return i.length=h,i}})},function(e,t,n){e.exports=n(373)},function(e,t,n){n(374);var i=n(3);e.exports=i.Number.parseInt},function(e,t,n){var i=n(0),r=n(155);i({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},function(e,t,n){var i=n(49),r="["+n(156)+"]",s=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),a=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:a(1),end:a(2),trim:a(3)}},function(e,t,n){e.exports=n(377)},function(e,t,n){e.exports=n(378)},function(e,t,n){n(379),e.exports=-9007199254740991},function(e,t,n){n(0)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){e.exports=n(381)},function(e,t,n){e.exports=n(382)},function(e,t,n){n(383),e.exports=9007199254740991},function(e,t,n){n(0)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var i=n(385),r=n(153);e.exports=function(e,t){if(r(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],s=!0,o=!1,a=void 0;try{for(var l,c=i(e);!(s=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw a}}return n}}},function(e,t,n){e.exports=n(386)},function(e,t,n){n(41),n(46),e.exports=n(142)},function(e,t,n){e.exports=n(388)},function(e,t,n){e.exports=n(143)},function(e,t,n){var i=n(1),r=i(n(98)),s=i(n(16)),o=i(n(99)),a=i(n(7)),l=i(n(10)),c=i(n(59)),h=n(100),u={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4},d=function(){function e(){(0,a.default)(this,e),this.tags={}}return(0,l.default)(e,[{key:"isPaired",value:function(){return!!((0,o.default)(this)&h.BAM_FPAIRED)}},{key:"isProperlyPaired",value:function(){return!!((0,o.default)(this)&h.BAM_FPROPER_PAIR)}},{key:"isSegmentUnmapped",value:function(){return!!((0,o.default)(this)&h.BAM_FUNMAP)}},{key:"isMateUnmapped",value:function(){return!!((0,o.default)(this)&h.BAM_FMUNMAP)}},{key:"isReverseComplemented",value:function(){return!!((0,o.default)(this)&h.BAM_FREVERSE)}},{key:"isMateReverseComplemented",value:function(){return!!((0,o.default)(this)&h.BAM_FMREVERSE)}},{key:"isRead1",value:function(){return!!((0,o.default)(this)&h.BAM_FREAD1)}},{key:"isRead2",value:function(){return!!((0,o.default)(this)&h.BAM_FREAD2)}},{key:"isSecondary",value:function(){return!!((0,o.default)(this)&h.BAM_FSECONDARY)}},{key:"isFailedQc",value:function(){return!!((0,o.default)(this)&h.BAM_FQCFAIL)}},{key:"isDuplicate",value:function(){return!!((0,o.default)(this)&h.BAM_FDUP)}},{key:"isSupplementary",value:function(){return!!((0,o.default)(this)&h.BAM_FSUPPLEMENTARY)}},{key:"isDetached",value:function(){return!!(this.cramFlags&h.CRAM_FLAG_DETACHED)}},{key:"hasMateDownStream",value:function(){return!!(this.cramFlags&h.CRAM_FLAG_MATE_DOWNSTREAM)}},{key:"isPreservingQualityScores",value:function(){return!!(this.cramFlags&h.CRAM_FLAG_PRESERVE_QUAL_SCORES)}},{key:"isUnknownBases",value:function(){return!!(this.cramFlags&h.CRAM_FLAG_NO_SEQ)}},{key:"getReadBases",value:function(){return!this.readBases&&this._refRegion&&(this.readBases=function(e,t){if((e.lengthOnRef||e.readLength)&&!e.isUnknownBases()){var n=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(n,e.lengthOnRef).toUpperCase();for(var i="",r=n,s=0;i.length<e.readLength;)if(s<e.readFeatures.length){var o=e.readFeatures[s];if("Q"===o.code||"q"===o.code)s+=1;else if(o.pos===i.length+1)if(s+=1,"b"===o.code){var a=o.data.split(","),l=String.fromCharCode.apply(String,(0,c.default)(a));i+=l,r+=l.length}else"B"===o.code?(i+=o.data[0],r+=1):"X"===o.code?(i+=o.sub,r+=1):"I"===o.code?i+=o.data:"D"===o.code?r+=o.data:"i"===o.code?i+=o.data:"N"===o.code?r+=o.data:"S"===o.code&&(i+=o.data);else if(s<e.readFeatures.length){var h=t.seq.substr(r,e.readFeatures[s].pos-i.length-1);i+=h,r+=h.length}}else{var u=t.seq.substr(r,e.readLength-i.length);i+=u,r+=u.length}return i.toUpperCase()}}(this,this._refRegion)),this.readBases}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){var e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F",n=" ",i=" ";this.isRead1()?(n="1",i="2"):this.isRead2()&&(n="2",i="1");var r=[],s=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&s>0&&(s=-s),s>0?(r[0]=e,r[1]=n,r[2]=t,r[3]=i):(r[2]=e,r[3]=n,r[0]=t,r[1]=i),r.join("")}return null}},{key:"addReferenceSequence",value:function(e,t){var n;this.readFeatures&&(0,s.default)(n=this.readFeatures).call(n,function(n){"X"===n.code&&function(e,t,n,i){if(t){var r=t.seq.charAt(i.refPos-t.start);r&&(i.ref=r);var s=u[r];void 0===s&&(s=4);var o=n.substitutionMatrix[s][i.data];o&&(i.sub=o)}}(0,e,t,n)}),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}},{key:"toJSON",value:function(){var e,t=this,n={};return(0,s.default)(e=(0,r.default)(this)).call(e,function(e){"_"!==e.charAt(0)&&(n[e]=t[e])}),n.readBases=this.getReadBases(),n}}]),e}();e.exports=d},function(e,t,n){var i=n(1),r=i(n(98)),s=i(n(16)),o=i(n(75)),a=i(n(7)),l=i(n(10)),c=n(9).CramMalformedError,h=n(391).instantiateCodec,u={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"},d=function(){function e(t){(0,a.default)(this,e),(0,o.default)(this,t),this.readNamesIncluded=t.preservation.RN,this.APdelta=t.preservation.AP,this.referenceRequired=!!t.preservation.RR,this.tagIdsDictionary=t.preservation.TD,this.substitutionMatrix=function(e){for(var t=new Array(5),n=0;n<5;n+=1)t[n]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(t.preservation.SM),this.dataSeriesCodecCache={},this.tagCodecCache={}}return(0,l.default)(e,[{key:"getCodecForTag",value:function(e){if(!this.tagCodecCache[e]){var t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=h(t,"byteArray"))}return this.tagCodecCache[e]}},{key:"getTagNames",value:function(e){return this.tagIdsDictionary[e]}},{key:"getCodecForDataSeries",value:function(e){if(!this.dataSeriesCodecCache[e]){var t=this.dataSeriesEncoding[e];if(t){var n=u[e];if(!n)throw new c("data series name ".concat(e," not defined in file compression header"));this.dataSeriesCodecCache[e]=h(t,n)}}return this.dataSeriesCodecCache[e]}},{key:"toJSON",value:function(){var e,t=this,n={};return(0,s.default)(e=(0,r.default)(this)).call(e,function(e){/Cache$/.test(e)||(n[e]=t[e])}),n}}]),e}();e.exports=d},function(e,t,n){var i=n(9).CramUnimplementedError,r=n(392),s=n(413),o=n(414),a=n(415),l=n(416),c=n(417),h={1:s,3:r,4:a,5:o,6:l,7:n(418),9:c};function u(e){return h[e]}e.exports={getCodecClassWithId:u,instantiateCodec:function e(t,n){var r=u("ignore"===n?0:t.codecId);if(!r)throw new i("no codec implemented for codec ID ".concat(t.codecId));return new r(t.parameters,n,e)}}},function(e,t,n){var i=n(1),r=i(n(97)),s=i(n(59)),o=i(n(77)),a=i(n(148)),l=i(n(159)),c=i(n(48)),h=i(n(102)),u=i(n(16)),d=i(n(103)),p=i(n(403)),f=i(n(7)),m=i(n(10)),g=i(n(32)),v=i(n(27)),b=i(n(33)),y=n(9).CramMalformedError,_=function(e){function t(){var e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if((0,f.default)(this,t),n=(0,g.default)(this,(0,v.default)(t).call(this,i,r)),!(0,p.default)(e=["byte","int"]).call(e,n.dataType))throw new TypeError("".concat(n.dataType," decoding not yet implemented by HUFFMAN_INT codec"));return n.buildCodeBook(),n.buildCodes(),n.buildCaches(),0===n.sortedCodes[0].bitLength&&(n._decode=n._decodeZeroLengthCode),n}return(0,b.default)(t,e),(0,m.default)(t,[{key:"buildCodeBook",value:function(){for(var e=this,t=new Array(this.parameters.numCodes),n=0;n<this.parameters.numCodes;n+=1)t[n]={symbol:this.parameters.symbols[n],bitLength:this.parameters.bitLengths[n]};t=(0,d.default)(t).call(t,function(e,t){return e.bitLength-t.bitLength||e.symbol-t.symbol}),this.codeBook={},(0,u.default)(t).call(t,function(t){e.codeBook[t.bitLength]||(e.codeBook[t.bitLength]=[]),e.codeBook[t.bitLength].push(t.symbol)})}},{key:"buildCodes",value:function(){var e,t=this;this.codes={};var n=0,i=-1;(0,u.default)(e=(0,h.default)(this.codeBook)).call(e,function(e){var r=(0,c.default)(e,2),s=r[0],o=r[1];s=(0,l.default)(s,10),(0,u.default)(o).call(o,function(e){var r={bitLength:s,value:e};i+=1;var o,a,l=s-n;if(r.bitCode=i<<=l,n+=l,16843009*((a=(858993459&(a=(o=i)-(o>>1)&1431655765))+(a>>2&858993459))+(a>>4)&252645135)>>24>s)throw new y("Symbol out of range");t.codes[e]=r})})}},{key:"buildCaches",value:function(){var e,t,n,i,l,c;this.sortedCodes=(0,d.default)(e=(0,a.default)(this.codes)).call(e,function(e,t){return e.bitLength-t.bitLength||e.bitCode-t.bitCode}),this.sortedByValue=(0,d.default)(t=(0,a.default)(this.codes)).call(t,function(e,t){return e.value-t.value}),this.sortedValuesByBitCode=(0,o.default)(n=this.sortedCodes).call(n,function(e){return e.value}),this.sortedBitCodes=(0,o.default)(i=this.sortedCodes).call(i,function(e){return e.bitCode}),this.sortedBitLengthsByBitCode=(0,o.default)(l=this.sortedCodes).call(l,function(e){return e.bitLength});var h=Math.max.apply(Math,(0,s.default)(this.sortedBitCodes));this.bitCodeToValue=(0,r.default)(c=new Array(h+1)).call(c,-1);for(var u=0;u<this.sortedBitCodes.length;u+=1)this.bitCodeToValue[this.sortedCodes[u].bitCode]=u}},{key:"decode",value:function(e,t,n,i){return this._decode(e,t,i.coreBlock)}},{key:"_decodeZeroLengthCode",value:function(){return this.sortedCodes[0].value}},{key:"_decode",value:function(e,t,n){for(var i=t.content,r=0,s=0,o=0;o<this.sortedCodes.length;o+=1){var a=this.sortedCodes[o].bitLength;s<<=a-r,s|=this._getBits(i,n,a-r),r=a;var l=this.bitCodeToValue[s];if(l>-1&&this.sortedBitLengthsByBitCode[l]===a)return this.sortedValuesByBitCode[l];for(var c=o;this.sortedCodes[c+1].bitLength===a&&c<this.sortedCodes.length;c+=1)o+=1}throw new y("Huffman symbol not found.")}}]),t}(n(40));e.exports=_},function(e,t,n){e.exports=n(394)},function(e,t,n){n(395);var i=n(3);e.exports=i.parseInt},function(e,t,n){var i=n(0),r=n(155);i({global:!0,forced:parseInt!=r},{parseInt:r})},function(e,t,n){e.exports=n(397)},function(e,t,n){n(398);var i=n(3);e.exports=i.Object.entries},function(e,t,n){var i=n(0),r=n(149).entries;i({target:"Object",stat:!0},{entries:function(e){return r(e)}})},function(e,t,n){e.exports=n(400)},function(e,t,n){var i=n(401),r=Array.prototype;e.exports=function(e){var t=e.sort;return e===r||e instanceof Array&&t===r.sort?i:t}},function(e,t,n){n(402);var i=n(18);e.exports=i("Array").sort},function(e,t,n){var i=n(0),r=n(5),s=n(22),o=n(12),a=n(54),l=[].sort,c=[1,2,3],h=o(function(){c.sort(void 0)}),u=o(function(){c.sort(null)}),d=a("sort");i({target:"Array",proto:!0,forced:h||!u||d},{sort:function(e){return void 0===e?l.call(s(this)):l.call(s(this),r(e))}})},function(e,t,n){e.exports=n(404)},function(e,t,n){e.exports=n(405)},function(e,t,n){var i=n(406),r=n(408),s=Array.prototype,o=String.prototype;e.exports=function(e){var t=e.includes;return e===s||e instanceof Array&&t===s.includes?i:"string"==typeof e||e===o||e instanceof String&&t===o.includes?r:t}},function(e,t,n){n(407);var i=n(18);e.exports=i("Array").includes},function(e,t,n){var i=n(0),r=n(82).includes,s=n(78);i({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},function(e,t,n){n(409);var i=n(18);e.exports=i("String").includes},function(e,t,n){var i=n(0),r=n(410),s=n(49);i({target:"String",proto:!0,forced:!n(412)("includes")},{includes:function(e){return!!~String(s(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(411);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var i=n(14),r=n(34),s=n(6)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){var i=n(1),r=i(n(48)),s=i(n(7)),o=i(n(10)),a=i(n(32)),l=i(n(27)),c=i(n(33)),h=n(9),u=h.CramUnimplementedError,d=h.CramMalformedError,p=h.CramBufferOverrunError,f=n(40),m=n(58).parseItf8,g=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,s.default)(this,t),"int"===(e=(0,a.default)(this,(0,l.default)(t).call(this,n,i))).dataType)e._decodeData=e._decodeInt;else{if("byte"!==e.dataType)throw new u("".concat(e.dataType," decoding not yet implemented by EXTERNAL codec"));e._decodeData=e._decodeByte}return e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"decode",value:function(e,t,n,i){var r=this.parameters.blockContentId,s=n[r];if(!s)throw new d("no block found with content ID ".concat(r));var o=i.externalBlocks.getCursor(r);return this._decodeData(s,o)}},{key:"_decodeInt",value:function(e,t){var n=m(e.content,t.bytePosition),i=(0,r.default)(n,2),s=i[0];return t.bytePosition+=i[1],s}},{key:"_decodeByte",value:function(e,t){if(t.bytePosition>=e.content.length)throw new p("attempted to read beyond end of block. this file seems truncated.");var n=e.content[t.bytePosition];return t.bytePosition+=1,n}}]),t}(f);e.exports=g},function(e,t,n){var i=n(1),r=i(n(101)),s=i(n(7)),o=i(n(10)),a=i(n(32)),l=i(n(27)),c=i(n(33)),h=n(9),u=h.CramBufferOverrunError,d=h.CramMalformedError,p=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,s.default)(this,t),e=(0,a.default)(this,(0,l.default)(t).call(this,n,i)),"byteArray"!==i)throw new TypeError("byteArrayStop codec does not support data type ".concat(i));return e._decode=e._decodeByteArray,e}return(0,c.default)(t,e),(0,o.default)(t,[{key:"decode",value:function(e,t,n,i){var r=this.parameters.blockContentId,s=n[r];if(!s)throw new d("no block found with content ID ".concat(r));var o=i.externalBlocks.getCursor(r);return this._decode(s,o)}},{key:"_decodeByteArray",value:function(e,t){for(var n=e.content,i=this.parameters.stopByte,s=t.bytePosition,o=t.bytePosition;n[o]!==i&&o<n.length;){if(o===n.length)throw new u("byteArrayStop reading beyond length of data buffer?");o+=1}return t.bytePosition=o+1,(0,r.default)(n).call(n,s,o)}}]),t}(n(40));e.exports=p},function(e,t,n){var i,r=n(1),s=r(n(16)),o=r(n(7)),a=r(n(10)),l=r(n(32)),c=r(n(27)),h=r(n(33)),u=n(58).tinyMemoize,d=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if((0,o.default)(this,t),(e=(0,l.default)(this,(0,c.default)(t).call(this,n,i))).instantiateCodec=r,"byteArray"!==i)throw new TypeError("byteArrayLength does not support data type ".concat(i));return e}return(0,h.default)(t,e),(0,a.default)(t,[{key:"decode",value:function(e,t,n,i){for(var r=this._getLengthCodec().decode(e,t,n,i),s=this._getDataCodec(),o=new Array(r),a=0;a<r;a+=1)o[a]=s.decode(e,t,n,i);return o}},{key:"_getLengthCodec",value:function(){return this.instantiateCodec(this.parameters.lengthsEncoding,"int")}},{key:"_getDataCodec",value:function(){return this.instantiateCodec(this.parameters.valuesEncoding,"byte")}}]),t}(n(40));(0,s.default)(i="_getLengthCodec _getDataCodec".split(" ")).call(i,function(e){return u(d,e)}),e.exports=d},function(e,t,n){var i=n(1),r=i(n(7)),s=i(n(10)),o=i(n(32)),a=i(n(27)),l=i(n(33)),c=n(9).CramUnimplementedError,h=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,r.default)(this,t),"int"!==(e=(0,o.default)(this,(0,a.default)(t).call(this,n,i))).dataType)throw new c("".concat(e.dataType," decoding not yet implemented by BETA codec"));return e}return(0,l.default)(t,e),(0,s.default)(t,[{key:"decode",value:function(e,t,n,i){return this._getBits(t.content,i.coreBlock,this.parameters.length)-this.parameters.offset}}]),t}(n(40));e.exports=h},function(e,t,n){var i=n(1),r=i(n(7)),s=i(n(10)),o=i(n(32)),a=i(n(27)),l=i(n(33)),c=n(9).CramUnimplementedError,h=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,r.default)(this,t),"int"!==(e=(0,o.default)(this,(0,a.default)(t).call(this,n,i))).dataType)throw new c("".concat(e.dataType," decoding not yet implemented by GAMMA codec"));return e}return(0,l.default)(t,e),(0,s.default)(t,[{key:"decode",value:function(e,t,n,i){for(var r=1;0===this._getBits(t.content,i.coreBlock,1);)r+=1;return(this._getBits(t.content,i.coreBlock,r-1)|1<<r-1)-this.parameters.offset}}]),t}(n(40));e.exports=h},function(e,t,n){var i=n(1),r=i(n(7)),s=i(n(10)),o=i(n(32)),a=i(n(27)),l=i(n(33)),c=n(9).CramUnimplementedError,h=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,r.default)(this,t),"int"!==(e=(0,o.default)(this,(0,a.default)(t).call(this,n,i))).dataType)throw new c("".concat(e.dataType," decoding not yet implemented by SUBEXP codec"));return e}return(0,l.default)(t,e),(0,s.default)(t,[{key:"decode",value:function(e,t,n,i){for(var r,s=0;this._getBits(t.content,i.coreBlock,1);)s+=1;return(0===s?this._getBits(t.content,i.coreBlock,r=this.parameters.K):1<<(r=s+this.parameters.K-1)|this._getBits(t.content,i.coreBlock,r))-this.parameters.offset}}]),t}(n(40));e.exports=h},function(e,t,n){var i=n(420),r=n(422);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){return r.isString(e)&&(e=y(e)),e instanceof s?e.format():s.prototype.format.call(e)},t.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(c),u=["%","/","?",";","#"].concat(h),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(423);function y(e,t,n){if(e&&r.isObject(e)&&e instanceof s)return e;var i=new s;return i.parse(e,t,n),i}s.prototype.parse=function(e,t,n){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),a=-1!==s&&s<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var y=e=c.join(a);if(y=y.trim(),!n&&1===e.split("#").length){var _=l.exec(y);if(_)return this.path=y,this.href=y,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=o.exec(y);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,y=y.substr(w.length)}if(n||w||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===y.substr(0,2);!S||w&&g[w]||(y=y.substr(2),this.slashes=!0)}if(!g[w]&&(S||w&&!v[w])){for(var C,k,E=-1,A=0;A<d.length;A++)-1!==(R=y.indexOf(d[A]))&&(-1===E||R<E)&&(E=R);for(-1!==(k=-1===E?y.lastIndexOf("@"):y.lastIndexOf("@",E))&&(C=y.slice(0,k),y=y.slice(k+1),this.auth=decodeURIComponent(C)),E=-1,A=0;A<u.length;A++){var R;-1!==(R=y.indexOf(u[A]))&&(-1===E||R<E)&&(E=R)}-1===E&&(E=y.length),this.host=y.slice(0,E),y=y.slice(E),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var I=this.hostname.split(/\./),D=(A=0,I.length);A<D;A++){var O=I[A];if(O&&!O.match(p)){for(var P="",M=0,L=O.length;M<L;M++)O.charCodeAt(M)>127?P+="x":P+=O[M];if(!P.match(p)){var F=I.slice(0,A),N=I.slice(A+1),z=O.match(f);z&&(F.push(z[1]),N.unshift(z[2])),N.length&&(y="/"+N.join(".")+y),this.hostname=F.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),T||(this.hostname=i.toASCII(this.hostname));var V=this.port?":"+this.port:"";this.host=(this.hostname||"")+V,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[x])for(A=0,D=h.length;A<D;A++){var j=h[A];if(-1!==y.indexOf(j)){var B=encodeURIComponent(j);B===j&&(B=escape(j)),y=y.split(j).join(B)}}var H=y.indexOf("#");-1!==H&&(this.hash=y.substr(H),y=y.slice(0,H));var q=y.indexOf("?");return-1!==q?(this.search=y.substr(q),this.query=y.substr(q+1),t&&(this.query=b.parse(this.query)),y=y.slice(0,q)):t&&(this.search="",this.query={}),y&&(this.pathname=y),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(V=this.pathname||"")+(this.search||"")),this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",s=!1,o="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==s?(s="//"+(s||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):s||(s=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),t+s+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+i},s.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(r.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var n=new s,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var h=l[c];"protocol"!==h&&(n[h]=e[h])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var p=u[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}return n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=b||m||n.host&&e.pathname,_=y,w=n.pathname&&n.pathname.split("/")||[],x=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),y=y&&(""===f[0]||""===w[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),n.search=e.search,n.query=e.query;else if(!r.isNullOrUndefined(e.search))return x&&(n.hostname=n.host=w.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),n.search=e.search,n.query=e.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var S=w.slice(-1)[0],C=(n.host||e.host||w.length>1)&&("."===S||".."===S)||""===S,k=0,E=w.length;E>=0;E--)"."===(S=w[E])?w.splice(E,1):".."===S?(w.splice(E,1),k++):k&&(w.splice(E,1),k--);if(!y&&!_)for(;k--;k)w.unshift("..");!y||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),C&&"/"!==w.join("/").substr(-1)&&w.push("");var A,R=""===w[0]||w[0]&&"/"===w[0].charAt(0);return x&&(n.hostname=n.host=R?"":w.length?w.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),(y=y||n.host&&w.length)&&!R&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,i){var r;!function(i){var s,o=2147483647,a=36,l=/^xn--/,c=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function f(e){throw new RangeError(u[e])}function m(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function g(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+m((e=e.replace(h,".")).split("."),t).join(".")}function v(e){for(var t,n,i=[],r=0,s=e.length;r<s;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<s?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function b(e){return m(e,function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)}).join("")}function y(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var i=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;i+=a)e=d(e/35);return d(i+36*e/(e+38))}function w(e){var t,n,i,r,s,l,c,h,u,p,m,g=[],v=e.length,y=0,w=128,x=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&f("not-basic"),g.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<v;){for(s=y,l=1,c=a;r>=v&&f("invalid-input"),((h=(m=e.charCodeAt(r++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:a)>=a||h>d((o-y)/l))&&f("overflow"),y+=h*l,!(h<(u=c<=x?1:c>=x+26?26:c-x));c+=a)l>d(o/(p=a-u))&&f("overflow"),l*=p;x=_(y-s,t=g.length+1,0==s),d(y/t)>o-w&&f("overflow"),w+=d(y/t),y%=t,g.splice(y++,0,w)}return b(g)}function x(e){var t,n,i,r,s,l,c,h,u,m,g,b,w,x,S,C=[];for(b=(e=v(e)).length,t=128,n=0,s=72,l=0;l<b;++l)(g=e[l])<128&&C.push(p(g));for(i=r=C.length,r&&C.push("-");i<b;){for(c=o,l=0;l<b;++l)(g=e[l])>=t&&g<c&&(c=g);for(c-t>d((o-n)/(w=i+1))&&f("overflow"),n+=(c-t)*w,t=c,l=0;l<b;++l)if((g=e[l])<t&&++n>o&&f("overflow"),g==t){for(h=n,u=a;!(h<(m=u<=s?1:u>=s+26?26:u-s));u+=a)C.push(p(y(m+(S=h-m)%(x=a-m),0))),h=d(S/x);C.push(p(y(h,0))),s=_(n,w,i==r),n=0,++i}++n,++t}return C.join("")}s={version:"1.4.1",ucs2:{decode:v,encode:b},decode:w,encode:x,toASCII:function(e){return g(e,function(e){return c.test(e)?"xn--"+x(e):e})},toUnicode:function(e){return g(e,function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e})}},void 0===(r=(function(){return s}).call(t,n,t,e))||(e.exports=r)}()}).call(this,n(421)(e),n(23))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){t.decode=t.parse=n(424),t.encode=t.stringify=n(425)},function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,s){n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t=t||"&");var l=1e3;s&&"number"==typeof s.maxKeys&&(l=s.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var h=0;h<c;++h){var u,d,p,f,m=e[h].replace(a,"%20"),g=m.indexOf(n);g>=0?(u=m.substr(0,g),d=m.substr(g+1)):(u=m,d=""),p=decodeURIComponent(u),f=decodeURIComponent(d),i(o,p)?r(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?s(o(e),function(o){var a=encodeURIComponent(i(o))+n;return r(e[o])?s(e[o],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[o]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(t){var i=n(1),r=i(n(30)),s=i(n(159)),o=i(n(37)),a=i(n(31)),l=i(n(7)),c=i(n(10)),h=n(427),u=n(428),d=function(){function e(t){var n=this;(0,l.default)(this,e),this.position=0,this.url=t,this.cache=new u({fetch:function(e,t){return n._fetch(e,t)}})}var n,i,d;return(0,c.default)(e,[{key:"_fetch",value:(d=(0,a.default)(r.default.mark(function e(n,i){var a,l,c,u,d,p;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l={},i<1/0?l.range=(0,o.default)(c="bytes=".concat(n,"-")).call(c,n+i):i===1/0&&0!==n&&(l.range="bytes=".concat(n,"-")),e.next=4,h(this.url,{method:"GET",headers:l,redirect:"follow",mode:"cors"});case 4:if((200!==(u=e.sent).status||0!==n)&&206!==u.status){e.next=14;break}return e.t0=t,e.next=9,u.arrayBuffer();case 9:return e.t1=e.sent,d=e.t0.from.call(e.t0,e.t1),(p=/\/(\d+)$/.exec(u.headers.get("content-range")))[1]&&(this._stat={size:(0,s.default)(p[1],10)}),e.abrupt("return",d);case 14:throw new Error((0,o.default)(a="HTTP ".concat(u.status," fetching ")).call(a,this.url));case 15:case"end":return e.stop()}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"read",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=i;return null===r&&(r=this.position,this.position+=n),this.cache.get(e,t,n,i)}},{key:"readFile",value:(i=(0,a.default)(r.default.mark(function e(){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(this.url,{method:"GET",redirect:"follow",mode:"cors"});case 2:return n=e.sent,e.t0=t,e.next=6,n.arrayBuffer();case 6:return e.t1=e.sent,e.abrupt("return",e.t0.from.call(e.t0,e.t1));case 8:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"stat",value:(n=(0,a.default)(r.default.mark(function e(){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stat){e.next=6;break}return n=t.allocUnsafe(10),e.next=4,this.read(n,0,10,0);case 4:if(this._stat){e.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return e.abrupt("return",this._stat);case 7:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),e}();e.exports=d}).call(this,n(19).Buffer)},function(e,t){var n=function(e){function t(){this.fetch=!1,this.DOMException=e.DOMException}return t.prototype=e,new t}("undefined"!=typeof self?self:this);!function(e){!function(t){var n="URLSearchParams"in e,i="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function m(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&r&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,i=p(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,n=f(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=h(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),u(e)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},d.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),u(e)},i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n,i,r=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(i=(n=t.method||this.method||"GET").toUpperCase(),b.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},v.call(y.prototype),v.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];w.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,n){return new Promise(function(i,s){var o=new y(e,n);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL"),i(new w("response"in a?a.response:a.responseText,n))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",l)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=d,e.Request=y,e.Response=w),t.Headers=d,t.Request=y,t.Response=w,t.fetch=S}({})}(n),delete n.fetch.polyfill,(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t},function(e,t,n){var i=n(1),r=i(n(30)),s=i(n(16)),o=i(n(76)),a=i(n(31)),l=i(n(7)),c=i(n(10)),h=n(94),u=function(){function e(t){var n=t.fetch,i=t.size,r=void 0===i?1e7:i,s=t.chunkSize,o=void 0===s?32768:s;if((0,l.default)(this,e),!n)throw new Error("fetch function required");this.fetch=n,this.chunkSize=o,this.lruCache=new h({maxSize:Math.floor(r/o)})}var t;return(0,c.default)(e,[{key:"get",value:(t=(0,a.default)(r.default.mark(function e(t,n,i,a){var l,c,h,u,d,p,f,m=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<n+i)){e.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(l=Math.floor(a/this.chunkSize),c=Math.floor((a+i)/this.chunkSize),h=new Array(c-l+1),u=function(e){h[e-l]=m._getChunk(e).then(function(t){return{data:t,chunkNumber:e}})},d=l;d<=c;d+=1)u(d);return e.next=9,o.default.all(h);case 9:f=a-(p=e.sent)[0].chunkNumber*this.chunkSize,(0,s.default)(p).call(p,function(e){var r=e.chunkNumber,s=0,o=m.chunkSize,h=n+(r-l)*m.chunkSize-f;r===l&&(h=n,s=f),r===c&&(o=a+i-r*m.chunkSize),e.data.copy(t,h,s,o)});case 12:case"end":return e.stop()}},e,this)})),function(e,n,i,r){return t.apply(this,arguments)})},{key:"_getChunk",value:function(e){var t=this.lruCache.get(e);if(t)return t;var n=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,n),n}}]),e}();e.exports=u},function(e,t,n){var i=n(1),r=i(n(30)),s=i(n(31)),o=i(n(7)),a=i(n(10)),l=(n(161),null),c=function(){function e(t){(0,o.default)(this,e),this.position=0,this.filename=t,this.fd=l(this.filename,"r")}var t,n,i;return(0,a.default)(e,[{key:"read",value:(i=(0,s.default)(r.default.mark(function e(t){var n,i,s,o=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,i=o.length>2?o[2]:void 0,null===(s=o.length>3?o[3]:void 0)&&(this.position+=i),e.t0=null,e.next=8,this.fd;case 8:return e.t1=e.sent,e.t2=t,e.t3=n,e.t4=i,e.t5=s,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 14:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"readFile",value:(n=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=null,e.next=3,this.fd;case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"stat",value:(t=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stat){e.next=8;break}return e.t0=null,e.next=4,this.fd;case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:this._stat=e.sent;case 8:return e.abrupt("return",this._stat);case 9:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}();e.exports=c},function(e,t,n){var i=n(1),r=i(n(48)),s=i(n(77)),o=i(n(101)),a=i(n(431)),l=i(n(16));e.exports={parseHeaderText:function(e){var t=e.split(/\r?\n/),n=[];return(0,l.default)(t).call(t,function(e){var t=e.split(/\t/),i=(0,a.default)(t),l=i[0],c=(0,o.default)(i).call(i,1),h=(0,s.default)(c).call(c,function(e){var t=e.split(":",2),n=(0,r.default)(t,2);return{tag:n[0],value:n[1]}});l&&n.push({tag:l.substr(1),data:h})}),n}}},function(e,t,n){var i=n(157),r=n(152),s=n(158);e.exports=function(e){return i(e)||r(e)||s()}},function(e,t,n){var i=n(1),r=i(n(30)),s=i(n(103)),o=i(n(150)),a=i(n(48)),l=i(n(102)),c=i(n(16)),h=i(n(59)),u=i(n(76)),d=i(n(37)),p=i(n(77)),f=i(n(433)),m=i(n(31)),g=i(n(7)),v=i(n(10)),b=n(9),y=b.CramUnimplementedError,_=b.CramSizeLimitError,w=n(104),x=function(){function e(t){if((0,g.default)(this,e),this.cram=t.cram?t.cram:new w({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof w))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}var t;return(0,v.default)(e,[{key:"getRecordsForRange",value:(t=(0,m.default)(r.default.mark(function e(t,n,i){var m,g,v,b,w,x,S,C,k,E,A,R,T,I,D,O,P,M,L,F,N,z,V,j,B,H,q,$,U,W,G,Y,Z,X,K=this,Q=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((x=Q.length>3&&void 0!==Q[3]?Q[3]:{}).viewAsPairs=x.viewAsPairs||!1,x.pairAcrossChr=x.pairAcrossChr||!1,x.maxInsertSize=x.maxInsertSize||2e5,"string"!=typeof t){e.next=6;break}throw new y("string sequence names not yet supported");case 6:return S=t,e.next=9,this.index.getEntriesForRange(S,n,i);case 9:if(!((k=(0,f.default)(m=(0,p.default)(C=e.sent).call(C,function(e){return e.sliceBytes})).call(m,function(e,t){return e+t},0))>this.fetchSizeLimit)){e.next=13;break}throw new _((0,d.default)(g="data size of ".concat(k.toLocaleString()," bytes exceeded fetch size limit of ")).call(g,this.fetchSizeLimit.toLocaleString()," bytes"));case 13:return E=function(e){return e.sequenceId===t&&e.alignmentStart<=i&&e.alignmentStart+e.lengthOnRef-1>=n},e.next=16,u.default.all((0,p.default)(C).call(C,function(e){return K.getRecordsInSlice(e,E)}));case 16:if(A=e.sent,R=(b=(0,d.default)(v=Array.prototype)).call.apply(b,(0,d.default)(w=[v]).call(w,(0,h.default)(A))),!x.viewAsPairs){e.next=42;break}for(O={},P={},M=0;M<R.length;M+=1)F=R[M].uniqueId,O[L=R[M].readName]||(O[L]=0),O[L]+=1,P[F]=1;for(N={},(0,c.default)(T=(0,l.default)(O)).call(T,function(e){var t=(0,a.default)(e,2);1===t[1]&&(N[t[0]]=!0)}),z=[],V=0;V<R.length;V+=1)N[R[V].readName]&&R[V].mate&&(R[V].mate.sequenceId===S||x.pairAcrossChr)&&Math.abs(R[V].alignmentStart-R[V].mate.alignmentStart)<x.maxInsertSize&&(j=this.index.getEntriesForRange(R[V].mate.sequenceId,R[V].mate.alignmentStart,R[V].mate.alignmentStart+1),z.push(j));return e.next=28,u.default.all(z);case 28:for(B=e.sent,H=[],q=0;q<B.length;q+=1)($=H).push.apply($,(0,h.default)(B[q]));if(H=(0,o.default)(I=(0,s.default)(H).call(H,function(e,t){return e.toString().localeCompare(t.toString())})).call(I,function(e,t,n){return!t||e.toString()!==n[t-1].toString()}),U=[],W=[],!((G=(0,f.default)(D=(0,p.default)(H).call(H,function(e){return e.sliceBytes})).call(D,function(e,t){return e+t},0))>this.fetchSizeLimit)){e.next=37;break}throw new Error((0,d.default)(Y="mate data size of ".concat(G.toLocaleString()," bytes exceeded fetch size limit of ")).call(Y,this.fetchSizeLimit.toLocaleString()," bytes"));case 37:return(0,c.default)(H).call(H,function(e){var t=K.cram.featureCache.get(e.toString());t||(t=K.getRecordsInSlice(e,function(){return!0}),K.cram.featureCache.set(e.toString(),t)),U.push(t);var n=t.then(function(e){for(var t=[],n=0;n<e.length;n+=1){var i=e[n];N[i.readName]&&!P[i.uniqueId]&&t.push(i)}return t});W.push(n)}),e.next=40,u.default.all(W);case 40:(Z=e.sent).length&&(X=(0,f.default)(Z).call(Z,function(e,t){return(0,d.default)(e).call(e,t)}),R=(0,d.default)(R).call(R,X));case 42:return e.abrupt("return",R);case 43:case"end":return e.stop()}},e,this)})),function(e,n,i){return t.apply(this,arguments)})},{key:"getRecordsInSlice",value:function(e,t){var n=e.sliceStart,i=e.sliceBytes;return this.cram.getContainerAtPosition(e.containerStart).getSlice(n,i).getRecords(t)}},{key:"hasDataForReferenceSequence",value:function(e){return this.index.hasDataForReferenceSequence(e)}}]),e}();e.exports=x},function(e,t,n){e.exports=n(434)},function(e,t,n){e.exports=n(435)},function(e,t,n){var i=n(436),r=Array.prototype;e.exports=function(e){var t=e.reduce;return e===r||e instanceof Array&&t===r.reduce?i:t}},function(e,t,n){n(437);var i=n(18);e.exports=i("Array").reduce},function(e,t,n){var i=n(0),r=n(438).left;i({target:"Array",proto:!0,forced:n(54)("reduce")},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(5),r=n(22),s=n(60),o=n(29),a=function(e){return function(t,n,a,l){i(n);var c=r(t),h=s(c),u=o(c.length),d=e?u-1:0,p=e?-1:1;if(a<2)for(;;){if(d in h){l=h[d],d+=p;break}if(d+=p,e?d<0:u<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:u>d;d+=p)d in h&&(l=n(l,h[d],d,c));return l}};e.exports={left:a(!1),right:a(!0)}},function(e,t,n){var i=n(1),r=i(n(30)),s=i(n(31)),o=i(n(103)),a=i(n(102)),l=i(n(16)),c=i(n(154)),h=i(n(440)),u=i(n(48)),d=i(n(442)),p=i(n(37)),f=i(n(75)),m=i(n(7)),g=i(n(10)),v=n(447).default,b=n(94),y=(0,n(161).promisify)(n(126).gunzip),_=n(160).open,w=n(9).CramMalformedError,x=function(){function e(t){(0,m.default)(this,e),(0,f.default)(this,t)}return(0,g.default)(e,[{key:"toString",value:function(){var e,t,n,i;return(0,p.default)(e=(0,p.default)(t=(0,p.default)(n=(0,p.default)(i="".concat(this.start,":")).call(i,this.span,":")).call(n,this.containerStart,":")).call(t,this.sliceStart,":")).call(e,this.sliceBytes)}}]),e}();function S(e,t){if((0,d.default)(t).call(t,function(e){return void 0===e}))throw new w("invalid .crai index file");var n=(0,u.default)(t,6),i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5];e[i]||(e[i]=[]),e[i].push(new x({start:r,span:s,containerStart:o,sliceStart:a,sliceBytes:l}))}var C=function(){function e(t){var n,i=this;(0,m.default)(this,e);var r=_(t.url,t.path,t.filehandle);this._parseCache=new v({cache:new b({maxSize:1}),fill:function(e,t){return i.parseIndex({signal:t})}}),this.readFile=(0,h.default)(n=r.readFile).call(n,r)}var t,n;return(0,g.default)(e,[{key:"parseIndex",value:function(){var e={};return this.readFile().then(function(e){return 31===e[0]&&139===e[1]?y(e):e}).then(function(t){var n;if(t.length>4&&21578050===t.readUInt32LE(0))throw new w("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");for(var i=[],r="",s=0;s<t.length;s+=1){var h=t[s];if(h>=48&&h<=57||!r&&45===h)r+=String.fromCharCode(h);else if(9===h)i.push((0,c.default)(r,10)),r="";else if(10===h)i.push((0,c.default)(r,10)),r="",S(e,i),i=[];else if(13!==h&&32!==h)throw new w("invalid .crai index file")}return r&&i.push((0,c.default)(r,10)),6===i.length&&S(e,i),(0,l.default)(n=(0,a.default)(e)).call(n,function(t){var n=(0,u.default)(t,2),i=n[1];e[n[0]]=(0,o.default)(i).call(i,function(e,t){return e.start-t.start||e.span-t.span})}),e})}},{key:"getIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._parseCache.get("index",null,e.signal)}},{key:"hasDataForReferenceSequence",value:(n=(0,s.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:return e.t0=t,e.abrupt("return",!!e.sent[e.t0]);case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getEntriesForRange",value:(t=(0,s.default)(r.default.mark(function e(t,n,i){var s,o,a,l;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(e.t0=t,s=e.sent[e.t0]){e.next=6;break}return e.abrupt("return",[]);case 6:for(o=function(e){return e.start>=i?-1:e.start+e.span<=n?1:0},a=[],l=0;l<s.length;l+=1)0===o(s[l])&&a.push(s[l]);return e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)})),function(e,n,i){return t.apply(this,arguments)})}]),e}();e.exports=C},function(e,t,n){e.exports=n(441)},function(e,t,n){e.exports=n(144)},function(e,t,n){e.exports=n(443)},function(e,t,n){e.exports=n(444)},function(e,t,n){var i=n(445),r=Array.prototype;e.exports=function(e){var t=e.some;return e===r||e instanceof Array&&t===r.some?i:t}},function(e,t,n){n(446);var i=n(18);e.exports=i("Array").some},function(e,t,n){var i=n(0),r=n(45).some;i({target:"Array",proto:!0,forced:n(54)("some")},{some:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(448));t.default=r.default},function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(162),s=i(n(450)),o=function(){function e(e){var t=e.fill,n=e.cache;if("function"!=typeof t)throw new TypeError("must pass a fill function");if("object"!=typeof n)throw new TypeError("must pass a cache object");if("function"!=typeof n.get||"function"!=typeof n.set||"function"!=typeof n.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=n,this.fillCallback=t}return e.isAbortException=function(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message},e.prototype.evict=function(e,t){this.cache.get(e)===t&&this.cache.delete(e)},e.prototype.fill=function(e,t,n){var i=this,r=new s.default,o={aborter:r,promise:this.fillCallback(t,r.signal),settled:!1,get aborted(){return this.aborter.signal.aborted}};o.aborter.addSignal(n),o.aborter.signal.addEventListener("abort",function(){i.evict(e,o)}),o.promise.then(function(){o.settled=!0},function(t){o.settled=!0,i.evict(e,o)}).catch(function(e){throw console.error(e),e}),this.cache.set(e,o)},e.checkSinglePromise=function(e,t){function n(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(function(e){return n(),e},function(e){throw n(),e})},e.prototype.has=function(e){return this.cache.has(e)},e.prototype.get=function(t,n,i){if(!i&&n instanceof r.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");var s=this.cache.get(t);return s?s.aborted?(this.evict(t,s),this.get(t,n,i)):s.settled?s.promise:(s.aborter.addSignal(i),e.checkSinglePromise(s.promise,i)):(this.fill(t,n,i),e.checkSinglePromise(this.cache.get(t).promise,i))},e.prototype.delete=function(e){var t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))},e.prototype.clear=function(){for(var e=this.cache.keys(),t=0,n=e.next();!n.done;n=e.next())this.delete(n.value),t+=1;return t},e}();t.default=o},function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(){i(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return s(e,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],i=0,r=n.length;i<r;i++)if(n[i]===t)return void n.splice(i,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n=function(n){setTimeout(function(){return n.call(t,e)})},i=this.listeners[e.type],r=0,s=i.length;r<s;r++)n(i[r]);return!e.defaultPrevented}}}]),e}(),u=function(e){function t(){var e;return i(this,t),(e=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}(this,o(t).call(this))).listeners||h.call(l(e)),Object.defineProperty(l(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),s(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(o(t.prototype),"dispatchEvent",this).call(this,e)}}]),t}(h),d=function(){function e(){i(this,e),Object.defineProperty(this,"signal",{value:new u,writable:!0,configurable:!0})}return s(e,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",u.prototype[Symbol.toStringTag]="AbortSignal"),t.AbortController=d,t.AbortSignal=u,t.abortableFetch=function(e){"function"==typeof e&&(e={fetch:e});var t=e.fetch,n=e.Request,i=void 0===n?t.Request:n,r=e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=void 0!==r&&r;if(!function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}({fetch:t,Request:i,AbortController:e.AbortController,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:t,Request:o};var o=i;(o&&!o.prototype.hasOwnProperty("signal")||s)&&((o=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var r=new i(e,t);return n&&Object.defineProperty(r,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),r}).prototype=i.prototype);var a=t;return{fetch:function(e,t){var n=o&&o.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var i;try{i=new DOMException("Aborted","AbortError")}catch(e){(i=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(i);var r=new Promise(function(e,t){n.addEventListener("abort",function(){return t(i)},{once:!0})});return t&&t.signal&&delete t.signal,Promise.race([r,a(e,t)])}return a(e,t)},Request:o}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(162),r=function(){},s=function(){function e(){this.signals=new Set,this.abortController=new i.AbortController}return e.prototype.addSignal=function(e){var t=this;if(void 0===e&&(e=new r),this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):"function"==typeof e.addEventListener&&e.addEventListener("abort",function(){t.handleAborted(e)})},e.prototype.handleAborted=function(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()},Object.defineProperty(e.prototype,"signal",{get:function(){return this.abortController.signal},enumerable:!0,configurable:!0}),e.prototype.abort=function(){this.abortController.abort()},e}();t.default=s}]);class Lh{constructor(e,t,n){this.config=e,this.browser=n,this.genome=t,this.cramFile=new Mh.CramFile({filehandle:new Fh(e.url,e),seqFetch:e.seqFetch||(function(e,t,n){const i=this.genome.sequence,r=this.genome;return this.getHeader().then(function(s){const o=r.getChromosomeName(s.chrNames[e]);return i.getSequence(o,t-1,n)})}).bind(this),checkSequenceMD5:void 0===e.checkSequenceMD5||e.checkSequenceMD5});const i=new Fh(e.indexURL,e);this.indexedCramFile=new Mh.IndexedCramFile({cram:this.cramFile,index:new Mh.CraiIndex({filehandle:i}),fetchSizeLimit:3e7}),xh.setReaderDefaults(this,e)}async getHeader(){if(!this.header){const e=this.genome,t=await this.cramFile.getSamHeader(),n={},i=[],r={},s=[];for(let o of t)if("SQ"===o.tag){for(let t of o.data)if("SN"===t.tag){const s=t.value;n[s]=i.length,i.push(s),e&&(r[e.getChromosomeName(s)]=s);break}}else"RG"===o.tag&&s.push(o.data);this.header={chrNames:i,chrToIndex:n,chrAliasTable:r,readGroups:s}}return this.header}async readAlignments(e,t,n){const i=await this.getHeader(),r=i.chrAliasTable.hasOwnProperty(e)?i.chrAliasTable[e]:e,s=i.chrToIndex[r],o=new ih(e,t,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold);if(void 0===s)return o;try{const e=await this.indexedCramFile.getRecordsForRange(s,t,n);for(let r of e){const e=r.sequenceId,l=r.alignmentStart,c=l+r.lengthOnRef;if(e<0)continue;if(e>s||l>n)return;if(e<s)continue;if(c<t)continue;const h=a(r,i.chrNames);this.filter.pass(h)&&o.push(h)}return o.finish(),o}catch(l){let e=l.message;throw e&&e.indexOf("MD5")>=0&&(e="Sequence mismatch. Is this the correct genome for the loaded CRAM?"),js.presentAlert(new Error(e)),l}function a(e,t){const n=new hh;return n.chr=t[e.sequenceId],n.start=e.alignmentStart-1,n.lengthOnRef=e.lengthOnRef,n.flags=e.flags,n.strand=!(16&e.flags),n.fragmentLength=e.templateLength||e.templateSize,n.mq=e.mappingQuality,n.end=e.alignmentStart+e.lengthOnRef,n.readGroupId=e.readGroupId,e.mate&&void 0!==e.mate.sequenceId&&(n.mate={chr:t[e.mate.sequenceId],position:e.mate.alignmentStart,strand:void 0!==e.mate.flags?!(1&e.mate.flags):!(32&e.flags)}),n.seq=e.getReadBases(),n.qual=e.qualityScores,n.tagDict=e.tags,n.readName=e.readName,function(e,t){const n=[];let i,r,s=0,o="";if(t.scStart=t.start,t.scLengthOnRef=t.lengthOnRef,e.readFeatures)for(let l of e.readFeatures){const e=l.code,a=l.data,c=l.pos-1,h=l.refPos-1;switch(e){case"S":case"I":case"i":case"N":case"D":if(c>s){const e=c-s;n.push(new vh({start:h-e,seqOffset:s,len:e,type:"M"})),s+=e,o+=e+"M"}if("S"===e){let i=h;t.scLengthOnRef+=a.length,0===c&&(t.scStart-=a.length,i-=a.length);const r=a.length;n.push(new vh({start:i,seqOffset:s,len:r,type:"S"})),s+=r,o+=r+e}else if("I"===e||"i"===e){void 0===i&&(i=[]);const t="i"===e?1:a.length;i.push(new vh({start:h,len:t,seqOffset:s,type:"I"})),s+=t,o+=t+e}else"D"!==e&&"N"!==e||(r||(r=[]),r.push({start:h,len:a,type:e}),o+=a+e);break;case"H":case"P":o+=a+e}}const a=e.readLength-s;a>0&&(n.push(new vh({start:e.alignmentStart+e.lengthOnRef-a-1,seqOffset:s,len:a,type:"M"})),o+=a+"M"),t.blocks=n,t.insertions=i,t.gaps=r,t.cigar=o}(e,n),n.mate&&n.start>n.mate.position&&n.fragmentLength>0&&(n.fragmentLength=-n.fragmentLength),xh.setPairOrientation(n),n}}}class Fh{constructor(e,t){this.position=0,this.url=e,this.config=t,this.cache=new Nh({fetch:(e,t)=>this._fetch(e,t)})}async _fetch(e,t){const n={start:e,size:t};this._stat={size:void 0};const i=await rs.loadArrayBuffer(this.url,Zo(this.config,{range:n}));return Buffer.from(i)}async read(e,t=0,n=1/0,i=0){let r=i;return null===i&&(r=this.position,this.position+=n),this.cache.get(e,t,n,i)}async readFile(){const e=await rs.loadArrayBuffer(this.url,Zo(this.config));return Buffer.from(e)}async stat(){if(!this._stat){const e=Buffer.allocUnsafe(10);if(await this.read(e,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}}class Nh{constructor({fetch:e,size:t=1e7,chunkSize:n=32768}){this.fetch=e,this.chunkSize=n,this.lruCache=new zh({maxSize:Math.floor(t/n)})}async get(e,t,n,i){if(e.length<t+n)throw new Error("output buffer not big enough for request");const r=Math.floor(i/this.chunkSize),s=Math.floor((i+n)/this.chunkSize),o=new Array(s-r+1);for(let c=r;c<=s;c+=1)o[c-r]=this._getChunk(c).then(e=>({data:e,chunkNumber:c}));const a=await Promise.all(o),l=i-a[0].chunkNumber*this.chunkSize;a.forEach(({data:o,chunkNumber:a})=>{let c=0,h=this.chunkSize,u=t+(a-r)*this.chunkSize-l;a===r&&(u=t,c=l),a===s&&(h=i+n-a*this.chunkSize),o.copy(e,u,c,h)})}_getChunk(e){const t=this.lruCache.get(e);if(t)return t;const n=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,n),n}}class zh{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}var Vh={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"};const jh=function(e,t){this.config=e,this.genome=t,this.url=e.url,this.filter=new bh(e.filter),this.readGroupSetIds=e.readGroupSetIds,this.authKey=e.authKey,this.samplingWindowSize=void 0===e.samplingWindowSize?100:e.samplingWindowSize,this.samplingDepth=void 0===e.samplingDepth?1e3:e.samplingDepth,this.pairsSupported=!!e.viewAsPairs||void 0===e.pairsSupported||e.pairsSupported};jh.prototype.readAlignments=function(e,t,n){const i=this.genome,r=this;return(r.chrAliasTable?Promise.resolve(r.chrAliasTable):r.readMetadata().then(function(e){if(r.chrAliasTable={},i&&e.readGroups&&e.readGroups.length>0){var t=e.readGroups[0].referenceSetId;return t?Gl({url:r.url+"/references/search",body:{referenceSetId:t},decode:function(e){return e.references}}).then(function(e){return e.forEach(function(e){var t=e.name,n=i.getChromosomeName(t);r.chrAliasTable[n]=t}),r.chrAliasTable}):(function(e,t){var n;if("461916304629"===t||"337315832689"===t){for(n=1;n<23;n++)e["chr"+n]=n;e.chrX="X",e.chrY="Y",e.chrM="MT"}}(r.chrAliasTable,r.config.datasetId),r.chrAliasTable)}return r.chrAliasTable})).then(function(i){var o=i.hasOwnProperty(e)?i[e]:e;return Gl({url:r.url+"/reads/search",body:{readGroupSetIds:[r.readGroupSetIds],referenceName:o,start:t,end:n,pageSize:"10000"},decode:s,results:new ih(e,t,n,r.samplingWindowSize,r.samplingDepth,r.pairsSupported,r.alleleFreqThreshold)})});function s(e){var t,n,s,o,a,l=e.alignments,c=l.length,h=[];for(t=0;t<c;t++){let e=l[t];(n=new hh).readName=e.fragmentName,n.properPlacement=e.properPlacement,n.duplicateFragment=e.duplicateFragment,n.numberReads=e.numberReads,n.fragmentLength=e.fragmentLength,n.readNumber=e.readNumber,n.failedVendorQualityChecks=e.failedVendorQualityChecks,n.secondaryAlignment=e.secondaryAlignment,n.supplementaryAlignment=e.supplementaryAlignment,n.seq=e.alignedSequence,n.qual=e.alignedQuality,n.matePos=e.nextMatePosition,n.tagDict=e.info,n.flags=0,e.alignment?(n.mapped=!0,n.chr=e.alignment.position.referenceName,i&&(n.chr=i.getChromosomeName(n.chr)),n.start=parseInt(e.alignment.position.position),n.strand=!e.alignment.position.reverseStrand,n.mq=e.alignment.mappingQuality,n.cigar=u(e.alignment.cigar),s=d(e.alignment.cigar),n.lengthOnRef=s.lengthOnRef,a=p(n,s.array),n.blocks=a.blocks,n.insertions=a.insertions):n.mapped=!1,(o=e.nextMatePosition)&&(n.mate={chr:o.referenceFrame,position:parseInt(o.position),strand:!o.reverseStrand}),r.filter.pass(n)&&h.push(n)}return h;function u(e){var t="";return e.forEach(function(e){t+=e.operationLength+Vh[e.operation]}),t}function d(e){var t,n,i,r,s=0,o=[];for(r=0;r<e.length;r++)i=Vh[(t=e[r]).operation],n=parseInt(t.operationLength),"M"!==i&&"EQ"!==i&&"X"!==i&&"D"!==i&&"N"!==i&&"="!==i||(s+=n),o.push({len:n,ltr:i});return{lengthOnRef:s,array:o}}function p(e,t){for(var n,i,r,s=[],o=0,a=e.start,l=t.length,c=0;c<l;c++){var h=t[c];switch(h.ltr){case"H":case"P":break;case"S":o+=h.len,r="S";break;case"N":case"D":void 0===n&&(n=[]),n.push({start:a,len:h.len,type:h.ltr}),a+=h.len;break;case"I":void 0===i&&(i=[]),i.push(new vh({start:a,len:h.len,seqOffset:o})),o+=h.len;break;case"M":case"EQ":case"=":case"X":s.push(new vh({start:a,len:h.len,seqOffset:o,gapType:r})),o+=h.len,a+=h.len;break;default:console.log("Error processing cigar element: "+h.len+h.ltr)}}return{blocks:s,insertions:i,gaps:n}}}},jh.prototype.readMetadata=function(){return Wl({url:this.url,entity:"readgroupsets",entityId:this.readGroupSetIds})};class Bh{constructor(e,t){const n=t.genome;if(this.config=e,this.genome=n,this.alignmentContainer=void 0,ea(e.url)){if("cram"===e.format)throw"CRAM data uris are not supported";this.config.indexed=!1}if("ga4gh"===e.sourceType)this.bamReader=new jh(e,n);else if("pysam"===e.sourceType)this.bamReader=new Ih(e,n);else if("htsget"===e.sourceType)this.bamReader=new Oh(e,n);else if("shardedBam"===e.sourceType)this.bamReader=new Th(e,n);else if("cram"===e.format)this.bamReader=new Lh(e,n,t);else{if(!this.config.indexURL&&!1!==e.indexed)if(xt(this.config.url)){const e=function(e,t){if(xt(e)){if(e.includes("?")){const t=e.indexOf("?");return e.substring(0,t)+".bai"+e.substring(t)}return e+".bai"}}(this.config.url);e?(console.error(`Warning: no indexURL specified for ${this.config.url}.  Guessing ${this.baiPath}`),this.config.indexURL=e):(console.error(`Warning: no indexURL specified for ${this.config.url}.`),this.config.indexed=!1)}else console.error(`Warning: no indexURL specified for ${this.config.name}.`),this.config.indexed=!1;this.bamReader=!1!==this.config.indexed?new Rh(e,n):new Ah(e,n)}this.viewAsPairs=e.viewAsPairs,this.showSoftClips=e.showSoftClips}setViewAsPairs(e){this.viewAsPairs!==e&&(this.viewAsPairs=e)}setShowSoftClips(e){this.showSoftClips!==e&&(this.showSoftClips=e)}async getAlignments(e,t,n){const i=this.genome,r=this.showSoftClips;if(console.log("in getALignments"),this.alignmentContainer&&this.alignmentContainer.contains(e,t,n))return console.log("returning cached container"),this.alignmentContainer;{console.log("refreshing alignments");const s=await this.bamReader.readAlignments(e,t,n);let o=s.alignments;this.viewAsPairs||(o=th([{alignments:o}]));const a=o.length>0;if(s.packedAlignmentRows=nh(o,s.start,s.end,r),s.alignments=void 0,this.alignmentContainer=s,a){const t=await i.sequence.getSequence(e,s.start,s.end);if(t)return console.log("got something back"),s.coverageMap.refSeq=t,s.sequence=t,s;console.error("No sequence for: "+e+":"+s.start+"-"+s.end)}return s}}}class Hh extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.type="alignment",void 0===e.alleleFreqThreshold&&(e.alleleFreqThreshold=.2),this.featureSource=new Bh(e,this.browser),this.showCoverage=void 0===e.showCoverage||e.showCoverage,this.showAlignments=void 0===e.showAlignments||e.showAlignments,this.coverageTrack=new qh(e,this),this.alignmentTrack=new $h(e,this),this.alignmentTrack.setTop(this.coverageTrack,this.showCoverage),this.visibilityWindow=e.visibilityWindow||3e4,this.viewAsPairs=e.viewAsPairs,this.pairsSupported=!1!==e.pairsSupported,this.showSoftClips=e.showSoftClips,this.showAllBases=e.showAllBases,this.showMismatches=!1!==e.showMismatches,this.color=e.color,this.coverageColor=e.coverageColor,this.minFragmentLength=e.minFragmentLength,this.maxFragmentLength=e.maxFragmentLength,e.sort&&(Array.isArray(e.sort)?this.assignSort(e.sort[0]):this.assignSort(e.sort)),this.height=void 0!==e.height?e.height:300}set height(e){this._height=e,this.coverageTrack&&this.showAlignments&&(this.alignmentTrack.height=this.showCoverage?e-this.coverageTrack.height:e)}get height(){return this._height}sort(e){e=this.assignSort(e);for(let t of this.trackView.viewports)if(t.containsPosition(e.chr,e.position)){const n=t.getCachedFeatures();n&&(Uh(e,n),t.repaint())}}assignSort(e){if(e.locus){const t=function(e){const t=e.split(":"),n=t[1].split("-"),i={chr:t[0],start:Number.parseInt(n[0].replace(/,/g,""))-1};return i.end=n.length>1?Number.parseInt(n[1].replace(/,/g,"")):i.start+1,i}(e.locus);e.chr=t.chr,e.position=t.start}else e.position--;return e.direction="ASC"===e.direction||!0===e.direction,e.chr=this.browser.genome.getChromosomeName(e.chr),this.sortObject=e,this.sortObject}async getFeatures(e,t,n,i,r){console.log("bamtrack.getFeatures: start "+t+"end "+n);const s=await this.featureSource.getAlignments(e,t,n);s.alignments&&s.alignments.length>99&&(void 0===this.minFragmentLength&&(this.minFragmentLength=s.pairedEndStats.lowerFragmentLength),void 0===this.maxFragmentLength&&(this.maxFragmentLength=s.pairedEndStats.upperFragmentLength));const o=this.sortObject;return o&&o.chr===e&&o.position>=t&&o.position<=n&&Uh(o,s),s}computePixelHeight(e){return(this.showCoverage?this.coverageTrack.height:0)+(this.showAlignments?this.alignmentTrack.computePixelHeight(e):0)+15}draw(e){Ks.fillRect(e.context,0,e.pixelTop,e.pixelWidth,e.pixelHeight,{fillStyle:"rgb(255, 255, 255)"}),!0===this.showCoverage&&this.coverageTrack.height>0?(this.trackView.axisCanvas.style.display="block",this.coverageTrack.draw(e)):this.trackView.axisCanvas.style.display="none",!0===this.showAlignments&&(this.alignmentTrack.setTop(this.coverageTrack,this.showCoverage),this.alignmentTrack.draw(e))}paintAxis(e,t,n){this.coverageTrack.paintAxis(e,t,this.coverageTrack.height)}contextMenuItemList(e){return this.alignmentTrack.contextMenuItemList(e)}popupData(e){return!0===this.showCoverage&&e.y>=this.coverageTrack.top&&e.y<this.coverageTrack.height?this.coverageTrack.popupData(e):this.alignmentTrack.popupData(e)}menuItemList(){let e=[];e=e.concat(Cs.numericDataMenuItems(this.trackView)),e.push("<hr/>");const t=pt('<div class="igv-track-menu-category">');t.text("Color by:"),e.push({name:void 0,object:t,click:void 0,init:void 0});const n=[{key:"strand",label:"read strand"}];this.alignmentTrack.hasPairs&&(n.push({key:"firstOfPairStrand",label:"first-of-pair strand"}),n.push({key:"pairOrientation",label:"pair orientation"}),n.push({key:"fragmentLength",label:"insert size (TLEN)"})),n.push({key:"tag",label:"tag"+(this.alignmentTrack.colorByTag?" ("+this.alignmentTrack.colorByTag+")":"")});for(let s of n)e.push(this.colorByCB(s,this.alignmentTrack.colorBy===s.key));const i=()=>{this.autoHeight||this.trackView.setTrackHeight(15+(this.showCoverage?this.coverageTrack.height:0)+(this.showAlignments?this.alignmentTrack.height:0))};e.push("<hr/>"),e.push({object:pt(Ss("Show Coverage",this.showCoverage)),click:()=>{this.showCoverage=!this.showCoverage,i(),this.trackView.checkContentHeight(),this.trackView.repaintViews()}}),e.push({object:pt(Ss("Show Alignments",this.showAlignments)),click:()=>{this.showAlignments=!this.showAlignments,i(),this.trackView.checkContentHeight(),this.trackView.repaintViews()}}),e.push("<hr/>"),e.push({object:pt(Ss("Show all bases",this.showAllBases)),click:()=>{this.showAllBases=!this.showAllBases,this.config.showAllBases=this.showAllBases,this.trackView.repaintViews()}}),e.push({object:pt(Ss("Show soft clips",this.showSoftClips)),click:()=>{this.showSoftClips=!this.showSoftClips,this.config.showSoftClips=this.showSoftClips,this.featureSource.setShowSoftClips(this.showSoftClips);const e=this.getCachedAlignmentContainers();for(let t of e)t.setShowSoftClips(this.showSoftClips);this.trackView.repaintViews()}}),this.pairsSupported&&this.alignmentTrack.hasPairs&&(e.push("<hr/>"),e.push({object:pt(Ss("View as pairs",this.viewAsPairs)),click:()=>{this.viewAsPairs=!this.viewAsPairs,this.config.viewAsPairs=this.viewAsPairs,this.featureSource.setViewAsPairs(this.viewAsPairs);const e=this.getCachedAlignmentContainers();for(let t of e)t.setViewAsPairs(this.viewAsPairs);this.trackView.repaintViews()}})),e.push("<hr/>");const r=pt('<div class="igv-track-menu-category">');return r.text("Display mode:"),e.push({name:void 0,object:r,click:void 0,init:void 0}),e.push({object:pt(Ss("expand","EXPANDED"===this.alignmentTrack.displayMode)),click:()=>{this.alignmentTrack.displayMode="EXPANDED",this.config.displayMode="EXPANDED",this.trackView.checkContentHeight(),this.trackView.repaintViews()}}),e.push({object:pt(Ss("squish","SQUISHED"===this.alignmentTrack.displayMode)),click:()=>{this.alignmentTrack.displayMode="SQUISHED",this.config.displayMode="SQUISHED",this.trackView.checkContentHeight(),this.trackView.repaintViews()}}),e}colorByCB(e,t){return{name:void 0,object:pt(Ss(e.label,t)),click:t=>{e.key===this.alignmentTrack.colorBy?(this.alignmentTrack.colorBy="none",this.config.colorBy="none",this.trackView.repaintViews()):"tag"===e.key?this.browser.inputDialog.present({label:"Tag Name",value:this.alignmentTrack.colorByTag?this.alignmentTrack.colorByTag:"",callback:e=>{this.alignmentTrack.colorBy="tag",this.config.colorBy="tag",e!==this.alignmentTrack.colorByTag&&(this.alignmentTrack.colorByTag=e,this.config.colorByTag=e,this.alignmentTrack.tagColors=new io("Set1"),pt("#color-by-tag").text(self.alignmentTrack.colorByTag)),this.trackView.repaintViews()}},t):(this.alignmentTrack.colorBy=e.key,this.config.colorBy=e.key,this.trackView.repaintViews())},init:void 0}}dispose(){this.trackView=void 0}getState(){const e=super.getState();return this.sortObject&&(e.sort={chr:this.sortObject.chr,position:this.sortObject.position+1,option:this.sortObject.option,direction:this.sortObject.direction?"ASC":"DESC"}),e}getCachedAlignmentContainers(){return this.trackView.viewports.map(e=>e.getCachedFeatures())}get dataRange(){return this.coverageTrack.dataRange}set dataRange(e){this.coverageTrack.dataRange=e}get logScale(){return this.coverageTrack.logScale}set logScale(e){this.coverageTrack.logScale=e}get autoscale(){return this.coverageTrack.autoscale}set autoscale(e){this.coverageTrack.autoscale=e}}class qh{constructor(e,t){this.parent=t,this.featureSource=t.featureSource,this.height=void 0!==e.coverageTrackHeight?e.coverageTrackHeight:50,this.paintAxis=Hc,this.top=0,this.autoscale=e.autoscale||void 0===e.max,this.autoscale||(this.dataRange={min:e.min||0,max:e.max})}draw(e){const t=this.parent.browser.nucleotideColors;if(e.pixelTop>this.height)return;const n=e.context,i=e.features.coverageMap;let r;i.refSeq&&(r=i.refSeq.toUpperCase());const s=e.bpPerPixel,o=e.bpStart,a=o+e.pixelWidth*s+1;let l=this.parent.coverageColor||"rgb(150, 150, 150)";void 0!==this.parent.color&&(l=Gr.darkenLighten(this.parent.color,-35)),Ks.setProperties(n,{fillStyle:l,strokeStyle:l});const c=Math.max(1,Math.ceil(1/s));for(let h=0,u=i.coverage.length;h<u;h++){const e=i.bpStart+h;if(e<o)continue;if(e>a)break;const t=i.coverage[h];if(!t)continue;const r=Math.round(t.total/this.dataRange.max*this.height),l=this.height-r,u=Math.floor((e-o)/s);Ks.fillRect(n,u,l,c,r)}if(r)for(let h=0,u=i.coverage.length;h<u;h++){const e=i.bpStart+h;if(e<o)continue;if(e>a)break;const l=i.coverage[h];if(!l)continue;const u=l.total/this.dataRange.max*this.height;let d=this.height-u;const p=Math.floor((e-o)/s),f=r[h];if(l.isMismatch(f)){Ks.setProperties(n,{fillStyle:t[f]}),Ks.fillRect(n,p,d,c,u);let e=0;for(let i of["A","C","T","G"]){const r=(l["pos"+i]+l["neg"+i])/this.dataRange.max*this.height;d=this.height-r-e,e+=r,Ks.setProperties(n,{fillStyle:t[i]}),Ks.fillRect(n,p,d,c,r)}}}}popupData(e){let t=e.viewport.getCachedFeatures();if(!t||0===t.length)return;let n=Math.floor(e.genomicLocation),i=e.viewport.referenceFrame,r=t.coverageMap,s=[],o=Math.floor(n-r.bpStart),a=r.coverage[o];if(a){s.push(i.chr+":"+St(1+n)),s.push({name:"Total Count",value:a.total});let e=a.posA+a.negA;e>0&&(e=e.toString()+" ("+Math.round(e/a.total*100)+"%, "+a.posA+"+, "+a.negA+"- )"),s.push({name:"A",value:e}),e=a.posC+a.negC,e>0&&(e=e.toString()+" ("+Math.round(e/a.total*100)+"%, "+a.posC+"+, "+a.negC+"- )"),s.push({name:"C",value:e}),e=a.posG+a.negG,e>0&&(e=e.toString()+" ("+Math.round(e/a.total*100)+"%, "+a.posG+"+, "+a.negG+"- )"),s.push({name:"G",value:e}),e=a.posT+a.negT,e>0&&(e=e.toString()+" ("+Math.round(e/a.total*100)+"%, "+a.posT+"+, "+a.negT+"- )"),s.push({name:"T",value:e}),e=a.posN+a.negN,e>0&&(e=e.toString()+" ("+Math.round(e/a.total*100)+"%, "+a.posN+"+, "+a.negN+"- )"),s.push({name:"N",value:e}),s.push("<HR/>"),s.push({name:"DEL",value:a.del.toString()}),s.push({name:"INS",value:a.ins.toString()})}return s}}class $h{constructor(e,t){this.parent=t,this.browser=t.browser,this.featureSource=t.featureSource,this.top=0===e.coverageTrackHeight?0:e.coverageTrackHeight+5,this.displayMode=e.displayMode||"EXPANDED",this.alignmentRowHeight=e.alignmentRowHeight||14,this.squishedRowHeight=e.squishedRowHeight||3,this.negStrandColor=e.negStrandColor||"rgba(150, 150, 230, 0.75)",this.posStrandColor=e.posStrandColor||"rgba(230, 150, 150, 0.75)",this.insertionColor=e.insertionColor||"rgb(138, 94, 161)",this.deletionColor=e.deletionColor||"black",this.skippedColor=e.skippedColor||"rgb(150, 170, 170)",this.pairConnectorColor=e.pairConnectorColor,this.smallFragmentLengthColor=e.smallFragmentLengthColor||"rgb(0, 0, 150)",this.largeFragmentLengthColor=e.largeFragmentLengthColor||"rgb(200, 0, 0)",this.pairOrientation=e.pairOrienation||"fr",this.pairColors={},this.pairColors.RL=e.rlColor||"rgb(0, 150, 0)",this.pairColors.RR=e.rrColor||"rgb(20, 50, 200)",this.pairColors.LL=e.llColor||"rgb(0, 150, 150)",this.colorBy=e.colorBy||"pairOrientation",this.colorByTag=e.colorByTag?e.colorByTag.toUpperCase():void 0,this.bamColorTag=void 0===e.bamColorTag?"YC":e.bamColorTag,this.hideSmallIndels=e.hideSmallIndels,this.indelSizeThreshold=e.indelSizeThreshold||1,this.hasPairs=!1}setTop(e,t){this.top=0===e.height||!1===t?0:5+e.height}computePixelHeight(e){return e.packedAlignmentRows?(e.hasDownsampledIntervals()?10:0)+("SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight)*e.packedAlignmentRows.length+5:0}draw(e){const t=e.features,n=e.context,i=e.bpPerPixel,r=e.bpStart,s=r+e.pixelWidth*i+1,o=t.packedAlignmentRows,a=this.parent.showSoftClips,l=this.parent.showAllBases,c=this.browser.nucleotideColors;n.save();let h=t.sequence;h&&(h=h.toUpperCase());let u=0,d=e.pixelTop;this.top&&n.translate(0,this.top);const p=d+e.pixelHeight;t.hasDownsampledIntervals()?(u=10,t.downsampledIntervals.forEach(function(e){var t=(e.start-r)/i,s=(e.end-r)/i;s-t>5&&(t+=1,s-=1),Ks.fillRect(n,t,2,s-t,3,{fillStyle:"black"})})):u=0,this.alignmentsYOffset=u;const f="SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight;if(o){const e=o.length;for(let t=0;t<e;t++){const e=o[t],n=u+f*t,i=f<=4?f:f-2;if(n>p)break;if(!(n+i<d))for(let t of e.alignments)if(this.hasPairs=this.hasPairs||t.isPaired(),!(t.start+t.lengthOnRef<r)){if(t.start>s)break;!0!==t.hidden&&(t instanceof Xc?(m.call(this,t,n,i),g.call(this,t.firstAlignment,n,i),t.secondAlignment&&g.call(this,t.secondAlignment,n,i)):g.call(this,t,n,i))}}}function m(e,t,o){var a=this.getConnectorColor(e.firstAlignment),l=(e.connectingStart-r)/i,c=(e.connectingEnd-r)/i,h=t+o/2;e.connectingEnd<r||e.connectingStart>s||(e.mq<=0&&(a=Gr.addAlpha(a,.15)),Ks.setProperties(n,{fillStyle:a,strokeStyle:a}),Ks.strokeLine(n,l,h,c,h))}function g(e,o,u){if(e.start+e.lengthOnRef<r||e.start>s)return;const d=a?e.blocks:e.blocks.filter(e=>"S"!==e.type);let p=this.getAlignmentColor(e);const m=p;e.mq<=0&&(p=Gr.addAlpha(p,.15)),Ks.setProperties(n,{fillStyle:p,strokeStyle:m});for(let t=0;t<d.length;t++){const e=d[t];if(!(t!==d.length-1&&d[t+1].start<r)&&(g.call(this,e,t),e.start+e.len>s))break}if(e.insertions){let t=-1;for(let a of e.insertions){if(this.hideSmallIndels&&a.len<=this.indelSizeThreshold)continue;if(a.start<r)continue;if(a.start>s)break;const e=(a.start-r)/i-1;e-t>2&&(Ks.fillRect(n,e,o-1,3,u+2,{fillStyle:this.insertionColor}),t=e)}}if(e.gaps){const t=o+u/2;for(let s of e.gaps)Ks.strokeLine(n,(s.start-r)/i,t,(s.start+s.len-r)/i,t,{strokeStyle:"D"===s.type?this.deletionColor:this.skippedColor})}function g(s,a){const g=s.start-t.start,b=(s.start-r)/i,y=(s.start+s.len-r)/i,_=Math.max(1,y-b),w=f/2,x="S"===s.type,S=e.mq<=0||this.highlightedAlignmentReadNamed===e.readName||x;let C=m;this.highlightedAlignmentReadNamed===e.readName?C="red":x&&(C="rgb(50,50,50)");const k=!0===e.strand&&a===d.length-1,E=!1===e.strand&&0===a,A=k|E;if(console.log("drawBlock"),A){let e,t;k?(e=[b,y,y+w,y,b,b],t=[o,o,o+u/2,o+u,o+u,o]):E&&(e=[y,b,b-w,b,y,y],t=[o,o,o+u/2,o+u,o+u,o]),Ks.fillPolygon(n,e,t,{fillStyle:p}),S&&Ks.strokePolygon(n,e,t,{strokeStyle:C})}else Ks.fillRect(n,b,o,_,u,{fillStyle:p}),S&&(n.save(),n.strokeStyle=C,n.strokeRect(b,o,_,u),n.restore());if(this.parent.showMismatches&&(x||l||h&&e.seq&&"*"!==e.seq)){const t=e.seq?e.seq.toUpperCase():void 0,a=e.qual,d=s.seqOffset;for(let e=0,p=s.len;e<p;e++){if(g+e<0)continue;let p=t?t.charAt(d+e):"";const f=h.charAt(g+e);if("="===p&&(p=f),"X"===p||f!==p||x||l){let t;if(t=!x&&void 0!==a&&a.length>d+e?Wh(a[d+e],c[p]):c[p],t){const a=(s.start+e-r)/i,l=Math.max(1,1/i);v(n,i,{x:a,y:o,width:l,height:u},t,p)}}}}if(e.tags().NM){const t=e.tags().NM,a=2*w+(s.start+s.len-r)/i,l=Math.min(10,u);n.font=l+"px sans-serif";const c=Gr.greyScale(68);1==t.indexOf("i")&&(c="black"),Ks.fillText(n,t,a,l-1+o,{fillStyle:c})}}function v(e,t,n,i,r){if(t<=.1&&n.height>=8){const t=Math.min(10,n.height);e.font=t+"px sans-serif",Ks.strokeText(e,r,n.x+n.width/2-e.measureText(r).width/2,t-1+n.y,{strokeStyle:i})}else Ks.fillRect(e,n.x,n.y,n.width,n.height,{fillStyle:i})}}n.restore()}popupData(e){const t=this.getClickedObject(e.viewport,e.y,e.genomicLocation);return t?t.popupData(e.genomicLocation):void 0}contextMenuItemList(e){const t=e.viewport,n=[],i=n=>{const i=this.parent.sortObject,r=!i||i.position!==Math.floor(e.genomicLocation)||!i.direction,s={chr:t.referenceFrame.chr,position:Math.floor(e.genomicLocation),option:n,direction:r};this.parent.sortObject=s,Uh(s,t.getCachedFeatures()),t.repaint()};n.push("<b>Sort by...</b>"),n.push({label:"&nbsp; base",click:()=>i("BASE")}),n.push({label:"&nbsp; read strand",click:()=>i("STRAND")}),n.push({label:"&nbsp; insert size",click:()=>i("INSERT_SIZE")}),n.push({label:"&nbsp; gap size",click:()=>i("GAP_SIZE")}),n.push({label:"&nbsp; chromosome of mate",click:()=>i("MATE_CHR")}),n.push({label:"&nbsp; mapping quality",click:()=>i("MQ")}),n.push({label:"&nbsp; read name",click:()=>i("READ_NAME")}),n.push({label:"&nbsp; tag",click:()=>{const n=this.parent.sortObject,i=!n||n.position!==Math.floor(e.genomicLocation)||!n.direction;this.browser.inputDialog.present({label:"Tag Name",value:this.sortByTag?this.sortByTag:"",callback:n=>{if(n){const r={chr:t.referenceFrame.chr,position:Math.floor(e.genomicLocation),option:"TAG",tag:n,direction:i};this.sortByTag=n,this.parent.sortObject=r,Uh(r,t.getCachedFeatures()),t.repaint()}}},e.event)}}),n.push("<hr/>");const r=this.getClickedObject(t,e.y,e.genomicLocation);if(r){const t=this.parent.showSoftClips,i="function"==typeof r.alignmentContaining?r.alignmentContaining(e.genomicLocation,t):r;i.isPaired()&&i.isMateMapped()&&n.push({label:"View mate in split screen",click:()=>{if(i.mate){const t=e.viewport.referenceFrame;this.browser.genome.getChromosome(i.mate.chr)?(this.highlightedAlignmentReadNamed=i.readName,this.browser.presentMultiLocusPanel(i,t)):js.presentAlert(`Reference does not contain chromosome: ${i.mate.chr}`)}},init:void 0}),n.push({label:"View read sequence",click:()=>{if(!i)return;const e=i.seq;js.presentAlert(e&&"*"!==e?e:"Read sequence: *")}}),n.push({label:"Copy read sequence",click:()=>{i&&navigator.clipboard.writeText(i.seq)}}),n.push("<hr/>")}return n}getClickedObject(e,t,n){const i=this.parent.showSoftClips;let r=e.getCachedFeatures();if(!r||0===r.length)return;let s=r.packedAlignmentRows,o=r.downsampledIntervals,a=Math.floor((t-this.top-this.alignmentsYOffset)/("SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight));if(a<0){for(let e=0;e<o.length;e++)if(o[e].start<=n&&o[e].end>=n)return o[e]}else if(a<s.length){const e=s[a].alignments.filter(e=>e.containsLocation(n,i));if(e.length>0)return e[0]}}getConnectorColor(e){if(this.pairConnectorColor)return this.pairConnectorColor;switch(this.colorBy){case"strand":case"firstOfPairStrand":case"pairOrientation":case"tag":return this.parent.color||"rgb(200, 200, 200)";default:return this.getAlignmentColor(e)}}getAlignmentColor(e){let t=this.parent.color||"rgb(185, 185, 185)";switch(this.colorBy){case"strand":t=e.strand?this.posStrandColor:this.negStrandColor;break;case"firstOfPairStrand":e instanceof Xc?t=e.firstOfPairStrand()?this.posStrandColor:this.negStrandColor:e.isPaired()&&(e.isFirstOfPair()?t=e.strand?this.posStrandColor:this.negStrandColor:e.isSecondOfPair()?t=e.strand?this.negStrandColor:this.posStrandColor:console.error("ERROR. Paired alignments are either first or second."));break;case"pairOrientation":if(e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr)t=Yh(e.mate.chr);else if(this.pairOrientation&&e.pairOrientation){var n=Gh[this.pairOrientation];if(n){var i=this.pairColors[n[e.pairOrientation]];i&&(t=i)}}break;case"fragmentLength":e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr?t=Yh(e.mate.chr):this.parent.minFragmentLength&&Math.abs(e.fragmentLength)<this.parent.minFragmentLength?t=this.smallFragmentLengthColor:this.parent.maxFragmentLength&&Math.abs(e.fragmentLength)>this.parent.maxFragmentLength&&(t=this.largeFragmentLengthColor);break;case"tag":const r=e.tags()[this.colorByTag];void 0!==r&&(this.bamColorTag===this.colorByTag?t="rgb("+r+")":(this.tagColors||(this.tagColors=new io("Set1")),t=this.tagColors.getColor(r)));break;default:t=this.parent.color||"rgb(185, 185, 185)"}return t}}function Uh(e,t){const n=e.direction;for(let i of t.packedAlignmentRows)i.updateScore(e,t);t.packedAlignmentRows.sort(function(e,t){const i=e.score>t.score?1:e.score<t.score?-1:0;return!0===n?i:-i})}function Wh(e,t){let n;return n=e<5?.1:Math.max(.1,Math.min(1,.1+.9*(e-5)/15)),n=Math.round(10*n)/10,n<1&&(t=Gr.addAlpha(t,n)),t}const Gh={fr:{F1R2:"LR",F2R1:"LR",F1F2:"LL",F2F1:"LL",R1R2:"RR",R2R1:"RR",R1F2:"RL",R2F1:"RL"},rf:{R1F2:"LR",R2F1:"LR",R1R2:"LL",R2R1:"LL",F1F2:"RR",F2F1:"RR",F1R2:"RL",F2R1:"RL"},ff:{F2F1:"LR",R1R2:"LR",F2R1:"LL",R1F2:"LL",R2F1:"RR",F1R2:"RR",R2R1:"RL",F1F2:"RL"}};function Yh(e){if(Zh[e])return Zh[e];if(Zh["chr"+e]){const t=Zh["chr"+e];return Zh[e]=t,t}{const t=Gr.randomRGB();return Zh[e]=t,t}}const Zh={chrX:"rgb(204, 153, 0)",chrY:"rgb(153, 204, 0",chrUn:"rgb(50, 50, 50)",chr1:"rgb(80, 80, 255)",chrI:"rgb(139, 155, 187)",chr2:"rgb(206, 61, 50)",chrII:"rgb(206, 61, 50)",chr2a:"rgb(216, 71, 60)",chr2b:"rgb(226, 81, 70)",chr3:"rgb(116, 155, 88)",chrIII:"rgb(116, 155, 88)",chr4:"rgb(240, 230, 133)",chrIV:"rgb(240, 230, 133)",chr5:"rgb(70, 105, 131)",chr6:"rgb(186, 99, 56)",chr7:"rgb(93, 177, 221)",chr8:"rgb(128, 34, 104)",chr9:"rgb(107, 215, 107)",chr10:"rgb(213, 149, 167)",chr11:"rgb(146, 72, 34)",chr12:"rgb(131, 123, 141)",chr13:"rgb(199, 81, 39)",chr14:"rgb(213, 143, 92)",chr15:"rgb(122, 101, 165)",chr16:"rgb(228, 175, 105)",chr17:"rgb(59, 27, 83)",chr18:"rgb(205, 222, 183)",chr19:"rgb(97, 42, 121)",chr20:"rgb(174, 31, 99)",chr21:"rgb(231, 199, 111)",chr22:"rgb(90, 101, 94)",chr23:"rgb(204, 153, 0)",chr24:"rgb(153, 204, 0)",chr25:"rgb(51, 204, 0)",chr26:"rgb(0, 204, 51)",chr27:"rgb(0, 204, 153)",chr28:"rgb(0, 153, 204)",chr29:"rgb(10, 71, 255)",chr30:"rgb(71, 117, 255)",chr31:"rgb(255, 194, 10)",chr32:"rgb(255, 209, 71)",chr33:"rgb(153, 0, 51)",chr34:"rgb(153, 26, 0)",chr35:"rgb(153, 102, 0)",chr36:"rgb(128, 153, 0)",chr37:"rgb(51, 153, 0)",chr38:"rgb(0, 153, 26)",chr39:"rgb(0, 153, 102)",chr40:"rgb(0, 128, 153)",chr41:"rgb(0, 51, 153)",chr42:"rgb(26, 0, 153)",chr43:"rgb(102, 0, 153)",chr44:"rgb(153, 0, 128)",chr45:"rgb(214, 0, 71)",chr46:"rgb(255, 20, 99)",chr47:"rgb(0, 214, 143)",chr48:"rgb(20, 255, 177)"};class Xh extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.theta=e.theta||Math.PI/4,this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta),this.height=e.height||250,this.arcType=e.arcType||"nested",this.arcOrientation=void 0===e.arcOrientation||e.arcOrientation,this.showBlocks=void 0===e.showBlocks||e.showBlocks,this.blockHeight=e.blockHeight||3,this.thickness=e.thickness||1,this.color=e.color||"rgb(180,25,137)",this.alpha=e.alpha||.15,e.valueColumn?(this.valueColumn=e.valueColumn,this.hasValue=!0):e.useScore&&(this.hasValue=!0,this.valueColumn="score"),this.logScale=!1!==e.logScale,e.max?(this.dataRange={min:e.min||0,max:e.max},this.autoscale=!1):this.autoscale=!0,this.featureSource=Ac(e,this.browser.genome),this.featureSource.getWGFeatures=tu}async postInit(){return"function"==typeof this.featureSource.getHeader&&(this.header=await this.featureSource.getHeader()),this.header&&this.setTrackProperties(this.header),void 0===this.visibilityWindow&&"function"==typeof this.featureSource.defaultVisibilityWindow&&(this.visibilityWindow=await this.featureSource.defaultVisibilityWindow(),this.featureSource.visibilityWindow=this.visibilityWindow),this}supportsWholeGenome(){return!0}async getFeatures(e,t,n){const i=this.visibilityWindow,r=await this.featureSource.getFeatures({chr:e,start:t,end:n,visibilityWindow:i});return console.log("getFeatures: start $(start) end $(end)"),void 0===this.hasValue&&r&&r.length>0&&(this.hasValue=void 0!==r[0].score),r}draw(e){"proportional"===this.arcType?this.drawProportional(e):this.drawNested(e)}drawNested(e){const t=e.context,n=e.pixelWidth,i=e.pixelHeight,r=e.viewportWidth,s=e.bpStart,o=e.bpPerPixel;Ks.fillRect(t,0,e.pixelTop,n,i,{fillStyle:"rgb(255, 255, 255)"});const a=e.features;if(a){(function(){let e=0;for(let i of a){let t=(i.start-s)/o,r=(i.end-s)/o;r>=0&&t<=n&&(e=Math.max(e,r-t))}let t=Math.min(r,e)/2;e>0&&(this.theta=function(e){let t,n=[.01570925532366355,.15838444032453644,.3249196962329063,.5095254494944288,.7265425280053609,.9999999999999999],i=[.031415926535897934,.3141592653589793,.6283185307179586,.9424777960769379,1.2566370614359172,1.5707963267948966];for(t=0;t<n.length&&!(n[t]>e);t++);let r=0===t?0:n[t-1],s=0===t?0:i[t-1],o=t<i.length?i[t]:Math.PI/2;return s+(e-r)/((t<n.length?n[t]:1)-r)*(o-s)}((i-10)/t),this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta))}).call(this);const l=this.arcOrientation?e.pixelHeight:0,c=this.arcOrientation;t.font="8px sans-serif",t.textAlign="center";for(let e of a){let i=e.color||this.color;if(i&&this.config.useScore&&(i=eu(i,Math.min(1,.11+e.score/779*.89).toString())),t.lineWidth=e.thickness||this.thickness||1,e.chr1===e.chr2||"all"===e.chr){const{m1:a,m2:h}=Kh(e,this.browser.genome);let u=Math.round((a-s)/o),d=Math.round((h-s)/o);if(d<0||u>n)continue;let p=d-u;p<3&&(p=3,u--);const f=p/2,m=f/this.sinTheta,g=this.cosTheta*m,v=u+f;let b,y,_;if(c?(b=this.height+g,y=Math.PI+Math.PI/2-this.theta,_=Math.PI+Math.PI/2+this.theta):(b=-g,y=Math.PI/2-this.theta,_=Math.PI/2+this.theta),this.showBlocks&&"all"!==e.chr){const n=(e.start1-s)/o,i=(e.start2-s)/o,r=(e.end2-s)/o,a=this.arcOrientation?-this.blockHeight:this.blockHeight;t.fillRect(n,l,(e.end1-s)/o-n,a),t.fillRect(i,l,r-i,a)}i&&!this.config.useScore&&p>r&&(i=eu(i,this.alpha)),t.strokeStyle=i,t.fillStyle=i,t.beginPath(),t.arc(v,b,m,y,_,!1),t.stroke(),e.drawState={xc:v,yc:b,r:m}}else{let r=Math.round((e.start-s)/o),a=Math.round((e.end-s)/o);if(a<0||r>n)continue;let l=a-r;l<3&&(l=3,r--);const h=e.chr===e.chr1?e.chr2:e.chr1;t.strokeStyle=i,t.fillStyle=i,c?(t.fillRect(r,this.height/2,l,this.height/2),t.fillText(h,r+l/2,this.height/2-5),e.drawState={x:r,y:this.height/2,w:l,h:this.height/2}):(t.fillRect(r,0,l,this.height/2),t.fillText(h,r+l/2,this.height/2+13),e.drawState={x:r,y:0,w:l,h:this.height/2})}}}}drawProportional(e){const t=e.context,n=e.pixelWidth,i=e.bpStart,r=e.bpPerPixel;Ks.fillRect(t,0,e.pixelTop,n,e.pixelHeight,{fillStyle:"rgb(255, 255, 255)"});const s=e.features;if(s&&s.length>0){const o=this.logScale?e.pixelHeight/Math.log10(this.dataRange.max+1):e.pixelHeight/(this.dataRange.max-this.dataRange.min),a=this.arcOrientation?e.pixelHeight:0;for(let e of s){const s=this.valueColumn?e[this.valueColumn]:e.score;if(void 0===s||Number.isNaN(s))continue;const l=this.logScale?Math.log10(s+1)*o:s*o;if(e.chr1===e.chr2||"all"===e.chr){const{m1:o,m2:c}=Kh(e,this.browser.genome);let h=(o-i)/r,u=(c-i)/r,d=u-h;if(d<3&&(d=3,h--),u<0||h>n||s<this.dataRange.min)continue;const p=d/2,f=h+d/2,m=!!this.arcOrientation,g=e.color||this.color;if(t.strokeStyle=g,t.lineWidth=e.thickness||this.thickness||1,!0===t.isSVG?t.strokeEllipse(f,a,p,l,0,0,Math.PI,m):(t.beginPath(),t.ellipse(f,a,p,l,0,0,Math.PI,m),t.stroke()),this.showBlocks&&"all"!==e.chr){t.fillStyle=g;const n=(e.start1-i)/r,s=(e.start2-i)/r,o=(e.end2-i)/r,l=this.arcOrientation?-this.blockHeight:this.blockHeight;t.fillRect(n,a,(e.end1-i)/r-n,l),t.fillRect(s,a,o-s,l)}this.alpha&&(t.fillStyle=eu(g,this.alpha),!0===t.isSVG?t.fillEllipse(f,a,p,l,0,0,Math.PI,m):t.fill()),e.drawState={xc:f,yc:a,radiusX:p,radiusY:l}}else{let o=Math.round((e.start-i)/r),a=Math.round((e.end-i)/r);if(a<0||o>n||s<this.dataRange.min)continue;const c=Math.min(l,this.height-13);let h=a-o;h<3&&(h=3,o--);const u=e.chr===e.chr1?e.chr2:e.chr1;if(t.font="8px sans-serif",t.textAlign="center",this.arcOrientation){const n=this.height-c;t.fillRect(o,n,h,c),t.fillText(u,o+h/2,n-5),e.drawState={x:o,y:n,w:h,h:c}}else t.fillRect(o,0,h,c),t.fillText(u,o+h/2,c+13),e.drawState={x:o,y:0,w:h,h:c}}}}}menuItemList(){let e=[{name:"Set track color",click:()=>{this.trackView.presentColorPicker()}},"<HR/>"];if(this.hasValue){const t={nested:"Nested Arcs",proportional:"Proportional Arcs"};for(let n of["nested","proportional"])e.push({object:pt(Ss(t[n],n===this.arcType)),click:()=>{this.arcType=n,this.trackView.repaintViews()}})}return e.push({object:pt(Ss("Show Blocks",this.showBlocks)),click:()=>{this.showBlocks=!this.showBlocks,this.trackView.repaintViews()}}),e.push({name:"Toggle arc direction",click:()=>{this.arcOrientation=!this.arcOrientation,this.trackView.repaintViews()}}),"proportional"===this.arcType&&(e.push("<HR>"),e=e.concat(Cs.numericDataMenuItems(this.trackView))),e}doAutoscale(e){let t=0;if(e)for(let n of e){const e=this.valueColumn?n[this.valueColumn]:n.score;Number.isNaN(e)||(t=Math.max(t,e))}return{min:0,max:t}}popupData(e,t){t=this.clickedFeatures(e);const n=[];for(let i of t){const e=i._||i;if(n.push({name:"Region 1",value:Qh(e.chr1,e.start1,e.end1,e.strand1)}),n.push({name:"Region 2",value:Qh(e.chr2,e.start2,e.end2,e.strand2)}),e.name&&n.push({name:"Name",value:e.name}),void 0!==e.value&&n.push({name:"Value",value:e.value}),void 0!==e.score&&n.push({name:"Score",value:e.score}),e.extras&&this.header&&this.header.columnNames){const t=this.header.columnNames;for(let i=10;i<t.length;i++)"info"===t[i]?nu(n,e.extras[i-10]):n.push({name:t[i],value:e.extras[i-10]})}break}return n}clickedFeatures(e,t){const n=t||e.viewport.getCachedFeatures(),i=[];if(n){const t="proportional"===this.arcType;for(let r of n)if(r.drawState)if(r.chr1===r.chr2||"all"===r.chr)if(t){const{xc:t,yc:n,radiusX:s,radiusY:o}=r.drawState,a=e.canvasX-t,l=e.canvasY-n,c=a/s*(a/s)+l/o*(l/o);c<=1&&i.push({score:1/c,feature:r})}else{const{xc:t,yc:n,r:s}=r.drawState,o=e.canvasX-t,a=e.canvasY-n,l=Math.abs(Math.sqrt(o*o+a*a)-s);l<5&&i.push({score:l,feature:r})}else{const{x:t,y:n,w:s,h:o}=r.drawState,a=5;if(e.canvasX>=t-a&&e.canvasX<=t+s+a&&e.canvasY>=n&&e.canvasY<=n+o){const n=-Math.abs(e.canvasX-(t+s/2));i.push({score:n,feature:r});break}}}return i.length>1&&i.sort((e,t)=>e.score-t.score),i.map(e=>e.feature)}}function Kh(e,t){let n=(e.start1+e.end1)/2,i=(e.start2+e.end2)/2;if("all"===e.chr&&(n=t.getGenomeCoordinate(e.chr1,n),i=t.getGenomeCoordinate(e.chr2,i)),n>i){const e=n;n=i,i=e}return{m1:n,m2:i}}function Qh(e,t,n,i){return i&&"."!==i?`${e}:${St(t+1)}-${St(n)} (${i})`:`${e}:${St(t+1)}-${St(n)}`}const Jh=new Map;function eu(e,t){const n=`${e}_${t}`;let i=Jh.get(n);return i||(i=Gr.addAlpha(e,t),Jh.set(n,i)),i}function tu(e){const t=this.genome,n=[];for(let i of t.wgChromosomeNames){const r=e[i];if(r)for(let e of r)if(!e.dup){const i=Object.assign({},e);i.chr="all",i.start=t.getGenomeCoordinate(e.chr1,e.start1),i.end=t.getGenomeCoordinate(e.chr2,e.end2),n.push(i)}}return n}function nu(e,t){const n=t.split(";");for(let i of n){const t=i.split("=");2===t.length&&e.push({name:t[0],value:t[1]})}}const iu=xt;class ru extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.visibilityWindow=e.visibilityWindow,this.displayMode=e.displayMode||"EXPANDED",this.labelDisplayMode=e.labelDisplayMode,this.expandedVariantHeight=e.expandedVariantHeight||e.variantHeight||10,this.squishedVariantHeight=e.squishedVariantHeight||2,this.squishedCallHeight=e.squishedCallHeight||1,this.expandedCallHeight=e.expandedCallHeight||10,this.expandedVGap=void 0!==e.expandedVGap?e.expandedVGap:2,this.squishedVGap=void 0!==e.squishedVGap?e.squishedVGap:1,this.expandedGroupGap=e.expandedGroupGap||10,this.squishedGroupGap=e.squishedGroupGap||5,this.featureHeight=e.featureHeight||14,this.visibilityWindow=e.visibilityWindow,this.featureSource=Ac(e,this.browser.genome),this.noGenotypeColor=e.noGenotypeColor||"rgb(200,180,180)",this.noCallColor=e.noCallColor||"rgb(225, 225, 225)",this.nonRefColor=e.nonRefColor||"rgb(200, 200, 215)",this.mixedColor=e.mixedColor||"rgb(200, 220, 200)",this.homrefColor=e.homrefColor||"rgb(200, 200, 200)",this.homvarColor=e.homvarColor||"rgb(17,248,254)",this.hetvarColor=e.hetvarColor||"rgb(34,12,253)",this.sortDirection="ASC",this.type=e.type||"variant",this.colorBy=e.colorBy,this._initColorBy=e.colorBy,e.colorTable&&(this.colorTables=new Map,this.colorTables.set(e.colorBy,new ro(e.colorTable))),this._color=e.color,this.showGenotypes=void 0===e.showGenotypes||e.showGenotypes,this.variantRowCount(1)}async postInit(){if(this.header=await this.getHeader(),void 0===this.visibilityWindow&&!1!==this.config.indexed){const e=jt(this.config.url)?this.config.url.name:this.config.url;this.visibilityWindow=iu(e)&&e.toLowerCase().includes("gnomad")?1e3:this.callSets?Math.max(1e3,1e6-1e4*this.callSets.length):1e6}return this}supportsWholeGenome(){return!1===this.config.indexed&&!1!==this.config.supportsWholeGenome}get color(){return this._color}set color(e){this._color=e,this.colorBy=void 0}async getHeader(){if(!this.header){if("function"==typeof this.featureSource.getHeader){const e=await this.featureSource.getHeader();e&&(this.callSets=e.callSets||[]),this.header=e}this.sampleNames=this.callSets?this.callSets.map(e=>e.name):[]}return this.header}getCallsetsLength(){return this.callSets?this.callSets.length:0}async getFeatures(e,t,n,i){return void 0===this.header&&(this.header=await this.getHeader()),this.featureSource.getFeatures({chr:e,start:t,end:n,bpPerPixel:i,visibilityWindow:this.visibilityWindow})}hasSamples(){return this.getCallsetsLength()>0}getSamples(){return{yOffset:this.sampleYOffset,names:this.sampleNames,height:this.sampleHeight}}computePixelHeight(e){if(!e||0==e.length)return 10;const t="COLLAPSED"===this.displayMode?1:this.nVariantRows,n="SQUISHED"===this.displayMode?this.squishedVGap:this.expandedVGap,i="SQUISHED"===this.displayMode?this.squishedCallHeight:this.expandedCallHeight;return 10+t*(("SQUISHED"===this.displayMode?this.squishedVariantHeight:this.expandedVariantHeight)+n)+n+(1+(!1===this.showGenotypes?0:this.getCallsetsLength()*t))*(i+n)}variantRowCount(e){this.nVariantRows=e}draw({context:e,pixelWidth:t,pixelHeight:n,bpPerPixel:i,bpStart:r,pixelTop:s,features:o}){Ks.fillRect(e,0,s,t,n,{fillStyle:"rgb(255, 255, 255)"}),this.variantBandHeight=10+("COLLAPSED"===this.displayMode?1:this.nVariantRows)*(("SQUISHED"===this.displayMode?this.squishedVariantHeight:this.expandedVariantHeight)+("SQUISHED"===this.displayMode?this.squishedVGap:this.expandedVGap));const a=this.callSets,l=this.getCallsetsLength();if(a&&l>0&&!1!==this.showGenotypes&&Ks.strokeLine(e,0,this.variantBandHeight,t,this.variantBandHeight,{strokeStyle:"rgb(224,224,224) "}),o){const n="SQUISHED"===this.displayMode?this.squishedCallHeight:this.expandedCallHeight,s="SQUISHED"===this.displayMode?this.squishedVGap:this.expandedVGap,c=r+t*i+1;for(let t of o){if(t.end<r)continue;if(t.start>c)break;const o="SQUISHED"===this.displayMode?this.squishedVariantHeight:this.expandedVariantHeight,h=10+("COLLAPSED"===this.displayMode?0:t.row*(o+s)),u=o;let d=Math.round((t.start-r)/i),p=Math.round((t.end-r)/i),f=Math.max(1,p-d);if(f<3?(f=3,d-=1):f>5&&(d+=1,f-=2),e.fillStyle=this.getVariantColor(t),e.fillRect(d,h,f,u),t.pixelRect={x:d,y:h,w:f,h:u},l>0&&!1!==this.showGenotypes){const i="COLLAPSED"===this.displayMode?1:this.nVariantRows;this.sampleYOffset=this.variantBandHeight+s,this.sampleHeight=i*(n+s);let r=0;for(let o of a){const i=t.calls[o.id];if(i){const a=this.sampleYOffset+r*this.sampleHeight+("COLLAPSED"===this.displayMode?0:t.row)*(n+s);let l=!0,c=!0,h=!1;if(i.genotype)for(let e of i.genotype){if("."===e){h=!0;break}0!==e&&(c=!1),0===e&&(l=!1)}e.fillStyle=i.genotype?h?this.noCallColor:c?this.homrefColor:l?this.homvarColor:this.hetvarColor:this.noGenotypeColor,e.fillRect(d,a,f,n),o.pixelRect={x:d,y:a,w:f,h:n}}r++}}}}else console.log("No feature list")}getVariantColor(e){let t;if(this.colorBy){const n=e.info[this.colorBy];t=this.getVariantColorTable(this.colorBy).getColor(n),t||(t="gray")}else t=this._color?"function"==typeof this._color?this._color(e):this._color:"NONVARIANT"===e.type?this.nonRefColor:"MIXED"===e.type?this.mixedColor:this.defaultColor;return t}popupData(e,t){t=this.clickedFeatures(e,t);const n=e.genomicLocation,i=this.browser.sampleInformation,r="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap,s=r+("SQUISHED"===this.displayMode?this.squishedCallHeight:this.expandedCallHeight),o=e.y;let a,l;if(o<=this.variantBandHeight)a=Math.floor((o-10)/(("SQUISHED"===this.displayMode?this.squishedVariantHeight:this.expandedVariantHeight)+r)),l=-1;else{const e=o-this.variantBandHeight;l=Math.floor(e/this.sampleHeight),a=Math.floor((e-l*this.sampleHeight)/s)}const c=t.filter(e=>e.row===a);let h=[];for(let d of c)if(h.length>0&&h.push({html:'<hr style="border-top-width:2px ;border-color: #c9c3ba" />'}),o<=this.variantBandHeight){const e=d.popupData(n);Array.prototype.push.apply(h,e)}else{const e=this.callSets;e&&d.calls&&l>=0&&l<e.length&&Array.prototype.push.apply(h,u(d.calls[e[l].id],d,0,i))}return h;function u(e,t,n,i){let r=[];if(void 0!==e.callSetName&&r.push({name:"Name",value:e.callSetName}),e.genotype){let n="";if("."===t.alternateBases)n="No Call";else{const i=t.alternateBases.split(",");for(let r of e.genotype)n.length>0&&(n+="|"),n+="."===r?".":0===r?t.referenceBases:i[r-1].replace("<","&lt;")}r.push({name:"Genotype",value:n})}if(void 0!==e.phaseset&&r.push({name:"Phase set",value:e.phaseset}),void 0!==e.genotypeLikelihood&&r.push({name:"genotypeLikelihood",value:e.genotypeLikelihood.toString()}),i){var s=i.getAttributes(e.callSetName);s&&Object.keys(s).forEach(function(e){var t=e.replace(/([A-Z])/g," $1");t=t.charAt(0).toUpperCase()+t.slice(1),r.push({name:t,value:s[e]})})}var o=Object.keys(e.info);return o.length&&r.push("<hr/>"),o.forEach(function(t){r.push({name:t,value:decodeURIComponent(e.info[t])})}),r}}menuItemList(){const e=[];if(this.header.INFO&&this.header.INFO){const t=this.header.INFO.SVTYPE?["SVTYPE"]:[];if(this._initColorBy&&"SVTYPE"!==this._initColorBy&&t.push(this._initColorBy),t.length>0){e.push("<hr/>");const n=pt('<div class="igv-track-menu-category igv-track-menu-border-top">');n.text("Color by:"),e.push({name:void 0,object:n,click:void 0,init:void 0}),t.sort();for(let i of t)e.push(this.colorByCB({key:i,label:i||"None"},this.colorBy===i));e.push(this.colorByCB({key:void 0,label:"None"},void 0===this.colorBy)),e.push("<hr/>")}}this.getCallsetsLength()>0&&(e.push({object:pt('<div class="igv-track-menu-border-top">')}),e.push({object:pt(Ss("Show Genotypes",this.showGenotypes)),click:()=>{this.showGenotypes=!this.showGenotypes,this.trackView.checkContentHeight(),this.trackView.repaintViews()}})),e.push({object:pt('<div class="igv-track-menu-border-top">')});for(let t of["COLLAPSED","SQUISHED","EXPANDED"])e.push({object:pt(Ss({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[t],t===this.displayMode)),click:()=>{this.displayMode=t,this.trackView.checkContentHeight(),this.trackView.repaintViews()}});return e}colorByCB(e,t){return{name:void 0,object:pt(Ss(e.label,t)),click:()=>{e.key===this.colorBy?(this.colorBy=void 0,delete this.config.colorBy,this.trackView.repaintViews()):(this.colorBy=e.key,this.config.colorBy=e.key,this.trackView.repaintViews())},init:void 0}}getState(){const e=super.getState();return this._color&&"function"!=typeof this._color&&(e.color=this._color),e}getVariantColorTable(e){if(this.colorTables||(this.colorTables=new Map),!this.colorTables.has(e)){let t;switch(e){case"SVTYPE":t=su;break;default:t=new io("Set1")}this.colorTables.set(e,t)}return this.colorTables.get(e)}}const su=new ro({DEL:"#ff2101",INS:"#001888",DUP:"#028401",INV:"#008688",CNV:"#8931ff",BND:"#891100","*":"#002eff"});class ou extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.name=e.name,this.pValueField=e.pValueField||"pValue",this.geneField=e.geneField||"geneSymbol",this.snpField=e.snpField||"snp";const t=e.maxLogP||e.max;this.dataRange={min:e.minLogP||e.min||3.5,max:t||25},this.autoscale=!t||e.autoscale,this.autoscalePercentile=void 0===e.autoscalePercentile?98:e.autoscalePercentile,this.background=e.background,this.divider=e.divider||"rgb(225,225,225)",this.dotSize=e.dotSize||2,this.height=e.height||100,this.autoHeight=!1,this.disableButtons=e.disableButtons,this.visibilityWindow=void 0===e.visibilityWindow?2e6:e.visibilityWindow>=0?Math.min(2e6,e.visibilityWindow):2e6,this.featureSource=Ac(e,this.browser.genome),Ic.gtexLoaded=!0}paintAxis(e,t,n){const i=(this.dataRange.max-this.dataRange.min)/n,r={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};Ks.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"});const s=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/n);for(let o=4;o<=this.dataRange.max;o+=s){const s=.85*t,a=s-5,l=n-(o-this.dataRange.min)/i;Ks.strokeLine(e,a,l,s,l,r),l>8&&Ks.fillText(e,o,a-1,l+2,r)}r.textAlign="center",Ks.fillText(e,"-log10(pvalue)",t/4,n/2,r,{rotate:{angle:-90}})}async getFeatures(e,t,n){const i=this.pValueField,r=await this.featureSource.getFeatures({chr:e,start:t,end:n});return r.forEach(function(e){e.value=e[i]}),r}draw(e){const t=e.context,n=e.pixelWidth,i=e.pixelHeight;this.background&&Ks.fillRect(t,0,0,n,i,{fillStyle:this.background}),Ks.strokeLine(t,0,i-1,n,i-1,{strokeStyle:this.divider});const r=r=>{const s=r?2*this.dotSize:this.dotSize,o=e.bpStart,a=(this.dataRange.max-this.dataRange.min)/i,l=e.referenceFrame.selection;for(let h of e.features){const u=(h.start-o+.5)/e.bpPerPixel;if(u<0)continue;if(u>n)break;const d=h.snp.toUpperCase(),p=h[this.geneField].toUpperCase(),f=l&&(l.snp===d||l.gene===p);if(!r||f){l&&l.snp===d&&l.addGene(p);var c=-Math.log(h[this.pValueField])/Math.LN10;if(c>=this.dataRange.min){let e;c>this.dataRange.max?(c=this.dataRange.max,e=!0):e=!1;const n=Math.max(0+s,i-Math.round((c-this.dataRange.min)/a));let o;h.px=u,h.py=n,h.radius=s,r&&l?(o=l.colorForGene(p),Ks.setProperties(t,{fillStyle:o,strokeStyle:"black"})):(o=e?"rgb(150, 150, 150)":"rgb(180, 180, 180)",Ks.setProperties(t,{fillStyle:o,strokeStyle:o})),Ks.fillCircle(t,u,n,s),Ks.strokeCircle(t,u,n,s)}}}};r(!1),r(!0)}popupData(e){let t=e.viewport.getCachedFeatures();if(!t||0===t.length)return[];const n=this.name,i=[];for(let r of t)Math.abs(r.px-e.canvasX)<r.radius+3&&Math.abs(r.py-e.canvasY)<r.radius+3&&(i.length>0&&i.push("<hr/>"),i.push({name:"snp id",value:r.snp},{name:"gene id",value:r.geneId},{name:"gene name",value:r.geneName},{name:"p value",value:r.pValue},{name:"tissue",value:n}));return i}menuItemList(){return Cs.numericDataMenuItems(this.trackView)}doAutoscale(e){if(e.length>0){var t=e.map(function(e){return-Math.log(e.value)/Math.LN10});this.dataRange.max=function(e,t){if(0!==e.length){var n=Math.floor(e.length*((100-t)/100));return 0===n?(e.sort(function(e,t){return t-e}),e[n]):function(e,t){var n,i=new Ur;for(n=0;n<e.length;n++){var r=e[n];(i.content.length<t||r>i.content[0])&&(i.content.length===t&&i.pop(),i.push(r))}return i.content[0]}(e,n)}}(t,this.autoscalePercentile)}else this.dataRange.max=this.config.maxLogP||this.config.max||25;return this.dataRange}}const au={X:"rgb(204, 153, 0)",Y:"rgb(153, 204, 0)",Un:"darkGray)",1:"rgb(80, 80, 255)",I:"rgb(139, 155, 187)",2:"rgb(206, 61, 50)",II:"rgb(206, 61, 50)","2a":"rgb(210, 65, 55)","2b":"rgb(215, 70, 60)",3:"rgb(116, 155, 88)",III:"rgb(116, 155, 88)",4:"rgb(240, 230, 133)",IV:"rgb(240, 230, 133)",5:"rgb(70, 105, 131)",6:"rgb(186, 99, 56)",7:"rgb(93, 177, 221)",8:"rgb(128, 34, 104)",9:"rgb(107, 215, 107)",10:"rgb(213, 149, 167)",11:"rgb(146, 72, 34)",12:"rgb(131, 123, 141)",13:"rgb(199, 81, 39)",14:"rgb(213, 143, 92)",15:"rgb(122, 101, 165)",16:"rgb(228, 175, 105)",17:"rgb(59, 27, 83)",18:"rgb(205, 222, 183)",19:"rgb(97, 42, 121)",20:"rgb(174, 31, 99)",21:"rgb(231, 199, 111)",22:"rgb(90, 101, 94)",23:"rgb(204, 153, 0)",24:"rgb(153, 204, 0)",25:"rgb(51, 204, 0)",26:"rgb(0, 204, 51)",27:"rgb(0, 204, 153)",28:"rgb(0, 153, 204)",29:"rgb(10, 71, 255)",30:"rgb(71, 117, 255)",31:"rgb(255, 194, 10)",32:"rgb(255, 209, 71)",33:"rgb(153, 0, 51)",34:"rgb(153, 26, 0)",35:"rgb(153, 102, 0)",36:"rgb(128, 153, 0)",37:"rgb(51, 153, 0)",38:"rgb(0, 153, 26)",39:"rgb(0, 153, 102)",40:"rgb(0, 128, 153)",41:"rgb(0, 51, 153)",42:"rgb(26, 0, 153)",43:"rgb(102, 0, 153)",44:"rgb(153, 0, 128)",45:"rgb(214, 0, 71)",46:"rgb(255, 20, 99)",47:"rgb(0, 214, 143)",48:"rgb(20, 255, 177)"};for(let ed of Object.keys(au))au["chr"+ed]=au[ed];class lu extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.useChrColors=void 0===e.useChrColors||e.useChrColors,this.trait=e.trait,this.posteriorProbability=e.posteriorProbability,this.valueProperty="bed"===e.format?"score":"value",this.height=e.height||100,e.autoscale||(this.dataRange=e.posteriorProbability?{min:void 0===e.min?0:e.min,max:void 0===e.max?1:e.max}:{min:void 0===e.min?0:e.min,max:void 0===e.max?25:e.max}),this.autoscale=e.autoscale,this.autoscalePercentile=void 0===e.autoscalePercentile?98:e.autoscalePercentile,this.background=e.background,this.divider=e.divider||"rgb(225,225,225)",this.dotSize=e.dotSize||3,this.popoverWindow=void 0===e.popoverWindow?1e8:e.popoverWindow,this.description=e.description,this.colorScales=e.color?new Wc(e.color):{"*":new $c(e.colorScale||{thresholds:[5e-8,5e-4,.5],colors:["rgb(255,50,50)","rgb(251,100,100)","rgb(251,170,170)","rgb(227,238,249)"]})},this.featureSource=Ac(e,this.browser.genome)}supportsWholeGenome(){return!0}async getFeatures(e,t,n){return this.featureSource.getFeatures({chr:e,start:t,end:n})}draw(e){const t=e.features,n=e.context,i=e.pixelWidth,r=e.pixelHeight;if(this.background&&Ks.fillRect(n,0,0,i,r,{fillStyle:this.background}),Ks.strokeLine(n,0,r-1,i,r-1,{strokeStyle:this.divider}),t){const s=e.bpPerPixel,o=e.bpStart,a=o+i*s+1;for(let e of t){const t=e.start;if(t<o)continue;if(t>a)break;const i=this.getColorScale(e._f?e._f.chr:e.chr);let l,c;if(this.posteriorProbability)c=e[this.valueProperty],l=i.getColor(c);else{const t=e[this.valueProperty];if(!t)continue;c=-Math.log10(t),l=i.getColor(c)}const h=(this.dataRange.max-this.dataRange.min)/r,u=Math.round((t-o)/s),d=Math.max(this.dotSize,r-Math.round((c-this.dataRange.min)/h));l&&Ks.setProperties(n,{fillStyle:l,strokeStyle:"black"}),Ks.fillCircle(n,u,d,this.dotSize),e.px=u,e.py=d}}}getColorScale(e){if(this.useChrColors){let t=this.colorScales[e];if(!t){const n=au[e]||oo.get();t=new Wc(n),this.colorScales[e]=t}return t}return this.colorScales("*")}paintAxis(e,t,n){Ks.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"});var i={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};const r=(this.dataRange.max-this.dataRange.min)/n;if(this.posteriorProbability){const t=.1;for(let s=this.dataRange.min;s<this.dataRange.max;s+=t){const t=n-Math.round((s-this.dataRange.min)/r);Ks.strokeLine(e,45,t-2,50,t-2,i),Ks.fillText(e,s.toFixed(1),44,t+2,i)}}else{const t=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/n);for(let s=this.dataRange.min;s<this.dataRange.max;s+=t){const t=n-Math.round((s-this.dataRange.min)/r);Ks.strokeLine(e,45,t,50,t,i),Ks.fillText(e,Math.floor(s),44,t+4,i)}}i.textAlign="center",Ks.fillText(e,this.posteriorProbability?"PPA":"-log10(pvalue)",t/2,n/2,i,{rotate:{angle:-90}})}popupData(e){let t=[];const n=e.viewport.trackView.track,i=e.viewport.getCachedFeatures();if(i){let r=0;for(let s of i){const i=Math.abs(e.canvasX-s.px),o=Math.abs(e.canvasY-s.py),a=s[this.valueProperty];if(i<this.dotSize&&o<this.dotSize){if(r>0&&t.push("<HR/>"),5==r){t.push("...");break}if("function"==typeof s.popupData)t=t.concat(s.popupData());else{const e=(s.realStart||s.start)+1;t.push({name:"chromosome",value:s.realChr||s.chr}),t.push({name:"position",value:e}),t.push({name:"name",value:s.name}),t.push(n.posteriorProbability?{name:"posterior probability",value:a}:{name:"pValue",value:a})}r++}}}return t}menuItemList(){return Cs.numericDataMenuItems(this.trackView)}doAutoscale(e){if(e.length>0){const t=this.valueProperty,n=this.posteriorProbability,i=e.map(function(e){const i=e[t];return{value:n?i:-Math.log(i)/Math.LN10}});this.dataRange=Xo(i)}else this.posteriorProbability?(this.dataRange.min=this.config.min||0,this.dataRange.max=this.config.max||1):(this.dataRange.max=this.config.max||25,this.dataRange.min=this.config.min||0);return this.dataRange}}class cu extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.autoscale=e.autoscale||void 0===e.max,this.dataRange={min:e.min||0,max:e.max},this.windowFunction=e.windowFunction||"mean",this.paintAxis=Hc,this.graphType=e.graphType||"bar",e._featureSource?(this.featureSource=e._featureSource,delete e._featureSource):this.featureSource=Ac(this.config,this.browser.genome)}async postInit(){if("function"==typeof this.featureSource.getHeader&&(this.header=await this.featureSource.getHeader(),this.sampleNames=this.header.columnNames.slice(3),this.setTrackProperties(this.header),this.header.hasOwnProperty("highlight"))){this.config.highlightSamples={};let e=this.header.highlight;Array.isArray(e)||(e=[e]);for(let t of e){const e=t.split(";");2===e.length&&(this.config.highlightSamples[e[0]]=e[1])}}}menuItemList(){return Cs.numericDataMenuItems(this.trackView)}async getFeatures(e,t,n){const i=await this.featureSource.getFeatures({chr:e,start:0,end:Number.MAX_VALUE});let r,s;for(let o=1;o<i.length-1;o++)if(void 0===r&&i[o].end>t&&(r=o-1),void 0===s&&i[o].start>n){s=o+1;break}return void 0===r&&(r=0),void 0===s&&(s=i.length),i.slice(r,s)}draw(e){const{features:t,context:n,bpPerPixel:i,bpStart:r,pixelHeight:s}=e,o=e=>(this.dataRange.max-e)/(this.dataRange.max-this.dataRange.min)*s,a=function(e){let t=Math.floor((e-r)/i);return isNaN(t)&&console.warn("isNaN(x). feature start "+St(e)+" bp start "+St(r)),t};if(t&&t.length>0&&(void 0===this.dataRange.min&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){const e=this.config.highlightSamples,i=this.config.onlyHandleClicksForHighlightedSamples;let r=-1,s={},l=[],c=[];this.clickDetectorCache={};for(let h of t){const t=a(h.start),u=a(h.end),d=r>=0?a(r):t;if(!(isNaN(t)||isNaN(u)||t-d<1&&u-t<1)){this.clickDetectorCache[t]=[],this.clickDetectorCache[u]=[];for(let r=0;r<h.values.length;r++){const a=this.sampleNames[r],p=h.values[r],f=o(p);if(t-d>=1){const r=o(s[a]),c=e&&e[a];c?l.push([d,r,t,f,c]):Ks.strokeLine(n,d,r,t,f,{strokeStyle:"#D9D9D9"}),i&&!(a in e)||this.clickDetectorCache[t].push([d,r,t,f,a,c||"gray"])}if(u-t>=1){const r=e&&e[a];r?c.push([t,f,u,f,r]):Ks.strokeLine(n,t,f,u,f,{strokeStyle:"gray"}),i&&!(a in e)||this.clickDetectorCache[u].push([t,f,u,f,a,r||"gray"])}s[a]=p}r=h.end}}for(let t of l)Ks.strokeLine(n,t[0],t[1],t[2],t[3],{strokeStyle:t[4],lineWidth:1.3});for(let t of c)Ks.strokeLine(n,t[0],t[1],t[2],t[3],{strokeStyle:t[4],lineWidth:2})}(e=>{if(this.config.hasOwnProperty("guideLines"))for(let t of this.config.guideLines)if(t.hasOwnProperty("color")&&t.hasOwnProperty("y")&&t.hasOwnProperty("dotted")){let n=o(t.y),i={strokeStyle:t.color,strokeWidth:2};t.dotted?Ks.dashedLine(e.context,0,n,e.pixelWidth,n,5,i):Ks.strokeLine(e.context,0,n,e.pixelWidth,n,i)}})(e)}doAutoscale(e){let t,n;return e.length>0?(t=Number.MAX_VALUE,n=-Number.MAX_VALUE,e.forEach(function(e){t=Math.min(t,...e.values),n=Math.max(n,...e.values)}),t-=.01,n+=.01):(t=0,n=100),{min:t,max:n}}clickedFeatures(e){const t=e.canvasX,n=e.canvasY;let i=null;for(i of Object.keys(this.clickDetectorCache))if(i=parseInt(i),i>=t)break;if(i){let e=Number.MAX_VALUE,r=[];const s=this.clickDetectorCache[i];for(let i of s){const s=i[0],o=i[2];if(t<s||t>o)return[];const a=i[1],l=i[3];if(n<Math.min(a,l)-10||n>Math.max(a,l)+10)continue;const c=hu(t,n,s,a,o,l);c<e&&(r=[{name:i[4],color:i[5]}],e=c)}if(e<5)return r}return[]}popupData(e,t){t=this.clickedFeatures(e,t);const n=[];return t.forEach(function(e){for(let t of Object.keys(e))Yo(e[t])&&n.push({name:t,value:e[t]})}),n}supportsWholeGenome(){return!1}}function hu(e,t,n,i,r,s){const o=r-n,a=s-i,l=Math.abs(o*(i-t)-(n-e)*a),c=Math.sqrt(o*o+a*a);return c>0?l/c:0}class uu extends ol{constructor(e,t){super(e,t),e.height||(this.height=300),this.arcOrientation=!1,this.theta=Math.PI/2,this.featureSource="bp"===e.format?new pu(e,t.genome):new nc(e,t.genome)}async getFeatures(e,t,n){return this.featureSource.getFeatures({chr:e,start:t,end:n})}draw(e){const t=e.context,n=Math.PI/2,i=e.bpStart,r=e.bpPerPixel,s=this.arcOrientation;Ks.fillRect(t,0,e.pixelTop,e.pixelWidth,e.pixelHeight,{fillStyle:"rgb(255, 255, 255)"});const o=e.features;if(o){du(o,1);for(let e of o)if(e.startLeft){let o=Math.round((e.startLeft-i)/r),a=Math.round((e.startRight-i)/r),l=Math.round((e.endLeft-i)/r),c=Math.round((e.endRight-i)/r);t.fillStyle=e.color,t.strokeStyle=e.color,t.beginPath();let h=(o+c)/2,u=(c-o)/2,d=this.height,p=Math.PI+(Math.PI/2-n),f=2*Math.PI-(Math.PI/2-n);s?(d=0,t.arc(h,d,u,f,p),t.lineTo(c,d)):(t.arc(h,d,u,p,f),t.lineTo(l,d));const m=(a+l)/2,g=(l-a)/2,v=d;s?(t.arc(m,v,g,p,f,!0),t.lineTo(l,v)):(t.arc(m,v,g,f,p,!0),t.lineTo(o,v)),t.stroke(),t.fill(),e.drawState={x1:h,y1:d,r1:u,x2:m,y2:v,r2:g,sa:p,ea:f}}else{let o=Math.round((e.start-i)/r),a=Math.round((e.end-i)/r);t.strokeStyle=e.color,t.beginPath();let l=(o+a)/2,c=(a-o)/2,h=this.height,u=Math.PI+(Math.PI/2-n),d=2*Math.PI-(Math.PI/2-n);s?(h=0,t.arc(l,h,c,d,u)):t.arc(l,h,c,u,d),t.stroke(),e.drawState={x1:l,y1:h,r1:c,sa:u,ea:d}}}}clickedFeatures(e,t){const n=[];du(t=super.clickedFeatures(e,t),-1);for(let i of t){const t=i.drawState,r=e.canvasX-t.x1,s=e.canvasY-t.y1,o=Math.sqrt(r*r+s*s),a=t.r1+3;let l,c;if(void 0===t.x2)l=o,c=t.r1-3;else{const n=e.canvasX-t.x2,i=e.canvasY-t.y2;l=Math.sqrt(n*n+i*i),c=t.r2-3}if(o<a&&l>c){n.push(i);break}}return n}popupData(e,t){if((t=this.clickedFeatures(e,t))&&t.length>0)return ol.extractPopupData(t[0],this.getGenomeId())}menuItemList(){var e=this;return[{name:"Toggle arc direction",click:function(){e.arcOrientation=!e.arcOrientation,e.trackView.repaintViews()}}]}}function du(e,t){e.sort(function(e,n){return(void 0===t?1:t)*((void 0===e.score?-Number.MAX_VALUE:e.score)-(void 0===n.score?-Number.MAX_VALUE:n.score))})}class pu{constructor(e,t){this.config=e,this.genome=t}async getFeatures({chr:e,start:t,end:n}){const i=this.genome;if(this.featureCache)return this.featureCache.queryFeatures(e,t,n);{const r=Zo(this.config),s=await rs.loadString(this.config.url,r);return this.featureCache=new ys(function(e){if(!e)return null;const t=ml(e);let n,i=!0;const r=[],s=[],o=[];for(;void 0!==(n=t.nextLine());){const e=n.split("\t");if(i&&n.startsWith("color:"))r.push("rgb("+e[1]+","+e[2]+","+e[3]+")"),e.length>4&&s.push(e[4]);else{i=!1;const t=e[0],n=Number.parseInt(e[1])-1,l=Number.parseInt(e[2])-1,c=Number.parseInt(e[3]),h=Number.parseInt(e[4]);var a=Number.parseInt(e[5]);const u=r[a];let d;d=n<=h?{chr:t,startLeft:Math.min(n,l),startRight:Math.max(n,l),endLeft:Math.min(c,h),endRight:Math.max(c,h),color:u,score:a}:{chr:t,startLeft:Math.min(c,h),startRight:Math.max(c,h),endLeft:Math.min(n,l),endRight:Math.max(n,l),color:u,score:a},d.start=d.startLeft,d.end=d.endRight,s.length>a&&(d.description=s[a]),o.push(d)}}return o}(s),i),this.featureCache.queryFeatures(e,t,n)}}}class fu{constructor(e){this.browser=e,this.type="ideogram",this.id=this.type,this.height=16,this.order=Number.MIN_SAFE_INTEGER,this.disableButtons=!0,this.ignoreTrackMenu=!0}async getFeatures(e,t,n){return[]}computePixelHeight(e){return this.height}draw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:i}){const r=t.chr,s=t.genome.getChromosome(r);if(void 0===s||n<=0||i<=0||"all"===r.toLowerCase())return;!function({ctx:e,chr:t,genome:n,width:i,height:r,stainColors:s}){if(void 0===n)return;Ks.fillRect(e,0,0,i,r,{fillStyle:Gr.greyScale(255)});const o=n.getCytobands(t);if(o){const t=0+r/2,n=[],a=[];if(0===o.length)return;const l=i/o[o.length-1].end;e.beginPath(),Ks.roundRect(e,.5,.5,i-1,r-1,(r-1)/2,0,1),e.clip();for(let i=0;i<o.length;i++){const c=o[i],h=l*c.start,u=l*c.end;"c"===c.type?("p"===c.name.charAt(0)?(n[0]=h,a[0]=r+0,n[1]=h,a[1]=0,n[2]=u,a[2]=t):(n[0]=u,a[0]=r+0,n[1]=u,a[1]=0,n[2]=h,a[2]=t),e.fillStyle="rgb(150, 0, 0)",e.strokeStyle="rgb(150, 0, 0)",Ks.polygon(e,n,a,1,0)):(e.fillStyle=mu(s,c),Ks.fillRect(e,h,1,u-h,r-2))}}e.strokeStyle=Gr.greyScale(41),Ks.roundRect(e,.5,.5,i-1,r-1,(r-1)/2,0,1)}({ctx:e,chr:r,referenceFrame:t,genome:t.genome,width:n,height:i,stainColors:[]});const o=Math.round(t.bpPerPixel*n),a=t.start;let l=s.bpLength;const c=t.genome.getCytobands(r);if(c&&c.length>0&&c[c.length-1].end&&(l=Math.max(l,c[c.length-1].end),s.bpLength=l),o<l){const t=o/l;let r=Math.floor(a/l*n),s=Math.floor(t*n);r=Math.max(0,r),r=Math.min(n-s,r),e.save(),e.strokeStyle="red",e.lineWidth=s<2?1:2,s=s<2?1:s-e.lineWidth,e.strokeRect(r+e.lineWidth/2,e.lineWidth/2,s,i-e.lineWidth),e.restore()}}dispose(){this.trackView=void 0}}function mu(e,t){if("c"===t.type)return"rgb(150, 10, 10)";var n=230;"p"===t.type&&(n=Math.floor(230-t.stain/100*230));var i=e[n];return i||(e[n]=i="rgb("+n+","+n+","+n+")"),i}let gu=new io("Dark2");["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"].forEach(e=>{gu.getColor(e)});const vu={};class bu extends ol{constructor(e,t){super(e,t)}init(e){super.init(e),this.type=e.type||"junctions",e._featureSource?(this.featureSource=e._featureSource,delete e._featureSource):this.featureSource=e.featureSource?e.featureSource:Ac(e,this.browser.genome),this.margin=void 0===e.margin?10:e.margin,this.height||(this.height=100),void 0===e.colorByNumReadsThreshold&&(e.colorByNumReadsThreshold=5)}async postInit(){return"function"==typeof this.featureSource.getHeader&&(this.header=await this.featureSource.getHeader()),this.header&&this.setTrackProperties(this.header),void 0===this.visibilityWindow&&"function"==typeof this.featureSource.defaultVisibilityWindow&&(this.visibilityWindow=await this.featureSource.defaultVisibilityWindow(),this.featureSource.visibilityWindow=this.visibilityWindow),this}supportsWholeGenome(){return!1}async getFeatures(e,t,n,i){return this.featureSource.getFeatures({chr:e,start:t,end:n,bpPerPixel:i,visibilityWindow:this.visibilityWindow})}computePixelHeight(e){return this.height}draw(e){const t=e.features,n=e.context,i=e.bpPerPixel,r=e.bpStart,s=e.pixelWidth,o=e.pixelHeight,a=r+s*i+1;if(this.config.isMergedTrack||Ks.fillRect(n,0,e.pixelTop,s,o,{fillStyle:"rgb(255, 255, 255)"}),t){vu.referenceFrame=e.viewport.referenceFrame,vu.referenceFrameStart=vu.referenceFrame.start,vu.referenceFrameEnd=vu.referenceFrameStart+vu.referenceFrame.toBP(pt(e.viewport.contentDiv).width()),vu.featureZoomOutTracker={};for(let e of t)if(!(e.end<r)){if(e.start>a)break;this.renderJunction(e,r,i,o,n)}}else console.log("No feature list")}renderJunction(e,t,n,i,r){e.isVisible=!1;const s=Math.round((e.start-t)/n),o=Math.round((e.end-t)/n),a=(s+o)/2;if(o-s<=3){if(a in vu.featureZoomOutTracker)return;vu.featureZoomOutTracker[a]=!0}if(this.config.hideAnnotatedJunctions&&"true"===e.attributes.annotated_junction)return;if(this.config.hideUnannotatedJunctions&&"false"===e.attributes.annotated_junction)return;if(this.config.hideMotifs&&this.config.hideMotifs.includes(e.attributes.motif))return;if(this.config.hideStrand===e.strand)return;if(this.config.minJunctionEndsVisible){let t=0;if(e.start>=vu.referenceFrameStart&&e.start<=vu.referenceFrameEnd&&(t+=1),e.end>=vu.referenceFrameStart&&e.end<=vu.referenceFrameEnd&&(t+=1),t<this.config.minJunctionEndsVisible)return}let l,c,h,u;if(e.attributes.uniquely_mapped){if(l=parseInt(e.attributes.uniquely_mapped),l<this.config.minUniquelyMappedReads)return;if(c=parseInt(e.attributes.multi_mapped),h=l+c,h<this.config.minTotalReads)return;if(h>0&&c/h>this.config.maxFractionMultiMappedReads)return;if(e.attributes.maximum_spliced_alignment_overhang&&parseInt(e.attributes.maximum_spliced_alignment_overhang)<this.config.minSplicedAlignmentOverhang)return}if(e.attributes.num_samples_with_this_junction){if(u=parseInt(e.attributes.num_samples_with_this_junction),this.config.minSamplesWithThisJunction&&u<this.config.minSamplesWithThisJunction)return;if(this.config.maxSamplesWithThisJunction&&u>this.config.maxSamplesWithThisJunction)return;if(e.attributes.num_samples_total&&(e.attributes.percent_samples_with_this_junction=100*u/parseFloat(e.attributes.num_samples_total),this.config.minPercentSamplesWithThisJunction&&(e.attributes.percent_samples_with_this_junction<this.config.minPercentSamplesWithThisJunction||e.attributes.percent_samples_with_this_junction>this.config.maxPercentSamplesWithThisJunction)))return}const d=this.margin,p=this.height,f=d+.5*p;let m=d;const g=d+p-10,v=(s+a)/2,b=(a+o)/2;let y,_,w=1;e.attributes.line_width?w=parseFloat(e.attributes.line_width):(void 0===this.config.thicknessBasedOn||"numUniqueReads"===this.config.thicknessBasedOn?w=l:"numReads"===this.config.thicknessBasedOn?w=h:"numSamplesWithThisJunction"===this.config.thicknessBasedOn&&void 0!==u&&(w=u),w=1+Math.log(w+1)/Math.log(12)),void 0===this.config.bounceHeightBasedOn||"random"===this.config.bounceHeightBasedOn?y=(e.start+e.end)%7:"distance"===this.config.bounceHeightBasedOn?y=6*(e.end-e.start)/(vu.referenceFrameEnd-vu.referenceFrameStart):"thickness"===this.config.bounceHeightBasedOn&&(y=2*w),m+=p*Math.max(7-y,0)/10,_=e.attributes.color?e.attributes.color:void 0===this.config.colorBy||"numUniqueReads"===this.config.colorBy?l>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"numReads"===this.config.colorBy?h>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"isAnnotatedJunction"===this.config.colorBy?"true"===e.attributes.annotated_junction?"#b0b0ec":"orange":"strand"===this.config.colorBy?"+"===e.strand?"#b0b0ec":"#ecb0b0":"motif"===this.config.colorBy?gu.getColor(e.attributes.motif):"#AAAAAA";let x="";e.attributes.label?x=e.attributes.label.replace(/_/g," "):void 0===this.config.labelWith||"uniqueReadCount"===this.config.labelWith?x=l:"totalReadCount"===this.config.labelWith?x=h:"numSamplesWithThisJunction"===this.config.labelWith?void 0!==u&&(x=u):"percentSamplesWithThisJunction"===this.config.labelWith?void 0!==e.attributes.percent_samples_with_this_junction&&(x=e.attributes.percent_samples_with_this_junction.toFixed(0)+"%"):"motif"===this.config.labelWith&&void 0!==e.attributes.motif&&(x+=e.attributes.motif),"uniqueReadCount"===this.config.labelWithInParen?x+=" ("+l+")":"totalReadCount"===this.config.labelWithInParen?x+=" ("+h+")":"multiMappedReadCount"===this.config.labelWithInParen?c>0&&(x+=" (+"+c+")"):"numSamplesWithThisJunction"===this.config.labelWithInParen?void 0!==u&&(x+=" ("+u+")"):"percentSamplesWithThisJunction"===this.config.labelWithInParen?void 0!==e.attributes.percent_samples_with_this_junction&&(x+=" ("+e.attributes.percent_samples_with_this_junction.toFixed(0)+"%)"):"motif"===this.config.labelWithInParen&&void 0!==e.attributes.motif&&(x+=` ${e.attributes.motif}`),e.isVisible=!0,r.beginPath(),r.moveTo(s,g),r.bezierCurveTo(v,m,b,m,o,g),r.lineWidth=w,r.strokeStyle=_,r.stroke();const S=(e,t,n,i)=>{e.beginPath(),e.moveTo(t,n),e.lineTo(t-i/2,n-i),e.lineTo(t+i/2,n-i),e.lineTo(t,n),e.closePath(),e.fill()};if(e.attributes.left_shape||e.attributes.right_shape){r.fillStyle=_;const t=r.lineWidth>2?10:7;e.attributes.left_shape&&S(r,s,g,t),e.attributes.right_shape&&S(r,o,g,t)}r.fillText(x,a-r.measureText(x).width/2,(7*m+f)/8)}clickedFeatures(e,t){return super.clickedFeatures(e,t).filter(function(e){return e.isVisible&&e.attributes})}popupData(e,t){t=this.clickedFeatures(e,t);const n=e.genomicLocation,i=[];for(let r of t){const e="function"==typeof r.popupData?r.popupData(n):this.extractPopupData(r._f||r,this.getGenomeId());e&&(i.length>0&&i.push("<hr/><hr/>"),Array.prototype.push.apply(i,e))}return i}description(){return this.name}dispose(){this.trackView=void 0}}const yu=new Map([["ideogram",(e,t)=>new fu(e,t)],["sequence",(e,t)=>new po(e,t)],["feature",(e,t)=>new Bc(e,t)],["seg",(e,t)=>new Gc(e,t)],["mut",(e,t)=>new Gc(e,t)],["maf",(e,t)=>new Gc(e,t)],["wig",(e,t)=>new qc(e,t)],["merged",(e,t)=>new Zc(e,t)],["alignment",(e,t)=>new Hh(e,t)],["interaction",(e,t)=>new Xh(e,t)],["interact",(e,t)=>new Xh(e,t)],["variant",(e,t)=>new ru(e,t)],["eqtl",(e,t)=>new ou(e,t)],["gwas",(e,t)=>new lu(e,t)],["arc",(e,t)=>new uu(e,t)],["gcnv",(e,t)=>new cu(e,t)],["junction",(e,t)=>new bu(e,t)]]);class _u{constructor(e,t){this.config=e,this.name=e.name,this.roiSource=Ac(e,t),this.color=e.color||"rgba(68, 134, 247, 0.25)"}async getFeatures(e,t,n){return this.roiSource.getFeatures({chr:e,start:t,end:n})}draw(e){var t,n,i,r;if(r=e.features){t=e.bpStart+(e.pixelWidth*e.bpPerPixel+1);for(var s=0,o=r.length;s<o;s++)if(!((n=r[s]).end<e.bpStart)){if(n.start>t)break;i=wu(n,e.bpStart,e.bpPerPixel),Ks.fillRect(e.context,i.x,e.pixelTop,i.width,e.pixelHeight,{fillStyle:this.color})}}}}function wu(e,t,n){var i,r;return i=Math.round((e.start-t)/n),(r=Math.round((e.end-t)/n)-i)<3&&(r=3,i-=1),{x:i,width:r}}class xu{constructor(e,t){const n=(new DOMParser).parseFromString(e,"text/xml");this.processRootNode(n,t);const i=n.getElementsByTagName("Resource"),r=n.getElementsByTagName("Track"),s=r&&r.length>0,o=[];this.tracks=o;const a=new Map;Array.from(i).forEach(function(e,t){var n={url:e.getAttribute("path"),indexURL:e.getAttribute("index"),order:t};a.set(n.url,n),s||o.push(n)}),s&&Array.from(r).forEach(function(e){const t=e.getElementsByTagName("Track");if(t&&t.length>0){const n={type:"merged",tracks:[]};Su(e,n),o.push(n),Array.from(t).forEach(function(e){e.processed=!0;const t=e.getAttribute("id"),i=a.get(t);i&&(n.tracks.push(i),Su(e,i),i.autoscale=!1,n.height=i.height)})}else if(!e.processed){const t=e.getAttribute("id"),n=a.get(t);n&&(o.push(n),Su(e,n))}})}processRootNode(e,t){const n=e.getElementsByTagName("Session").item(0),i=n.getAttribute("genome"),r=n.getAttribute("locus"),s=n.getAttribute("ucscID");t&&t.hasOwnProperty(i)?this.genome=i:(this.reference={fastaURL:i},s&&(this.reference.id=s)),r&&(this.locus=r)}}function Su(e,t){t.name=e.getAttribute("name");const n=e.getAttribute("color");n&&(t.color="rgb("+n+")");const i=e.getAttribute("altColor");n&&(t.altColor="rgb("+i+")");const r=e.getAttribute("height");r&&(t.height=parseInt(r));const s=e.getAttribute("autoScale");s&&(t.autoscale="true"===s);const o=e.getAttribute("autoscaleGroup");o&&(t.autoscaleGroup=o);const a=e.getAttribute("windowFunction");a&&(t.windowFunction=a);const l=e.getAttribute("visibilityWindow")||e.getAttribute("featureVisibilityWindow");l&&(t.visibilityWindow=l);const c=e.getAttribute("indexed");c&&(t.indexed="true"===c);const h=e.getAttribute("normalize");h&&(t.normalize="true"===h);const u=e.getElementsByTagName("DataRange");if(u.length>0){const e=u.item(0);t.min=Number.parseFloat(e.getAttribute("minimum")),t.max=Number.parseFloat(e.getAttribute("maximum")),t.logScale="LOG"===e.getAttribute("type")}}const Cu=Ct;class ku{constructor(){this.attributes={},this.plinkLoaded=!1}async loadPlinkFile(e,t){t||(t={});var n=Zo(t);const i=await rs.loadString(e,n);var r=Cu(i);for(let o of r){var s=o.split(" ");this.attributes[s[1]]={familyId:s[0],fatherId:s[2],motherId:s[3],sex:s[4],phenotype:s[5]}}return this.plinkLoaded=!0,this}getAttributes(e){return this.attributes[e]}getAttributeNames(){return this.hasAttributes()?Object.keys(this.attributes[Object.keys(this.attributes)[0]]):[]}hasAttributes(){return Object.keys(this.attributes).length>0}}class Eu{constructor(e,t){this.geneColors={},this.gene=null,this.snp=null,this.genesCount=0,e&&(this.gene=e.toUpperCase(),this.geneColors[this.gene]=Au[this.genesCount++]),t&&(this.snp=t.toUpperCase())}addGene(e){this.geneColors[e.toUpperCase()]||(this.geneColors[e.toUpperCase()]=Au[this.genesCount++])}colorForGene(e){return this.geneColors[e.toUpperCase()]}}var Au=new Array;Au.push("rgb(228,26,28)"),Au.push("rgb(55,126,184)"),Au.push("rgb(77,175,74)"),Au.push("rgb(166,86,40)"),Au.push("rgb(152,78,163)"),Au.push("rgb(255,127,0)"),Au.push("rgb(247,129,191)"),Au.push("rgb(153,153,153)"),Au.push("rgb(255,255,51)"),Au.push("rgb(102, 194, 165"),Au.push("rgb(252, 141, 98"),Au.push("rgb(141, 160, 203"),Au.push("rgb(231, 138, 195"),Au.push("rgb(166, 216, 84"),Au.push("rgb(255, 217, 47"),Au.push("rgb(229, 196, 148"),Au.push("rgb(179, 179, 179"),Au.push("rgb( 141, 211, 199"),Au.push("rgb(255, 255, 179"),Au.push("rgb(190, 186, 218"),Au.push("rgb(251, 128, 114"),Au.push("rgb(128, 177, 211"),Au.push("rgb(253, 180, 98"),Au.push("rgb(179, 222, 105"),Au.push("rgb(252, 205, 229"),Au.push("rgb(217, 217, 217"),Au.push("rgb(188, 128, 189"),Au.push("rgb(204, 235, 197"),Au.push("rgb(255, 237, 111");class Ru{constructor(e,t,n,i,r){this.genome=e,this.chr=t,this.start=n,this.end=i,this.bpPerPixel=r,this.id=vt()}calculateEnd(e){return this.start+this.bpPerPixel*e}calculateBPP(e,t){return(e-this.start)/t}set(e){this.chr=e.chr,this.start=e.start,this.bpPerPixel=e.bpPerPixel}toPixels(e){return e/this.bpPerPixel}toBP(e){return this.bpPerPixel*e}shiftPixels(e,t){const n=this.start,i=e*this.bpPerPixel;this.start+=i,this.clampStart(t),this.end+=i;const{bpLength:r}=this.genome.getChromosome(this.chr);return this.end=Math.min(r,this.end),n!==this.start}clampStart(e){const t=this.genome.getChromosome(this.chr).bpStart||0;if(this.start=Math.max(t,this.start),e){const{bpLength:t}=this.genome.getChromosome(this.chr),n=t-e*this.bpPerPixel;this.start>n&&(this.start=n)}}async zoomWithScaleFactor(e,t,n,i){const r=void 0===i?this.start+this.toBP(n/2):i,{start:s,bpPerPixel:o}=this.start,{bpLength:a}=this.getChromosome(),l=t<1?e.minimumBases()/n:a/n;this.bpPerPixel=t<1?Math.max(this.bpPerPixel*t,l):Math.min(this.bpPerPixel*t,l);const c=this.bpPerPixel*n;this.start=r-.5*c,this.clampStart(n),this.end=this.start+c,(s!==this.start||o!==this.bpPerPixel)&&await e.updateViews(this)}getChromosome(){return this.genome.getChromosome(this.chr)}getMultiLocusLabel(e){const t=Math.floor(this.start)+1,n=Math.round(this.start+this.bpPerPixel*e);return`${this.chr}&nbsp &nbsp &nbsp${Jo(n-t)}`}getPresentationLocusComponents(e){if("all"===this.chr)return{chr:this.chr};{const t=St(Math.floor(this.start)+1),n=St(Math.round(this.start+this.bpPerPixel*e));return{chr:this.chr,start:t,end:n}}}getLocusString(){if("all"===this.chr)return"all";{const e=St(Math.floor(this.start)+1),t=St(Math.round(this.end));return`${this.chr}:${e}-${t}`}}description(e){console.log(` ${e||""} referenceFrame - ${this.chr} bpp ${this.bpPerPixel.toFixed(3)} start ${St(Math.round(this.start))} end ${St(Math.round(this.end))} `)}}const Tu={A:"rgb(  0, 200,   0)",C:"rgb(  0,0,200)",T:"rgb(255,0,0)",G:"rgb(209,113,  5)",N:"rgb(80,80,80)"},Iu={timeout:5e3,type:"plain",url:"https://igv.org/genomes/locus.php?genome=$GENOME$&name=$FEATURE$",coords:0,chromosomeField:"chromosome",startField:"start",endField:"end",geneField:"gene",snpField:"snp"};class Du{constructor(e){this.browser=e}navbarDidResize(e,t){this.updateNavbar(this.createResponsiveClassSchedule(e,t))}updateNavbar(e){this.browser.$toggle_button_container.removeClass(),this.browser.$toggle_button_container.addClass(e.$toggle_button_container),pt(this.browser.zoomWidget.zoomContainer).removeClass(),pt(this.browser.zoomWidget.zoomContainer).addClass(e.zoomContainer)}createResponsiveClassSchedule(e,t){let n={};return t?this.browser.windowSizePanel.hide():this.browser.windowSizePanel.show(),e>990?(n.$toggle_button_container="igv-navbar-toggle-button-container",n.zoomContainer="igv-zoom-widget"):e>860?(n.$toggle_button_container="igv-navbar-toggle-button-container",n.zoomContainer="igv-zoom-widget-900"):e>540?(n.$toggle_button_container="igv-navbar-toggle-button-container-750",n.zoomContainer="igv-zoom-widget-900"):(n.$toggle_button_container="igv-navbar-toggle-button-container-750",n.zoomContainer="igv-zoom-widget-900",this.browser.windowSizePanel.hide()),t&&(n.zoomContainer="igv-zoom-widget-hidden"),n}}const Ou=function(e,t){this.container=ft({class:"igv-chromosome-select-widget-container"}),t.appendChild(this.container),this.select=document.createElement("select"),this.select.setAttribute("name","chromosome-select-widget"),this.container.appendChild(this.select),this.select.addEventListener("change",()=>{this.select.blur(),""!==this.select.value&&e.search(this.select.value)}),this.showAllChromosomes=!1!==e.config.showAllChromosomes};Ou.prototype.show=function(){this.container.style.display="flex"},Ou.prototype.hide=function(){this.container.style.display="none"},Ou.prototype.update=function(e){const t=this.showAllChromosomes?e.chromosomeNames.slice():e.wgChromosomeNames.slice();e.showWholeGenomeView()&&(t.unshift("all"),t.unshift("")),this.select.innerHTML="";for(let n of t){const e=document.createElement("option");e.setAttribute("value",n),e.innerText=n,this.select.appendChild(e)}};class Pu{constructor(e,t){this.container=ft({class:"igv-windowsize-panel-container"}),e.appendChild(this.container),t.on("locuschange",e=>{this.updatePanel(e)}),this.browser=t}show(){this.container.style.display="block"}hide(){this.container.style.display="none"}updatePanel(e){const t=this.browser.calculateViewportWidth(this.browser.referenceFrameList.length);this.container.innerText=1===e.length?Jo(Math.round(t*e[0].bpPerPixel)):""}}class Mu{constructor(e,t){this.browser=t,this.columnContainer=e,this.horizontalGuide=ft({class:"igv-cursor-guide-horizontal"}),e.appendChild(this.horizontalGuide),this.verticalGuide=ft({class:"igv-cursor-guide-vertical"}),e.appendChild(this.verticalGuide),this.addMouseHandler(t),this.setVisibility(t.config.showCursorTrackingGuide)}addMouseHandler(e){this.boundMouseMoveHandler=(function(t){const{x:n,y:i}=bt(t,this.columnContainer);this.horizontalGuide.style.top=`${i}px`;const r=document.elementFromPoint(t.clientX,t.clientY);let s;if(r.parentElement.classList.contains("igv-viewport-content")?s=r.parentElement.parentElement:r.parentElement.classList.contains("igv-viewport")&&r.classList.contains("igv-viewport-content")&&(s=r.parentElement),s&&e.getRulerTrackView()){this.verticalGuide.style.left=`${n}px`;const i=e.root.querySelectorAll(".igv-column");let r;const o=s.parentElement;for(let e=0;e<i.length;e++)void 0===r&&o===i[e]&&(r=e);const a=e.getRulerTrackView().viewports[r].mouseMove(t);if(a){const{start:e,bp:t,end:n}=a,i=(t-e)/(n-e);this.customMouseHandler&&this.customMouseHandler({start:e,bp:t,end:n,interpolant:i})}}}).bind(this),this.columnContainer.addEventListener("mousemove",this.boundMouseMoveHandler)}removeMouseHandler(){this.columnContainer.removeEventListener("mousemove",this.boundMouseMoveHandler)}setVisibility(e){!0===e?this.show():this.hide()}show(){this.verticalGuide.style.display="block",this.horizontalGuide.style.display="block"}hide(){if(this.verticalGuide.style.display="none",this.horizontalGuide.style.display="none",this.browser.getRulerTrackView())for(let e of this.browser.getRulerTrackView().viewports)e.$tooltip.hide()}}class Lu{constructor(e,t){this.browser=e,this.button=ft({class:"igv-navbar-button"}),t.appendChild(this.button),this.button.textContent="cursor guide",this.button.addEventListener("click",()=>{e.cursorGuideVisible=!e.cursorGuideVisible,e.setCursorGuideVisibility(e.cursorGuideVisible),this.setButtonState(e.cursorGuideVisible)}),this.setButtonState(e.cursorGuideVisible),e.config.showCursorTrackingGuideButton?this.show():this.hide()}setButtonState(e){!0===e?this.button.classList.add("igv-navbar-button-clicked"):this.button.classList.remove("igv-navbar-button-clicked")}show(){this.button.style.display="block",this.setButtonState(this.browser.cursorGuideVisible)}hide(){this.button.style.display="none"}}class Fu{constructor(e,t){this.browser=e,this.button=ft({class:"igv-navbar-button"}),t.appendChild(this.button),this.button.textContent="center line",this.button.addEventListener("click",()=>{e.isCenterLineVisible=!e.isCenterLineVisible,e.setCenterLineVisibility(e.isCenterLineVisible),this.setButtonState(e.isCenterLineVisible)}),this.setButtonState(e.isCenterLineVisible),e.config.showCenterGuideButton?this.show():this.hide()}setButtonState(e){!0===e?this.button.classList.add("igv-navbar-button-clicked"):this.button.classList.remove("igv-navbar-button-clicked")}show(){this.isVisible=!0,this.button.style.display="block",this.setButtonState(this.browser.isCenterLineVisible)}hide(){this.isVisible=!1,this.button.style.display="none"}}const Nu=function(e,t){this.button=ft({class:"igv-navbar-button"}),e.appendChild(this.button),this.button.textContent="track labels",this.button.addEventListener("click",()=>{t.trackLabelsVisible=!t.trackLabelsVisible,this.setState(t.trackLabelsVisible),t.setTrackLabelVisibility(t.trackLabelsVisible)}),this.browser=t,this.setVisibility(t.config.showTrackLabelButton),this.setState(t.trackLabelsVisible)};Nu.prototype.setVisibility=function(e){!0===e?this.show():this.hide()},Nu.prototype.setState=function(e){!0===e?this.button.classList.add("igv-navbar-button-clicked"):this.button.classList.remove("igv-navbar-button-clicked")},Nu.prototype.show=function(){this.button.style.display="block",this.setState(this.browser.trackLabelsVisible)},Nu.prototype.hide=function(){this.button.style.display="none"};class zu{constructor(e,t){this.button=ft({class:"igv-navbar-button"}),e.appendChild(this.button),this.button.innerText="Sample Names",this.setState(t.showSampleNames),this.setVisibility(t.showSampleNameButton),this.button.addEventListener("click",()=>{t.showSampleNames=!t.showSampleNames,this.setState(t.showSampleNames);for(let{sampleNameViewport:e}of t.trackViews)!1===t.showSampleNames?e.hide():e.show();t.resize()})}setVisibility(e){!0===e?this.show():this.hide()}setState(e){!0===e?this.button.classList.add("igv-navbar-button-clicked"):this.button.classList.remove("igv-navbar-button-clicked")}hide(){this.button.style.display="none"}show(){this.button.style.display="block"}}let Vu=23,ju=0;const Bu=function(e,t){this.browser=e,this.zoomContainer=ft({class:"igv-zoom-widget"}),t.appendChild(this.zoomContainer),this.zoomOutButton=ft(),this.zoomContainer.appendChild(this.zoomOutButton),this.zoomOutButton.appendChild(yt("minus-circle")),this.zoomOutButton.addEventListener("click",()=>{e.zoomOut()});const n=ft();this.zoomContainer.appendChild(n),this.slider=document.createElement("input"),this.slider.type="range",this.slider.min="0",this.slider.max=`${Vu}`,n.appendChild(this.slider),this.slider.addEventListener("change",t=>{t.preventDefault(),t.stopPropagation();const n=e.referenceFrameList[0],{bpLength:i}=n.genome.getChromosome(n.chr),{end:r,start:s}=n,o=r-s,a=Math.pow(2,t.target.valueAsNumber);e.zoomWithScaleFactor(i/a/o)}),this.zoomInButton=ft(),this.zoomContainer.appendChild(this.zoomInButton),this.zoomInButton.appendChild(yt("plus-circle")),this.zoomInButton.addEventListener("click",()=>{e.zoomIn()}),e.on("locuschange",e=>{this.browser.isMultiLocusMode()?this.disable():(this.enable(),this.update(e))})};Bu.prototype.update=function(e){const t=e[0],{bpLength:n}=t.genome.getChromosome(t.chr),{start:i,end:r}=t;Vu=Math.ceil(Math.log2(n/this.browser.minimumBases())),this.slider.max=`${Vu}`,ju=Math.log2(n/(r-i)),this.slider.value=`${Math.round(ju)}`},Bu.prototype.enable=function(){this.slider.disabled=!1},Bu.prototype.disable=function(){this.slider.disabled=!0},Bu.prototype.hide=function(){this.zoomContainer.style.display="none"},Bu.prototype.show=function(){this.zoomContainer.style.display="block"},Bu.prototype.hideSlider=function(){this.slider.style.display="none"},Bu.prototype.showSlider=function(){this.slider.style.display="block"};const Hu=function(e,t){const n=ft({class:"igv-navbar-button"});e.append(n),n.textContent="Save SVG",n.addEventListener("click",()=>t.saveSVGtoFile({}))};class qu{constructor(e,t,n){this.browser=e,this.referenceFrame=t,this.column=n,this.container=ft({class:"igv-center-line"}),n.appendChild(this.container),e.isCenterLineVisible?this.show():this.hide()}repaint(){const{x:e}=this.column.getBoundingClientRect(),t=Math.floor(e+.5*this.browser.calculateViewportWidth(this.browser.referenceFrameList.length));this.referenceFrame&&(1/this.referenceFrame.bpPerPixel>1?(this.container.style.left=`${t}px`,this.container.style.width=`${Math.floor(this.referenceFrame.toPixels(1))}px`,this.container.classList.remove("igv-center-line-thin"),this.container.classList.add("igv-center-line-wide")):(this.container.style.left=`${t}px`,this.container.style.width="1px",this.container.classList.remove("igv-center-line-wide"),this.container.classList.add("igv-center-line-thin")))}show(){this.isVisible=!0,this.container.style.display="block",this.repaint()}hide(){this.isVisible=!1,this.container.style.display="none"}resize(){this.repaint()}}const $u=St;class Uu{constructor(e){this.browser=e,this.height=40,this.name="",this.id="ruler",this.disableButtons=!0,this.ignoreTrackMenu=!0,this.order=.01*Number.MIN_SAFE_INTEGER,this.removable=!1,this.type="ruler"}async getFeatures(e,t,n){return[]}computePixelHeight(e){return this.height}draw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:i,bpPerPixel:r,bpStart:s}){Po.isWholeGenomeView(t.chr)?this.drawWholeGenome({context:e,pixelWidth:n,pixelHeight:i,bpPerPixel:r}):this.doDraw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:i,bpStart:s})}drawWholeGenome({context:e,pixelWidth:t,pixelHeight:n,bpPerPixel:i}){e.save(),Ks.fillRect(e,0,0,t,n,{fillStyle:"white"});for(let r of this.browser.genome.wgChromosomeNames){let t=this.browser.genome.getCumulativeOffset(r),s=this.browser.genome.getChromosome(r).bpLength,o=Math.round(t/i),a=Math.round(s/i);this.renderChromosomeRect(e,o,0,a,n,r)}e.restore()}doDraw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:i,bpStart:r}){e.clearRect(0,0,n,i);const s=function(e,t){if(e<10)return new Wu(1,"bp",1);const n=Math.floor(Math.log10(e));let i="bp",r=1;n>9?(i="gb",r=1e9):n>6?(i="mb",r=1e6):n>3&&(i="kb",r=1e3);const s=e/Math.pow(10,n-1),o=Math.pow(10,n-1),a=Math.pow(10,n)/2;return new Wu(s<75&&!0!==t?o:a,i,r)}(Math.floor(t.toBP(n)),e.isSVG);let o=Math.floor(r/s.majorTick)-1;const{tickDelta:a,labelLength:l}=function(e,t,n,i,r){const s=l(t,a(1+i,r),n)-l(t,a(i,r),n),o=`${St(Math.floor(a(i,r)/r.unitMultiplier))} ${r.majorUnit}`;return{tickDelta:s,labelLength:Math.floor(e.measureText(o).width)};function a(e,t){return Math.floor(e*t.majorTick)}function l(e,t,n){return Math.round(e.toPixels(t-1-n+.5))}}(e,t,r,o,s);let c,h;this.browser.referenceFrameList.indexOf(t);let u=a;const d=.25*l;do{h=Math.floor(o*s.majorTick);const n=`${St(Math.floor(h/s.unitMultiplier))} ${s.majorUnit}`;c=Math.round(t.toPixels(h-1-r+.5));const i=Math.round(c-e.measureText(n).width/2);i>0&&d+l<=u&&(Ks.fillText(e,n,i,this.height-8),u=0),c>0&&Ks.strokeLine(e,c,this.height-6,c,this.height-2),h=Math.floor((1+o)*s.majorTick);let p=c+(Math.round(t.toPixels(h-1-r+.5))-c)/2;p>0&&Ks.strokeLine(e,p,this.height-6,p,this.height-2),++o,u+=a}while(c<n);Ks.strokeLine(e,0,this.height-2,n,this.height-2)}renderChromosomeRect(e,t,n,i,r,s){e.textAlign="center",e.textBaseline="middle",e.font="12px sans-serif",Ks.strokeLine(e,t+i,n,t+i,n+r,{strokeStyle:Gr.greyScale(191)});const o=s.startsWith("chr")?s.substring(3):s;i>e.measureText(o).width&&Ks.fillText(e,o,t+i/2,n+r/2,{fillStyle:Gr.greyScale(68)})}supportsWholeGenome(){return!0}dispose(){}}class Wu{constructor(e,t,n){this.majorTick=e,this.minorTick=e/10,this.majorUnit=t,this.unitMultiplier=n}description(e){console.log((e||"")+" tick "+$u(this.majorTick)+" label width "+$u(this.labelWidthBP)+" multiplier "+this.unitMultiplier)}}class Gu{constructor(e,t){this.config=e,this.guid=vt(),this.namespace=".browser_"+this.guid,this.parent=t,this.root=ft({class:"igv-container"}),t.appendChild(this.root),js.init(this.root),this.columnContainer=ft({class:"igv-column-container"}),this.root.appendChild(this.columnContainer),this.menuPopup=new ca(this.columnContainer),this.initialize(e),this.trackViews=[],this.constants={dragThreshold:3,scrollThreshold:5,defaultColor:"rgb(0,0,150)",doubleClickDelay:e.doubleClickDelay||500},this.eventHandlers={},this.addMouseHandlers(),this.setControls(e)}initialize(e){e.gtex&&(Ic.gtexLoaded=!0),this.flanking=e.flanking,this.crossDomainProxy=e.crossDomainProxy,this.formats=e.formats,this.trackDefaults=e.trackDefaults,this.nucleotideColors=e.nucleotideColors||Tu;for(let t of Object.keys(this.nucleotideColors))this.nucleotideColors[t.toLowerCase()]=this.nucleotideColors[t];this.trackLabelsVisible=e.showTrackLabels,this.isCenterLineVisible=e.showCenterGuide,this.cursorGuideVisible=e.showCursorTrackingGuide,this.showSampleNames=e.showSampleNames,this.showSampleNameButton=e.showSampleNameButton,this.sampleNameViewportWidth=e.sampleNameViewportWidth||200,e.search&&(this.searchConfig={type:"json",url:e.search.url,coords:void 0===e.search.coords?1:e.search.coords,chromosomeField:e.search.chromosomeField||"chromosome",startField:e.search.startField||"start",endField:e.search.endField||"end",geneField:e.search.geneField||"gene",snpField:e.search.snpField||"snp",resultsField:e.search.resultsField})}setControls(e){const t=this.createStandardControls(e);t.insertBefore(pt(this.columnContainer)),this.$navigation=t,!1===e.showControls&&t.hide()}createStandardControls(e){this.navbarManager=new Du(this);const t=pt("<div>",{class:"igv-navbar"});this.$navigation=t;const n=pt("<div>",{class:"igv-navbar-left-container"});t.append(n);const i=pt("<div>",{class:"igv-logo"});n.append(i);const r=pt('<svg width="690px" height="324px" viewBox="0 0 690 324" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>IGV</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="IGV" fill="#666666"><polygon id="Path" points="379.54574 8.00169252 455.581247 8.00169252 515.564813 188.87244 532.884012 253.529506 537.108207 253.529506 554.849825 188.87244 614.833392 8.00169252 689.60164 8.00169252 582.729511 320.722144 486.840288 320.722144"></polygon><path d="M261.482414,323.793286 C207.975678,323.793286 168.339046,310.552102 142.571329,284.069337 C116.803612,257.586572 103.919946,217.158702 103.919946,162.784513 C103.919946,108.410325 117.437235,67.8415913 144.472217,41.0770945 C171.507199,14.3125977 212.903894,0.930550071 268.663545,0.930550071 C283.025879,0.930550071 298.232828,1.84616386 314.284849,3.6774189 C330.33687,5.50867394 344.839793,7.97378798 357.794056,11.072835 L357.794056,68.968378 C339.48912,65.869331 323.578145,63.5450806 310.060654,61.9955571 C296.543163,60.4460336 284.574731,59.6712835 274.154998,59.6712835 C255.850062,59.6712835 240.502308,61.4320792 228.111274,64.9537236 C215.720241,68.4753679 205.793482,74.2507779 198.330701,82.2801269 C190.867919,90.309476 185.587729,100.87425 182.48997,113.974767 C179.392212,127.075284 177.843356,143.345037 177.843356,162.784513 C177.843356,181.942258 179.251407,198.000716 182.067551,210.960367 C184.883695,223.920018 189.671068,234.41436 196.429813,242.443709 C203.188559,250.473058 212.059279,256.178037 223.042241,259.558815 C234.025202,262.939594 247.683295,264.629958 264.01693,264.629958 C268.241146,264.629958 273.098922,264.489094 278.590403,264.207362 C284.081883,263.925631 289.643684,263.50304 295.275972,262.939577 L295.275972,159.826347 L361.595831,159.826347 L361.595831,308.579859 C344.698967,313.087564 327.239137,316.750019 309.215815,319.567334 C291.192494,322.38465 275.281519,323.793286 261.482414,323.793286 L261.482414,323.793286 L261.482414,323.793286 Z" id="Path"></path>;<polygon id="Path" points="0.81355666 5.00169252 73.0472883 5.00169252 73.0472883 317.722144 0.81355666 317.722144"></polygon></g> </g> </svg>');r.css("width","34px"),r.css("height","32px"),i.append(r),this.$current_genome=pt("<div>",{class:"igv-current-genome"}),n.append(this.$current_genome),this.$current_genome.text("");const s=pt("<div>",{class:"igv-navbar-genomic-location"});n.append(s),this.chromosomeSelectWidget=new Ou(this,s.get(0)),void 0===e.showChromosomeWidget&&(e.showChromosomeWidget=!0),!0===e.showChromosomeWidget?this.chromosomeSelectWidget.show():this.chromosomeSelectWidget.hide();const o=pt("<div>",{class:"igv-locus-size-group"});s.append(o);const a=pt("<div>",{class:"igv-search-container"});o.append(a),this.$searchInput=pt("<input>",{class:"igv-search-input",type:"text",placeholder:"Locus Search"}),a.append(this.$searchInput),this.$searchInput.change(()=>this.doSearch(this.$searchInput.val()));const l=ft({class:"igv-search-icon-container"});a.append(pt(l)),l.appendChild(yt("search")),l.addEventListener("click",()=>this.doSearch(this.$searchInput.val())),this.windowSizePanel=new Pu(o.get(0),this);const c=pt("<div>",{class:"igv-navbar-right-container"});t.append(c);const h=pt('<div class="igv-navbar-toggle-button-container">');return c.append(h),this.$toggle_button_container=h,this.cursorGuide=new Mu(this.columnContainer,this),this.cursorGuideButton=new Lu(this,h.get(0)),this.centerLineButton=new Fu(this,h.get(0)),this.setTrackLabelVisibility(e.showTrackLabels),this.trackLabelControl=new Nu(h.get(0),this),this.sampleNameControl=new zu(h.get(0),this),!0===e.showSVGButton&&(this.svgSaveControl=new Hu(h.get(0),this)),this.zoomWidget=new Bu(this,c.get(0)),!1===e.showNavigation&&this.$navigation.hide(),this.inputDialog=new Bs(this.root),this.inputDialog.container.id=`igv-input-dialog-${vt()}`,this.dataRangeDialog=new Xs(pt(this.root)),this.dataRangeDialog.$container.get(0).id=`igv-data-range-dialog-${vt()}`,this.genericColorPicker=new la({parent:this.columnContainer,width:432}),this.genericColorPicker.container.id=`igv-track-color-picker-${vt()}`,t}getSampleNameViewportWidth(){return!1===this.showSampleNames?0:this.sampleNameViewportWidth}isMultiLocusMode(){return this.referenceFrameList&&this.referenceFrameList.length>1}addTrackToFactory(e,t){!function(e,t){yu.set(e,t)}(e,t)}isMultiLocusWholeGenomeView(){if(void 0===this.referenceFrameList||1===this.referenceFrameList.length)return!1;for(let e of this.referenceFrameList)if("all"===e.chr.toLowerCase())return!0;return!1}toSVG(){let{y:e,width:t,height:n}=this.columnContainer.getBoundingClientRect(),i=new xo({width:t,height:8e3,backdropColor:"white",multiLocusGap:0,viewbox:{x:0,y:0,width:t,height:8e3}});for(let r of this.trackViews)r.renderSVGContext(i,{deltaX:0,deltaY:-e});return i.setHeight(n),i.getSerializedSvg(!0)}renderSVG(e){const t=this.toSVG();return e.empty(),e.append(t),t}saveSVGtoFile(e){let t=this.toSVG();e.$container&&(e.$container.empty(),e.$container.append(t)),Ht(e.filename||"igvjs.svg",URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})))}async loadSession(e){let t;return this.roi=[],t=e.url||e.file?await async function(e){const t=e.url||e.file;if(e.url&&(e.url.startsWith("blob:")||e.url.startsWith("data:"))){const t=Gu.uncompressSession(e.url);return JSON.parse(t)}{let n=e.filename;if(n||(n=e.url?await Qo(e.url):e.file.name),n.endsWith(".xml")){const e=Po.KNOWN_GENOMES,n=await rs.loadString(t);return new xu(n,e)}return n.endsWith(".json")?rs.loadJson(t):void 0}}(e):e,this.loadSessionObject(t)}async loadSessionObject(e){this.cleanHouseForSession(),this.showSampleNames=e.showSampleNames||!1,this.sampleNameControl.setState(!0===this.showSampleNames),e.sampleNameViewportWidth&&(this.sampleNameViewportWidth=e.sampleNameViewportWidth),ta(this.columnContainer,"igv-axis-column"),ta(this.columnContainer,"igv-sample-name-column"),ta(this.columnContainer,"igv-scrollbar-column"),ta(this.columnContainer,"igv-track-drag-column"),ta(this.columnContainer,"igv-gear-menu-column");const t=await Po.expandReference(e.reference||e.genome);if(await this.loadReference(t,e.locus),this.centerLineList=this.createCenterLineList(this.columnContainer),!1!==e.showIdeogram&&this.trackViews.push(new pa(this,this.columnContainer,new fu(this))),!1!==e.showRuler&&this.trackViews.push(new pa(this,this.columnContainer,new Uu(this))),e.gtexSelections)for(let s of this.referenceFrameList)for(let t of Object.keys(e.gtexSelections))s.selection=new Eu(e.gtexSelections[t].gene,e.gtexSelections[t].snp);if(e.roi){this.roi=[];for(let t of e.roi)this.roi.push(new _u(t,this.genome))}const n=t.tracks||[],i=e.tracks?n.concat(e.tracks):n;0===i.filter(e=>"sequence"===e.type).length&&i.push({type:"sequence",order:ao});let r=1;for(let s of i)void 0===s.order&&(s.order=r++);await this.loadTrackList(i),this.updateUIWithReferenceFrameList()}createCenterLineList(e){const t=e.querySelectorAll(".igv-center-line");for(let r=0;r<t.length;r++)t[r].remove();const n=[],i=e.querySelectorAll(".igv-column");for(let r=0;r<i.length;r++)n.push(new qu(this,this.referenceFrameList[r],i[r]));return n}async loadReference(e,t){const n=await Po.loadGenome(e),i=void 0===this.genome||this.genome.id!==n.id;this.genome=n,this.updateNavbarDOMWithGenome(n),i&&this.removeAllTracks();let r=function(e,t){return e?Array.isArray(e)?e.join(" "):e:t.getHomeChromosomeName()}(t,n);if(!(await this.search(r,!0))&&(console.log("Initial locus not found: "+r),r=n.getHomeChromosomeName(),!(await this.search(r,!0))))throw new Error("Cannot set initial locus")}cleanHouseForSession(){for(let e of this.trackViews)e.removeDOMFromColumnContainer();this.columnContainer.querySelectorAll(".igv-axis-column, .igv-column-shim, .igv-column, .igv-sample-name-column, .igv-scrollbar-column, .igv-track-drag-column, .igv-gear-menu-column").forEach(e=>e.remove()),this.trackViews=[]}updateNavbarDOMWithGenome(e){this.$current_genome.text(e.id||""),this.$current_genome.attr("title",e.id||""),this.chromosomeSelectWidget.update(e)}async loadGenome(e){const t=await Po.expandReference(e);await this.loadReference(t,void 0);const n=t.tracks||[];return 0===n.filter(e=>"sequence"===e.type).length&&n.push({type:"sequence",order:ao}),await this.loadTrackList(n),await this.updateViews(),this.genome}updateUIWithReferenceFrameList(){const e=this.referenceFrameList;this.updateLocusSearchWidget();const t=this.isMultiLocusWholeGenomeView()||Po.isWholeGenomeView(e[0].chr);this.navbarManager.navbarDidResize(this.$navigation.width(),t),Xu(this.trackViews,this.trackLabelsVisible),this.setCenterLineAndCenterLineButtonVisibility(!Po.isWholeGenomeView(e[0].chr))}setTrackLabelVisibility(e){Xu(this.trackViews,e)}setCursorGuideVisibility(e){e?this.cursorGuide.show():this.cursorGuide.hide()}setCustomCursorGuideMouseHandler(e){this.cursorGuide.customMouseHandler=e}setCenterLineVisibility(e){for(let t of this.centerLineList)!0===e?(t.show(),t.repaint()):t.hide()}setCenterLineAndCenterLineButtonVisibility(e){for(let t of this.centerLineList)e&&t.isVisible?t.show():t.container.style.display="none";e&&this.centerLineButton.isVisible?this.centerLineButton.show():this.centerLineButton.button.style.display="none"}async loadTrackList(e){try{const t=[];for(let r of e)t.push(this.loadTrack(r,!1));const n=await Promise.all(t),i=this.trackViews.filter(function(e){return e.track.autoscaleGroup});return i.length>0&&this.updateViews(i),n}finally{await this.resize()}}async loadROI(e){if(this.roi||(this.roi=[]),Array.isArray(e))for(let t of e)this.roi.push(new _u(t,this.genome));else this.roi.push(new _u(e,this.genome));await this.updateViews(!0)}removeROI(e){for(let t=0;t<this.roi.length;t++)if(this.roi[t].name===e.name){this.roi.splice(t,1);break}for(let t of this.trackViews)t.updateViews(!0)}clearROIs(){this.roi=[];for(let e of this.trackViews)e.updateViews(!0)}getRulerTrackView(){const e=this.trackViews.filter(({track:e})=>"ruler"===e.id);return e.length>0?e[0]:void 0}async loadTrack(e,t){xt(e)&&(e=JSON.parse(e));try{const n=await this.createTrack(e);if(void 0===n)return js.presentAlert(new Error(`Unknown file type: ${e.url||e}`),void 0),n;void 0===n.order&&(n.order=this.trackViews.length);const i=new pa(this,this.columnContainer,n);if(this.trackViews.push(i),Xu(this.trackViews,this.trackLabelsVisible),this.reorderTracks(),this.fireEvent("trackorderchanged",[this.getTrackOrder()]),"function"==typeof n.postInit)try{i.startSpinner(),await n.postInit()}finally{i.stopSpinner()}return n.autoscaleGroup||(e.sync?await i.updateViews():i.updateViews()),"function"==typeof n.hasSamples&&n.hasSamples()&&!1!==this.config.showSampleNameButton&&this.sampleNameControl.show(),n}catch(n){const t={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};console.error(n);let i=n.message||n.error||n.toString();t.hasOwnProperty(i)&&(i=t[i]),i+=": "+e.url,js.presentAlert(new Error(i),void 0)}finally{!1===t||await this.resize()}}async createTrack(e){let t=await async function(e){return"function"==typeof e?e():e}(e.url);if(xt(t)&&(t=t.trim()),t)if(e.format)e.format=e.format.toLowerCase();else{let n=e.filename;n||(n=await Qo(t)),e.format=function(e){var t,n;if((e=e.toLowerCase()).endsWith("refgene.txt.gz")||e.endsWith("refgene.txt.bgz")||e.endsWith("refgene.txt")||e.endsWith("refgene.sorted.txt.gz")||e.endsWith("refgene.sorted.txt.bgz"))return"refgene";switch((t=e.indexOf("?"))>0&&(e=e.substr(0,t)),e.endsWith(".gz")&&(e=e.substr(0,e.length-3)),(e.endsWith(".txt")||e.endsWith(".tab")||e.endsWith(".bgz"))&&(e=e.substr(0,e.length-4)),n=(t=e.lastIndexOf("."))<0?e:e.substr(t+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return eo.has(n)?n:void 0}}(n),e.format||void 0!==e.sourceType&&"htsget"!==e.sourceType||await Ql.inferFormat(e)}let n=e.type?e.type.toLowerCase():void 0;if(!n){if(n=function(e){if(function(e){e.featureType&&(e.type=e.type||e.featureType,e.featureType=void 0),"junctions"===e.type?e.type="junction":"bed"===e.type?(e.type="annotation",e.format=e.format||"bed"):"annotations"===e.type?e.type="annotation":"alignments"===e.type?e.type="alignment":"bam"===e.type?(e.type="alignment",e.format="bam"):"vcf"===e.type?(e.type="variant",e.format="vcf"):"t2d"===e.type?e.type="gwas":"FusionJuncSpan"!==e.type||e.format?"aed"===e.type&&(e.type="annotation",e.format=e.format||"aed"):e.format="fusionjuncspan"}(e),e.type)return e.type;if(e.format)switch(e.format.toLowerCase()){case"bw":case"bigwig":case"wig":case"bedgraph":case"tdf":return"wig";case"vcf":return"variant";case"seg":return"seg";case"mut":case"maf":return"mut";case"bam":case"cram":return"alignment";case"bedpe":case"bedpe-loop":return"interact";case"bp":return"arc";case"gwas":return"gwas";case"bed":case"bigbed":case"bb":return"bedtype";default:return"annotation"}}(e),"bedtype"===n){const t=Ac(e,this.genome);e._featureSource=t,n=await t.trackType()||"annotation"}e.type=n}if(this.trackDefaults&&n){const t=this.trackDefaults[n];if(t)for(let n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n])}const i=function(e,t,n){let i;switch(e){case"annotation":case"genes":case"fusionjuncspan":case"snp":i="feature";break;case"seg":case"maf":case"mut":i="seg";break;case"junctions":case"splicejunctions":i="junction";break;default:i=e}return yu.has(i)?yu.get(i)(t,n):void 0}(n,e,this);if(i&&e.roi){i.roi=[];for(let t of e.roi)i.roi.push(new _u(t,this.genome))}return i}reorderTracks(){this.trackViews.sort(function(e,t){const n=e=>"ideogram"===e.track.id?1:"ruler"===e.track.id?2:3,i=n(e),r=n(t);return i===r?(e.track.order||0)-(t.track.order||0):i-r});for(let{axis:t,viewports:n,sampleNameViewport:i,outerScroll:r,dragHandle:s,gearContainer:o}of this.trackViews){t.remove();for(let{$viewport:e}of n)e.detach();i.viewport.remove(),r.remove(),s.remove(),o.remove()}const e=this.columnContainer.querySelectorAll(".igv-column");for(let{axis:t,viewports:n,sampleNameViewport:i,outerScroll:r,dragHandle:s,gearContainer:o}of this.trackViews){this.columnContainer.querySelector(".igv-axis-column").appendChild(t);for(let t=0;t<e.length;t++){const{$viewport:i}=n[t];e[t].appendChild(i.get(0))}this.columnContainer.querySelector(".igv-sample-name-column").appendChild(i.viewport),this.columnContainer.querySelector(".igv-scrollbar-column").appendChild(r),this.columnContainer.querySelector(".igv-track-drag-column").appendChild(s),this.columnContainer.querySelector(".igv-gear-menu-column").appendChild(o)}}getTrackOrder(){return this.trackViews.filter(e=>e.track&&e.track.name).map(e=>e.track.name)}removeTrackByName(e){const t=this.trackViews.slice();for(let n of t)e===n.track.name&&this.removeTrack(n.track)}removeTrack(e){this.trackViews.splice(this.trackViews.indexOf(e.trackView),1),this.fireEvent("trackremoved",[e]),this.fireEvent("trackorderchanged",[this.getTrackOrder()]),e.trackView.dispose()}removeAllTracks(){const e=[];for(let t of this.trackViews)"ruler"!==t.track.id&&"ideogram"!==t.track.id?(this.fireEvent("trackremoved",[t.track]),t.dispose()):e.push(t);this.trackViews=e}findTracks(e,t){return this.trackViews.filter("function"==typeof e?t=>e(t.track):n=>t===n.track[e]).map(e=>e.track)}setTrackHeight(e){this.trackHeight=e,this.trackViews.forEach(function(t){t.setTrackHeight(e)})}async visibilityChange(){if(this.referenceFrameList.find(e=>e.bpPerPixel<0)){const e=this.calculateViewportWidth(this.referenceFrameList.length);for(let t of this.referenceFrameList)t.bpPerPixel=(t.end-t.start)/e}if(this.referenceFrameList){const e=this.isMultiLocusWholeGenomeView()||Po.isWholeGenomeView(this.referenceFrameList[0].chr);this.navbarManager.navbarDidResize(this.$navigation.width(),e)}await this.resize()}async resize(){const e=this.calculateViewportWidth(this.referenceFrameList.length);for(let t of this.referenceFrameList){const n=this.referenceFrameList.indexOf(t),{chr:i,genome:r}=t,{bpLength:s}=r.getChromosome(t.chr),o=t.toBP(e);Po.isWholeGenomeView(i)||o>s?t.bpPerPixel=s/e:t.end=t.start+t.toBP(e);for(let{viewports:t}of this.trackViews)t[n].setWidth(e)}await this.updateViews(!0),this.updateUIWithReferenceFrameList()}async updateViews(e){const t=this.trackViews;this.updateLocusSearchWidget();for(let s of this.centerLineList)s.repaint();if(this.dragObject)for(let s of t)await s.updateViews(e);else{const s={},o=[];for(let e of t){const t=e.track.autoscaleGroup;if(t){var n=s[t];n||(s[t]=n=[]),n.push(e)}else o.push(e)}if(Object.entries(s).length>0){const t=Object.keys(s);for(let n of t){const t=s[n],o=[];for(let e of t)o.push(e.getInViewFeatures());const a=await Promise.all(o);var i,r=[];for(let e of a)r=r.concat(e);i=Xo(r);const l=[];for(let n of t)n.track.dataRange=i,n.track.autoscale=!1,l.push(n.updateViews(e));await Promise.all(l)}}await Promise.all(o.map(t=>t.updateViews(e)))}}updateLocusSearchWidget(){const e=this.referenceFrameList,t=this.calculateViewportWidth(this.referenceFrameList.length);for(let i of e)i.end=i.start+i.bpPerPixel*t;this.chromosomeSelectWidget.select.value=1===e.length?this.referenceFrameList[0].chr:"";const n=this.referenceFrameList.map(e=>e.getLocusString()).join(" ");this.$searchInput.val(n),this.fireEvent("locuschange",[this.referenceFrameList])}calculateViewportWidth(e){let{width:t}=this.columnContainer.getBoundingClientRect();return t-=50+this.getSampleNameViewportWidth()+14+12+28,t-=5*(e-1),Math.floor(t/e)}getCenterLineXOffset(){let{width:e}=this.columnContainer.getBoundingClientRect();return e-=50+this.getSampleNameViewportWidth()+14+12+28,Math.floor(e/2+50)}minimumBases(){return this.config.minimumBases}zoomIn(){this.zoomWithScaleFactor(.5)}zoomOut(){this.zoomWithScaleFactor(2)}async zoomWithScaleFactor(e,t,n){const i=this.calculateViewportWidth(this.referenceFrameList.length);let r=n?[n]:this.referenceFrameList;for(let s of r)s.zoomWithScaleFactor(this,e,i,t)}async presentMultiLocusPanel(e,t){const n=this.calculateViewportWidth(1+this.referenceFrameList.length);!function(e,t,n,i,r){t.bpPerPixel*=e,t.start=(i+(i+r))/2-t.bpPerPixel*(n/2),t.end=t.start+t.bpPerPixel*n,t.locusSearchString=t.getLocusString()}(this.calculateViewportWidth(this.referenceFrameList.length)/this.calculateViewportWidth(1+this.referenceFrameList.length),t,n,e.start,e.lengthOnRef);const i=this.genome.getChromosomeName(e.mate.chr),r=function(e,t,n,i,r,s){const o=(r+(r+s))/2-n*(i/2);return new Ru(e,t,o,o+n*i,n)}(this.genome,i,t.bpPerPixel,n,e.mate.position,e.lengthOnRef),s=this.referenceFrameList.indexOf(t),o=1+this.referenceFrameList.indexOf(t),{$viewport:a}=this.trackViews[0].viewports[s],l=(e=>{const t=ft({class:"igv-column-shim"});ia(t,e);const n=ft({class:"igv-column"});return ia(n,t),n})(a.get(0).parentElement);if(o===this.referenceFrameList.length){this.referenceFrameList.push(r);for(let e of this.trackViews){const t=ra(e,l,r);e.viewports.push(t)}}else{this.referenceFrameList.splice(o,0,r);for(let e of this.trackViews){const t=ra(e,l,r);e.viewports.splice(o,0,t)}}this.centerLineList=this.createCenterLineList(this.columnContainer),await this.resize()}async removeMultiLocusPanel(e){const t=this.referenceFrameList.indexOf(e),{$viewport:n}=this.trackViews[0].viewports[t];((e,t)=>{const n=0===e?t.nextElementSibling:t.previousElementSibling;t.remove(),n.remove()})(t,n.parent().get(0));for(let{viewports:r}of this.trackViews)r[t].dispose(),r.splice(t,1);if(this.referenceFrameList.splice(t,1),1===this.referenceFrameList.length&&this.getRulerTrackView())for(let r of this.getRulerTrackView().viewports)r.dismissLocusLabel();const i=this.calculateViewportWidth(1+this.referenceFrameList.length)/this.calculateViewportWidth(this.referenceFrameList.length);await this.rescaleForMultiLocus(i)}async rescaleForMultiLocus(e){const t=this.calculateViewportWidth(this.referenceFrameList.length);for(let n of this.referenceFrameList)n.bpPerPixel*=e;for(let{viewports:n}of this.trackViews)for(let e of n)e.setWidth(t);this.centerLineList=this.createCenterLineList(this.columnContainer),this.updateUIWithReferenceFrameList(),await this.updateViews(!0)}async goto(e,t,n){await this.search(e+":"+t+"-"+n)}async doSearch(e,t){const n=await this.search(e,t);return n||js.presentAlert(new Error(`Unrecognized locus: <b> ${e} </b>`)),n}async search(e,t){const n=await async function(e,t){if(void 0===t||""===t.trim())return;(t&&"all"===t.trim().toLowerCase()||"*"===t)&&(t="all");const n=t.split(" ");let i=e.searchConfig||Iu,r=[];const s=async n=>{let r=function(e,t){const n=t.split(":"),i=n[0];if("all"===i&&e.genome.getChromosome(i))return{chr:i,start:0,end:e.genome.getChromosome(i).bpLength};if(void 0!==e.genome.getChromosome(i)){const t={chr:e.genome.getChromosomeName(i),start:0,end:e.genome.getChromosome(i).bpLength};if(n.length>1){const e=n[1].split("-");if(e.length>2)return;{let n;if(n=e[0].replace(/,/g,""),isNaN(n))return;if(t.start=parseInt(n,10)-1,t.end=t.start+1,1===e.length&&(t.start-=20,t.end+=20),2===e.length){if(n=e[1].replace(/,/g,""),isNaN(n))return;t.end=parseInt(n,10)}}}return t}}(e,n);if(!r){const i=e.genome.featureDB[n.toUpperCase()];i&&(r={chr:i.chr,start:i.start,end:i.end,gene:i.name,locusSearchString:t})}if(!r&&e.config&&!1!==e.config.search)try{r=await async function(e,t,n){let i=n.url.replace("$FEATURE$",t.toUpperCase());i.indexOf("$GENOME$")>-1&&(i=i.replace("$GENOME$",e.genome.id?e.genome.id:"hg19"));const r=n.timeout?{timeout:n.timeout}:void 0,s=function(e,t,n){let i;if(i="plain"===n.type?function(e,t){const n=[],i=[];return Ct(t).forEach(function(e){""===e||n.push(e)}),n.forEach(function(t){var n,r,s,o,a=t.split("\t");a.length>=3&&(s=(r=a[1].split(":"))[1].split("-"),n=a[2].trim(),o={gene:a[0],chromosome:e.genome.getChromosomeName(r[0].trim()),start:parseInt(s[0].replace(/,/g,"")),end:parseInt(s[1].replace(/,/g,"")),type:"gtex"===n?"snp":"gene"},i.push(o))}),i}(e,t):JSON.parse(t),n.resultsField&&(i=i[n.resultsField]),i&&0!==i.length){const t=n.chromosomeField||"chromosome",r=n.startField||"start",s=n.endField||"end",o=n.coords||1;let a;a=Array.isArray(i)?i[0]:i,a.hasOwnProperty(t)&&a.hasOwnProperty(r)||console.error("Search service results must include chromosome and start fields: "+a);const l=e.genome.getChromosome(a[t]);if(!l)return;let c=a[r]-o,h=a[s];void 0===h&&(h=c+1);const u={chr:l.name,start:c,end:h},d=a.type?a.type:"gene";return n.geneField&&"gene"===d&&(u.gene=a[n.geneField]),n.snpField&&"snp"===d&&(u.snp=a[n.snpField]),u}}(e,await rs.loadString(i,r),n);return s&&(s.locusSearchString=t),s}(e,n,i)}catch(s){throw console.error(s),Error("Search service currently unavailable.")}return r};for(let o of n){const e=await s(o);e&&(e.locusSearchString=o,r.push(e))}if(0===r.length){const e=await s(t);e&&(e.locusSearchString=t,r.push(e))}return 0===r.length?void 0:r}(this,e);if(n&&n.length>0){this.referenceFrameList=function(e,t,n,i,r){return e.map(e=>{n&&e.gene&&(e.start=Math.max(0,e.start-n),e.end+=n);const s=t.getChromosome(e.chr);Ko(s.bpLength,e,i);const o=new Ru(t,e.chr,e.start,e.end,(e.end-e.start)/r);return o.locusSearchString=e.locusSearchString,(e.gene||e.snp)&&(o.selection=new Eu(e.gene,e.snp)),o})}(n,this.genome,this.flanking,this.minimumBases(),this.calculateViewportWidth(n.length));for(let e of this.trackViews)e.removeDOMFromColumnContainer();this.columnContainer.querySelectorAll(".igv-column-shim, .igv-column").forEach(e=>e.remove()),((e,t)=>{for(let n=0;n<t;n++){const i=ft({class:"igv-column"});na(i,e),t>1&&n>0&&na(ft({class:"igv-column-shim"}),i)}})(this.columnContainer.querySelector(".igv-sample-name-column"),this.referenceFrameList.length),this.centerLineList=this.createCenterLineList(this.columnContainer);for(let e of this.trackViews)e.addDOMToColumnContainer(this,this.columnContainer,this.referenceFrameList);return this.updateUIWithReferenceFrameList(),t||await this.updateViews(),!0}return!1}async loadSampleInformation(e){var t=e;jt(e)&&(t=e.name),"fam"===t.substr(t.lastIndexOf(".")+1)&&(this.sampleInformation=await function(e,t){return(new ku).loadPlinkFile(e,void 0)}(e))}on(e,t){this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)}un(e,t){this.off(e,t)}off(e,t){if(e)if(t){const n=this.eventHandlers[e];if(n&&0!==n.length){const i=n.indexOf(t);-1!==i&&this.eventHandlers[e].splice(i,1)}else console.warn("No handlers to remove for event: "+e)}else this.eventHandlers[e]=[];else this.eventHandlers={}}fireEvent(e,t,n){const i=this.eventHandlers[e];if(void 0===i||0===i.length)return;const r=n||window;return i.map(function(e){return e.apply(r,t)})[0]}dispose(){this.removeMouseHandlers();for(let e of this.trackViews)e.dispose()}toJSON(){const e={version:"2.10.4"};if(void 0!==this.showSampleNames&&(e.showSampleNames=this.showSampleNames),200!==this.sampleNameViewportWidth&&(e.sampleNameViewportWidth=this.sampleNameViewportWidth),e.reference=this.genome.toJSON(),Bt(e.reference.fastaURL))throw new Error(`Error. Sessions cannot include local file references ${e.reference.fastaURL.name}.`);if(Bt(e.reference.indexURL))throw new Error(`Error. Sessions cannot include local file references ${e.reference.indexURL.name}.`);const t=[],n={};let i=this.trackViews[0];for(let{referenceFrame:a}of i.viewports){const e=a.getLocusString();t.push(e),a.selection&&(n[e]={gene:a.selection.gene,snp:a.selection.snp})}e.locus=1===t.length?t[0]:t,Object.getOwnPropertyNames(n).length>0&&(e.gtexSelections=n);const r=[],s=[];for(let{track:a}of this.trackViews)try{let e;e="function"==typeof a.getState?a.getState():a.config,e&&(e.browser&&delete e.browser,e.order=a.order,r.push(e))}catch(o){s.push(o)}if(s.length>0){let e=1,t="Errors encountered saving session:";for(let n of s)t+=` (${e++}) ${n.toString()}.`;throw Error(t)}if(r.filter(e=>{e.url&&jt(e.url)}).length>0)throw new Error("Error. Sessions cannot include local file references.");return e.tracks=r,e}compressedSession(){return function(e){const t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e.charCodeAt(n);const i=new Lr.deflateRaw(t),r=String.fromCharCode.apply(null,i);return btoa(r).replace(/\+/g,".").replace(/\//g,"_").replace(/=/g,"-")}(JSON.stringify(this.toJSON()))}sessionURL(){const e=window.location.href.slice(),t=e.indexOf("?");return(t>0?e.substring(0,t):e)+"?sessionURL=blob:"+this.compressedSession()}currentLoci(){const e=[],t=this.trackViews[0];for(let{referenceFrame:n}of t.viewports){const t=n.getLocusString();e.push(t)}return e}mouseDownOnViewport(e,t){var n;n=gt(e),this.vpMouseDown={viewport:t,lastMouseX:n.x,mouseDownX:n.x,lastMouseY:n.y,mouseDownY:n.y,referenceFrame:t.referenceFrame}}cancelTrackPan(){const e=this.dragObject;this.dragObject=void 0,this.isScrolling=!1,this.vpMouseDown=void 0,e&&e.viewport.referenceFrame.start!==e.start&&(this.updateViews(),this.fireEvent("trackdragend"))}startTrackDrag(e){this.dragTrack=e}updateTrackDrag(e){if(e&&this.dragTrack){const t=this.dragTrack,n=this.trackViews.indexOf(e),i=this.trackViews.indexOf(t),r=this.trackViews;r[n]=t,r[i]=e;const s=this.trackViews[n].track.order;this.trackViews[i].track.order=s;const o=r.length;let a=s;if(n<i)for(let e=n+1;e<o;e++){const t=r[e].track;if(!(t.order<=a))break;t.order=Math.min(Number.MAX_SAFE_INTEGER,a+1),a=t.order}else for(let e=n-1;e>0;e--){const t=r[e].track;if(!(t.order>=a))break;t.order=Math.max(-Number.MAX_SAFE_INTEGER,a-1),a=t.order}this.reorderTracks()}}endTrackDrag(){this.dragTrack?(this.dragTrack=void 0,this.fireEvent("trackorderchanged",[this.getTrackOrder()])):this.dragTrack=void 0}addMouseHandlers(){this.addWindowResizeHandler(),this.addRootMouseUpHandler(),this.addRootMouseLeaveHandler(),this.addColumnContainerEventHandlers()}removeMouseHandlers(){this.removeWindowResizeHandler(),this.removeRootMouseUpHandler(),this.removeRootMouseLeaveHandler(),this.removeColumnContainerEventHandlers()}addWindowResizeHandler(){this.boundWindowResizeHandler=(function(){this.resize()}).bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)}removeWindowResizeHandler(){window.removeEventListener("resize",this.boundWindowResizeHandler)}addRootMouseUpHandler(){this.boundRootMouseUpHandler=Zu.bind(this),this.root.addEventListener("mouseup",this.boundRootMouseUpHandler)}removeRootMouseUpHandler(){this.root.removeEventListener("mouseup",this.boundRootMouseUpHandler)}addRootMouseLeaveHandler(){this.boundRootMouseLeaveHandler=Zu.bind(this),this.root.addEventListener("mouseleave",this.boundRootMouseLeaveHandler)}removeRootMouseLeaveHandler(){this.root.removeEventListener("mouseleave",this.boundRootMouseLeaveHandler)}addColumnContainerEventHandlers(){this.boundColumnContainerMouseMoveHandler=Yu.bind(this),this.boundColumnContainerTouchMoveHandler=Yu.bind(this),this.boundColumnContainerMouseLeaveHandler=Zu.bind(this),this.boundColumnContainerMouseUpHandler=Zu.bind(this),this.boundColumnContainerTouchEndHandler=Zu.bind(this),this.columnContainer.addEventListener("mousemove",this.boundColumnContainerMouseMoveHandler),this.columnContainer.addEventListener("touchmove",this.boundColumnContainerTouchMoveHandler),this.columnContainer.addEventListener("mouseleave",this.boundColumnContainerMouseLeaveHandler),this.columnContainer.addEventListener("mouseup",this.boundColumnContainerMouseUpHandler),this.columnContainer.addEventListener("touchend",this.boundColumnContainerTouchEndHandler)}removeColumnContainerEventHandlers(){this.columnContainer.removeEventListener("mousemove",this.boundColumnContainerMouseMoveHandler),this.columnContainer.removeEventListener("touchmove",this.boundColumnContainerTouchMoveHandler),this.columnContainer.removeEventListener("mouseleave",this.boundColumnContainerMouseLeaveHandler),this.columnContainer.removeEventListener("mouseup",this.boundColumnContainerMouseUpHandler),this.columnContainer.removeEventListener("touchend",this.boundColumnContainerTouchEndHandler)}async getDriveFileInfo(e){const t=Dt(e);return rs.loadJson("https://www.googleapis.com/drive/v3/files/"+t+"?supportsTeamDrives=true",Zo({}))}static uncompressSession(e){let t;if(e.indexOf("/gzip;base64")>0){t=Hr(e);let n="";for(let e of t)n+=String.fromCharCode(e);return n}return function(e){e=e.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");const t=atob(e),n=[];for(let s=0;s<t.length;s++)n.push(t.charCodeAt(s));const i=Lr.inflateRaw(n);let r="";for(let s of i)r+=String.fromCharCode(s);return r}(e.substring(5))}}function Yu(e){e.preventDefault();const{x:t,y:n}=gt(e);if(this.vpMouseDown){const{viewport:e,referenceFrame:i}=this.vpMouseDown,r=Math.abs(t-this.vpMouseDown.mouseDownX)>Math.abs(n-this.vpMouseDown.mouseDownY);if(!this.dragObject&&!this.isScrolling)if(r)this.vpMouseDown.mouseDownX&&Math.abs(t-this.vpMouseDown.mouseDownX)>this.constants.dragThreshold&&(this.dragObject={viewport:e,start:i.start});else if(this.vpMouseDown.mouseDownY&&Math.abs(n-this.vpMouseDown.mouseDownY)>this.constants.scrollThreshold){this.isScrolling=!0;const t=e.$viewport.height(),n=fa(e.trackView.viewports);this.vpMouseDown.r=t/n}this.dragObject&&(i.shiftPixels(this.vpMouseDown.lastMouseX-t,e.$viewport.width())&&this.updateViews(),this.fireEvent("trackdrag")),this.isScrolling&&e.trackView.moveScroller(this.vpMouseDown.r*(this.vpMouseDown.lastMouseY-n)),this.vpMouseDown.lastMouseX=t,this.vpMouseDown.lastMouseY=n}}function Zu(e){this.cancelTrackPan(),this.endTrackDrag()}function Xu(e,t){for(let{viewports:n}of e)for(let e of n)e.$trackLabel&&(0===n.indexOf(e)&&!0===t?e.$trackLabel.show():e.$trackLabel.hide())}let Ku=[];const Qu=rs.setApiKey;return function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML='.igv-navbar {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  color: #444;\n  font-size: 12px;\n  font-family: "Open Sans", sans-serif;\n  font-weight: 400;\n  line-height: 32px;\n  padding-left: 8px;\n  padding-right: 8px;\n  margin-top: 2px;\n  margin-bottom: 6px;\n  height: 32px;\n  border-style: solid;\n  border-radius: 3px;\n  border-width: thin;\n  border-color: #bfbfbf;\n  background-color: #f3f3f3; }\n  .igv-navbar .igv-navbar-left-container {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center;\n    height: 32px;\n    line-height: 32px; }\n    .igv-navbar .igv-navbar-left-container .igv-logo {\n      width: 34px;\n      height: 32px;\n      margin-right: 8px; }\n    .igv-navbar .igv-navbar-left-container .igv-current-genome {\n      height: 32px;\n      margin-left: 4px;\n      margin-right: 4px;\n      user-select: none;\n      line-height: 32px;\n      vertical-align: middle;\n      text-align: center; }\n    .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location {\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: space-between;\n      align-items: center;\n      height: 100%; }\n      .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container {\n        display: flex;\n        flex-flow: column;\n        flex-wrap: nowrap;\n        justify-content: space-around;\n        align-items: center;\n        height: 100%;\n        width: 125px;\n        margin-right: 4px; }\n        .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container select {\n          display: block;\n          cursor: pointer;\n          width: 100px;\n          height: 75%;\n          outline: none;\n          font-size: 12px;\n          font-family: "Open Sans", sans-serif;\n          font-weight: 400; }\n      .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group {\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n        align-items: center;\n        margin-left: 8px;\n        height: 22px; }\n        .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container {\n          display: flex;\n          flex-flow: row;\n          flex-wrap: nowrap;\n          justify-content: flex-start;\n          align-items: center;\n          width: 210px;\n          height: 22px;\n          line-height: 22px; }\n          .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container input.igv-search-input {\n            cursor: text;\n            width: 85%;\n            height: 22px;\n            line-height: 22px;\n            font-size: 12px;\n            font-family: "Open Sans", sans-serif;\n            font-weight: 400;\n            text-align: left;\n            padding-left: 8px;\n            margin-right: 8px;\n            outline: none;\n            border-style: solid;\n            border-radius: 3px;\n            border-width: thin;\n            border-color: #bfbfbf;\n            background-color: white; }\n          .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container .igv-search-icon-container {\n            cursor: pointer;\n            height: 16px;\n            width: 16px; }\n        .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-windowsize-panel-container {\n          margin-left: 4px;\n          user-select: none; }\n  .igv-navbar .igv-navbar-right-container {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center;\n    height: 32px;\n    line-height: 32px; }\n    .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container {\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: space-between;\n      align-items: center;\n      height: 100%; }\n      .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container div {\n        margin-left: 0;\n        margin-right: 4px; }\n      .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container div:last-child {\n        margin-left: 0;\n        margin-right: 0; }\n    .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container-750 {\n      display: none; }\n    .igv-navbar .igv-navbar-right-container .igv-zoom-widget {\n      color: #737373;\n      font-size: 18px;\n      height: 32px;\n      line-height: 32px;\n      margin-left: 8px;\n      user-select: none;\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: flex-end;\n      align-items: center; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget div {\n        cursor: pointer;\n        margin-left: unset;\n        margin-right: unset; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:first-child {\n        height: 24px;\n        width: 24px;\n        margin-left: unset;\n        margin-right: 8px; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:last-child {\n        height: 24px;\n        width: 24px;\n        margin-left: 8px;\n        margin-right: unset; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:nth-child(even) {\n        display: block;\n        height: fit-content; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget input {\n        display: block;\n        width: 125px; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget svg {\n        display: block; }\n    .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 {\n      color: #737373;\n      font-size: 18px;\n      height: 32px;\n      line-height: 32px;\n      margin-left: 8px;\n      user-select: none;\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: flex-end;\n      align-items: center; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div {\n        cursor: pointer;\n        margin-left: unset;\n        margin-right: unset; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:first-child {\n        height: 24px;\n        width: 24px;\n        margin-left: unset;\n        margin-right: 8px; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:last-child {\n        height: 24px;\n        width: 24px;\n        margin-left: 8px;\n        margin-right: unset; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:nth-child(even) {\n        width: 0;\n        height: 0;\n        display: none; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 input {\n        width: 0;\n        height: 0;\n        display: none; }\n      .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 svg {\n        display: block; }\n    .igv-navbar .igv-navbar-right-container .igv-zoom-widget-hidden {\n      display: none; }\n\n.igv-navbar-button {\n  display: block;\n  box-sizing: unset;\n  padding-left: 6px;\n  padding-right: 6px;\n  height: 18px;\n  text-transform: capitalize;\n  user-select: none;\n  line-height: 18px;\n  text-align: center;\n  vertical-align: middle;\n  font-family: "Open Sans", sans-serif;\n  font-size: 11px;\n  font-weight: 200;\n  color: #737373;\n  background-color: #f3f3f3;\n  border-color: #737373;\n  border-style: solid;\n  border-width: thin;\n  border-radius: 6px; }\n\n.igv-navbar-button-clicked {\n  color: white;\n  background-color: #737373; }\n\n.igv-navbar-button:hover {\n  cursor: pointer; }\n\n.igv-zoom-in-notice-container {\n  z-index: 1024;\n  position: absolute;\n  top: 8px;\n  left: 50%;\n  transform: translate(-50%, 0%);\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: center;\n  align-items: center;\n  background-color: white; }\n  .igv-zoom-in-notice-container > div {\n    padding-left: 4px;\n    padding-right: 4px;\n    padding-top: 2px;\n    padding-bottom: 2px;\n    width: 100%;\n    height: 100%;\n    font-family: "Open Sans", sans-serif;\n    font-size: 14px;\n    font-weight: 400;\n    color: #3f3f3f; }\n\n.igv-zoom-in-notice {\n  position: absolute;\n  top: 10px;\n  left: 50%; }\n  .igv-zoom-in-notice div {\n    position: relative;\n    left: -50%;\n    font-family: "Open Sans", sans-serif;\n    font-size: medium;\n    font-weight: 400;\n    color: #3f3f3f;\n    background-color: rgba(255, 255, 255, 0.51);\n    z-index: 64; }\n\n.igv-container-spinner {\n  position: absolute;\n  top: 90%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-multi-locus-close-button {\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  width: 14px;\n  height: 14px;\n  color: #666666;\n  z-index: 1000; }\n  .igv-multi-locus-close-button > svg {\n    vertical-align: top; }\n\n.igv-multi-locus-close-button:hover {\n  cursor: pointer;\n  color: #434343; }\n\n.igv-multi-locus-ruler-label {\n  position: absolute;\n  left: 50%;\n  top: 5%;\n  transform: translate(-50%, 0%);\n  font-family: "Open Sans", sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  text-align: center;\n  z-index: 64;\n  color: #444444;\n  background-color: white; }\n\n.igv-multi-locus-ruler-label:hover {\n  cursor: pointer; }\n\n.igv-ruler-sweeper {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n  z-index: 99999;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-ruler-tooltip {\n  pointer-events: none;\n  z-index: 128;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 1px;\n  height: 32px;\n  background-color: transparent;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ruler-tooltip > div {\n    pointer-events: none;\n    width: 128px;\n    height: auto;\n    padding: 1px;\n    color: #373737;\n    font-size: 10px;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 400;\n    background-color: white;\n    border-style: solid;\n    border-width: thin;\n    border-color: #373737; }\n\n.igv-track-label {\n  position: absolute;\n  left: 8px;\n  top: 8px;\n  width: auto;\n  height: auto;\n  max-width: 200px;\n  padding-left: 4px;\n  padding-right: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  text-align: center;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: white;\n  z-index: 128;\n  cursor: pointer; }\n\n.igv-track-label:hover,\n.igv-track-label:focus,\n.igv-track-label:active {\n  background-color: #e8e8e8; }\n\n.igv-center-line {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 8;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-left-style: dashed;\n  border-left-width: thin;\n  border-right-style: dashed;\n  border-right-width: thin; }\n\n.igv-center-line-wide {\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(127, 127, 127, 0.51); }\n\n.igv-center-line-thin {\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(0, 0, 0, 0); }\n\n.igv-cursor-guide-horizontal {\n  display: none;\n  pointer-events: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 50%;\n  height: 1px;\n  z-index: 1;\n  margin-left: 50px;\n  margin-right: 54px;\n  border-top-style: dotted;\n  border-top-width: thin;\n  border-top-color: rgba(127, 127, 127, 0.76); }\n\n.igv-cursor-guide-vertical {\n  pointer-events: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 1px;\n  z-index: 1;\n  border-left-style: dotted;\n  border-left-width: thin;\n  border-left-color: rgba(127, 127, 127, 0.76);\n  display: none; }\n\n.igv-user-feedback {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 512px;\n  height: 360px;\n  z-index: 2048;\n  background-color: white;\n  border-color: #a2a2a2;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  color: #444;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-user-feedback div:first-child {\n    position: relative;\n    height: 24px;\n    width: 100%;\n    background-color: white;\n    border-bottom-color: #a2a2a2;\n    border-bottom-style: solid;\n    border-bottom-width: thin; }\n    .igv-user-feedback div:first-child div {\n      position: absolute;\n      top: 2px;\n      width: 16px;\n      height: 16px;\n      background-color: transparent; }\n    .igv-user-feedback div:first-child div:first-child {\n      left: 8px; }\n    .igv-user-feedback div:first-child div:last-child {\n      cursor: pointer;\n      right: 8px; }\n  .igv-user-feedback div:last-child {\n    width: 100%;\n    height: calc(100% - 24px);\n    border-width: 0; }\n    .igv-user-feedback div:last-child div {\n      width: auto;\n      height: auto;\n      margin: 8px; }\n\n.igv-generic-dialog-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-dialog-container .igv-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-generic-dialog-container .igv-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-generic-dialog-container .igv-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-generic-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-generic-container div:first-child i {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-menu-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 132px;\n  z-index: 4096;\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  text-align: left; }\n  .igv-menu-popup > div:not(:first-child) {\n    width: 100%; }\n    .igv-menu-popup > div:not(:first-child) > div {\n      background: white; }\n    .igv-menu-popup > div:not(:first-child) > div.context-menu {\n      padding-left: 4px;\n      padding-right: 4px; }\n    .igv-menu-popup > div:not(:first-child) > div:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      border-bottom-color: transparent;\n      border-bottom-style: solid;\n      border-bottom-width: thin; }\n    .igv-menu-popup > div:not(:first-child) > div:hover {\n      background: #efefef; }\n\n.igv-menu-popup-shim {\n  padding-left: 8px;\n  padding-right: 8px; }\n\n.igv-menu-popup-header {\n  position: relative;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-color: transparent;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center; }\n  .igv-menu-popup-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-menu-popup-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-menu-popup-check-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 20px;\n  background-color: transparent; }\n  .igv-menu-popup-check-container div {\n    padding-top: 2px;\n    padding-left: 8px; }\n  .igv-menu-popup-check-container div:first-child {\n    position: relative;\n    width: 12px;\n    height: 12px; }\n    .igv-menu-popup-check-container div:first-child svg {\n      position: absolute;\n      width: 12px;\n      height: 12px; }\n\n.igv-user-feedback {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 512px;\n  height: 360px;\n  z-index: 2048;\n  background-color: white;\n  border-color: #a2a2a2;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  color: #444;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-user-feedback div:first-child {\n    position: relative;\n    height: 24px;\n    width: 100%;\n    background-color: white;\n    border-bottom-color: #a2a2a2;\n    border-bottom-style: solid;\n    border-bottom-width: thin; }\n    .igv-user-feedback div:first-child div {\n      position: absolute;\n      top: 2px;\n      width: 16px;\n      height: 16px;\n      background-color: transparent; }\n    .igv-user-feedback div:first-child div:first-child {\n      left: 8px; }\n    .igv-user-feedback div:first-child div:last-child {\n      cursor: pointer;\n      right: 8px; }\n  .igv-user-feedback div:last-child {\n    width: 100%;\n    height: calc(100% - 24px);\n    border-width: 0; }\n    .igv-user-feedback div:last-child div {\n      width: auto;\n      height: auto;\n      margin: 8px; }\n\n.igv-loading-spinner-container {\n  z-index: 1024;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 32px;\n  height: 32px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: center;\n  align-items: center; }\n  .igv-loading-spinner-container > div {\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    border: 4px solid rgba(128, 128, 128, 0.5);\n    border-top-color: white;\n    animation: spin 1s ease-in-out infinite;\n    -webkit-animation: spin 1s ease-in-out infinite; }\n\n@keyframes spin {\n  to {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n@-webkit-keyframes spin {\n  to {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n.igv-container {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  padding-top: 4px;\n  user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none; }\n\n.igv-viewport {\n  position: relative;\n  margin-top: 5px;\n  overflow-x: hidden;\n  overflow-y: hidden; }\n\n.igv-viewport-content {\n  position: relative;\n  width: 100%; }\n  .igv-viewport-content > canvas {\n    position: relative;\n    display: block; }\n\n.igv-column-container {\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: stretch;\n  width: 100%; }\n\n.igv-column-shim {\n  width: 1px;\n  margin-left: 2px;\n  margin-right: 2px;\n  background-color: #545453; }\n\n.igv-column {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  box-sizing: border-box;\n  height: 100%; }\n\n.igv-axis-column {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  box-sizing: border-box;\n  height: 100%;\n  width: 50px; }\n  .igv-axis-column > div {\n    margin-top: 5px;\n    width: 100%; }\n\n.igv-sample-name-column {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  box-sizing: border-box;\n  height: 100%; }\n\n.igv-scrollbar-column {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  box-sizing: border-box;\n  height: 100%;\n  width: 14px; }\n  .igv-scrollbar-column > div {\n    position: relative;\n    margin-top: 5px;\n    width: 14px; }\n    .igv-scrollbar-column > div > div {\n      cursor: pointer;\n      position: absolute;\n      top: 0;\n      left: 2px;\n      width: 8px;\n      border-width: 1px;\n      border-style: solid;\n      border-color: #c4c4c4;\n      border-top-left-radius: 4px;\n      border-top-right-radius: 4px;\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px; }\n    .igv-scrollbar-column > div > div:hover {\n      background-color: #c4c4c4; }\n\n.igv-track-drag-column {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  box-sizing: border-box;\n  height: 100%;\n  width: 12px;\n  background-color: white; }\n  .igv-track-drag-column > .igv-track-drag-handle {\n    z-index: 512;\n    position: relative;\n    cursor: pointer;\n    margin-top: 5px;\n    width: 100%;\n    border-style: solid;\n    border-width: 0;\n    border-top-right-radius: 6px;\n    border-bottom-right-radius: 6px;\n    background-color: #c4c4c4; }\n  .igv-track-drag-column .igv-track-drag-handle-hover {\n    background-color: #787878; }\n  .igv-track-drag-column > .igv-track-drag-shim {\n    position: relative;\n    margin-top: 5px;\n    width: 100%;\n    border-style: solid;\n    border-width: 0; }\n\n.igv-gear-menu-column {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  box-sizing: border-box;\n  height: 100%;\n  width: 28px; }\n  .igv-gear-menu-column > div {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    margin-top: 5px;\n    width: 100%;\n    background: white; }\n    .igv-gear-menu-column > div > div {\n      position: relative;\n      margin-top: 4px;\n      width: 16px;\n      height: 16px;\n      color: #7F7F7F; }\n    .igv-gear-menu-column > div > div:hover {\n      cursor: pointer;\n      color: #444; }\n\n/*# sourceMappingURL=dom.css.map */\n',document.head.insertBefore(e,document.head.childNodes[document.head.childNodes.length-1])}(),{IGVGraphics:Ks,MenuUtils:Cs,DataRangeDialog:Xs,createTrack:async function(e,t){return await Gu.prototype.createTrack.call(t,e)},createBrowser:async function(e,t){void 0===t&&(t={}),Po.KNOWN_GENOMES||await Po.initializeGenomes(t),function(e){void 0===e.promisified&&(e.promisified=!1),void 0===e.minimumBases&&(e.minimumBases=40),void 0===e.showIdeogram&&(e.showIdeogram=!0),void 0===e.showTrackLabelButton&&(e.showTrackLabelButton=!0),void 0===e.showTrackLabels&&(e.showTrackLabels=!0),void 0===e.showCursorTrackingGuideButton&&(e.showCursorTrackingGuideButton=!0),void 0===e.showCursorTrackingGuide&&(e.showCursorTrackingGuide=!1),void 0===e.showCenterGuideButton&&(e.showCenterGuideButton=!0),void 0===e.showCenterGuide&&(e.showCenterGuide=!1),void 0===e.showSampleNames&&(e.showSampleNames=!1),void 0===e.showSVGButton&&(e.showSVGButton=!0),void 0===e.showControls&&(e.showControls=!0),void 0===e.showNavigation&&(e.showNavigation=!0),void 0===e.showRuler&&(e.showRuler=!0),void 0===e.flanking&&(e.flanking=1e3),void 0===e.pairsSupported&&(e.pairsSupported=!0),e.tracks||(e.tracks=[])}(t),!1!==t.queryParametersSupported&&function(e){var t,n,i,r,s,o,a,l;let c,h;if(t=(o=window.location.href).indexOf("?"),n=o.lastIndexOf("#"),t>=0)for(n<0&&(n=o.length),i=t+1;i<n;)(r=o.indexOf("&",i))<0&&(r=n),2===(s=o.substring(i,r).split("=",2)).length&&(a=s[0],l=decodeURIComponent(s[1]),"file"===a?c=l.split(","):"index"===a?h=l.split(","):e[a]=l,i=r+1);if(c){e.tracks||(e.tracks=[]);for(let t=0;t<c.length;t++){if(c[t].endsWith(".xml")||c[t].endsWith(".json")){e.sessionURL=c[t];break}const n={url:c[t]};h&&h.length>t&&(n.indexURL=h[t]),e.tracks.push(n)}}}(t),t.apiKey&&rs.setApiKey(t.apiKey),t.oauthToken&&es.setToken(t.oauthToken),t.clientId&&!Pt()&&await async function(e){if(Pt())return void console.warn("oAuth has already been initialized");gapi.apiKey=e.apiKey;const t=Object.assign({},e);return t.scope||(t.scope="profile"),e.client_id||(e.client_id=e.clientId),await async function(e){return new Promise(function(e,t){gapi.load("auth2",{callback:e,onerror:t})})}(),new Promise(function(e,n){gapi.auth2.init(t).then(e,n)})}({clientId:t.clientId,apiKey:t.apiKey,scope:"https://www.googleapis.com/auth/userinfo.profile"});const n=new Gu(t,e);Ku.push(n),t.sessionURL?await n.loadSession({url:t.sessionURL}):await n.loadSessionObject(t);const i=n.isMultiLocusWholeGenomeView()||Po.isWholeGenomeView(n.referenceFrameList[0].chr);return n.navbarManager.navbarDidResize(n.$navigation.width(),i),n},removeBrowser:function(e){e.dispose(),e.root.remove(),Ku=Ku.filter(t=>t!==e)},removeAllBrowsers:function(){for(let e of Ku)e.dispose(),e.root.remove();Ku=[]},visibilityChange:async function(){for(let e of Ku)await e.visibilityChange()},setGoogleOauthToken:function(e){return es.setToken(e)},setOauthToken:function(e,t){return es.setToken(e,t)},oauth:es,version:function(){return"2.10.4"},setApiKey:Qu,doAutoscale:Xo,TrackView:pa}}()},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},zUnb:function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.r(t);let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},l=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function c(e){return null!==e&&"object"==typeof e}const h=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let u=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(i(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(a){t=a instanceof h?d(a.errors):[a]}}if(l(o)){let e=-1,n=o.length;for(;++e<n;){const n=o[e];if(c(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof h?t=t.concat(d(a.errors)):t.push(a)}}}if(t)throw new h(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof h?t.errors:t),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends u{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[p](){return this}static create(e,t,n){const i=new f(e,t,n);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,n,r){let s;super(),this._parentSubscriber=e;let o=this;i(t)?s=t:t&&(s=t.next,n=t.error,r=t.complete,t!==a&&(o=Object.create(t),i(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(o(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(e){return e}let b=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:i}=this,r=function(e,t,n){if(e){if(e instanceof f)return e;if(e[p])return e[p]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=y(t))((t,n)=>{let i;i=this.subscribe(t=>{try{e(t)}catch(r){n(r),i&&i.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?v:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=y(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function y(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const _=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class w extends u{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class x extends f{constructor(e){super(e),this.destination=e}}let S=(()=>{class e extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new x(this)}lift(e){const t=new C(this,this);return t.operator=e,t}next(e){if(this.closed)throw new _;if(!this.isStopped){const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].next(e)}}error(e){if(this.closed)throw new _;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].error(e);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let i=0;i<t;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new _;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new _;return this.hasError?(e.error(this.thrownError),u.EMPTY):this.isStopped?(e.complete(),u.EMPTY):(this.observers.push(e),new w(this,e))}asObservable(){const e=new b;return e.source=this,e}}return e.create=(e,t)=>new C(e,t),e})();class C extends S{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):u.EMPTY}}function k(e){return e&&"function"==typeof e.schedule}function E(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new A(e,t))}}class A{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new R(e,this.project,this.thisArg))}}class R extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const T=e=>t=>{for(let n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()};function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=I(),O=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function P(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const M=e=>{if(e&&"function"==typeof e[g])return i=e,e=>{const t=i[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(O(e))return T(e);if(P(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e);if(e&&"function"==typeof e[D])return t=e,e=>{const n=t[D]();for(;;){let t;try{t=n.next()}catch(i){return e.error(i),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=c(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,i};function L(e,t){return new b(n=>{const i=new u;let r=0;return i.add(t.schedule(function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function F(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new b(n=>{const i=new u;return i.add(t.schedule(()=>{const r=e[g]();i.add(r.subscribe({next(e){i.add(t.schedule(()=>n.next(e)))},error(e){i.add(t.schedule(()=>n.error(e)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(e,t);if(P(e))return function(e,t){return new b(n=>{const i=new u;return i.add(t.schedule(()=>e.then(e=>{i.add(t.schedule(()=>{n.next(e),i.add(t.schedule(()=>n.complete()))}))},e=>{i.add(t.schedule(()=>n.error(e)))}))),i})}(e,t);if(O(e))return L(e,t);if(function(e){return e&&"function"==typeof e[D]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new b(n=>{const i=new u;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(()=>{r=e[D](),i.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=r.next();e=n.value,t=n.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof b?e:new b(M(e))}class N extends f{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class z extends f{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function V(e,t){if(!t.closed)return e instanceof b?e.subscribe(t):M(e)(t)}function j(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(j((n,i)=>F(e(n,i)).pipe(E((e,r)=>t(n,e,i,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new B(e,n)))}class B{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new H(e,this.project,this.concurrent))}}class H extends z{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new N(this),n=this.destination;n.add(t);const i=V(e,t);i!==t&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function q(e=Number.POSITIVE_INFINITY){return j(v,e)}function $(e,t){return t?L(e,t):new b(T(e))}function U(...e){let t=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return k(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof i&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof b?e[0]:q(t)($(e,n))}function W(){return function(e){return e.lift(new G(e))}}class G{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const i=new Y(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class Y extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class Z extends b{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new u,e.add(this.source.subscribe(new K(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.EMPTY)),e}refCount(){return W()(this)}}const X=(()=>{const e=Z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class K extends x{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Q(){return new S}function J(){return e=>{return W()((t=Q,function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,X);return i.source=e,i.subjectFactory=n,i})(e));var t}}function ee(e){for(let t in e)if(e[t]===ee)return t;throw Error("Could not find renamed property on target object.")}function te(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ne(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ne).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ie(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const re=ee({__forward_ref__:ee});function se(e){return e.__forward_ref__=se,e.toString=function(){return ne(this())},e}function oe(e){return ae(e)?e():e}function ae(e){return"function"==typeof e&&e.hasOwnProperty(re)&&e.__forward_ref__===se}class le extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function ce(e){return"string"==typeof e?e:null==e?"":String(e)}function he(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ce(e)}function ue(e,t){const n=t?` in ${t}`:"";throw new le("201",`No provider for ${he(e)} found${n}`)}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function pe(e){return{providers:e.providers||[],imports:e.imports||[]}}function fe(e){return me(e,ve)||me(e,ye)}function me(e,t){return e.hasOwnProperty(t)?e[t]:null}function ge(e){return e&&(e.hasOwnProperty(be)||e.hasOwnProperty(_e))?e[be]:null}const ve=ee({"\u0275prov":ee}),be=ee({"\u0275inj":ee}),ye=ee({ngInjectableDef:ee}),_e=ee({ngInjectorDef:ee});var we=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let xe;function Se(e){const t=xe;return xe=e,t}function Ce(e,t,n){const i=fe(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&we.Optional?null:void 0!==t?t:void ue(ne(e),"Injector")}function ke(e){return{toString:e}.toString()}var Ee=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),Ae=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const Re="undefined"!=typeof globalThis&&globalThis,Te="undefined"!=typeof window&&window,Ie="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,De="undefined"!=typeof global&&global,Oe=Re||De||Te||Ie,Pe={},Me=[],Le=[],Fe=ee({"\u0275cmp":ee}),Ne=ee({"\u0275dir":ee}),ze=ee({"\u0275pipe":ee}),Ve=ee({"\u0275mod":ee}),je=ee({"\u0275loc":ee}),Be=ee({"\u0275fac":ee}),He=ee({__NG_ELEMENT_ID__:ee});let qe=0;function $e(e){return ke(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Ee.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Le,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Ae.Emulated,id:"c",styles:e.styles||Le,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,r=e.features,s=e.pipes;return n.id+=qe++,n.inputs=Ze(e.inputs,t),n.outputs=Ze(e.outputs),r&&r.forEach(e=>e(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(Ue):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(We):null,n})}function Ue(e){return Qe(e)||function(e){return e[Ne]||null}(e)}function We(e){return function(e){return e[ze]||null}(e)}const Ge={};function Ye(e){const t={type:e.type,bootstrap:e.bootstrap||Le,declarations:e.declarations||Le,imports:e.imports||Le,exports:e.exports||Le,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&ke(()=>{Ge[e.id]=e.type}),t}function Ze(e,t){if(null==e)return Pe;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,t&&(t[r]=s)}return n}const Xe=$e;function Ke(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Qe(e){return e[Fe]||null}function Je(e,t){const n=e[Ve]||null;if(!n&&!0===t)throw new Error(`Type ${ne(e)} does not have '\u0275mod' property.`);return n}function et(e){return Array.isArray(e)&&"object"==typeof e[1]}function tt(e){return Array.isArray(e)&&!0===e[1]}function nt(e){return 0!=(8&e.flags)}function it(e){return 2==(2&e.flags)}function rt(e){return 1==(1&e.flags)}function st(e){return null!==e.template}function ot(e,t){return e.hasOwnProperty(Be)?e[Be]:null}class at{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function lt(){return ct}function ct(e){return e.type.prototype.ngOnChanges&&(e.setInput=ut),ht}function ht(){const e=dt(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Pe)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function ut(e,t,n,i){const r=dt(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:Pe,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],l=o[a];s[a]=new at(l&&l.currentValue,t,o===Pe),e[i]=t}function dt(e){return e.__ngSimpleChanges__||null}let pt;function ft(){return void 0!==pt?pt:"undefined"!=typeof document?document:void 0}function mt(e){return!!e.listen}lt.ngInherit=!0;const gt={createRenderer:(e,t)=>ft()};function vt(e){for(;Array.isArray(e);)e=e[0];return e}function bt(e,t){return vt(t[e])}function yt(e,t){return vt(t[e.index])}function _t(e,t){return e.data[t]}function wt(e,t){return e[t]}function xt(e,t){const n=t[e];return et(n)?n:n[0]}function St(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ct(e){return 4==(4&e[2])}function kt(e){return 128==(128&e[2])}function Et(e,t){return null==t?null:e[t]}function At(e){e[18]=0}function Rt(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Tt={lFrame:en(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function It(){return Tt.bindingsEnabled}function Dt(){return Tt.lFrame.lView}function Ot(){return Tt.lFrame.tView}function Pt(e){Tt.lFrame.contextLView=e}function Mt(){let e=Lt();for(;null!==e&&64===e.type;)e=e.parent;return e}function Lt(){return Tt.lFrame.currentTNode}function Ft(e,t){const n=Tt.lFrame;n.currentTNode=e,n.isParent=t}function Nt(){return Tt.lFrame.isParent}function zt(){Tt.lFrame.isParent=!1}function Vt(){return Tt.isInCheckNoChangesMode}function jt(e){Tt.isInCheckNoChangesMode=e}function Bt(){const e=Tt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Ht(){return Tt.lFrame.bindingIndex}function qt(){return Tt.lFrame.bindingIndex++}function $t(e){const t=Tt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Ut(e,t){const n=Tt.lFrame;n.bindingIndex=n.bindingRootIndex=e,Wt(t)}function Wt(e){Tt.lFrame.currentDirectiveIndex=e}function Gt(e){const t=Tt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function Yt(){return Tt.lFrame.currentQueryIndex}function Zt(e){Tt.lFrame.currentQueryIndex=e}function Xt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Kt(e,t,n){if(n&we.SkipSelf){let i=t,r=e;for(;i=i.parent,!(null!==i||n&we.Host||(i=Xt(r),null===i)||(r=r[15],10&i.type)););if(null===i)return!1;t=i,e=r}const i=Tt.lFrame=Jt();return i.currentTNode=t,i.lView=e,!0}function Qt(e){const t=Jt(),n=e[1];Tt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Jt(){const e=Tt.lFrame,t=null===e?null:e.child;return null===t?en(e):t}function en(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function tn(){const e=Tt.lFrame;return Tt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const nn=tn;function rn(){const e=tn();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function sn(){return Tt.lFrame.selectedIndex}function on(e){Tt.lFrame.selectedIndex=e}function an(){const e=Tt.lFrame;return _t(e.tView,e.selectedIndex)}function ln(){Tt.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function cn(){Tt.lFrame.currentNamespace=null}function hn(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;i&&(e.contentHooks||(e.contentHooks=[])).push(-n,i),r&&((e.contentHooks||(e.contentHooks=[])).push(n,r),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,r)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function un(e,t,n){fn(e,t,3,n)}function dn(e,t,n,i){(3&e[2])===n&&fn(e,t,n,i)}function pn(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function fn(e,t,n,i){const r=null!=i?i:-1,s=t.length-1;let o=0;for(let a=void 0!==i?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=i&&o>=i)break}else t[a]<0&&(e[18]+=65536),(o<r||-1==r)&&(mn(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function mn(e,t,n,i){const r=n[i]<0,s=n[i+1],o=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class gn{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function vn(e,t,n){const i=mt(e);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const o=n[r++],a=n[r++],l=n[r++];i?e.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=n[++r];yn(o)?i&&e.setProperty(t,o,a):i?e.setAttribute(t,o,a):t.setAttribute(o,a),r++}}return r}function bn(e){return 3===e||4===e||6===e}function yn(e){return 64===e.charCodeAt(0)}function _n(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||wn(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function wn(e,t,n,i,r){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===i)return void(null!==r&&(e[s+1]=r));if(i===e[s+1])return void(e[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==i&&e.splice(s++,0,i),null!==r&&e.splice(s++,0,r)}function xn(e){return-1!==e}function Sn(e){return 32767&e}function Cn(e,t){let n=e>>16,i=t;for(;n>0;)i=i[15],n--;return i}let kn=!0;function En(e){const t=kn;return kn=e,t}let An=0;function Rn(e,t){const n=In(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,Tn(i.data,e),Tn(t,null),Tn(i.blueprint,null));const r=Dn(e,t),s=e.injectorIndex;if(xn(r)){const e=Sn(r),n=Cn(r,t),i=n[1].data;for(let r=0;r<8;r++)t[s+r]=n[e+r]|i[e+r]}return t[s+8]=r,s}function Tn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function In(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Dn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){const e=r[1],t=e.type;if(i=2===t?e.declTNode:1===t?r[6]:null,null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function On(e,t,n){!function(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(He)&&(i=n[He]),null==i&&(i=n[He]=An++);const r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function Pn(e,t,n){if(n&we.Optional)return e;ue(t,"NodeInjector")}function Mn(e,t,n,i){if(n&we.Optional&&void 0===i&&(i=null),0==(n&(we.Self|we.Host))){const r=e[9],s=Se(void 0);try{return r?r.get(t,i,n&we.Optional):Ce(t,i,n&we.Optional)}finally{Se(s)}}return Pn(i,t,n)}function Ln(e,t,n,i=we.Default,r){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(He)?e[He]:void 0;return"number"==typeof t?t>=0?255&t:Nn:t}(n);if("function"==typeof s){if(!Kt(t,e,i))return i&we.Host?Pn(r,n,i):Mn(t,n,i,r);try{const e=s();if(null!=e||i&we.Optional)return e;ue(n)}finally{nn()}}else if("number"==typeof s){let r=null,o=In(e,t),a=-1,l=i&we.Host?t[16][6]:null;for((-1===o||i&we.SkipSelf)&&(a=-1===o?Dn(e,t):t[o+8],-1!==a&&Hn(i,!1)?(r=t[1],o=Sn(a),t=Cn(a,t)):o=-1);-1!==o;){const e=t[1];if(Bn(s,o,e.data)){const e=zn(o,t,n,r,i,l);if(e!==Fn)return e}a=t[o+8],-1!==a&&Hn(i,t[1].data[o+8]===l)&&Bn(s,o,t)?(r=e,o=Sn(a),t=Cn(a,t)):o=-1}}}return Mn(t,n,i,r)}const Fn={};function Nn(){return new qn(Mt(),Dt())}function zn(e,t,n,i,r,s){const o=t[1],a=o.data[e+8],l=Vn(a,o,n,null==i?it(a)&&kn:i!=o&&0!=(3&a.type),r&we.Host&&s===a);return null!==l?jn(t,o,l,a):Fn}function Vn(e,t,n,i,r){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,c=s>>20,h=r?a+c:e.directiveEnd;for(let u=i?a:a+c;u<h;u++){const e=o[u];if(u<l&&n===e||u>=l&&e.type===n)return u}if(r){const e=o[l];if(e&&st(e)&&e.type===n)return l}return null}function jn(e,t,n,i){let r=e[n];const s=t.data;if(r instanceof gn){const o=r;o.resolving&&function(e,t){throw new le("200",`Circular dependency in DI detected for ${e}`)}(he(s[n]));const a=En(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Se(o.injectImpl):null;Kt(e,i,we.Default);try{r=e[n]=o.factory(void 0,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&function(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const i=ct(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&Se(l),En(a),o.resolving=!1,nn()}}return r}function Bn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Hn(e,t){return!(e&we.Self||e&we.Host&&t)}class qn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Ln(this._tNode,this._lView,e,void 0,t)}}function $n(e){return ke(()=>{const t=e.prototype.constructor,n=t[Be]||Un(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const e=r[Be]||Un(r);if(e&&e!==n)return e;r=Object.getPrototypeOf(r)}return e=>new e})}function Un(e){return ae(e)?()=>{const t=Un(oe(e));return t&&t()}:ot(e)}function Wn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let i=0;for(;i<e;){const r=n[i];if(bn(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<e&&"string"==typeof n[i];)i++;else{if(r===t)return n[i+1];i+=2}}}return null}(Mt(),e)}function Gn(e,t,n){return ke(()=>{const i=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function r(...e){if(this instanceof r)return i.apply(this,e),this;const t=new r(...e);return n.annotation=t,n;function n(e,n,i){const r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(t),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}class Yn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zn=new Yn("AnalyzeForEntryComponents"),Xn=Function;function Kn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),Kn(i,t)):t!==e&&t.push(i)}return t}function Qn(e,t){e.forEach(e=>Array.isArray(e)?Qn(e,t):t(e))}function Jn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ei(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function ti(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}function ni(e,t,n){let i=ri(e,t);return i>=0?e[1|i]=n:(i=~i,function(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function ii(e,t){const n=ri(e,t);if(n>=0)return e[1|n]}function ri(e,t){return function(e,t,n){let i=0,r=e.length>>1;for(;r!==i;){const n=i+(r-i>>1),s=e[n<<1];if(t===s)return n<<1;s>t?r=n:i=n+1}return~(r<<1)}(e,t)}const si={},oi=/\n/gm,ai=ee({provide:String,useValue:ee});let li;function ci(e){const t=li;return li=e,t}function hi(e,t=we.Default){if(void 0===li)throw new Error("inject() must be called from an injection context");return null===li?Ce(e,void 0,t):li.get(e,t&we.Optional?null:void 0,t)}function ui(e,t=we.Default){return(xe||hi)(oe(e),t)}const di=ui;function pi(e){const t=[];for(let n=0;n<e.length;n++){const i=oe(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let e,n=we.Default;for(let t=0;t<i.length;t++){const r=i[t],s=r.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=r.token:n|=s:e=r}t.push(ui(e,n))}else t.push(ui(i))}return t}function fi(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const mi=fi(Gn("Inject",e=>({token:e})),-1),gi=fi(Gn("Optional"),8),vi=fi(Gn("SkipSelf"),4);let bi,yi;function _i(e){var t;return(null===(t=function(){if(void 0===bi&&(bi=null,Oe.trustedTypes))try{bi=Oe.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return bi}())||void 0===t?void 0:t.createHTML(e))||e}function wi(e){var t;return(null===(t=function(){if(void 0===yi&&(yi=null,Oe.trustedTypes))try{yi=Oe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return yi}())||void 0===t?void 0:t.createHTML(e))||e}class xi{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Si extends xi{getTypeName(){return"HTML"}}class Ci extends xi{getTypeName(){return"Style"}}class ki extends xi{getTypeName(){return"Script"}}class Ei extends xi{getTypeName(){return"URL"}}class Ai extends xi{getTypeName(){return"ResourceURL"}}function Ri(e){return e instanceof xi?e.changingThisBreaksApplicationSecurity:e}function Ti(e,t){const n=Ii(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Ii(e){return e instanceof xi&&e.getTypeName()||null}class Di{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(_i(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Oi{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=_i(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=_i(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const n=t.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Pi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Mi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Li(e){return(e=String(e)).match(Pi)||e.match(Mi)?e:"unsafe:"+e}function Fi(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Ni(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const zi=Fi("area,br,col,hr,img,wbr"),Vi=Fi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ji=Fi("rp,rt"),Bi=Ni(ji,Vi),Hi=Ni(zi,Ni(Vi,Fi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ni(ji,Fi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bi),qi=Fi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$i=Fi("srcset"),Ui=Ni(qi,$i,Fi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wi=Fi("script,style,template");class Gi{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Hi.hasOwnProperty(t))return this.sanitizedSomething=!0,!Wi.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,s=t.toLowerCase();if(!Ui.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;qi[s]&&(o=Li(o)),$i[s]&&(i=o,o=(i=String(i)).split(",").map(e=>Li(e.trim())).join(", ")),this.buf.push(" ",t,'="',Xi(o),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Hi.hasOwnProperty(t)&&!zi.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Xi(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Yi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zi=/([^\#-~ |!])/g;function Xi(e){return e.replace(/&/g,"&amp;").replace(Yi,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Zi,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ki;function Qi(e,t){let n=null;try{Ki=Ki||function(e){const t=new Oi(e);return function(){try{return!!(new window.DOMParser).parseFromString(_i(""),"text/html")}catch(e){return!1}}()?new Di(t):t}(e);let i=t?String(t):"";n=Ki.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=Ki.getInertBodyElement(i)}while(i!==s);return _i((new Gi).sanitizeChildren(Ji(n)||n))}finally{if(n){const e=Ji(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function Ji(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var er=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function tr(e){const t=ir();return t?wi(t.sanitize(er.HTML,e)||""):Ti(e,"HTML")?wi(Ri(e)):Qi(ft(),ce(e))}function nr(e){const t=ir();return t?t.sanitize(er.URL,e)||"":Ti(e,"URL")?Ri(e):Li(ce(e))}function ir(){const e=Dt();return e&&e[12]}function rr(e){return e.ngDebugContext}function sr(e){return e.ngOriginalError}function or(e,...t){e.error(...t)}class ar{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e.ngErrorLogger||or}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?rr(e)?rr(e):this._findContext(sr(e)):null}_findOriginalError(e){let t=sr(e);for(;t&&sr(t);)t=sr(t);return t}}function lr(e,t){e.__ngContext__=t}const cr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Oe))();function hr(e){return{name:"document",target:e.ownerDocument}}function ur(e){return{name:"body",target:e.ownerDocument.body}}function dr(e){return e instanceof Function?e():e}var pr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function fr(e,t){return(void 0)(e,t)}function mr(e){const t=e[3];return tt(t)?t[3]:t}function gr(e){return br(e[13])}function vr(e){return br(e[4])}function br(e){for(;null!==e&&!tt(e);)e=e[4];return e}function yr(e,t,n,i,r){if(null!=i){let s,o=!1;tt(i)?s=i:et(i)&&(o=!0,i=i[0]);const a=vt(i);0===e&&null!==n?null==r?Ar(t,n,a):Er(t,n,a,r||null,!0):1===e&&null!==n?Er(t,n,a,r||null,!0):2===e?function(e,t,n){const i=Tr(e,t);i&&function(e,t,n,i){mt(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,i,r){const s=n[7];s!==vt(n)&&yr(t,e,i,s,r);for(let o=10;o<n.length;o++){const r=n[o];Nr(r[1],r,e,t,i,s)}}(t,e,s,n,r)}}function _r(e,t,n){return mt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function wr(e,t){const n=e[9],i=n.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,Rt(r,-1)),n.splice(i,1)}function xr(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const s=i[17];null!==s&&s!==e&&wr(s,i),t>0&&(e[n-1][4]=i[4]);const o=ei(e,10+t);Nr(i[1],r=i,r[11],2,null,null),r[0]=null,r[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}var r;return i}function Sr(e,t){if(!(256&t[2])){const n=t[11];mt(n)&&n.destroyNode&&Nr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Cr(e[1],e);for(;t;){let n=null;if(et(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)et(t)&&Cr(t[1],t),t=t[3];null===t&&(t=e),et(t)&&Cr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Cr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const e=t[n[i]];if(!(e instanceof gn)){const t=n[i+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const i=e[t[n]],r=t[n+1];try{r.call(i)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,i=t[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):vt(t[e]),a=i[r=n[s+2]],l=n[s+3];"boolean"==typeof l?o.removeEventListener(n[s],a,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const e=i[r=n[s+1]];n[s].call(e)}if(null!==i){for(let e=r+1;e<i.length;e++)(0,i[e])();t[7]=null}}(e,t),1===t[1].type&&mt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&tt(t[3])){n!==t[3]&&wr(n,t);const i=t[19];null!==i&&i.detachView(e)}}}function kr(e,t,n){return function(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const t=e.data[i.directiveStart].encapsulation;if(t===Ae.None||t===Ae.Emulated)return null}return yt(i,n)}(e,t.parent,n)}function Er(e,t,n,i,r){mt(e)?e.insertBefore(t,n,i,r):t.insertBefore(n,i,r)}function Ar(e,t,n){mt(e)?e.appendChild(t,n):t.appendChild(n)}function Rr(e,t,n,i,r){null!==i?Er(e,t,n,i,r):Ar(e,t,n)}function Tr(e,t){return mt(e)?e.parentNode(t):t.parentNode}function Ir(e,t,n){return Dr(e,t,n)}let Dr=function(e,t,n){return 40&e.type?yt(e,n):null};function Or(e,t,n,i){const r=kr(e,i,t),s=t[11],o=Ir(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(let a=0;a<n.length;a++)Rr(s,r,n[a],o,!1);else Rr(s,r,n,o,!1)}function Pr(e,t){if(null!==t){const n=t.type;if(3&n)return yt(t,e);if(4&n)return Lr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Pr(e,n);{const n=e[t.index];return tt(n)?Lr(-1,n):vt(n)}}if(32&n)return fr(t,e)()||vt(e[t.index]);{const n=Mr(e,t);return null!==n?Array.isArray(n)?n[0]:Pr(mr(e[16]),n):Pr(e,t.next)}}return null}function Mr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Lr(e,t){const n=10+e+1;if(n<t.length){const e=t[n],i=e[1].firstChild;if(null!==i)return Pr(e,i)}return t[7]}function Fr(e,t,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===t&&(a&&lr(vt(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)Fr(e,t,n.child,i,r,s,!1),yr(t,e,r,a,s);else if(32&l){const o=fr(n,i);let l;for(;l=o();)yr(t,e,r,l,s);yr(t,e,r,a,s)}else 16&l?zr(e,t,i,n,r,s):yr(t,e,r,a,s);n=o?n.projectionNext:n.next}}function Nr(e,t,n,i,r,s){Fr(n,i,e.firstChild,t,r,s,!1)}function zr(e,t,n,i,r,s){const o=n[16],a=o[6].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)yr(t,e,r,a[l],s);else Fr(e,t,a,o[3],r,s,!0)}function Vr(e,t,n){mt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function jr(e,t,n){mt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Br(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const n=t.length;if(r+n===i||e.charCodeAt(r+n)<=32)return r}n=r+1}}function Hr(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==Br(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function qr(e){return 4===e.type&&"ng-template"!==e.value}function $r(e,t,n){return t===(4!==e.type||n?e.value:"ng-template")}function Ur(e,t,n){let i=4;const r=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(bn(e[t]))return t;return e.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!$r(e,l,n)||""===l&&1===t.length){if(Wr(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==e.attrs){if(!Hr(e.attrs,c,n)){if(Wr(i))return!1;o=!0}continue}const h=Gr(8&i?"class":l,r,qr(e),n);if(-1===h){if(Wr(i))return!1;o=!0;continue}if(""!==c){let e;e=h>s?"":r[h+1].toLowerCase();const t=8&i?e:null;if(t&&-1!==Br(t,c,0)||2&i&&c!==e){if(Wr(i))return!1;o=!0}}}}else{if(!o&&!Wr(i)&&!Wr(l))return!1;if(o&&Wr(l))continue;o=!1,i=l|1&i}}return Wr(i)||o}function Wr(e){return 0==(1&e)}function Gr(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let n=!1;for(;r<t.length;){const i=t[r];if(i===e)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let e=t[++r];for(;"string"==typeof e;)e=t[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function Yr(e,t,n=!1){for(let i=0;i<t.length;i++)if(Ur(e,t[i],n))return!0;return!1}function Zr(e,t){e:for(let n=0;n<t.length;n++){const i=t[n];if(e.length===i.length){for(let t=0;t<e.length;t++)if(e[t]!==i[t])continue e;return!0}}return!1}function Xr(e,t){return e?":not("+t.trim()+")":t}function Kr(e){let t=e[0],n=1,i=2,r="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&i){const t=e[++n];r+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""===r||Wr(o)||(t+=Xr(s,r),r=""),i=o,s=s||!Wr(i);n++}return""!==r&&(t+=Xr(s,r)),t}const Qr={};function Jr(e){es(Ot(),Dt(),sn()+e,Vt())}function es(e,t,n,i){if(!i)if(3==(3&t[2])){const i=e.preOrderCheckHooks;null!==i&&un(t,i,n)}else{const i=e.preOrderHooks;null!==i&&dn(t,i,0,n)}on(n)}function ts(e,t){return e<<17|t<<2}function ns(e){return e>>17&32767}function is(e){return 2|e}function rs(e){return(131068&e)>>2}function ss(e,t){return-131069&e|t<<2}function os(e){return 1|e}function as(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const n=e.data[s];Zt(r),n.contentQueries(2,t[s],s)}}}function ls(e,t,n,i,r,s,o,a,l,c){const h=t.blueprint.slice();return h[0]=r,h[2]=140|i,At(h),h[3]=h[15]=e,h[8]=n,h[10]=o||e&&e[10],h[11]=a||e&&e[11],h[12]=l||e&&e[12]||null,h[9]=c||e&&e[9]||null,h[6]=s,h[16]=2==t.type?e[16]:h,h}function cs(e,t,n,i,r){let s=e.data[t];if(null===s)s=function(e,t,n,i,r){const s=Lt(),o=Nt(),a=e.data[t]=function(e,t,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,i,r),Tt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const e=function(){const e=Tt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return Ft(s,!0),s}function hs(e,t,n,i){if(0===n)return-1;const r=t.length;for(let s=0;s<n;s++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function us(e,t,n){Qt(t);try{const i=e.viewQuery;null!==i&&Bs(1,i,n);const r=e.template;null!==r&&fs(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&as(e,t),e.staticViewQueries&&Bs(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)Fs(e,t[n])}(t,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),i}finally{t[2]&=-5,rn()}}function ds(e,t,n,i){const r=t[2];if(256==(256&r))return;Qt(t);const s=Vt();try{At(t),Tt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&fs(e,t,n,2,i);const o=3==(3&r);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&un(t,n,null)}else{const n=e.preOrderHooks;null!==n&&dn(t,n,0,null),pn(t,0)}if(function(e){for(let t=gr(e);null!==t;t=vr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],i=n[3];0==(1024&n[2])&&Rt(i,1),n[2]|=1024}}}(t),function(e){for(let t=gr(e);null!==t;t=vr(t))for(let e=10;e<t.length;e++){const n=t[e],i=n[1];kt(n)&&ds(i,n,i.template,n[8])}}(t),null!==e.contentQueries&&as(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&un(t,n)}else{const n=e.contentHooks;null!==n&&dn(t,n,1),pn(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const i=n[e];if(i<0)on(~i);else{const r=i,s=n[++e],o=n[++e];Ut(s,r),o(2,t[r])}}}finally{on(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Ms(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Bs(2,l,i),!s)if(o){const n=e.viewCheckHooks;null!==n&&un(t,n)}else{const n=e.viewHooks;null!==n&&dn(t,n,2),pn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Rt(t[3],-1))}finally{rn()}}function ps(e,t,n,i){const r=t[10],s=!Vt(),o=Ct(t);try{s&&!o&&r.begin&&r.begin(),o&&us(e,t,i),ds(e,t,n,i)}finally{s&&!o&&r.end&&r.end()}}function fs(e,t,n,i,r){const s=sn(),o=2&i;try{on(-1),o&&t.length>20&&es(e,t,20,Vt()),n(i,r)}finally{on(s)}}function ms(e,t,n){if(nt(t)){const i=t.directiveEnd;for(let r=t.directiveStart;r<i;r++){const t=e.data[r];t.contentQueries&&t.contentQueries(1,n[r],r)}}}function gs(e,t,n){It()&&(function(e,t,n,i){const r=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Rn(n,t),lr(i,t);const o=n.initialInputs;for(let a=r;a<s;a++){const i=e.data[a],s=st(i);s&&Is(t,n,i);const l=jn(t,e,a,n);lr(l,t),null!==o&&Ds(0,a-r,l,i,0,o),s&&(xt(n.index,t)[8]=l)}}(e,t,n,yt(n,t)),128==(128&n.flags)&&function(e,t,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Tt.lFrame.currentDirectiveIndex;try{on(s);for(let n=i;n<r;n++){const i=e.data[n],r=t[n];Wt(n),null===i.hostBindings&&0===i.hostVars&&null===i.hostAttrs||ks(i,r)}}finally{on(-1),Wt(o)}}(e,t,n))}function vs(e,t,n=yt){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(t,e):e[o];e[r++]=a}}}function bs(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ys(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ys(e,t,n,i,r,s,o,a,l,c){const h=20+i,u=h+r,d=function(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:Qr);return n}(h,u),p="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function _s(e,t,n,i){const r=qs(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&$s(e).push(i,r.length-1))}function ws(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function xs(e,t,n,i,r,s,o,a){const l=yt(t,n);let c,h=t.inputs;var u;!a&&null!=h&&(c=h[i])?(Gs(e,n,c,i,r),it(t)&&function(e,t){const n=xt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(i="class"===(u=i)?"className":"for"===u?"htmlFor":"formaction"===u?"formAction":"innerHtml"===u?"innerHTML":"readonly"===u?"readOnly":"tabindex"===u?"tabIndex":u,r=null!=o?o(r,t.value||"",i):r,mt(s)?s.setProperty(l,i,r):yn(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Ss(e,t,n,i){let r=!1;if(It()){const s=function(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];Yr(n,o.selectors,!1)&&(r||(r=[]),On(Rn(n,t),e,o.type),st(o)?(Es(e,n),r.unshift(o)):r.push(o))}return r}(e,t,n),o=null===i?null:{"":-1};if(null!==s){r=!0,Rs(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let i=!1,a=!1,l=hs(e,t,s.length,null);for(let r=0;r<s.length;r++){const c=s[r];n.mergedAttrs=_n(n.mergedAttrs,c.hostAttrs),Ts(e,n,t,l,c),As(l,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const h=c.type.prototype;!i&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),i=!0),a||!h.ngOnChanges&&!h.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,i=e.data,r=t.attrs,s=[];let o=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=i[l],n=e.inputs,c=null===r||qr(t)?null:Os(n,r);s.push(c),o=ws(n,l,o),a=ws(e.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const i=e.localNames=[];for(let e=0;e<t.length;e+=2){const r=n[t[e+1]];if(null==r)throw new le("301",`Export of name '${t[e+1]}' not found!`);i.push(t[e],r)}}}(n,i,o)}return n.mergedAttrs=_n(n.mergedAttrs,n.attrs),r}function Cs(e,t,n,i,r,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(i,r,o)}}function ks(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Es(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function As(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;st(t)&&(n[""]=e)}}function Rs(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ts(e,t,n,i,r){e.data[i]=r;const s=r.factory||(r.factory=ot(r.type)),o=new gn(s,st(r),null);e.blueprint[i]=o,n[i]=o,Cs(e,t,0,i,hs(e,n,r.hostVars,Qr),r)}function Is(e,t,n){const i=yt(t,e),r=bs(n),s=e[10],o=Ns(e,ls(e,r,null,n.onPush?64:16,i,t,s,s.createRenderer(i,n),null,null));e[t.index]=o}function Ds(e,t,n,i,r,s){const o=s[t];if(null!==o){const e=i.setInput;for(let t=0;t<o.length;){const r=o[t++],s=o[t++],a=o[t++];null!==e?i.setInput(n,a,r,s):n[s]=a}}}function Os(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function Ps(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function Ms(e,t){const n=xt(t,e);if(kt(n)){const e=n[1];80&n[2]?ds(e,n,e.template,n[8]):n[5]>0&&Ls(n)}}function Ls(e){for(let n=gr(e);null!==n;n=vr(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];ds(e,t,e.template,t[8])}else t[5]>0&&Ls(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const i=xt(t[n],e);kt(i)&&i[5]>0&&Ls(i)}}function Fs(e,t){const n=xt(t,e),i=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(i,n),us(i,n,n[8])}function Ns(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function zs(e){for(;e;){e[2]|=64;const t=mr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function Vs(e,t,n){const i=t[10];i.begin&&i.begin();try{ds(e,t,e.template,n)}catch(r){throw Ws(t,r),r}finally{i.end&&i.end()}}function js(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],i=St(n),r=i[1];ps(r,i,r.template,n)}}(e[8])}function Bs(e,t,n){Zt(0),t(e,n)}const Hs=(()=>Promise.resolve(null))();function qs(e){return e[7]||(e[7]=[])}function $s(e){return e.cleanup||(e.cleanup=[])}function Us(e,t,n){return(null===e||st(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function Ws(e,t){const n=e[9],i=n?n.get(ar,null):null;i&&i.handleError(t)}function Gs(e,t,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Ys(e,t,n){const i=bt(t,e);!function(e,t,n){mt(e)?e.setValue(t,n):t.textContent=n}(e[11],i,n)}function Zs(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?r=ie(r,e):2==s&&(i=ie(i,e+": "+t[++o]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}const Xs=new Yn("INJECTOR",-1);class Ks{get(e,t=si){if(t===si){const t=new Error(`NullInjectorError: No provider for ${ne(e)}!`);throw t.name="NullInjectorError",t}return t}}const Qs=new Yn("Set Injector scope."),Js={},eo={},to=[];let no;function io(){return void 0===no&&(no=new Ks),no}function ro(e,t=null,n=null,i){return new so(e,n,t||io(),i)}class so{constructor(e,t,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];t&&Qn(t,n=>this.processProvider(n,e,t)),Qn([e],e=>this.processInjectorType(e,[],r)),this.records.set(Xs,lo(void 0,this));const s=this.records.get(Qs);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof e?null:ne(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=si,n=we.Default){this.assertNotDestroyed();const i=ci(this);try{if(!(n&we.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(r=e)||"object"==typeof r&&r instanceof Yn)&&fe(e);t=n&&this.injectableDefInScope(n)?lo(oo(e),Js):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&we.Self?io():this.parent).get(e,t=n&we.Optional&&t===si?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(ne(e)),i)throw s;return function(e,t,n,i){const r=e.ngTempTokenPath;throw t.__source&&r.unshift(t.__source),e.message=function(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let r=ne(t);if(Array.isArray(t))r=t.map(ne).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push(n+":"+("string"==typeof i?JSON.stringify(i):ne(i)))}r=`{${e.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(oi,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{ci(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(ne(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=oe(e)))return!1;let i=ge(e);const r=null==i&&e.ngModule||void 0,s=void 0===r?e:r,o=-1!==n.indexOf(s);if(void 0!==r&&(i=ge(r)),null==i)return!1;if(null!=i.imports&&!o){let e;n.push(s);try{Qn(i.imports,i=>{this.processInjectorType(i,t,n)&&(void 0===e&&(e=[]),e.push(i))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:i}=e[t];Qn(i,e=>this.processProvider(e,n,i||to))}}this.injectorDefTypes.add(s);const a=ot(s)||(()=>new s);this.records.set(s,lo(a,Js));const l=i.providers;if(null!=l&&!o){const t=e;Qn(l,e=>this.processProvider(e,t,l))}return void 0!==r&&void 0!==e.providers}processProvider(e,t,n){let i=ho(e=oe(e))?e:oe(e&&e.provide);const r=function(e,t,n){return co(e)?lo(void 0,e.useValue):lo(ao(e),Js)}(e);if(ho(e)||!0!==e.multi)this.records.get(i);else{let t=this.records.get(i);t||(t=lo(void 0,Js,!0),t.factory=()=>pi(t.multi),this.records.set(i,t)),i=e,t.multi.push(e)}this.records.set(i,r)}hydrate(e,t){var n;return t.value===Js&&(t.value=eo,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function oo(e){const t=fe(e),n=null!==t?t.factory:ot(e);if(null!==n)return n;if(e instanceof Yn)throw new Error(`Token ${ne(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=ti(t,"?");throw new Error(`Can't resolve all parameters for ${ne(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[ve]||e[ye]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ao(e,t,n){let i;if(ho(e)){const t=oe(e);return ot(t)||oo(t)}if(co(e))i=()=>oe(e.useValue);else if((r=e)&&r.useFactory)i=()=>e.useFactory(...pi(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))i=()=>ui(oe(e.useExisting));else{const t=oe(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ot(t)||oo(t);i=()=>new t(...pi(e.deps))}var r;return i}function lo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function co(e){return null!==e&&"object"==typeof e&&ai in e}function ho(e){return"function"==typeof e}const uo=function(e,t,n){return function(e,t=null,n=null,i){const r=ro(e,t,n,i);return r._resolveInjectorDefTypes(),r}({name:n},t,e,n)};let po=(()=>{class e{static create(e,t){return Array.isArray(e)?uo(e,t,""):uo(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=si,e.NULL=new Ks,e.\u0275prov=de({token:e,providedIn:"any",factory:()=>ui(Xs)}),e.__NG_ELEMENT_ID__=-1,e})();function fo(e,t){hn(St(e)[1],Mt())}function mo(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const i=[e];for(;t;){let r;if(st(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");r=t.\u0275dir}if(r){if(n){i.push(r);const t=e;t.inputs=go(e.inputs),t.declaredInputs=go(e.declaredInputs),t.outputs=go(e.outputs);const n=r.hostBindings;n&&yo(e,n);const s=r.viewQuery,o=r.contentQueries;if(s&&vo(e,s),o&&bo(e,o),te(e.inputs,r.inputs),te(e.declaredInputs,r.declaredInputs),te(e.outputs,r.outputs),st(r)&&r.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(r.data.animation)}}const t=r.features;if(t)for(let i=0;i<t.length;i++){const r=t[i];r&&r.ngInherit&&r(e),r===mo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=_n(r.hostAttrs,n=_n(n,r.hostAttrs))}}(i)}function go(e){return e===Pe?{}:e===Le?[]:e}function vo(e,t){const n=e.viewQuery;e.viewQuery=n?(e,i)=>{t(e,i),n(e,i)}:t}function bo(e,t){const n=e.contentQueries;e.contentQueries=n?(e,i,r)=>{t(e,i,r),n(e,i,r)}:t}function yo(e,t){const n=e.hostBindings;e.hostBindings=n?(e,i)=>{t(e,i),n(e,i)}:t}let _o=null;function wo(){if(!_o){const e=Oe.Symbol;if(e&&e.iterator)_o=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_o=n)}}}return _o}class xo{constructor(e){this.wrapped=e}static wrap(e){return new xo(e)}static unwrap(e){return xo.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof xo}}function So(e){return!!Co(e)&&(Array.isArray(e)||!(e instanceof Map)&&wo()in e)}function Co(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ko(e,t,n){return e[t]=n}function Eo(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ao(e,t,n,i){const r=Eo(e,t,n);return Eo(e,t+1,i)||r}function Ro(e,t,n,i){const r=Dt();return Eo(r,qt(),t)&&(Ot(),function(e,t,n,i,r,s){const o=yt(e,t);!function(e,t,n,i,r,s,o){if(null==s)mt(e)?e.removeAttribute(t,r,n):t.removeAttribute(r);else{const a=null==o?ce(s):o(s,i||"",r);mt(e)?e.setAttribute(t,r,a,n):n?t.setAttributeNS(n,r,a):t.setAttribute(r,a)}}(t[11],o,s,e.value,n,i,r)}(an(),r,e,t,n,i)),Ro}function To(e,t,n,i){return Eo(e,qt(),n)?t+ce(n)+i:Qr}function Io(e,t,n,i,r,s,o,a){const l=Dt(),c=Ot(),h=e+20,u=c.firstCreatePass?function(e,t,n,i,r,s,o,a,l){const c=t.consts,h=cs(t,e,4,o||null,Et(c,a));Ss(t,n,h,Et(c,l)),hn(t,h);const u=h.tViews=ys(2,h,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,h),u.queries=t.queries.embeddedTView(h)),h}(h,c,l,t,n,i,r,s,o):c.data[h];Ft(u,!1);const d=l[11].createComment("");Or(c,l,d,u),lr(d,l),Ns(l,l[h]=Ps(d,l,d,u)),rt(u)&&gs(c,l,u),null!=o&&vs(l,u,a)}function Do(e){return wt(Tt.lFrame.contextLView,20+e)}function Oo(e,t=we.Default){const n=Dt();return null===n?ui(e,t):Ln(Mt(),n,oe(e),t)}function Po(e,t,n){const i=Dt();return Eo(i,qt(),t)&&xs(Ot(),an(),i,e,t,i[11],n,!1),Po}function Mo(e,t,n,i,r){const s=r?"class":"style";Gs(e,n,t.inputs[s],s,i)}function Lo(e,t,n,i){const r=Dt(),s=Ot(),o=20+e,a=r[11],l=r[o]=_r(a,t,Tt.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,i,r,s,o){const a=t.consts,l=cs(t,e,2,r,Et(a,s));return Ss(t,n,l,Et(a,o)),null!==l.attrs&&Zs(l,l.attrs,!1),null!==l.mergedAttrs&&Zs(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,0,t,n,i):s.data[o];Ft(c,!0);const h=c.mergedAttrs;null!==h&&vn(a,l,h);const u=c.classes;null!==u&&jr(a,l,u);const d=c.styles;null!==d&&Vr(a,l,d),64!=(64&c.flags)&&Or(s,r,l,c),0===Tt.lFrame.elementDepthCount&&lr(l,r),Tt.lFrame.elementDepthCount++,rt(c)&&(gs(s,r,c),ms(s,c,r)),null!==i&&vs(r,c)}function Fo(){let e=Mt();Nt()?zt():(e=e.parent,Ft(e,!1));const t=e;Tt.lFrame.elementDepthCount--;const n=Ot();n.firstCreatePass&&(hn(n,e),nt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Mo(n,t,Dt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Mo(n,t,Dt(),t.stylesWithoutHost,!1)}function No(e,t,n,i){Lo(e,t,n,i),Fo()}function zo(e,t,n){const i=Dt(),r=Ot(),s=e+20,o=r.firstCreatePass?function(e,t,n,i,r){const s=t.consts,o=Et(s,i),a=cs(t,e,8,"ng-container",o);return null!==o&&Zs(a,o,!0),Ss(t,n,a,Et(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,n):r.data[s];Ft(o,!0);const a=i[s]=i[11].createComment("");Or(r,i,a,o),lr(a,i),rt(o)&&(gs(r,i,o),ms(r,o,i)),null!=n&&vs(i,o)}function Vo(){let e=Mt();const t=Ot();Nt()?zt():(e=e.parent,Ft(e,!1)),t.firstCreatePass&&(hn(t,e),nt(e)&&t.queries.elementEnd(e))}function jo(e,t,n){zo(e,t,n),Vo()}function Bo(){return Dt()}function Ho(e){return!!e&&"function"==typeof e.then}function qo(e){return!!e&&"function"==typeof e.subscribe}const $o=qo;function Uo(e,t,n=!1,i){const r=Dt(),s=Ot(),o=Mt();return Go(s,r,r[11],o,e,t,n,i),Uo}function Wo(e,t,n=!1,i){const r=Mt(),s=Dt(),o=Ot();return Go(o,s,Us(Gt(o.data),r,s),r,e,t,n,i),Wo}function Go(e,t,n,i,r,s,o=!1,a){const l=rt(i),c=e.firstCreatePass&&$s(e),h=qs(t);let u=!0;if(3&i.type){const d=yt(i,t),p=a?a(d):Pe,f=p.target||d,m=h.length,g=a?e=>a(vt(e[i.index])).target:i.index;if(mt(n)){let o=null;if(!a&&l&&(o=function(e,t,n,i){const r=e.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const e=r[s];if(e===n&&r[s+1]===i){const e=t[7],n=r[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,r,i.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,u=!1;else{s=Zo(i,t,0,s,!1);const e=n.listen(p.name||f,r,s);h.push(s,e),c&&c.push(r,g,m,m+1)}}else s=Zo(i,t,0,s,!0),f.addEventListener(r,s,o),h.push(s),c&&c.push(r,g,m,o)}else s=Zo(i,t,0,s,!1);const d=i.outputs;let p;if(u&&null!==d&&(p=d[r])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=h.length;h.push(s,e),c&&c.push(r,i.index,o,-(o+1))}}}function Yo(e,t,n,i){try{return!1!==n(i)}catch(r){return Ws(e,r),!1}}function Zo(e,t,n,i,r){return function n(s){if(s===Function)return i;const o=2&e.flags?xt(e.index,t):t;0==(32&t[2])&&zs(o);let a=Yo(t,0,i,s),l=n.__ngNextListenerFn__;for(;l;)a=Yo(t,0,l,s)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Xo(e=1){return function(e){return(Tt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Tt.lFrame.contextLView))[8]}(e)}function Ko(e,t){let n=null;const i=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===i?Yr(e,s,!0):Zr(i,s))return r}else n=r}return n}function Qo(e){const t=Dt()[16][6];if(!t.projection){const n=t.projection=ti(e?e.length:1,null),i=n.slice();let r=t.child;for(;null!==r;){const t=e?Ko(r,e):0;null!==t&&(i[t]?i[t].projectionNext=r:n[t]=r,i[t]=r),r=r.next}}}function Jo(e,t=0,n){const i=Dt(),r=Ot(),s=cs(r,20+e,16,null,n||null);null===s.projection&&(s.projection=t),zt(),64!=(64&s.flags)&&function(e,t,n){zr(t[11],0,t,n,kr(e,n,t),Ir(n.parent||t[6],n,t))}(r,i,s)}function ea(e,t,n){return ta(e,"",t,"",n),ea}function ta(e,t,n,i,r){const s=Dt(),o=To(s,t,n,i);return o!==Qr&&xs(Ot(),an(),s,e,o,s[11],r,!1),ta}function na(e,t,n,i,r){const s=e[n+1],o=null===t;let a=i?ns(s):rs(s),l=!1;for(;0!==a&&(!1===l||o);){const n=e[a+1];ia(e[a],t)&&(l=!0,e[a+1]=i?os(n):is(n)),a=i?ns(n):rs(n)}l&&(e[n+1]=i?is(s):os(s))}function ia(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&ri(e,t)>=0}const ra={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function sa(e){return e.substring(ra.key,ra.keyEnd)}function oa(e,t){const n=ra.textEnd;return n===t?-1:(t=ra.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,ra.key=t,n),aa(e,t,n))}function aa(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function la(e,t,n){return da(e,t,n,!1),la}function ca(e,t){return da(e,t,null,!0),ca}function ha(e){pa(ni,ua,e,!0)}function ua(e,t){for(let n=function(e){return function(e){ra.key=0,ra.keyEnd=0,ra.value=0,ra.valueEnd=0,ra.textEnd=e.length}(e),oa(e,aa(e,0,ra.textEnd))}(t);n>=0;n=oa(t,n))ni(e,sa(t),!0)}function da(e,t,n,i){const r=Dt(),s=Ot(),o=$t(2);s.firstUpdatePass&&ma(s,e,o,i),t!==Qr&&Eo(r,o,t)&&ba(s,s.data[sn()],r,r[11],e,r[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=ne(Ri(e)))),e}(t,n),i,o)}function pa(e,t,n,i){const r=Ot(),s=$t(2);r.firstUpdatePass&&ma(r,null,s,i);const o=Dt();if(n!==Qr&&Eo(o,s,n)){const a=r.data[sn()];if(wa(a,i)&&!fa(r,s)){let e=i?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=ie(e,n||"")),Mo(r,a,o,n,i)}else!function(e,t,n,i,r,s,o,a){r===Qr&&(r=Me);let l=0,c=0,h=0<r.length?r[0]:null,u=0<s.length?s[0]:null;for(;null!==h||null!==u;){const d=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0;let f,m=null;h===u?(l+=2,c+=2,d!==p&&(m=u,f=p)):null===u||null!==h&&h<u?(l+=2,m=h):(c+=2,m=u,f=p),null!==m&&ba(e,t,n,i,m,f,o,a),h=l<r.length?r[l]:null,u=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return Me;const i=[],r=Ri(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)e(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&e(i,s,r[s]);else"string"==typeof r&&t(i,r);return i}(e,t,n),i,s)}}function fa(e,t){return t>=e.expandoStartIndex}function ma(e,t,n,i){const r=e.data;if(null===r[n+1]){const s=r[sn()],o=fa(e,n);wa(s,i)&&null===t&&!o&&(t=!1),t=function(e,t,n,i){const r=Gt(e);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=va(n=ga(null,e,t,n,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==r)if(n=ga(r,e,t,n,i),null===s){let n=function(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==rs(i))return e[ns(i)]}(e,t,i);void 0!==n&&Array.isArray(n)&&(n=ga(null,e,t,n[1],i),n=va(n,t.attrs,i),function(e,t,n,i){e[ns(n?t.classBindings:t.styleBindings)]=i}(e,t,i,n))}else s=function(e,t,n){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=va(i,e[s].hostAttrs,n);return va(i,t.attrs,n)}(e,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),n}(r,s,t,i),function(e,t,n,i,r,s){let o=s?t.classBindings:t.styleBindings,a=ns(o),l=rs(o);e[i]=n;let c,h=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||ri(e,c)>0)&&(h=!0)}else c=n;if(r)if(0!==l){const t=ns(e[a+1]);e[i+1]=ts(t,a),0!==t&&(e[t+1]=ss(e[t+1],i)),e[a+1]=131071&e[a+1]|i<<17}else e[i+1]=ts(a,0),0!==a&&(e[a+1]=ss(e[a+1],i)),a=i;else e[i+1]=ts(l,0),0===a?a=i:e[l+1]=ss(e[l+1],i),l=i;h&&(e[i+1]=is(e[i+1])),na(e,c,i,!0),na(e,c,i,!1),function(e,t,n,i,r){const s=r?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&ri(s,t)>=0&&(n[i+1]=os(n[i+1]))}(t,c,e,i,s),o=ts(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,n,o,i)}}function ga(e,t,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],i=va(i,s.hostAttrs,r),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),i}function va(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ni(e,o,!!n||t[++s]))}return void 0===e?null:e}function ba(e,t,n,i,r,s,o,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];_a(1==(1&c)?ya(l,t,n,r,rs(c),o):void 0)||(_a(s)||2==(2&c)&&(s=ya(l,null,n,r,a,o)),function(e,t,n,i,r){const s=mt(e);if(t)r?s?e.addClass(n,i):n.classList.add(i):s?e.removeClass(n,i):n.classList.remove(i);else{let t=-1===i.indexOf("-")?void 0:pr.DashCase;if(null==r)s?e.removeStyle(n,i,t):n.style.removeProperty(i);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),t|=pr.Important),s?e.setStyle(n,i,r,t):n.style.setProperty(i,r,o?"important":"")}}}(i,o,bt(sn(),n),r,s))}function ya(e,t,n,i,r,s){const o=null===t;let a;for(;r>0;){const t=e[r],s=Array.isArray(t),l=s?t[1]:t,c=null===l;let h=n[r+1];h===Qr&&(h=c?Me:void 0);let u=c?ii(h,i):l===i?h:void 0;if(s&&!_a(u)&&(u=ii(t,i)),_a(u)&&(a=u,o))return a;const d=e[r+1];r=o?ns(d):rs(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=ii(e,i))}return a}function _a(e){return void 0!==e}function wa(e,t){return 0!=(e.flags&(t?16:32))}function xa(e,t=""){const n=Dt(),i=Ot(),r=e+20,s=i.firstCreatePass?cs(i,r,1,t,null):i.data[r],o=n[r]=function(e,t){return mt(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Or(i,n,o,s),Ft(s,!1)}function Sa(e){return Ca("",e,""),Sa}function Ca(e,t,n){const i=Dt(),r=To(i,e,t,n);return r!==Qr&&Ys(i,sn(),r),Ca}function ka(e,t,n,i,r,s,o){const a=Dt(),l=function(e,t,n,i,r,s,o,a){const l=function(e,t,n,i,r){const s=Ao(e,t,n,i);return Eo(e,t+2,r)||s}(e,Ht(),n,r,o);return $t(3),l?t+ce(n)+i+ce(r)+s+ce(o)+a:Qr}(a,e,t,n,i,r,s,o);return l!==Qr&&Ys(a,sn(),l),ka}function Ea(e,t,n){pa(ni,ua,To(Dt(),e,t,n),!0)}function Aa(e,t,n){const i=Dt();return Eo(i,qt(),t)&&xs(Ot(),an(),i,e,t,i[11],n,!0),Aa}function Ra(e,t,n){const i=Dt();if(Eo(i,qt(),t)){const r=Ot(),s=an();xs(r,s,i,e,t,Us(Gt(r.data),s,i),n,!0)}return Ra}const Ta=void 0;var Ia=["en",[["a","p"],["AM","PM"],Ta],[["AM","PM"],Ta,Ta],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ta,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ta,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ta,"{1} 'at' {0}",Ta],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Da={};function Oa(e){return e in Da||(Da[e]=Oe.ng&&Oe.ng.common&&Oe.ng.common.locales&&Oe.ng.common.locales[e]),Da[e]}var Pa=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});let Ma="en-US";function La(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(Ma=e.toLowerCase().replace(/_/g,"-"))}function Fa(e,t,n,i,r){if(e=oe(e),Array.isArray(e))for(let s=0;s<e.length;s++)Fa(e[s],t,n,i,r);else{const s=Ot(),o=Dt();let a=ho(e)?e:oe(e.provide),l=ao(e);const c=Mt(),h=1048575&c.providerIndexes,u=c.directiveStart,d=c.providerIndexes>>20;if(ho(e)||!e.multi){const i=new gn(l,r,Oo),p=Va(a,t,r?h:h+d,u);-1===p?(On(Rn(c,o),s,a),Na(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(i),o.push(i)):(n[p]=i,o[p]=i)}else{const p=Va(a,t,h+d,u),f=Va(a,t,h,h+d),m=p>=0&&n[p],g=f>=0&&n[f];if(r&&!g||!r&&!m){On(Rn(c,o),s,a);const h=function(e,t,n,i,r){const s=new gn(e,n,Oo);return s.multi=[],s.index=t,s.componentProviders=0,za(s,r,i&&!n),s}(r?Ba:ja,n.length,r,i,l);!r&&g&&(n[f].providerFactory=h),Na(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(h),o.push(h)}else Na(s,e,p>-1?p:f,za(n[r?f:p],l,!r&&i));!r&&i&&g&&n[f].componentProviders++}}}function Na(e,t,n,i){const r=ho(t);if(r||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[i,s]):o[e+1].push(i,s)}else o.push(n,s)}}}function za(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Va(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function ja(e,t,n,i){return Ha(this.multi,[])}function Ba(e,t,n,i){const r=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=jn(n,n[1],this.providerFactory.index,i);s=t.slice(0,e),Ha(r,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Ha(r,s);return s}function Ha(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function qa(e,t=[]){return n=>{n.providersResolver=(n,i)=>function(e,t,n){const i=Ot();if(i.firstCreatePass){const r=st(e);Fa(n,i.data,i.blueprint,r,!0),Fa(t,i.data,i.blueprint,r,!1)}}(n,i?i(e):e,t)}}class $a{}class Ua{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${ne(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let Wa=(()=>{class e{}return e.NULL=new Ua,e})();function Ga(...e){}function Ya(e,t){return new Xa(yt(e,t))}const Za=function(){return Ya(Mt(),Dt())};let Xa=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Za,e})();function Ka(e){return e instanceof Xa?e.nativeElement:e}class Qa{}let Ja=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>el(),e})();const el=function(){const e=Dt(),t=xt(Mt().index,e);return function(e){return e[11]}(et(t)?t:e)};let tl=(()=>{class e{}return e.\u0275prov=de({token:e,providedIn:"root",factory:()=>null}),e})();class nl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const il=new nl("11.2.14");class rl{constructor(){}supports(e){return So(e)}create(e){return new ol(e)}}const sl=(e,t)=>t;class ol{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sl}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,r=null;for(;t||n;){const s=!n||t&&t.currentIndex<hl(n,i,r)?t:n,o=hl(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{r||(r=[]);const e=o-i,t=a-i;if(e!=t){for(let n=0;n<e;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;t<=s&&s<e&&(r[n]=i+1)}r[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!So(e))throw new Error(`Error trying to diff '${ne(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,i,r=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],i=this._trackByFn(t,n),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,t)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,t),s=!0),r=r._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[wo()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(e,e=>{i=this._trackByFn(t,e),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,e,i,t)),Object.is(r.item,e)||this._addIdentityChange(r,e)):(r=this._mismatch(r,e,i,t),s=!0),r=r._next,t++}),this.length=t;return this._truncate(r),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):e=this._addAfter(new al(t,n),r,i),e}_verifyReinsertion(e,t,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new cl),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class al{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ll{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class cl{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ll,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hl(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class ul{constructor(){}supports(e){return e instanceof Map||Co(e)}create(){return new dl}}class dl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Co(e)))throw new Error(`Error trying to diff '${ne(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new pl(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class pl{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fl(){return new ml([new rl])}let ml=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||fl()),deps:[[e,new vi,new gi]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=de({token:e,providedIn:"root",factory:fl}),e})();function gl(){return new vl([new ul])}let vl=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||gl()),deps:[[e,new vi,new gi]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=de({token:e,providedIn:"root",factory:gl}),e})();function bl(e,t,n,i,r=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&i.push(vt(s)),tt(s))for(let e=10;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&bl(t[1],t,n,i)}const o=n.type;if(8&o)bl(e,t,n.child,i);else if(32&o){const e=fr(n,t);let r;for(;r=e();)i.push(r)}else if(16&o){const e=Mr(t,n);if(Array.isArray(e))i.push(...e);else{const n=mr(t[16]);bl(n[1],n,e,i,!0)}}n=r?n.projectionNext:n.next}return i}class yl{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return bl(t,e,t.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(tt(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(xr(e,n),ei(t,n))}this._attachedToViewContainer=!1}Sr(this._lView[1],this._lView)}onDestroy(e){_s(this._lView[1],this._lView,null,e)}markForCheck(){zs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){jt(!0);try{Vs(e,t,n)}finally{jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Nr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class _l extends yl{constructor(e){super(e),this._view=e}detectChanges(){js(this._view)}checkNoChanges(){!function(e){jt(!0);try{js(e)}finally{jt(!1)}}(this._view)}get context(){return null}}const wl=Sl;let xl=(()=>{class e{}return e.__NG_ELEMENT_ID__=wl,e.__ChangeDetectorRef__=!0,e})();function Sl(e=!1){return function(e,t,n){if(!n&&it(e)){const n=xt(e.index,t);return new yl(n,n)}return 47&e.type?new yl(t[16],t):null}(Mt(),Dt(),e)}const Cl=[new ul],kl=new ml([new rl]),El=new vl(Cl),Al=function(){return Dl(Mt(),Dt())};let Rl=(()=>{class e{}return e.__NG_ELEMENT_ID__=Al,e})();const Tl=Rl,Il=class extends Tl{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=ls(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(n[19]=i.createEmbeddedView(t)),us(t,n,e),new yl(n)}};function Dl(e,t){return 4&e.type?new Il(t,e,Ya(e,t)):null}class Ol{}class Pl{}const Ml=function(){return jl(Mt(),Dt())};let Ll=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ml,e})();const Fl=Ll,Nl=class extends Fl{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Ya(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Dn(this._hostTNode,this._hostLView);if(xn(e)){const t=Cn(e,this._hostLView),n=Sn(e);return new qn(t[1].data[n+8],t)}return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=zl(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const i=e.createEmbeddedView(t||{});return this.insert(i,n),i}createComponent(e,t,n,i,r){const s=n||this.parentInjector;if(!r&&null==e.ngModule&&s){const e=s.get(Ol,null);e&&(r=e)}const o=e.create(s,i,void 0,r);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,i=n[1];if(tt(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],i=new Nl(t,t[6],t[3]);i.detach(i.indexOf(e))}}const r=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=t),i<s-10?(t[4]=n[r],Jn(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(i,n,s,r);const o=Lr(r,s),a=n[11],l=Tr(a,s[7]);return null!==l&&function(e,t,n,i,r,s){i[0]=r,i[6]=t,Nr(e,i,n,1,r,s)}(i,s[6],a,n,l,o),e.attachToViewContainerRef(),Jn(Vl(s),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=zl(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=xr(this._lContainer,t);n&&(ei(Vl(this._lContainer),t),Sr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=xr(this._lContainer,t);return n&&null!=ei(Vl(this._lContainer),t)?new yl(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function zl(e){return e[8]}function Vl(e){return e[8]||(e[8]=[])}function jl(e,t){let n;const i=t[e.index];if(tt(i))n=i;else{let r;if(8&e.type)r=vt(i);else{const n=t[11];r=n.createComment("");const i=yt(e,t);Er(n,Tr(n,i),r,function(e,t){return mt(e)?e.nextSibling(t):t.nextSibling}(n,i),!1)}t[e.index]=n=Ps(i,t,r,e),Ns(t,n)}return new Nl(n,e,t)}const Bl={};class Hl extends Wa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Qe(e);return new Ul(t,this.ngModule)}}function ql(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const $l=new Yn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>cr});class Ul extends $a{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Kr).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return ql(this.componentDef.inputs)}get outputs(){return ql(this.componentDef.outputs)}create(e,t,n,i){const r=(i=i||this.ngModule)?function(e,t){return{get:(n,i,r)=>{const s=e.get(n,Bl,r);return s!==Bl||i===Bl?s:t.get(n,i,r)}}}(e,i.injector):e,s=r.get(Qa,gt),o=r.get(tl,null),a=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(mt(e))return e.selectRootElement(t,n===Ae.ShadowDom);let i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(a,n,this.componentDef.encapsulation):_r(s.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,u={components:[],scheduler:cr,clean:Hs,playerHandler:null,flags:0},d=ys(0,null,null,1,0,null,null,null,null,null),p=ls(null,d,u,h,null,null,s,a,o,r);let f,m;Qt(p);try{const e=function(e,t,n,i,r,s){const o=n[1];n[20]=e;const a=cs(o,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(Zs(a,l,!0),null!==e&&(vn(r,e,l),null!==a.classes&&jr(r,e,a.classes),null!==a.styles&&Vr(r,e,a.styles)));const c=i.createRenderer(e,t),h=ls(n,bs(t),null,t.onPush?64:16,n[20],a,i,c,null,null);return o.firstCreatePass&&(On(Rn(a,n),o,t.type),Es(o,a),Rs(a,n.length,1)),Ns(n,h),n[20]=h}(c,this.componentDef,p,s,a);if(c)if(n)vn(a,c,["ng-version",il.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let s=e[i];if("string"==typeof s)2===r?""!==s&&t.push(s,e[++i]):8===r&&n.push(s);else{if(!Wr(r))break;r=s}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&vn(a,c,e),t&&t.length>0&&jr(a,c,t.join(" "))}if(m=_t(d,20),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=t[n];e.push(null!=i?Array.from(i):null)}}f=function(e,t,n,i,r){const s=n[1],o=function(e,t,n){const i=Mt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ts(e,i,t,hs(e,t,1,null),n));const r=jn(t,e,i.directiveStart,i);lr(r,t);const s=yt(i,t);return s&&lr(s,t),r}(s,n,t);if(i.components.push(o),e[8]=o,r&&r.forEach(e=>e(o,t)),t.contentQueries){const e=Mt();t.contentQueries(1,o,e.directiveStart)}const a=Mt();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(on(a.index),Cs(n[1],a,0,a.directiveStart,a.directiveEnd,t),ks(t,o)),o}(e,this.componentDef,p,u,[fo]),us(d,p,null)}finally{rn()}return new Wl(this.componentType,f,Ya(m,p),p,m)}}class Wl extends class{}{constructor(e,t,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.instance=t,this.hostView=this.changeDetectorRef=new _l(i),this.componentType=e}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Gl=new Map;class Yl extends Ol{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Hl(this);const n=Je(e),i=e[je]||null;i&&La(i),this._bootstrapComponents=dr(n.bootstrap),this._r3Injector=ro(e,t,[{provide:Ol,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver}],ne(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=po.THROW_IF_NOT_FOUND,n=we.Default){return e===po||e===Ol||e===Xs?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Zl extends Pl{constructor(e){super(),this.moduleType=e,null!==Je(e)&&function(e){const t=new Set;!function e(n){const i=Je(n,!0),r=i.id;null!==r&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ne(t)} vs ${ne(t.name)}`)}(r,Gl.get(r),n),Gl.set(r,n));const s=dr(i.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Yl(this.moduleType,e)}}function Xl(e,t,n){const i=Bt()+e,r=Dt();return r[i]===Qr?ko(r,i,n?t.call(n):t()):function(e,t){return e[t]}(r,i)}function Kl(e,t,n,i){return ec(Dt(),Bt(),e,t,n,i)}function Ql(e,t,n,i,r){return tc(Dt(),Bt(),e,t,n,i,r)}function Jl(e,t){const n=e[t];return n===Qr?void 0:n}function ec(e,t,n,i,r,s){const o=t+n;return Eo(e,o,r)?ko(e,o+1,s?i.call(s,r):i(r)):Jl(e,o+1)}function tc(e,t,n,i,r,s,o){const a=t+n;return Ao(e,a,r,s)?ko(e,a+2,o?i.call(o,r,s):i(r,s)):Jl(e,a+2)}function nc(e,t){const n=Ot();let i;const r=e+20;n.firstCreatePass?(i=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}throw new le("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=ot(i.type)),o=Se(Oo);try{const e=En(!1),t=s();return En(e),function(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,Dt(),r,t),t}finally{Se(o)}}function ic(e,t,n){const i=e+20,r=Dt(),s=wt(r,i);return oc(r,sc(r,i)?ec(r,Bt(),t,s.transform,n,s):s.transform(n))}function rc(e,t,n,i){const r=e+20,s=Dt(),o=wt(s,r);return oc(s,sc(s,r)?tc(s,Bt(),t,o.transform,n,i,o):o.transform(n,i))}function sc(e,t){return e[1].data[t].pure}function oc(e,t){return xo.isWrapped(t)&&(t=xo.unwrap(t),e[Ht()]=Qr),t}function ac(e){return t=>{setTimeout(e,void 0,t)}}const lc=class extends S{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var i,r,s;let o=e,a=t||(()=>null),l=n;if(e&&"object"==typeof e){const t=e;o=null===(i=t.next)||void 0===i?void 0:i.bind(t),a=null===(r=t.error)||void 0===r?void 0:r.bind(t),l=null===(s=t.complete)||void 0===s?void 0:s.bind(t)}this.__isAsync&&(a=ac(a),o&&(o=ac(o)),l&&(l=ac(l)));const c=super.subscribe({next:o,error:a,complete:l});return e instanceof u&&e.add(c),c}};function cc(){return this._results[wo()]()}class hc{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=wo(),n=hc.prototype;n[t]||(n[t]=cc)}get changes(){return this._changes||(this._changes=new lc)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const n=Kn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class uc{constructor(e){this.queryList=e,this.matches=null}clone(){return new uc(this.queryList)}setDirty(){this.queryList.setDirty()}}class dc{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);i.push(this.queries[n.indexInDeclarationView].clone())}return new dc(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ec(e,t).matches&&this.queries[t].setDirty()}}class pc{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class fc{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const i=null!==t?t.length:0,r=this.getByIndex(n).embeddedTView(e,i);r&&(r.indexInDeclarationView=n,null!==t?t.push(r):t=[r])}return null!==t?new fc(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class mc{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new mc(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const r=n[i];this.matchTNodeWithReadOption(e,t,gc(t,r)),this.matchTNodeWithReadOption(e,t,Vn(t,e,r,!1,!1))}else n===Rl?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Vn(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===Xa||i===Ll||i===Rl&&4&t.type)this.addMatch(t.index,-2);else{const n=Vn(t,e,i,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function gc(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function vc(e,t,n,i){return-1===n?function(e,t){return 11&e.type?Ya(e,t):4&e.type?Dl(e,t):null}(t,e):-2===n?function(e,t,n){return n===Xa?Ya(t,e):n===Rl?Dl(t,e):n===Ll?jl(t,e):void 0}(e,t,i):jn(e,e[1],n,t)}function bc(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const i=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const r=s[e];o.push(r<0?null:vc(t,i[r],s[e+1],n.metadata.read))}r.matches=o}return r.matches}function yc(e,t,n,i){const r=e.queries.getByIndex(n),s=r.matches;if(null!==s){const o=bc(e,t,r,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)i.push(o[e/2]);else{const r=s[e+1],o=t[-n];for(let e=10;e<o.length;e++){const t=o[e];t[17]===t[3]&&yc(t[1],t,r,i)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];yc(n[1],n,r,i)}}}}}return i}function _c(e){const t=Dt(),n=Ot(),i=Yt();Zt(i+1);const r=Ec(n,i);if(e.dirty&&Ct(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const s=r.crossesNgTemplate?yc(n,t,i,[]):bc(n,t,r,i);e.reset(s,Ka),e.notifyOnChanges()}return!0}return!1}function wc(e,t,n){const i=Ot();i.firstCreatePass&&(kc(i,new pc(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),Cc(i,Dt(),t)}function xc(e,t,n,i){const r=Ot();if(r.firstCreatePass){const s=Mt();kc(r,new pc(t,n,i),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(r,e),2==(2&n)&&(r.staticContentQueries=!0)}Cc(r,Dt(),n)}function Sc(){return e=Dt(),t=Yt(),e[19].queries[t].queryList;var e,t}function Cc(e,t,n){const i=new hc(4==(4&n));_s(e,t,i,i.destroy),null===t[19]&&(t[19]=new dc),t[19].queries.push(new uc(i))}function kc(e,t,n){null===e.queries&&(e.queries=new fc),e.queries.track(new mc(t,n))}function Ec(e,t){return e.queries.getByIndex(t)}function Ac(e,t){return Dl(e,t)}const Rc=new Yn("Application Initializer");let Tc=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Ga,this.reject=Ga,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Ho(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(ui(Rc,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Ic=new Yn("AppId"),Dc={provide:Ic,useFactory:function(){return`${Oc()}${Oc()}${Oc()}`},deps:[]};function Oc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pc=new Yn("Platform Initializer"),Mc=new Yn("Platform ID"),Lc=new Yn("appBootstrapListener");let Fc=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Nc=new Yn("LocaleId"),zc=new Yn("DefaultCurrencyCode");class Vc{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const jc=function(e){return new Zl(e)},Bc=jc,Hc=function(e){return Promise.resolve(jc(e))},qc=function(e){const t=jc(e),n=dr(Je(e).declarations).reduce((e,t)=>{const n=Qe(t);return n&&e.push(new Ul(n)),e},[]);return new Vc(t,n)},$c=qc,Uc=function(e){return Promise.resolve(qc(e))};let Wc=(()=>{class e{constructor(){this.compileModuleSync=Bc,this.compileModuleAsync=Hc,this.compileModuleAndAllComponentsSync=$c,this.compileModuleAndAllComponentsAsync=Uc}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Gc=(()=>Promise.resolve(0))();function Yc(e){"undefined"==typeof Zone?Gc.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Zc{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lc(!1),this.onMicrotaskEmpty=new lc(!1),this.onStable=new lc(!1),this.onError=new lc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&t,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=Oe.requestAnimationFrame,t=Oe.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Oe,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Qc(e),Kc(e)},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Qc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return Jc(e),n.invokeTask(r,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),eh(e)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return Jc(e),n.invoke(r,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),eh(e)}},onHasTask:(t,n,i,r)=>{t.hasTask(i,r),n===i&&("microTask"==r.change?(e._hasPendingMicrotasks=r.microTask,Qc(e),Kc(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,n,i,r)=>(t.handleError(i,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,Xc,Ga,Ga);try{return r.runTask(s,t,n)}finally{r.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Xc={};function Kc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Qc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Jc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function eh(e){e._nesting--,Kc(e)}class th{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lc,this.onMicrotaskEmpty=new lc,this.onStable=new lc,this.onError=new lc}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,i){return e.apply(t,n)}}let nh=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zc.assertNotInAngularZone(),Yc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yc(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let i=-1;t&&t>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==i),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(ui(Zc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),ih=(()=>{class e{constructor(){this._applications=new Map,oh.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return oh.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class rh{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let sh,oh=new rh,ah=!0,lh=!1;function ch(){return lh=!0,ah}const hh=new Yn("AllowMultipleToken");class uh{constructor(e,t){this.name=e,this.token=t}}function dh(e,t,n=[]){const i=`Platform: ${t}`,r=new Yn(i);return(t=[])=>{let s=ph();if(!s||s.injector.get(hh,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{const e=n.concat(t).concat({provide:r,useValue:!0},{provide:Qs,useValue:"platform"});!function(e){if(sh&&!sh.destroyed&&!sh.injector.get(hh,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sh=e.get(fh);const t=e.get(Pc,null);t&&t.forEach(e=>e())}(po.create({providers:e,name:i}))}return function(e){const t=ph();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function ph(){return sh&&!sh.destroyed?sh:null}let fh=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new th:("zone.js"===e?void 0:e)||new Zc({enableLongStackTrace:ch(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),i=[{provide:Zc,useValue:n}];return n.run(()=>{const t=po.create({providers:i,parent:this.injector,name:e.moduleType.name}),r=e.create(t),s=r.injector.get(ar,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});r.onDestroy(()=>{vh(this._modules,r),e.unsubscribe()})}),function(e,t,n){try{const i=n();return Ho(i)?i.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(s,n,()=>{const e=r.injector.get(Tc);return e.runInitializers(),e.donePromise.then(()=>(La(r.injector.get(Nc,"en-US")||"en-US"),this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,t=[]){const n=mh({},t);return function(e,t,n){const i=new Zl(n);return Promise.resolve(i)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(gh);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ne(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(ui(po))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function mh(e,t){return Array.isArray(t)?t.reduce(mh,e):Object.assign(Object.assign({},e),t)}let gh=(()=>{class e{constructor(e,t,n,i,r){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new b(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),o=new b(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Zc.assertNotInAngularZone(),Yc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Zc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=U(s,o.pipe(J()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof $a?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(Ol),r=n.create(po.NULL,[],t||n.selector,i),s=r.location.nativeElement,o=r.injector.get(nh,null),a=o&&r.injector.get(ih);return o&&a&&a.registerApplication(s,o),r.onDestroy(()=>{this.detachView(r.hostView),vh(this.components,r),a&&a.unregisterApplication(s)}),this._loadComponent(r),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;vh(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Lc,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(ui(Zc),ui(po),ui(ar),ui(Wa),ui(Tc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function vh(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class bh{}class yh{}const _h={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let wh=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||_h}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,i]=e.split("#");return void 0===i&&(i="default"),n("zn8P")(t).then(e=>e[i]).then(e=>xh(e,t,i)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,i]=e.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[i+r]).then(e=>xh(e,t,i))}}return e.\u0275fac=function(t){return new(t||e)(ui(Wc),ui(yh,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function xh(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Sh=dh(null,"core",[{provide:Mc,useValue:"unknown"},{provide:fh,deps:[po]},{provide:ih,deps:[]},{provide:Fc,deps:[]}]),Ch=[{provide:gh,useClass:gh,deps:[Zc,po,ar,Wa,Tc]},{provide:$l,deps:[Zc],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Tc,useClass:Tc,deps:[[new gi,Rc]]},{provide:Wc,useClass:Wc,deps:[]},Dc,{provide:ml,useFactory:function(){return kl},deps:[]},{provide:vl,useFactory:function(){return El},deps:[]},{provide:Nc,useFactory:function(e){return La(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new mi(Nc),new gi,new vi]]},{provide:zc,useValue:"USD"}];let kh=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(ui(gh))},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:Ch}),e})(),Eh=null;function Ah(){return Eh}const Rh=new Yn("DocumentToken");let Th=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:Ih,token:e,providedIn:"platform"}),e})();function Ih(){return ui(Oh)}const Dh=new Yn("Location Initialized");let Oh=(()=>{class e extends Th{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Ah().getLocation(),this._history=Ah().getHistory()}getBaseHrefFromDOM(){return Ah().getBaseHref(this._doc)}onPopState(e){Ah().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Ah().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){Ph()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){Ph()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({factory:Mh,token:e,providedIn:"platform"}),e})();function Ph(){return!!window.history.pushState}function Mh(){return new Oh(ui(Rh))}function Lh(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Fh(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Nh(e){return e&&"?"!==e[0]?"?"+e:e}let zh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:Vh,token:e,providedIn:"root"}),e})();function Vh(e){const t=ui(Rh).location;return new Bh(ui(Th),t&&t.origin||"")}const jh=new Yn("appBaseHref");let Bh=(()=>{class e extends zh{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Lh(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Nh(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,i){const r=this.prepareExternalUrl(n+Nh(i));this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){const r=this.prepareExternalUrl(n+Nh(i));this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(ui(Th),ui(jh,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Hh=(()=>{class e extends zh{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Lh(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,i){let r=this.prepareExternalUrl(n+Nh(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)}replaceState(e,t,n,i){let r=this.prepareExternalUrl(n+Nh(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(ui(Th),ui(jh,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),qh=(()=>{class e{constructor(e,t){this._subject=new lc,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Fh(Uh(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Nh(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Uh(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nh(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Nh(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(ui(zh),ui(Th))},e.normalizeQueryParams=Nh,e.joinWithSlash=Lh,e.stripTrailingSlash=Fh,e.\u0275prov=de({factory:$h,token:e,providedIn:"root"}),e})();function $h(){return new qh(ui(zh),ui(Th))}function Uh(e){return e.replace(/\/index.html$/,"")}var Wh=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class Gh{}let Yh=(()=>{class e extends Gh{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Oa(t);if(n)return n;const i=t.split("-")[0];if(n=Oa(i),n)return n;if("en"===i)return Ia;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[Pa.PluralCase]}(t||this.locale)(e)){case Wh.Zero:return"zero";case Wh.One:return"one";case Wh.Two:return"two";case Wh.Few:return"few";case Wh.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(ui(Nc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function Zh(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[i,r]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(i.trim()===t)return decodeURIComponent(r)}return null}let Xh=(()=>{class e{constructor(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(So(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ne(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(Oo(ml),Oo(vl),Oo(Xa),Oo(Ja))},e.\u0275dir=Xe({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class Kh{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qh=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Kh(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new Jh(e,n);t.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new Jh(e,r);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=i,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Rl),Oo(ml))},e.\u0275dir=Xe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class Jh{constructor(e,t){this.record=e,this.view=t}}let eu=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new tu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){nu("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){nu("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Rl))},e.\u0275dir=Xe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class tu{constructor(){this.$implicit=null,this.ngIf=null}}function nu(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ne(t)}'.`)}class iu{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ru=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e})(),su=(()=>{class e{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new iu(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Rl),Oo(ru,9))},e.\u0275dir=Xe({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e})(),ou=(()=>{class e{constructor(e,t,n){n._addDefault(new iu(e,t))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Rl),Oo(ru,9))},e.\u0275dir=Xe({type:e,selectors:[["","ngSwitchDefault",""]]}),e})();class au{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class lu{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const cu=new lu,hu=new au;let uu=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if(Ho(t))return cu;if(qo(t))return hu;throw Error(`InvalidPipeArgument: '${t}' for pipe '${ne(e)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(function(e=we.Default){const t=Sl(!0);if(null!=t||e&we.Optional)return t;ue("ChangeDetectorRef")}())},e.\u0275pipe=Ke({name:"async",type:e,pure:!1}),e})(),du=(()=>{class e{constructor(e){this.differs=e,this.keyValues=[]}transform(e,t=pu){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const n=this.differ.diff(e);return n&&(this.keyValues=[],n.forEachItem(e=>{this.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(t)),this.keyValues}}return e.\u0275fac=function(t){return new(t||e)(Oo(vl))},e.\u0275pipe=Ke({name:"keyvalue",type:e,pure:!1}),e})();function pu(e,t){const n=e.key,i=t.key;if(n===i)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(null===n)return 1;if(null===i)return-1;if("string"==typeof n&&"string"==typeof i)return n<i?-1:1;if("number"==typeof n&&"number"==typeof i)return n-i;if("boolean"==typeof n&&"boolean"==typeof i)return n<i?-1:1;const r=String(n),s=String(i);return r==s?0:r<s?-1:1}let fu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[{provide:Gh,useClass:Yh}]}),e})();function mu(e){return"browser"===e}let gu=(()=>{class e{}return e.\u0275prov=de({token:e,providedIn:"root",factory:()=>new vu(ui(Rh),window)}),e})();class vu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const e=i.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}i=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=bu(this.window.history)||bu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function bu(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class yu extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new yu,Eh||(Eh=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=wu||(wu=document.querySelector("base"),wu)?wu.getAttribute("href"):null;return null==t?null:(n=t,_u||(_u=document.createElement("a")),_u.setAttribute("href",n),"/"===_u.pathname.charAt(0)?_u.pathname:"/"+_u.pathname);var n}resetBaseElement(){wu=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return Zh(document.cookie,e)}}let _u,wu=null;const xu=new Yn("TRANSITION_ID"),Su=[{provide:Rc,useFactory:function(e,t,n){return()=>{n.get(Tc).donePromise.then(()=>{const n=Ah();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[xu,Rh,po],multi:!0}];class Cu{static init(){var e;e=new Cu,oh=e}addToWindow(e){Oe.getAngularTestability=(t,n=!0)=>{const i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},Oe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Oe.getAllAngularRootElements=()=>e.getAllRootElements(),Oe.frameworkStabilizers||(Oe.frameworkStabilizers=[]),Oe.frameworkStabilizers.push(e=>{const t=Oe.getAllAngularTestabilities();let n=t.length,i=!1;const r=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(r)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?Ah().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const ku=new Yn("EventManagerPlugins");let Eu=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let i=0;i<n.length;i++){const t=n[i];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(ui(ku),ui(Zc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class Au{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=Ah().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let Ru=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Tu=(()=>{class e extends Ru{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const i=this._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(Iu),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Iu))}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function Iu(e){Ah().remove(e)}const Du={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ou=/%COMP%/g;function Pu(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Pu(e,r,n):(r=r.replace(Ou,e),n.push(r))}return n}function Mu(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Lu=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Fu(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Ae.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Nu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case Ae.ShadowDom:return new zu(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Pu(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(ui(Eu),ui(Tu),ui(Ic))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class Fu{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Du[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const r=Du[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=Du[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(pr.DashCase|pr.Important)?e.style.setProperty(t,n,i&pr.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&pr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Mu(n)):this.eventManager.addEventListener(e,t,Mu(n))}}class Nu extends Fu{constructor(e,t,n,i){super(e),this.component=n;const r=Pu(i+"-"+n.id,n.styles,[]);t.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(Ou,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Ou,i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class zu extends Fu{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=Pu(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const e=document.createElement("style");e.textContent=r[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vu=(()=>{class e extends Au{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const ju=["alt","control","meta","shift"],Bu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qu={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let $u=(()=>{class e extends Au{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const r=e.parseEventName(n),s=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ah().onAndCancel(t,r.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=e._normalizeKey(n.pop());let s="";if(ju.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Hu.hasOwnProperty(t)&&(t=Hu[t]))}return Bu[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ju.forEach(i=>{i!=n&&(0,qu[i])(e)&&(t+=i+".")}),t+=n,t}static eventCallback(t,n,i){return r=>{e.getEventFullKey(r)===t&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Uu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return ui(Wu)},token:e,providedIn:"root"}),e})(),Wu=(()=>{class e extends Uu{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case er.NONE:return t;case er.HTML:return Ti(t,"HTML")?Ri(t):Qi(this._doc,String(t)).toString();case er.STYLE:return Ti(t,"Style")?Ri(t):t;case er.SCRIPT:if(Ti(t,"Script"))return Ri(t);throw new Error("unsafe value used in a script context");case er.URL:return Ii(t),Ti(t,"URL")?Ri(t):Li(String(t));case er.RESOURCE_URL:if(Ti(t,"ResourceURL"))return Ri(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return new Si(e)}bypassSecurityTrustStyle(e){return new Ci(e)}bypassSecurityTrustScript(e){return new ki(e)}bypassSecurityTrustUrl(e){return new Ei(e)}bypassSecurityTrustResourceUrl(e){return new Ai(e)}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({factory:function(){return e=ui(Xs),new Wu(e.get(Rh));var e},token:e,providedIn:"root"}),e})();const Gu=dh(Sh,"browser",[{provide:Mc,useValue:"browser"},{provide:Pc,useValue:function(){yu.makeCurrent(),Cu.init()},multi:!0},{provide:Rh,useFactory:function(){return function(e){pt=e}(document),document},deps:[]}]),Yu=[[],{provide:Qs,useValue:"root"},{provide:ar,useFactory:function(){return new ar},deps:[]},{provide:ku,useClass:Vu,multi:!0,deps:[Rh,Zc,Mc]},{provide:ku,useClass:$u,multi:!0,deps:[Rh]},[],{provide:Lu,useClass:Lu,deps:[Eu,Tu,Ic]},{provide:Qa,useExisting:Lu},{provide:Ru,useExisting:Tu},{provide:Tu,useClass:Tu,deps:[Rh]},{provide:nh,useClass:nh,deps:[Zc]},{provide:Eu,useClass:Eu,deps:[ku,Zc]},[]];let Zu=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Ic,useValue:t.appId},{provide:xu,useExisting:Ic},Su]}}}return e.\u0275fac=function(t){return new(t||e)(ui(e,12))},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:Yu,imports:[fu,kh]}),e})();"undefined"!=typeof window&&window;class Xu{}function Ku(e,t){return{type:7,name:e,definitions:t,options:{}}}function Qu(e,t=null){return{type:4,styles:t,timings:e}}function Ju(e,t=null){return{type:2,steps:e,options:t}}function ed(e){return{type:6,styles:e,offset:null}}function td(e,t,n){return{type:0,name:e,styles:t,options:n}}function nd(e){return{type:5,steps:e}}function id(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function rd(e=null){return{type:9,options:e}}function sd(e,t,n=null){return{type:11,selector:e,animation:t,options:n}}function od(e){Promise.resolve(null).then(e)}class ad{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){od(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class ld{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,i=0;const r=this.players.length;0==r?od(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==r&&this._onFinish()}),e.onDestroy(()=>{++n==r&&this._onDestroy()}),e.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}function cd(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function hd(e){switch(e.length){case 0:return new ad;case 1:return e[0];default:return new ld(e)}}function ud(e,t,n,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(e=>{const n=e.offset,i=n==l,h=i&&c||{};Object.keys(e).forEach(n=>{let i=n,a=e[n];if("offset"!==n)switch(i=t.normalizePropertyName(i,o),a){case"!":a=r[n];break;case"*":a=s[n];break;default:a=t.normalizeStyleValue(n,i,a,o)}h[i]=a}),i||a.push(h),c=h,l=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function dd(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&pd(n,"start",e)));break;case"done":e.onDone(()=>i(n&&pd(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&pd(n,"destroy",e)))}}function pd(e,t,n){const i=n.totalTime,r=fd(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==i?e.totalTime:i,!!n.disabled),s=e._data;return null!=s&&(r._data=s),r}function fd(e,t,n,i,r="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function md(e,t,n){let i;return e instanceof Map?(i=e.get(t),i||e.set(t,i=n)):(i=e[t],i||(i=e[t]=n)),i}function gd(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let vd=(e,t)=>!1,bd=(e,t)=>!1,yd=(e,t,n)=>[];const _d=cd();(_d||"undefined"!=typeof Element)&&(vd=(e,t)=>e.contains(t),bd=(()=>{if(_d||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):bd}})(),yd=(e,t,n)=>{let i=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)i.push(n[e])}else{const n=e.querySelector(t);n&&i.push(n)}return i});let wd=null,xd=!1;function Sd(e){wd||(wd=("undefined"!=typeof document?document.body:null)||{},xd=!!wd.style&&"WebkitAppearance"in wd.style);let t=!0;return wd.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in wd.style,!t&&xd)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in wd.style),t}const Cd=bd,kd=vd,Ed=yd;function Ad(e){const t={};return Object.keys(e).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=e[n]}),t}let Rd=(()=>{class e{validateStyleProperty(e){return Sd(e)}matchesElement(e,t){return Cd(e,t)}containsElement(e,t){return kd(e,t)}query(e,t,n){return Ed(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,i,r,s=[],o){return new ad(n,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Td=(()=>{class e{}return e.NOOP=new Rd,e})();function Id(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Dd(parseFloat(t[1]),t[2])}function Dd(e,t){switch(t){case"s":return 1e3*e;default:return e}}function Od(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let i,r=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};i=Dd(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=Dd(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=e;if(!n){let n=!1,s=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:i,delay:r,easing:s}}(e,t,n)}function Pd(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function Md(e,t,n={}){if(t)for(let i in e)n[i]=e[i];else Pd(e,n);return n}function Ld(e,t,n){return n?t+":"+n+";":""}function Fd(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=Ld(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=Ld(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function Nd(e,t,n){e.style&&(Object.keys(t).forEach(i=>{const r=Ud(i);n&&!n.hasOwnProperty(i)&&(n[i]=e.style[r]),e.style[r]=t[i]}),cd()&&Fd(e))}function zd(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=Ud(t);e.style[n]=""}),cd()&&Fd(e))}function Vd(e){return Array.isArray(e)?1==e.length?e[0]:Ju(e):e}const jd=new RegExp("{{\\s*(.+?)\\s*}}","g");function Bd(e){let t=[];if("string"==typeof e){let n;for(;n=jd.exec(e);)t.push(n[1]);jd.lastIndex=0}return t}function Hd(e,t,n){const i=e.toString(),r=i.replace(jd,(e,i)=>{let r=t[i];return t.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?e:r}function qd(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const $d=/-+([a-z0-9])/g;function Ud(e){return e.replace($d,(...e)=>e[1].toUpperCase())}function Wd(e,t){return 0===e||0===t}function Gd(e,t,n){const i=Object.keys(n);if(i.length&&t.length){let s=t[0],o=[];if(i.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var r=1;r<t.length;r++){let n=t[r];o.forEach(function(t){n[t]=Zd(e,t)})}}return t}function Yd(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function Zd(e,t){return window.getComputedStyle(e)[t]}function Xd(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const i=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof i)return void t.push(i);e=i}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const r=i[1],s=i[2],o=i[3];t.push(Jd(r,o)),"<"!=s[0]||"*"==r&&"*"==o||t.push(Jd(o,r))}(e,n,t)):n.push(e),n}const Kd=new Set(["true","1"]),Qd=new Set(["false","0"]);function Jd(e,t){const n=Kd.has(e)||Qd.has(e),i=Kd.has(t)||Qd.has(t);return(r,s)=>{let o="*"==e||e==r,a="*"==t||t==s;return!o&&n&&"boolean"==typeof r&&(o=r?Kd.has(e):Qd.has(e)),!a&&i&&"boolean"==typeof s&&(a=s?Kd.has(t):Qd.has(t)),o&&a}}const ep=new RegExp("s*:selfs*,?","g");function tp(e,t,n){return new np(e).build(t,n)}class np{constructor(e){this._driver=e}build(e,t){const n=new ip(t);return this._resetContextStyleTimingState(n),Yd(this,Vd(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0;const r=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,i=n.name;i.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,r.push(this.visitState(n,t))}),n.name=i}else if(1==e.type){const r=this.visitTransition(e,t);n+=r.queryCount,i+=r.depCount,s.push(r)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(e=>{if(rp(e)){const t=e;Object.keys(t).forEach(e=>{Bd(t[e]).forEach(e=>{s.hasOwnProperty(e)||r.add(e)})})}}),r.size){const n=qd(r.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Yd(this,Vd(e.animation),t);return{type:1,matchers:Xd(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:sp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>Yd(this,e,t)),options:sp(e.options)}}visitGroup(e,t){const n=t.currentTime;let i=0;const r=e.steps.map(e=>{t.currentTime=n;const r=Yd(this,e,t);return i=Math.max(i,t.currentTime),r});return t.currentTime=i,{type:3,steps:r,options:sp(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return op(Od(e,t).duration,0,"");const i=e;if(i.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=op(0,0,"");return e.dynamic=!0,e.strValue=i,e}return n=n||Od(i,t),op(n.duration,n.delay,n.easing)}(e.timings,t.errors);let i;t.currentAnimateTimings=n;let r=e.styles?e.styles:ed({});if(5==r.type)i=this.visitKeyframes(r,t);else{let r=e.styles,s=!1;if(!r){s=!0;const e={};n.easing&&(e.easing=n.easing),r=ed(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,t);o.isEmptyStep=s,i=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?"*"==e?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let i=!1,r=null;return n.forEach(e=>{if(rp(e)){const t=e,n=t.easing;if(n&&(r=n,delete t.easing),!i)for(let e in t)if(t[e].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let i=t.currentTime,r=t.currentTime;n&&r>0&&(r-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),t.options&&function(e,t,n){const i=t.params||{},r=Bd(e);r.length&&r.forEach(e=>{i.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(rp(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(rp(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(i++,c=n.offset=l),o=o||c<0||c>1,s=s||c<a,a=c,r.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let h=0;i>0&&i<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));const u=c-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,i)=>{const s=h>0?i==u?1:h*i:r[i],o=s*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:Yd(this,Vd(e.animation),t),options:sp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:sp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:sp(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[r,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(ep,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,".ng-animating"),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+r:r,md(t.collectedStyles,t.currentQuerySelector,{});const o=Yd(this,Vd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:sp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Od(e.timings,t.errors,!0);return{type:12,animation:Yd(this,Vd(e.animation),t),timings:n,options:null}}}class ip{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function rp(e){return!Array.isArray(e)&&"object"==typeof e}function sp(e){var t;return e?(e=Pd(e)).params&&(e.params=(t=e.params)?Pd(t):null):e={},e}function op(e,t,n){return{duration:e,delay:t,easing:n}}function ap(e,t,n,i,r,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class lp{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cp=new RegExp(":enter","g"),hp=new RegExp(":leave","g");function up(e,t,n,i,r,s={},o={},a,l,c=[]){return(new dp).buildKeyframes(e,t,n,i,r,s,o,a,l,c)}class dp{buildKeyframes(e,t,n,i,r,s,o,a,l,c=[]){l=l||new lp;const h=new fp(e,t,l,i,r,c,[]);h.options=a,h.currentTimeline.setStyles([s],null,h.errors,a),Yd(this,n,h);const u=h.timelines.filter(e=>e.containsAnimation());if(u.length&&Object.keys(o).length){const e=u[u.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,h.errors,a)}return u.length?u.map(e=>e.buildKeyframes()):[ap(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const i=t.createSubContext(e.options),r=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let i=t.currentTimeline.currentTime;const r=null!=n.duration?Id(n.duration):null,s=null!=n.delay?Id(n.delay):null;return 0!==r&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(e,t){t.updateOptions(e.options,!0),Yd(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let i=t;const r=e.options;if(r&&(r.params||r.delay)&&(i=t.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pp);const e=Id(r.delay);i.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>Yd(this,e,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let i=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?Id(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);r&&o.delayNextStep(r),Yd(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return Od(t.params?Hd(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());const r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(r):n.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,i=t.currentTimeline.duration,r=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*r),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(i+r),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,i=e.options||{},r=i.delay?Id(i.delay):0;r&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pp);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{t.currentQueryIndex=i;const o=t.createSubContext(e.options,n);r&&o.delayNextStep(r),n===t.element&&(a=o.currentTimeline),Yd(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,i=t.currentTimeline,r=e.timings,s=Math.abs(r.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;Yd(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}const pp={};class fp{constructor(e,t,n,i,r,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new mp(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let i=this.options;null!=n.duration&&(i.duration=Id(n.duration)),null!=n.delay&&(i.delay=Id(n.delay));const r=n.params;if(r){let e=i.params;e||(e=this.options.params={}),Object.keys(r).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=Hd(r[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const i=t||this.element,r=new fp(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=pp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},r=new gp(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,r,s){let o=[];if(i&&o.push(this.element),e.length>0){e=(e=e.replace(cp,"."+this._enterClassName)).replace(hp,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return r||0!=o.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class mp{constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new mp(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||"*",this._currentKeyframe[e]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&(this._previousKeyframe.easing=t);const r=i&&i.params||{},s=function(e,t){const n={};let i;return e.forEach(e=>{"*"===e?(i=i||Object.keys(t),i.forEach(e=>{n[e]="*"})):Md(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=Hd(s[e],r,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:"*"),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],i=e._styleSummary[t];(!n||i.time>n.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=Md(r,!0);Object.keys(o).forEach(n=>{const i=o[n];"!"==i?e.add(n):"*"==i&&t.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=e.size?qd(e.values()):[],s=t.size?qd(t.values()):[];if(n){const e=i[0],t=Pd(e);e.offset=0,t.offset=1,i=[e,t]}return ap(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class gp extends mp{constructor(e,t,n,i,r,s,o=!1){super(e,t,s.delay),this.element=t,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],s=n+t,o=t/s,a=Md(e[0],!1);a.offset=0,r.push(a);const l=Md(e[0],!1);l.offset=vp(o),r.push(l);const c=e.length-1;for(let i=1;i<=c;i++){let o=Md(e[i],!1);o.offset=vp((t+o.offset*n)/s),r.push(o)}n=s,t=0,i="",e=r}return ap(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}}function vp(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class bp{}class yp extends bp{normalizePropertyName(e,t){return Ud(e)}normalizeStyleValue(e,t,n,i){let r="";const s=n.toString().trim();if(_p[t]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&i.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+r}}const _p=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function wp(e,t,n,i,r,s,o,a,l,c,h,u,d){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:u,errors:d}}const xp={};class Sp{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return function(e,t,n,i,r){return e.some(e=>e(t,n,i,r))}(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){const i=this._stateStyles["*"],r=this._stateStyles[e],s=i?i.buildStyles(t,n):{};return r?r.buildStyles(t,n):s}build(e,t,n,i,r,s,o,a,l,c){const h=[],u=this.ast.options&&this.ast.options.params||xp,d=this.buildStyles(n,o&&o.params||xp,h),p=a&&a.params||xp,f=this.buildStyles(i,p,h),m=new Set,g=new Map,v=new Map,b="void"===i,y={params:Object.assign(Object.assign({},u),p)},_=c?[]:up(e,t,this.ast.animation,r,s,d,f,y,l,h);let w=0;if(_.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),h.length)return wp(t,this._triggerName,n,i,b,d,f,[],[],g,v,w,h);_.forEach(e=>{const n=e.element,i=md(g,n,{});e.preStyleProps.forEach(e=>i[e]=!0);const r=md(v,n,{});e.postStyleProps.forEach(e=>r[e]=!0),n!==t&&m.add(n)});const x=qd(m.values());return wp(t,this._triggerName,n,i,b,d,f,_,x,g,v,w)}}class Cp{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},i=Pd(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(i[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const r=e;Object.keys(r).forEach(e=>{let s=r[e];s.length>1&&(s=Hd(s,i,t)),n[e]=s})}}),n}}class kp{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new Cp(e.style,e.options&&e.options.params||{})}),Ep(this.states,"true","1"),Ep(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new Sp(e,t,this.states))}),this.fallbackTransition=new Sp(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(r=>r.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Ep(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const Ap=new lp;class Rp{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],i=tp(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,n){const i=e.element,r=ud(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(i,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const i=[],r=this._animations[e];let s;const o=new Map;if(r?(s=up(this._driver,t,r,"ng-enter","ng-leave",{},{},n,Ap,i),s.forEach(e=>{const t=md(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,"*")})});const a=hd(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,i){const r=fd(t,"","","");return dd(this._getPlayer(e),n,r,i),()=>{}}command(e,t,n,i){if("register"==n)return void this.register(e,i[0]);if("create"==n)return void this.create(e,t,i[0]||{});const r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Tp=[],Ip={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Dp={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Op{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(i=n?e.value:e)?i:null,n){const t=Pd(e);delete t.value,this.options=t}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const Pp=new Op("void");class Mp{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Bp(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var r;const s=md(this._elementListeners,e,[]),o={name:t,phase:n,callback:i};s.push(o);const a=md(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Bp(e,"ng-trigger"),Bp(e,"ng-trigger-"+t),a[t]=Pp),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(o);e>=0&&s.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,i=!0){const r=this._getTrigger(t),s=new Fp(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(Bp(e,"ng-trigger"),Bp(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new Op(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=Pp),"void"!==l.value&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!t.hasOwnProperty(i)||e[i]!==t[i])return!1}return!0}(a.params,l.params)){const t=[],n=r.matchStyles(a.value,a.params,t),i=r.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{zd(e,n),Nd(e,i)})}return}const c=md(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let h=r.matchTransition(a.value,l.value,e,l.params),u=!1;if(!h){if(!i)return;h=r.fallbackTransition,u=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:a,toState:l,player:s,isFallbackTransition:u}),u||(Bp(e,"ng-animate-queued"),s.onStart(()=>{Hp(e,"ng-animate-queued")})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),c.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,".ng-trigger",!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,i){const r=this._engine.statesByElement.get(e);if(r){const s=[];if(Object.keys(r).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,"void",i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&hd(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const i=new Set;t.forEach(t=>{const r=t.name;if(i.has(r))return;i.add(r);const s=this._triggers[r].fallbackTransition,o=n[r]||Pp,a=new Op("void"),l=new Fp(this.id,r,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:r,transition:s,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)i=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)n.markElementAsRemoved(this.id,e,!1,t);else{const i=e.__ng_removed;i&&i!==Ip||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Bp(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(t=>{if(t.name==n.triggerName){const i=fd(r,n.triggerName,n.fromState.value,n.toState.value);i._data=e,dd(n.player,t.phase,i,t.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,i=t.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class Lp{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new Mp(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,t)){this._namespaceList.splice(r+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=n[e[i]].namespaceId;if(r){const e=this._fetchNamespace(r);e&&t.add(e)}}}return t}trigger(e,t,n,i){if(Np(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!Np(t))return;const r=t.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const i=this._fetchNamespace(e);i&&i.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Bp(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Hp(e,"ng-animate-disabled"))}removeNode(e,t,n,i){if(Np(t)){const r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,n,i){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,i,r){return Np(t)?this._fetchNamespace(e).listen(t,n,i,r):()=>{}}_buildInstruction(e,t,n,i,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,".ng-trigger",!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,".ng-animating",!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return hd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=Ip,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Bp(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?hd(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new lp,i=[],r=new Map,s=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)c.add(t[n])});const h=this.bodyNode,u=Array.from(this.statesByElement.keys()),d=jp(u,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n="ng-enter"+f++;p.set(t,n),e.forEach(e=>Bp(e,n))});const m=[],g=new Set,v=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){const e=this.collectedLeaveElements[I],t=e.__ng_removed;t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>g.add(e)):v.add(e))}const b=new Map,y=jp(u,Array.from(g));y.forEach((e,t)=>{const n="ng-leave"+f++;b.set(t,n),e.forEach(e=>Bp(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>Hp(e,n))}),y.forEach((e,t)=>{const n=b.get(t);e.forEach(e=>Hp(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const _=[],w=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(t).forEach(e=>{const t=e.player,r=e.element;if(_.push(t),this.collectedEnterElements.length){const e=r.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const c=!h||!this.driver.containsElement(h,r),u=b.get(r),d=p.get(r),f=this._buildInstruction(e,n,d,u,c);if(f.errors&&f.errors.length)w.push(f);else{if(c)return t.onStart(()=>zd(r,f.fromStyles)),t.onDestroy(()=>Nd(r,f.toStyles)),void i.push(t);if(e.isFallbackTransition)return t.onStart(()=>zd(r,f.fromStyles)),t.onDestroy(()=>Nd(r,f.toStyles)),void i.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(r,f.timelines),s.push({instruction:f,player:t,element:r}),f.queriedElements.forEach(e=>md(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let i=l.get(t);i||l.set(t,i=new Set),n.forEach(e=>i.add(e))})}});if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),_.forEach(e=>e.destroy()),this.reportError(e)}const x=new Map,S=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(S.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,x))}),i.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{md(x,t,[]).push(e),e.destroy()})});const C=m.filter(e=>Up(e,a,l)),k=new Map;Vp(k,this.driver,v,l,"*").forEach(e=>{Up(e,a,l)&&C.push(e)});const E=new Map;d.forEach((e,t)=>{Vp(E,this.driver,new Set(e),a,"!")}),C.forEach(e=>{const t=k.get(e),n=E.get(e);k.set(e,Object.assign(Object.assign({},t),n))});const A=[],R=[],T={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(c.has(t))return s.onDestroy(()=>Nd(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let e=T;if(S.size>1){let n=t;const i=[];for(;n=n.parentNode;){const t=S.get(n);if(t){e=t;break}i.push(n)}i.forEach(t=>S.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,x,r,E,k);if(s.setRealPlayer(n),e===T)A.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=hd(t)),i.push(s)}}else zd(t,o.fromStyles),s.onDestroy(()=>Nd(t,o.toStyles)),R.push(s),c.has(t)&&i.push(s)}),R.forEach(e=>{const t=r.get(e.element);if(t&&t.length){const n=hd(t);e.setRealPlayer(n)}}),i.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let I=0;I<m.length;I++){const e=m[I],t=e.__ng_removed;if(Hp(e,"ng-leave"),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let i=this.driver.query(e,".ng-animating",!0);for(let e=0;e<i.length;e++){let t=o.get(i[e]);t&&t.length&&n.push(...t)}}const i=n.filter(e=>!e.destroyed);i.length?qp(this,e,i):this.processLeaveNode(e)}return m.length=0,A.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),A}elementContainsData(e,t){let n=!1;const i=t.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,r){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!r||"void"==r;t.forEach(t=>{t.queued||(e||t.triggerName==i)&&s.push(t)})}}return(n||i)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||i&&i!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const i=t.element,r=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==i,l=md(n,e,[]);this._getPreviousPlayers(e,a,r,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}zd(i,t.fromStyles)}_buildAnimation(e,t,n,i,r,s){const o=t.triggerName,a=t.element,l=[],c=new Set,h=new Set,u=t.timelines.map(t=>{const u=t.element;c.add(u);const d=u.__ng_removed;if(d&&d.removedBeforeQueried)return new ad(t.duration,t.delay);const p=u!==a,f=function(e){const t=[];return $p(e,t),t}((n.get(u)||Tp).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===u),m=r.get(u),g=s.get(u),v=ud(0,this._normalizer,0,t.keyframes,m,g),b=this._buildPlayer(t,v,f);if(t.subTimeline&&i&&h.add(u),p){const t=new Fp(e,o,u);t.setRealPlayer(b),l.push(t)}return b});l.forEach(e=>{md(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let i;if(e instanceof Map){if(i=e.get(t),i){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&e.delete(t)}}else if(i=e[t],i){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&delete e[t]}return i}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>Bp(e,"ng-animating"));const d=hd(u);return d.onDestroy(()=>{c.forEach(e=>Hp(e,"ng-animating")),Nd(a,t.toStyles)}),h.forEach(e=>{md(i,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new ad(e.duration,e.delay)}}class Fp{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new ad,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>dd(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){md(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Np(e){return e&&1===e.nodeType}function zp(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function Vp(e,t,n,i,r){const s=[];n.forEach(e=>s.push(zp(e)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(i,e,r);n&&0!=n.length||(i.__ng_removed=Dp,o.push(i))}),e.set(i,s)});let a=0;return n.forEach(e=>zp(e,s[a++])),o}function jp(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const i=new Set(t),r=new Map;function s(e){if(!e)return 1;let t=r.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:i.has(o)?1:s(o),r.set(e,t),t}return t.forEach(e=>{const t=s(e);1!==t&&n.get(t).push(e)}),n}function Bp(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function Hp(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function qp(e,t,n){hd(n).onDone(()=>e.processLeaveNode(t))}function $p(e,t){for(let n=0;n<e.length;n++){const i=e[n];i instanceof ld?$p(i.players,t):t.push(i)}}function Up(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(e=>r.add(e)):t.set(e,i),n.delete(e),!0}class Wp{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new Lp(e,t,n),this._timelineEngine=new Rp(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,i,r){const s=e+"-"+i;let o=this._triggerCache[s];if(!o){const e=[],t=tp(this._driver,r,e);if(e.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t){return new kp(e,t)}(i,t),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,i,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n,i){this._transitionEngine.removeNode(e,t,i||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if("@"==n.charAt(0)){const[e,r]=gd(n);this._timelineEngine.command(e,t,r,i)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,r){if("@"==n.charAt(0)){const[e,i]=gd(n);return this._timelineEngine.listen(e,t,i,r)}return this._transitionEngine.listen(e,t,n,i,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Gp(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=Zp(t[0]),t.length>1&&(i=Zp(t[t.length-1]))):t&&(n=Zp(t)),n||i?new Yp(e,n,i):null}let Yp=(()=>{class e{constructor(t,n,i){this._element=t,this._startStyles=n,this._endStyles=i,this._state=0;let r=e.initialStylesByElement.get(t);r||e.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Nd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nd(this._element,this._initialStyles),this._endStyles&&(Nd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(zd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zd(this._element,this._endStyles),this._endStyles=null),Nd(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function Zp(e){let t=null;const n=Object.keys(e);for(let i=0;i<n.length;i++){const r=n[i];Xp(r)&&(t=t||{},t[r]=e[r])}return t}function Xp(e){return"display"===e||"position"===e}class Kp{constructor(e,t,n,i,r,s,o){this._element=e,this._name=t,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=rf(e,"").trim();n.length&&(function(e,t){let n=0;for(let i=0;i<e.length;i++)","===e.charAt(i)&&n++}(n),t=`${n}, ${t}`),nf(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),tf(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Qp(this._element,this._name,"paused")}resume(){Qp(this._element,this._name,"running")}setPosition(e){const t=Jp(this._element,this._name);this._position=e*this._duration,nf(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),tf(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=rf(e,"").split(","),i=ef(n,t);i>=0&&(n.splice(i,1),nf(e,"",n.join(",")))}(this._element,this._name))}}function Qp(e,t,n){nf(e,"PlayState",n,Jp(e,t))}function Jp(e,t){const n=rf(e,"");return n.indexOf(",")>0?ef(n.split(","),t):ef([n],t)}function ef(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function tf(e,t,n){n?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function nf(e,t,n,i){const r="animation"+t;if(null!=i){const t=e.style[r];if(t.length){const e=t.split(",");e[i]=n,n=e.join(",")}}e.style[r]=n}function rf(e,t){return e.style["animation"+t]||""}class sf{constructor(e,t,n,i,r,s,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+r,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Kp(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:Zd(this.element,n))})}this.currentSnapshot=e}}class of extends ad{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Ad(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class af{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(e){return Sd(e)}matchesElement(e,t){return Cd(e,t)}containsElement(e,t){return kd(e,t)}query(e,t,n){return Ed(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>Ad(e));let i=`@keyframes ${t} {\n`,r="";n.forEach(e=>{r=" ";const t=parseFloat(e.offset);i+=`${r}${100*t}% {\n`,r+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${t}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const s=document.createElement("style");return s.textContent=i,s}animate(e,t,n,i,r,s=[],o){const a=s.filter(e=>e instanceof sf),l={};Wd(n,i)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=Gd(e,t,l));if(0==n)return new of(e,c);const h="gen_css_kf_"+this._count++,u=this.buildKeyframeElement(e,h,t);document.querySelector("head").appendChild(u);const d=Gp(e,t),p=new sf(e,t,h,n,i,r,c,d);return p.onDestroy(()=>{var e;(e=u).parentNode.removeChild(e)}),p}}class lf{constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Zd(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class cf{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(hf().toString()),this._cssKeyframesDriver=new af}validateStyleProperty(e){return Sd(e)}matchesElement(e,t){return Cd(e,t)}containsElement(e,t){return kd(e,t)}query(e,t,n){return Ed(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},c=s.filter(e=>e instanceof lf);Wd(n,i)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const h=Gp(e,t=Gd(e,t=t.map(e=>Md(e,!1)),l));return new lf(e,t,a,h)}}function hf(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let uf=(()=>{class e extends Xu{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:Ae.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?Ju(e):e;return ff(this._renderer,null,t,"register",[n]),new df(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(ui(Qa),ui(Rh))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class df extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new pf(this._id,e,t||{},this._renderer)}}class pf{constructor(e,t,n,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ff(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function ff(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}let mf=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new gf("",n,this.engine),this._rendererCache.set(n,e)),e}const i=t.id,r=t.id+"-"+this._currentId;this._currentId++,this.engine.register(r,e);const s=t=>{Array.isArray(t)?t.forEach(s):this.engine.registerTrigger(i,r,e,t.name,t)};return t.data.animation.forEach(s),new vf(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(ui(Qa),ui(Wp),ui(Zc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class gf{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,i=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class vf extends gf{constructor(e,t,n,i){super(t,n,i),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const i=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let r=t.substr(1),s="";return"@"!=r.charAt(0)&&([r,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let bf=(()=>{class e extends Wp{constructor(e,t,n){super(e.body,t,n)}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh),ui(Td),ui(bp))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const yf=new Yn("AnimationModuleType"),_f=[{provide:Td,useFactory:function(){return"function"==typeof hf()?new cf:new af}},{provide:yf,useValue:"BrowserAnimations"},{provide:Xu,useClass:uf},{provide:bp,useFactory:function(){return new yp}},{provide:Wp,useClass:bf},{provide:Qa,useFactory:function(e,t,n){return new mf(e,t,n)},deps:[Lu,Wp,Zc]}];let wf=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:_f,imports:[Zu]}),e})();function xf(...e){let t=e[e.length-1];return k(t)?(e.pop(),L(e,t)):$(e)}function Sf(e,t){return j(e,t,1)}function Cf(e,t){return function(n){return n.lift(new kf(e,t))}}class kf{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Ef(e,this.predicate,this.thisArg))}}class Ef extends f{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}class Af{}class Rf{}class Tf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),i=n.toLowerCase(),r=e.slice(t+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const i=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Tf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Tf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Tf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":const r=e.value;if(r){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===r.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class If{encodeKey(e){return Df(e)}encodeValue(e){return Df(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function Df(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Of{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new If,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(e=>{const i=e.indexOf("="),[r,s]=-1==i?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,i)),t.decodeValue(e.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const i=e[n];Array.isArray(i)?i.forEach(e=>{t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Of({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function Pf(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Mf(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Lf(e){return"undefined"!=typeof FormData&&e instanceof FormData}class Ff{constructor(e,t,n,i){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new Tf),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new Of,this.urlWithParams=t}serializeBody(){return null===this.body?null:Pf(this.body)||Mf(this.body)||Lf(this.body)||"string"==typeof this.body?this.body:this.body instanceof Of?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Lf(this.body)?null:Mf(this.body)?this.body.type||null:Pf(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Of?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),l)),new Ff(t,n,r,{params:l,headers:a,reportProgress:o,responseType:i,withCredentials:s})}}var Nf=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class zf{constructor(e,t=200,n="OK"){this.headers=e.headers||new Tf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Vf extends zf{constructor(e={}){super(e),this.type=Nf.ResponseHeader}clone(e={}){return new Vf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jf extends zf{constructor(e={}){super(e),this.type=Nf.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new jf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Bf extends zf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Hf(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let qf=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let i;if(e instanceof Ff)i=e;else{let r,s;r=n.headers instanceof Tf?n.headers:new Tf(n.headers),n.params&&(s=n.params instanceof Of?n.params:new Of({fromObject:n.params})),i=new Ff(e,t,void 0!==n.body?n.body:null,{headers:r,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=xf(i).pipe(Sf(e=>this.handler.handle(e)));if(e instanceof Ff||"events"===n.observe)return r;const s=r.pipe(Cf(e=>e instanceof jf));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe(E(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(E(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(E(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(E(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new Of).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,Hf(n,t))}post(e,t,n={}){return this.request("POST",e,Hf(n,t))}put(e,t,n={}){return this.request("PUT",e,Hf(n,t))}}return e.\u0275fac=function(t){return new(t||e)(ui(Af))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class $f{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Uf=new Yn("HTTP_INTERCEPTORS");let Wf=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Gf=/^\)\]\}',?\n/;class Yf{}let Zf=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Xf=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new b(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const i=e.serializeBody();let r=null;const s=()=>{if(null!==r)return r;const t=1223===n.status?204:n.status,i=n.statusText||"OK",s=new Tf(n.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return r=new Vf({headers:s,status:t,statusText:i,url:o}),r},o=()=>{let{headers:i,status:r,statusText:o,url:a}=s(),l=null;204!==r&&(l=void 0===n.response?n.responseText:n.response),0===r&&(r=l?200:0);let c=r>=200&&r<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(Gf,"");try{l=""!==l?JSON.parse(l):null}catch(h){l=e,c&&(c=!1,l={error:h,text:l})}}c?(t.next(new jf({body:l,headers:i,status:r,statusText:o,url:a||void 0})),t.complete()):t.error(new Bf({error:l,headers:i,status:r,statusText:o,url:a||void 0}))},a=e=>{const{url:i}=s(),r=new Bf({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});t.error(r)};let l=!1;const c=i=>{l||(t.next(s()),l=!0);let r={type:Nf.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===e.responseType&&n.responseText&&(r.partialText=n.responseText),t.next(r)},h=e=>{let n={type:Nf.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),e.reportProgress&&(n.addEventListener("progress",c),null!==i&&n.upload&&n.upload.addEventListener("progress",h)),n.send(i),t.next({type:Nf.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),e.reportProgress&&(n.removeEventListener("progress",c),null!==i&&n.upload&&n.upload.removeEventListener("progress",h)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(ui(Yf))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Kf=new Yn("XSRF_COOKIE_NAME"),Qf=new Yn("XSRF_HEADER_NAME");class Jf{}let em=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zh(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh),ui(Mc),ui(Kf))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),tm=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const i=this.tokenService.getToken();return null===i||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,i)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(ui(Jf),ui(Qf))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),nm=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(Uf,[]);this.chain=e.reduceRight((e,t)=>new $f(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(ui(Rf),ui(po))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),im=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:tm,useClass:Wf}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:Kf,useValue:t.cookieName}:[],t.headerName?{provide:Qf,useValue:t.headerName}:[]]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[tm,{provide:Uf,useExisting:tm,multi:!0},{provide:Jf,useClass:em},{provide:Kf,useValue:"XSRF-TOKEN"},{provide:Qf,useValue:"X-XSRF-TOKEN"}]}),e})(),rm=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[qf,{provide:Af,useClass:nm},Xf,{provide:Rf,useExisting:Xf},Zf,{provide:Yf,useExisting:Zf}],imports:[[im.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();function sm(...e){if(1===e.length){const t=e[0];if(l(t))return om(t,null);if(c(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return om(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return om(e=1===e.length&&l(e[0])?e[0]:e,null).pipe(E(e=>t(...e)))}return om(e,null)}function om(e,t){return new b(n=>{const i=e.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=F(e[a]);let c=!1;n.add(l.subscribe({next:e=>{c||(c=!0,o++),r[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==i&&c||(o===i&&n.next(t?t.reduce((e,t,n)=>(e[t]=r[n],e),{}):r),n.complete())}}))}})}class am{}const lm=new Yn("NgValueAccessor"),cm={provide:lm,useExisting:se(()=>hm),multi:!0};let hm=(()=>{class e extends am{constructor(e,t){super(),this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ja),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Uo("change",function(e){return t.onChange(e.target.checked)})("blur",function(){return t.onTouched()})},features:[qa([cm]),mo]}),e})();const um={provide:lm,useExisting:se(()=>pm),multi:!0},dm=new Yn("CompositionEventMode");let pm=(()=>{class e{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Ah()?Ah().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ja),Oo(Xa),Oo(dm,8))},e.\u0275dir=Xe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Uo("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[qa([um])]}),e})();function fm(e){return null==e||0===e.length}function mm(e){return null!=e&&"number"==typeof e.length}const gm=new Yn("NgValidators"),vm=new Yn("NgAsyncValidators"),bm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function ym(e){return fm(e.value)?{required:!0}:null}function _m(e){return null}function wm(e){return null!=e}function xm(e){const t=Ho(e)?F(e):e;return $o(t),t}function Sm(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Cm(e,t){return t.map(t=>t(e))}function km(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function Em(e){if(!e)return null;const t=e.filter(wm);return 0==t.length?null:function(e){return Sm(Cm(e,t))}}function Am(e){return null!=e?Em(km(e)):null}function Rm(e){if(!e)return null;const t=e.filter(wm);return 0==t.length?null:function(e){return sm(Cm(e,t).map(xm)).pipe(E(Sm))}}function Tm(e){return null!=e?Rm(km(e)):null}function Im(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Dm(e){return e._rawValidators}function Om(e){return e._rawAsyncValidators}let Pm=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Am(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e}),e})(),Mm=(()=>{class e extends Pm{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(t){return Lm(t||e)},e.\u0275dir=Xe({type:e,features:[mo]}),e})();const Lm=$n(Mm);class Fm extends Pm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nm{constructor(e){this._cd=e}is(e){var t,n;return!!(null===(n=null===(t=this._cd)||void 0===t?void 0:t.control)||void 0===n?void 0:n[e])}}let zm=(()=>{class e extends Nm{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Fm,2))},e.\u0275dir=Xe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&ca("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[mo]}),e})(),Vm=(()=>{class e extends Nm{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Mm,10))},e.\u0275dir=Xe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&ca("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[mo]}),e})();function jm(e,t){return[...t.path,e]}function Bm(e,t){$m(e,t,!0),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Wm(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Wm(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Hm(e,t,n=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Um(e,t,!0),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function qm(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function $m(e,t,n){const i=Dm(e);null!==t.validator?e.setValidators(Im(i,t.validator)):"function"==typeof i&&e.setValidators([i]);const r=Om(e);if(null!==t.asyncValidator?e.setAsyncValidators(Im(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]),n){const n=()=>e.updateValueAndValidity();qm(t._rawValidators,n),qm(t._rawAsyncValidators,n)}}function Um(e,t,n){let i=!1;if(null!==e){if(null!==t.validator){const n=Dm(e);if(Array.isArray(n)&&n.length>0){const r=n.filter(e=>e!==t.validator);r.length!==n.length&&(i=!0,e.setValidators(r))}}if(null!==t.asyncValidator){const n=Om(e);if(Array.isArray(n)&&n.length>0){const r=n.filter(e=>e!==t.asyncValidator);r.length!==n.length&&(i=!0,e.setAsyncValidators(r))}}}if(n){const e=()=>{};qm(t._rawValidators,e),qm(t._rawAsyncValidators,e)}return i}function Wm(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Gm(e,t){$m(e,t,!1)}function Ym(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function Zm(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Xm(e,t){if(!t)return null;let n,i,r;return Array.isArray(t),t.forEach(e=>{e.constructor===pm?n=e:Object.getPrototypeOf(e.constructor)===am?i=e:r=e}),r||i||n||null}function Km(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Qm(e){return(ng(e)?e.validators:e)||null}function Jm(e){return Array.isArray(e)?Am(e):e||null}function eg(e,t){return(ng(t)?t.asyncValidators:e)||null}function tg(e){return Array.isArray(e)?Tm(e):e||null}function ng(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class ig{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Jm(this._rawValidators),this._composedAsyncValidatorFn=tg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Jm(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=tg(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const t=xm(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let i=e;return t.forEach(e=>{i=i instanceof sg?i.controls.hasOwnProperty(e)?i.controls[e]:null:i instanceof og&&i.at(e)||null}),i}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new lc,this.statusChanges=new lc}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ng(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class rg extends ig{constructor(e=null,t,n){super(Qm(t),eg(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Km(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Km(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class sg extends ig{constructor(e,t,n){super(Qm(t),eg(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof rg?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,i)=>{n=t(n,e,i)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class og extends ig{constructor(e,t,n){super(Qm(t),eg(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof rg?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const ag={provide:Mm,useExisting:se(()=>cg)},lg=(()=>Promise.resolve(null))();let cg=(()=>{class e extends Mm{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new lc,this.form=new sg({},Am(e),Tm(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){lg.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Bm(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){lg.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),Km(this._directives,e)})}addFormGroup(e){lg.then(()=>{const t=this._findContainer(e.path),n=new sg({});Gm(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){lg.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){lg.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Zm(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(Oo(gm,10),Oo(vm,10))},e.\u0275dir=Xe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Uo("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qa([ag]),mo]}),e})();const hg={provide:Fm,useExisting:se(()=>dg)},ug=(()=>Promise.resolve(null))();let dg=(()=>{class e extends Fm{constructor(e,t,n,i){super(),this.control=new rg,this._registered=!1,this.update=new lc,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=Xm(0,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Ym(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?jm(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bm(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){ug.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;ug.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Mm,9),Oo(gm,10),Oo(vm,10),Oo(lm,10))},e.\u0275dir=Xe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[qa([hg]),mo,lt]}),e})(),pg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const fg={provide:lm,useExisting:se(()=>mg),multi:!0};let mg=(()=>{class e extends am{constructor(e,t){super(),this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ja),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Uo("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[qa([fg]),mo]}),e})(),gg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();const vg=new Yn("NgModelWithFormControlWarning"),bg={provide:Mm,useExisting:se(()=>yg)};let yg=(()=>{class e extends Mm{constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new lc,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Um(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return Bm(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){Hm(e.control||null,e,!1),Km(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,Zm(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=e.control,n=this.form.get(e.path);t!==n&&(Hm(t||null,e),n instanceof rg&&(Bm(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);Gm(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return Um(e,t,!1)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$m(this.form,this,!1),this._oldForm&&Um(this._oldForm,this,!1)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(Oo(gm,10),Oo(vm,10))},e.\u0275dir=Xe({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&Uo("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qa([bg]),mo,lt]}),e})();const _g={provide:Fm,useExisting:se(()=>wg)};let wg=(()=>{class e extends Fm{constructor(e,t,n,i,r){super(),this._ngModelWarningConfig=r,this._added=!1,this.update=new lc,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=Xm(0,i)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Ym(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return jm(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(Oo(Mm,13),Oo(gm,10),Oo(vm,10),Oo(lm,10),Oo(vg,8))},e.\u0275dir=Xe({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[qa([_g]),mo,lt]}),e._ngModelWarningSentOnce=!1,e})();const xg={provide:lm,useExisting:se(()=>Cg),multi:!0};function Sg(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Cg=(()=>{class e extends am{constructor(e,t){super(),this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Sg(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ja),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Uo("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[qa([xg]),mo]}),e})(),kg=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Sg(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Ja),Oo(Cg,9))},e.\u0275dir=Xe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Eg={provide:lm,useExisting:se(()=>Rg),multi:!0};function Ag(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Rg=(()=>{class e extends am{constructor(e,t){super(),this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const i=e.item(t),r=this._getOptionValue(i.value);n.push(r)}}else{const e=t.options;for(let t=0;t<e.length;t++){const i=e.item(t);if(i.selected){const e=this._getOptionValue(i.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ja),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Uo("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[qa([Eg]),mo]}),e})(),Tg=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Ag(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Ag(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Ja),Oo(Rg,9))},e.\u0275dir=Xe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Ig={provide:gm,useExisting:se(()=>Dg),multi:!0};let Dg=(()=>{class e{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?ym(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&Ro("required",t.required?"":null)},inputs:{required:"required"},features:[qa([Ig])]}),e})(),Og=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[gg]]}),e})(),Pg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[Og]}),e})(),Mg=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:vg,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[Og]}),e})();const Lg=new b(e=>e.complete());function Fg(e){return e?function(e){return new b(t=>e.schedule(()=>t.complete()))}(e):Lg}function Ng(e,t,n,r){return i(n)&&(r=n,n=void 0),r?Ng(e,t,n).pipe(E(e=>l(e)?r(...e):r(e))):new b(i=>{zg(e,t,function(e){i.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},i,n)})}function zg(e,t,n,i,r){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const i=e;e.addEventListener(t,n,r),s=()=>i.removeEventListener(t,n,r)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const i=e;e.on(t,n),s=()=>i.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const i=e;e.addListener(t,n),s=()=>i.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)zg(e[s],t,n,i,r)}i.add(s)}class Vg extends u{constructor(e,t){super()}schedule(e,t=0){return this}}class jg extends Vg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,i=!1;try{this.work(e)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let Bg=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class Hg extends Bg{constructor(e,t=Bg.now){super(e,()=>Hg.delegate&&Hg.delegate!==this?Hg.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Hg.delegate&&Hg.delegate!==this?Hg.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const qg=new Hg(jg);function $g(e){return!l(e)&&e-parseFloat(e)+1>=0}function Ug(e=0,t,n){let i=-1;return $g(t)?i=Number(t)<1?1:Number(t):k(t)&&(n=t),k(n)||(n=qg),new b(t=>{const r=$g(e)?e:+e-n.now();return n.schedule(Wg,r,{index:0,period:i,subscriber:t})})}function Wg(e){const{index:t,period:n,subscriber:i}=e;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}class Gg extends f{notifyNext(e,t,n,i,r){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Yg extends f{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Zg(e,t,n,i,r=new Yg(e,n,i)){if(!r.closed)return t instanceof b?t.subscribe(r):M(t)(r)}function Xg(...e){if(1===e.length){if(!l(e[0]))return e[0];e=e[0]}return $(e,void 0).lift(new Kg)}class Kg{call(e,t){return t.subscribe(new Qg(e))}}class Qg extends Gg{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let n=0;n<t&&!this.hasFirst;n++){const t=Zg(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(t),this.add(t)}this.observables=null}}notifyNext(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==n){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}class Jg extends S{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(e){super.next(this._value=e)}}const ev={};function tv(...e){let t,n;return k(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),$(e,n).lift(new nv(t))}class nv{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new iv(e,this.resultSelector))}}class iv extends Gg{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(ev),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Zg(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const i=this.values,r=this.toRespond?i[n]===ev?--this.toRespond:this.toRespond:0;i[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function rv(){}function sv(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),$(e,void 0).lift(new ov(t))}class ov{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new av(e,this.resultSelector))}}class av extends f{constructor(e,t,n=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;l(e)?t.push(new cv(e)):t.push("function"==typeof e[D]?new lv(e[D]()):new hv(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let n=0;n<t;n++){let t=e[n];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,n=this.destination;for(let s=0;s<t;s++){let t=e[s];if("function"==typeof t.hasValue&&!t.hasValue())return}let i=!1;const r=[];for(let s=0;s<t;s++){let t=e[s],o=t.next();if(t.hasCompleted()&&(i=!0),o.done)return void n.complete();r.push(o.value)}this.resultSelector?this._tryresultSelector(r):n.next(r),i&&n.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class lv{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class cv{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[D](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class hv extends z{constructor(e,t,n){super(e),this.parent=t,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[D](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return V(this.observable,new N(this))}}function uv(...e){return q(1)(xf(...e))}function dv(e){return t=>t.lift(new pv(e))}class pv{constructor(e){this.notifier=e}call(e,t){const n=new fv(e),i=V(this.notifier,new N(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class fv extends z{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const mv=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function gv(e){return t=>0===e?Fg():t.lift(new vv(e))}class vv{constructor(e){if(this.total=e,this.total<0)throw new mv}call(e,t){return t.subscribe(new bv(e,this.total))}}class bv extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function yv(...e){const t=e[e.length-1];return k(t)?(e.pop(),n=>uv(e,n,t)):t=>uv(e,t)}function _v(e,t){return n=>n.lift(new wv(e,t))}class wv{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new xv(e,this.compare,this.keySelector))}}class xv extends f{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}function Sv(e,t){return"function"==typeof t?n=>n.pipe(Sv((n,i)=>F(e(n,i)).pipe(E((e,r)=>t(n,e,i,r))))):t=>t.lift(new Cv(e))}class Cv{constructor(e){this.project=e}call(e,t){return t.subscribe(new kv(e,this.project))}}class kv extends z{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new N(this),i=this.destination;i.add(n),this.innerSubscription=V(e,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function Ev(e,t,n){return function(i){return i.lift(new Av(e,t,n))}}class Av{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new Rv(e,this.nextOrObserver,this.error,this.complete))}}class Rv extends f{constructor(e,t,n,r){super(e),this._tapNext=rv,this._tapError=rv,this._tapComplete=rv,this._tapError=n||rv,this._tapComplete=r||rv,i(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||rv,this._tapError=t.error||rv,this._tapComplete=t.complete||rv)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function Tv(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Iv(e,n))}}class Iv{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Dv(e,this.observables,this.project))}}class Dv extends Gg{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++)this.add(Zg(this,t[r],void 0,r))}notifyNext(e,t,n){this.values[n]=t;const i=this.toRespond;if(i.length>0){const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function Ov(e,t){return new b(t?n=>t.schedule(Pv,0,{error:e,subscriber:n}):t=>t.error(e))}function Pv({error:e,subscriber:t}){t.error(e)}let Mv=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return xf(this.value);case"E":return Ov(this.error);case"C":return Fg()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();function Lv(e,t=qg){var n;const i=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new Fv(i,t))}class Fv{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new Nv(e,this.delay,this.scheduler))}}class Nv extends f{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,i=e.scheduler,r=e.destination;for(;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){const t=Math.max(0,n[0].time-i.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(Nv.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new zv(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(Mv.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(Mv.createComplete()),this.unsubscribe()}}class zv{constructor(e,t){this.time=e,this.notification=t}}class Vv{constructor(e){this.total=e}call(e,t){return t.subscribe(new jv(e,this.total))}}class jv extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}const Bv=["*"],Hv=["dialog"];function qv(e){return null!=e}function $v(e){return(e||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const Uv={animation:!0,transitionTimerDelayMs:5};let Wv=(()=>{class e{constructor(){this.animation=Uv.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Gv=()=>{},{transitionTimerDelayMs:Yv}=Uv,Zv=new Map,Xv=(e,t,n,i)=>{let r=i.context||{};const s=Zv.get(t);if(s)switch(i.runningTransition){case"continue":return Lg;case"stop":e.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),Zv.delete(t)}const o=n(t,i.animation,r)||Gv;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>o()),xf(void 0).pipe(function(e){return t=>new b(n=>t.subscribe(t=>e.run(()=>n.next(t)),t=>e.run(()=>n.error(t)),()=>e.run(()=>n.complete())))}(e));const a=new S,l=new S,c=a.pipe(function(...e){return t=>uv(t,xf(...e))}(!0));Zv.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const h=function(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const n=Ng(t,"transitionend").pipe(dv(c),Cf(({target:e})=>e===t));Xg(Ug(h+Yv).pipe(dv(c)),n,l).pipe(dv(c)).subscribe(()=>{Zv.delete(t),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()},Kv=(e,t,n)=>{let{direction:i,maxHeight:r}=n;const{classList:s}=e;function o(){s.add("collapse"),"show"===i?s.add("show"):s.remove("show")}if(t)return r||(r=function(e){if("undefined"==typeof navigator)return"0px";const{classList:t}=e,n=t.contains("show");n||t.add("show"),e.style.height="";const i=e.getBoundingClientRect().height+"px";return n||t.remove("show"),i}(e),n.maxHeight=r,e.style.height="show"!==i?r:"0px",s.remove("collapse"),s.remove("collapsing"),s.remove("show"),$v(e),s.add("collapsing")),e.style.height="show"===i?r:"0px",()=>{o(),s.remove("collapsing"),e.style.height=""};o()};let Qv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),Jv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),eb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})(),tb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),nb=(()=>{class e{constructor(e){this._ngbConfig=e}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return e.\u0275fac=function(t){return new(t||e)(ui(Wv))},e.\u0275prov=de({factory:function(){return new e(ui(Wv))},token:e,providedIn:"root"}),e})(),ib=(()=>{class e{constructor(e,t,n){this._element=e,this._zone=n,this.collapsed=!1,this.ngbCollapseChange=new lc,this.shown=new lc,this.hidden=new lc,this.animation=t.animation}ngOnInit(){this._runTransition(this.collapsed,!1)}ngOnChanges({collapsed:e}){e.firstChange||this._runTransitionWithEvents(this.collapsed,this.animation)}toggle(e=this.collapsed){this.collapsed=!e,this.ngbCollapseChange.next(this.collapsed),this._runTransitionWithEvents(this.collapsed,this.animation)}_runTransition(e,t){return Xv(this._zone,this._element.nativeElement,Kv,{animation:t,runningTransition:"stop",context:{direction:e?"hide":"show"}})}_runTransitionWithEvents(e,t){this._runTransition(e,t).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(nb),Oo(Zc))},e.\u0275dir=Xe({type:e,selectors:[["","ngbCollapse",""]],inputs:{collapsed:["ngbCollapse","collapsed"],animation:"animation"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],features:[lt]}),e})(),rb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();var sb=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}({});const ob=(e,t)=>!!t&&t.some(t=>t.contains(e)),ab=(e,t)=>!t||null!=function(e,t){return t?void 0===e.closest?null:e.closest(t):null}(e,t),lb="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const cb=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function hb(e){const t=Array.from(e.querySelectorAll(cb)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}const ub=/\s+/,db=new class{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let n,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))n=e.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const t=this.offsetParent(e);n=this.offset(e,!1),t!==document.documentElement&&(i=this.offset(t,!1)),i.top+=t.clientTop,i.left+=t.clientLeft}return n.top-=i.top,n.bottom-=i.top,n.left-=i.left,n.right-=i.left,t&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(e,t=!0){const n=e.getBoundingClientRect(),i=window.pageYOffset-document.documentElement.clientTop,r=window.pageXOffset-document.documentElement.clientLeft;let s={height:n.height||e.offsetHeight,width:n.width||e.offsetWidth,top:n.top+i,bottom:n.bottom+i,left:n.left+r,right:n.right+r};return t&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(e,t,n,i){const[r="top",s="center"]=n.split("-"),o=i?this.offset(e,!1):this.position(e,!1),a=this.getAllStyles(t),l=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),h=parseFloat(a.marginLeft),u=parseFloat(a.marginRight);let d=0,p=0;switch(r){case"top":d=o.top-(t.offsetHeight+l+c);break;case"bottom":d=o.top+o.height;break;case"left":p=o.left-(t.offsetWidth+h+u);break;case"right":p=o.left+o.width}switch(s){case"top":d=o.top;break;case"bottom":d=o.top+o.height-t.offsetHeight;break;case"left":p=o.left;break;case"right":p=o.left+o.width-t.offsetWidth;break;case"center":"top"===r||"bottom"===r?p=o.left+o.width/2-t.offsetWidth/2:d=o.top+o.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(p)}px, ${Math.round(d)}px)`;const f=t.getBoundingClientRect(),m=document.documentElement,g=window.innerHeight||m.clientHeight,v=window.innerWidth||m.clientWidth;return f.left>=0&&f.top>=0&&f.right<=v&&f.bottom<=g}};new Date(1882,10,12),new Date(2174,10,25);let pb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu,Pg]]}),e})(),fb=(()=>{class e{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})(),mb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["",8,"navbar"]]}),e})(),gb=(()=>{class e{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,t){2&e&&ca("disabled",t.disabled)},inputs:{disabled:"disabled"}}),e})(),vb=(()=>{class e{constructor(e,t){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=t.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(Oo(se(()=>_b)),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,t,n){if(1&e&&xc(n,gb,0),2&e){let e;_c(e=Sc())&&(t.menuItems=e)}},hostVars:5,hostBindings:function(e,t){1&e&&Uo("keydown.ArrowUp",function(e){return t.dropdown.onKeyDown(e)})("keydown.ArrowDown",function(e){return t.dropdown.onKeyDown(e)})("keydown.Home",function(e){return t.dropdown.onKeyDown(e)})("keydown.End",function(e){return t.dropdown.onKeyDown(e)})("keydown.Enter",function(e){return t.dropdown.onKeyDown(e)})("keydown.Space",function(e){return t.dropdown.onKeyDown(e)})("keydown.Tab",function(e){return t.dropdown.onKeyDown(e)})("keydown.Shift.Tab",function(e){return t.dropdown.onKeyDown(e)}),2&e&&(Ro("x-placement",t.placement),ca("dropdown-menu",!0)("show",t.dropdown.isOpen()))}}),e})(),bb=(()=>{class e{constructor(e,t){this.dropdown=e,this.nativeElement=t.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(Oo(se(()=>_b)),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,t){2&e&&Ro("aria-expanded",t.dropdown.isOpen())}}),e})(),yb=(()=>{class e extends bb{constructor(e,t){super(e,t)}}return e.\u0275fac=function(t){return new(t||e)(Oo(se(()=>_b)),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,t){1&e&&Uo("click",function(){return t.dropdown.toggle()})("keydown.ArrowUp",function(e){return t.dropdown.onKeyDown(e)})("keydown.ArrowDown",function(e){return t.dropdown.onKeyDown(e)})("keydown.Home",function(e){return t.dropdown.onKeyDown(e)})("keydown.End",function(e){return t.dropdown.onKeyDown(e)})("keydown.Tab",function(e){return t.dropdown.onKeyDown(e)})("keydown.Shift.Tab",function(e){return t.dropdown.onKeyDown(e)}),2&e&&Ro("aria-expanded",t.dropdown.isOpen())},features:[qa([{provide:bb,useExisting:se(()=>e)}]),mo]}),e})(),_b=(()=>{class e{constructor(e,t,n,i,r,s,o){this._changeDetector=e,this._document=n,this._ngZone=i,this._elementRef=r,this._renderer=s,this._closed$=new S,this._bodyContainer=null,this._open=!1,this.openChange=new lc,this.placement=t.placement,this.container=t.container,this.autoClose=t.autoClose,this.display=o?"static":"dynamic",this._zoneSubscription=i.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(gv(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.isFirstChange&&this._applyPlacementClasses(),e.dropdownClass){const{currentValue:t,previousValue:n}=e.dropdownClass;this._applyCustomDropdownClass(t,n)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){!function(e,t,n,i,r,s,o,a){var l;n&&e.runOutsideAngular((l=()=>{const l=Ng(t,"keydown").pipe(dv(r),Cf(e=>e.which===sb.Escape),Ev(e=>e.preventDefault())),c=Ng(t,"mousedown").pipe(E(e=>{const t=e.target;return 2!==e.button&&!ob(t,o)&&("inside"===n?ob(t,s)&&ab(t,a):"outside"===n?!ob(t,s):ab(t,a)||!ob(t,s))}),dv(r)),h=Ng(t,"mouseup").pipe(Tv(c),Cf(([e,t])=>t),Lv(0),dv(r));Xg([l.pipe(E(e=>0)),h.pipe(E(e=>1))]).subscribe(t=>e.run(()=>i(t)))},lb?()=>setTimeout(()=>l(),100):l))}(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const t=e.which,n=this._getMenuElements();let i=-1,r=null;const s=this._isEventFromToggle(e);if(!s&&n.length&&n.forEach((t,n)=>{t.contains(e.target)&&(r=t),t===this._document.activeElement&&(i=n)}),t!==sb.Space&&t!==sb.Enter){if(t!==sb.Tab){if(s||r){if(this.open(),n.length){switch(t){case sb.ArrowDown:i=Math.min(i+1,n.length-1);break;case sb.ArrowUp:if(this._isDropup()&&-1===i){i=n.length-1;break}i=Math.max(i-1,0);break;case sb.Home:i=0;break;case sb.End:i=n.length-1}n[i].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const t=this._menu.nativeElement.querySelectorAll(cb);e.shiftKey&&e.target===t[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):e.shiftKey||e.target!==t[t.length-1]||(this._anchor.nativeElement.focus(),this.close())}else Ng(e.target,"focusout").pipe(gv(1)).subscribe(({relatedTarget:e})=>{this._elementRef.nativeElement.contains(e)||this.close()})}}else!r||!0!==this.autoClose&&"inside"!==this.autoClose||Ng(r,"click").pipe(gv(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(e=>!e.disabled).map(e=>e.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&this._applyPlacementClasses("dynamic"===this.display?function(e,t,n,i,r){let s=Array.isArray(n)?n:n.split(ub);const o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=e=>{const[t,n]=e.split("-"),i=[];return i};let l=s.findIndex(e=>"auto"===e);l>=0&&o.forEach(function(e){null==s.find(t=>-1!==t.search("^"+e))&&s.splice(l++,1,e)});const c=t.style;c.position="absolute",c.top="0",c.left="0",c["will-change"]="transform";let h=null,u=!1;for(h of s){a(h);if(db.positionElements(e,t,h,i)){u=!0;break}}return u||(h=s[0],a(h),db.positionElements(e,t,h,i)),h}(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;if(this._menu){const t=this._menu.nativeElement;e.appendChild(this._elementRef.nativeElement,t),e.removeStyle(t,"position"),e.removeStyle(t,"transform")}this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const e=this._renderer,t=this._menu.nativeElement,n=this._bodyContainer=this._bodyContainer||e.createElement("div");e.setStyle(n,"position","absolute"),e.setStyle(t,"position","static"),e.setStyle(n,"z-index","1050"),e.appendChild(n,t),e.appendChild(this._document.body,n)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,t){const n="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;n&&(t&&this._renderer.removeClass(n,t),e&&this._renderer.addClass(n,e))}_applyPlacementClasses(e){const t=this._menu;if(t){e||(e=this._getFirstPlacement(this.placement));const n=this._renderer,i=this._elementRef.nativeElement;n.removeClass(i,"dropup"),n.removeClass(i,"dropdown"),t.placement="static"===this.display?null:e;const r=-1!==e.search("^top")?"dropup":"dropdown";n.addClass(i,r);const s=this._bodyContainer;s&&(n.removeClass(s,"dropup"),n.removeClass(s,"dropdown"),n.addClass(s,r))}}}return e.\u0275fac=function(t){return new(t||e)(Oo(xl),Oo(fb),Oo(Rh),Oo(Zc),Oo(Xa),Oo(Ja),Oo(mb,8))},e.\u0275dir=Xe({type:e,selectors:[["","ngbDropdown",""]],contentQueries:function(e,t,n){if(1&e&&(xc(n,vb,1),xc(n,bb,1)),2&e){let e;_c(e=Sc())&&(t._menu=e.first),_c(e=Sc())&&(t._anchor=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&ca("show",t.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display",dropdownClass:"dropdownClass"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[lt]}),e})(),wb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})(),xb=(()=>{class e{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return e.\u0275fac=function(t){return new(t||e)(ui(Wv))},e.\u0275prov=de({factory:function(){return new e(ui(Wv))},token:e,providedIn:"root"}),e})();class Sb{constructor(e,t,n){this.nodes=e,this.viewRef=t,this.componentRef=n}}const Cb=()=>{};let kb=(()=>{class e{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):Cb}_adjustBody(e){const t=this._document.body,n=t.style.paddingRight,i=parseFloat(window.getComputedStyle(t)["padding-right"]);return t.style["padding-right"]=`${i+e}px`,()=>t.style["padding-right"]=n}_isPresent(e){const t=this._document.body.getBoundingClientRect();return window.innerWidth-(t.left+t.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const t=this._document.body;t.appendChild(e);const n=e.getBoundingClientRect().width-e.clientWidth;return t.removeChild(e),n}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(Rh))},token:e,providedIn:"root"}),e})(),Eb=(()=>{class e{constructor(e,t){this._el=e,this._zone=t}ngOnInit(){this._zone.onStable.asObservable().pipe(gv(1)).subscribe(()=>{Xv(this._zone,this._el.nativeElement,(e,t)=>{t&&$v(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Xv(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Zc))},e.\u0275cmp=$e({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,t){2&e&&(ha("modal-backdrop"+(t.backdropClass?" "+t.backdropClass:"")),ca("show",!t.animation)("fade",t.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();class Ab{close(e){}dismiss(e){}}class Rb{constructor(e,t,n,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=n,this._beforeDismiss=i,this._closed=new S,this._dismissed=new S,this._hidden=new S,e.instance.dismissEvent.subscribe(e=>{this.dismiss(e)}),this.result=new Promise((e,t)=>{this._resolve=e,this._reject=t}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(dv(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(dv(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(t=>{!1!==t&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():xf(void 0);e.subscribe(()=>{const{nativeElement:e}=this._windowCmptRef.location;e.parentNode.removeChild(e),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:e}=this._backdropCmptRef.location;e.parentNode.removeChild(e),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),sv(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Tb=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}({});let Ib=(()=>{class e{constructor(e,t,n){this._document=e,this._elRef=t,this._zone=n,this._closed$=new S,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new lc,this.shown=new S,this.hidden=new S}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(gv(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,t={animation:this.animation,runningTransition:"stop"},n=sv(Xv(this._zone,e,()=>e.classList.remove("show"),t),Xv(this._zone,this._dialogEl.nativeElement,()=>{},t));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const e={animation:this.animation,runningTransition:"continue"};sv(Xv(this._zone,this._elRef.nativeElement,(e,t)=>{t&&$v(e),e.classList.add("show")},e),Xv(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Ng(e,"keydown").pipe(dv(this._closed$),Cf(e=>e.which===sb.Escape)).subscribe(e=>{this.keyboard?requestAnimationFrame(()=>{e.defaultPrevented||this._zone.run(()=>this.dismiss(Tb.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let t=!1;Ng(this._dialogEl.nativeElement,"mousedown").pipe(dv(this._closed$),Ev(()=>t=!1),Sv(()=>Ng(e,"mouseup").pipe(dv(this._closed$),gv(1))),Cf(({target:t})=>e===t)).subscribe(()=>{t=!0}),Ng(e,"click").pipe(dv(this._closed$)).subscribe(({target:n})=>{e===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||t||this._zone.run(()=>this.dismiss(Tb.BACKDROP_CLICK))),t=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const t=e.querySelector("[ngbAutofocus]"),n=hb(e)[0];(t||n||e).focus()}}_restoreFocus(){const e=this._document.body,t=this._elWithFocus;let n;n=t&&t.focus&&e.contains(t)?t:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Xv(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rh),Oo(Xa),Oo(Zc))},e.\u0275cmp=$e({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(e,t){if(1&e&&wc(Hv,3),2&e){let e;_c(e=Sc())&&(t._dialogEl=e.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,t){2&e&&(Ro("aria-modal",!0)("aria-labelledby",t.ariaLabelledBy)("aria-describedby",t.ariaDescribedBy),ha("modal d-block"+(t.windowClass?" "+t.windowClass:"")),ca("fade",t.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Bv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,t){1&e&&(Qo(),Lo(0,"div",0,1),Lo(2,"div",2),Jo(3),Fo(),Fo()),2&e&&ha("modal-dialog"+(t.size?" modal-"+t.size:"")+(t.centered?" modal-dialog-centered":"")+(t.scrollable?" modal-dialog-scrollable":"")+(t.modalDialogClass?" "+t.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),e})(),Db=(()=>{class e{constructor(e,t,n,i,r,s){this._applicationRef=e,this._injector=t,this._document=n,this._scrollBar=i,this._rendererFactory=r,this._ngZone=s,this._activeWindowCmptHasChanged=new S,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new lc,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const e=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const e=Ng(t,"focusin").pipe(dv(n),E(e=>e.target));Ng(t,"keydown").pipe(dv(n),Cf(e=>e.which===sb.Tab),Tv(e)).subscribe(([e,n])=>{const[i,r]=hb(t);n!==i&&n!==t||!e.shiftKey||(r.focus(),e.preventDefault()),n!==r||e.shiftKey||(i.focus(),e.preventDefault())}),i&&Ng(t,"click").pipe(dv(n),Tv(e),E(e=>e[1])).subscribe(e=>e.focus())})})(0,e.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(e.location.nativeElement)}})}open(e,t,n,i){const r=i.container instanceof HTMLElement?i.container:qv(i.container)?this._document.querySelector(i.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!r)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);const l=new Ab,c=this._getContentRef(e,i.injector||t,n,l,i);let h=!1!==i.backdrop?this._attachBackdrop(e,r):void 0,u=this._attachWindowComponent(e,r,c),d=new Rb(u,c,h,i.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(u),d.result.then(o,o),d.result.then(a,a),l.close=e=>{d.close(e)},l.dismiss=e=>{d.dismiss(e)},this._applyWindowOptions(u.instance,i),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,i),h.changeDetectorRef.detectChanges()),u.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,t){let n=e.resolveComponentFactory(Eb).create(this._injector);return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n}_attachWindowComponent(e,t,n){let i=e.resolveComponentFactory(Ib).create(this._injector,n.nodes);return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(e,t){this._windowAttributes.forEach(n=>{qv(t[n])&&(e[n]=t[n])})}_applyBackdropOptions(e,t){this._backdropAttributes.forEach(n=>{qv(t[n])&&(e[n]=t[n])})}_getContentRef(e,t,n,i,r){return n?n instanceof Rl?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(e,t,n,i,r):new Sb([])}_createFromTemplateRef(e,t){const n=e.createEmbeddedView({$implicit:t,close(e){t.close(e)},dismiss(e){t.dismiss(e)}});return this._applicationRef.attachView(n),new Sb([n.rootNodes],n)}_createFromString(e){const t=this._document.createTextNode(`${e}`);return new Sb([[t]])}_createFromComponent(e,t,n,i,r){const s=e.resolveComponentFactory(n),o=po.create({providers:[{provide:Ab,useValue:i}],parent:t}),a=s.create(o),l=a.location.nativeElement;return r.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new Sb([[l]],a.hostView,a)}_setAriaHidden(e){const t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(t=>{t!==e&&"SCRIPT"!==t.nodeName&&(this._ariaHiddenValues.set(t,t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const t=()=>{const t=this._modalRefs.indexOf(e);t>-1&&(this._modalRefs.splice(t,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(t){return new(t||e)(ui(gh),ui(po),ui(Rh),ui(kb),ui(Qa),ui(Zc))},e.\u0275prov=de({factory:function(){return new e(ui(gh),ui(Xs),ui(Rh),ui(kb),ui(Qa),ui(Zc))},token:e,providedIn:"root"}),e})(),Ob=(()=>{class e{constructor(e,t,n,i){this._moduleCFR=e,this._injector=t,this._modalStack=n,this._config=i}open(e,t={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),t);return this._modalStack.open(this._moduleCFR,this._injector,e,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(t){return new(t||e)(ui(Wa),ui(po),ui(Db),ui(xb))},e.\u0275prov=de({factory:function(){return new e(ui(Wa),ui(Xs),ui(Db),ui(xb))},token:e,providedIn:"root"}),e})(),Pb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[Ob]}),e})(),Mb=(()=>{class e{constructor(e){this._ngbConfig=e,this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return e.\u0275fac=function(t){return new(t||e)(ui(Wv))},e.\u0275prov=de({factory:function(){return new e(ui(Wv))},token:e,providedIn:"root"}),e})();const Lb=e=>qv(e)&&""!==e;let Fb=0,Nb=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl))},e.\u0275dir=Xe({type:e,selectors:[["ng-template","ngbNavContent",""]]}),e})(),zb=(()=>{class e{constructor(e,t){this.elementRef=t,this.disabled=!1,this.shown=new lc,this.hidden=new lc,this._nav=e}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){qv(this.domId)||(this.domId="ngb-nav-"+Fb++)}get active(){return this._nav.activeId===this.id}get id(){return Lb(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(qv(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}}return e.\u0275fac=function(t){return new(t||e)(Oo(se(()=>Vb)),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","ngbNavItem",""]],contentQueries:function(e,t,n){if(1&e&&xc(n,Nb,0),2&e){let e;_c(e=Sc())&&(t.contentTpls=e)}},hostVars:2,hostBindings:function(e,t){2&e&&ca("nav-item",!0)},inputs:{disabled:"disabled",domId:"domId",destroyOnHide:"destroyOnHide",_id:["ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"]}),e})(),Vb=(()=>{class e{constructor(e,t,n,i){this.role=e,this._cd=n,this._document=i,this.activeIdChange=new lc,this.shown=new lc,this.hidden=new lc,this.destroy$=new S,this.navItemChange$=new S,this.navChange=new lc,this.animation=t.animation,this.destroyOnHide=t.destroyOnHide,this.orientation=t.orientation,this.roles=t.roles,this.keyboard=t.keyboard}click(e){e.disabled||this._updateActiveId(e.id)}onKeyDown(e){if("tablist"!==this.roles||!this.keyboard)return;const t=e.which,n=this.links.filter(e=>!e.navItem.disabled),{length:i}=n;let r=-1;if(n.forEach((e,t)=>{e.elRef.nativeElement===this._document.activeElement&&(r=t)}),i){switch(t){case sb.ArrowLeft:if("vertical"===this.orientation)return;r=(r-1+i)%i;break;case sb.ArrowRight:if("vertical"===this.orientation)return;r=(r+1)%i;break;case sb.ArrowDown:if("horizontal"===this.orientation)return;r=(r+1)%i;break;case sb.ArrowUp:if("horizontal"===this.orientation)return;r=(r-1+i)%i;break;case sb.Home:r=0;break;case sb.End:r=i-1}"changeWithArrows"===this.keyboard&&this.select(n[r].navItem.id),n[r].elRef.nativeElement.focus(),e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!qv(this.activeId)){const e=this.items.first?this.items.first.id:null;Lb(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}this.items.changes.pipe(dv(this.destroy$)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:e}){e&&!e.firstChange&&this._notifyItemChanged(e.currentValue)}ngOnDestroy(){this.destroy$.next()}_updateActiveId(e,t=!0){if(this.activeId!==e){let n=!1;t&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{n=!0}}),n||(this.activeId=e,this.activeIdChange.emit(e),this._notifyItemChanged(e))}}_notifyItemChanged(e){this.navItemChange$.next(this._getItemById(e))}_getItemById(e){return this.items&&this.items.find(t=>t.id===e)||null}}return e.\u0275fac=function(t){return new(t||e)(Wn("role"),Oo(Mb),Oo(xl),Oo(Rh))},e.\u0275dir=Xe({type:e,selectors:[["","ngbNav",""]],contentQueries:function(e,t,n){if(1&e&&(xc(n,zb,0),xc(n,jb,1)),2&e){let e;_c(e=Sc())&&(t.items=e),_c(e=Sc())&&(t.links=e)}},hostVars:6,hostBindings:function(e,t){1&e&&Uo("keydown.arrowLeft",function(e){return t.onKeyDown(e)})("keydown.arrowRight",function(e){return t.onKeyDown(e)})("keydown.arrowDown",function(e){return t.onKeyDown(e)})("keydown.arrowUp",function(e){return t.onKeyDown(e)})("keydown.Home",function(e){return t.onKeyDown(e)})("keydown.End",function(e){return t.onKeyDown(e)}),2&e&&(Ro("aria-orientation","vertical"===t.orientation&&"tablist"===t.roles?"vertical":void 0)("role",t.role?t.role:t.roles?"tablist":void 0),ca("nav",!0)("flex-column","vertical"===t.orientation))},inputs:{animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard",activeId:"activeId"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],features:[lt]}),e})(),jb=(()=>{class e{constructor(e,t,n,i){this.role=e,this.navItem=t,this.nav=n,this.elRef=i}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}}return e.\u0275fac=function(t){return new(t||e)(Wn("role"),Oo(zb),Oo(Vb),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostVars:14,hostBindings:function(e,t){1&e&&Uo("click",function(e){return t.nav.click(t.navItem),e.preventDefault()}),2&e&&(Aa("id",t.navItem.domId),Ro("role",t.role?t.role:t.nav.roles?"tab":void 0)("tabindex",t.navItem.disabled?-1:void 0)("aria-controls",t.navItem.isPanelInDom()?t.navItem.panelDomId:null)("aria-selected",t.navItem.active)("aria-disabled",t.navItem.disabled),ca("nav-link",!0)("nav-item",t.hasNavItemClass())("active",t.navItem.active)("disabled",t.navItem.disabled))}}),e})(),Bb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),Hb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),qb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),$b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),Ub=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),Wb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),Gb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})(),Yb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();new Yn("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Zb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})();const Xb=[Qv,Jv,eb,tb,rb,pb,wb,Pb,Bb,Hb,qb,$b,Ub,Wb,Gb,Yb,Zb];let Kb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[Xb,Qv,Jv,eb,tb,rb,pb,wb,Pb,Bb,Hb,qb,$b,Ub,Wb,Gb,Yb,Zb]}),e})();function Qb(e,t){if(1&e&&(Lo(0,"span"),xa(1),Fo()),2&e){const e=Xo();Jr(1),Sa(e._placeholder)}}function Jb(e,t){if(1&e){const e=Bo();Lo(0,"span",14),xa(1),Lo(2,"a",15),Uo("click",function(n){Pt(e);const i=t.$implicit;return Xo().onItemClick(n,i)}),xa(3,"x"),Fo(),Fo()}if(2&e){const e=t.$implicit;Po("hidden",t.index>Xo()._settings.itemsShowLimit-1),Jr(1),Ca(" ",e.text," ")}}function ey(e,t){if(1&e&&(Lo(0,"span",16),xa(1),Fo()),2&e){const e=Xo();Jr(1),Ca("+",e.itemShowRemaining(),"")}}function ty(e,t){if(1&e){const e=Bo();Lo(0,"li",17),Uo("click",function(){return Pt(e),Xo().toggleSelectAll()}),No(1,"input",18),Lo(2,"div"),xa(3),Fo(),Fo()}if(2&e){const e=Xo();Jr(1),Po("checked",e.isAllItemsSelected())("disabled",e.disabled||e.isLimitSelectionReached()),Jr(2),Sa(e.isAllItemsSelected()?e._settings.unSelectAllText:e._settings.selectAllText)}}function ny(e,t){if(1&e){const e=Bo();Lo(0,"li",19),Lo(1,"input",20),Uo("ngModelChange",function(t){return Pt(e),Xo().filter.text=t})("ngModelChange",function(t){return Pt(e),Xo().onFilterTextChange(t)}),Fo(),Fo()}if(2&e){const e=Xo();Jr(1),Po("readOnly",e.disabled)("placeholder",e._settings.searchPlaceholderText)("ngModel",e.filter.text)}}function iy(e,t){if(1&e){const e=Bo();Lo(0,"li",21),Uo("click",function(n){Pt(e);const i=t.$implicit;return Xo().onItemClick(n,i)}),No(1,"input",22),Lo(2,"div"),xa(3),Fo(),Fo()}if(2&e){const e=t.$implicit,n=Xo();Jr(1),Po("checked",n.isSelected(e))("disabled",n.disabled||n.isLimitSelectionReached()&&!n.isSelected(e)||e.isDisabled),Jr(2),Sa(e.text)}}function ry(e,t){if(1&e&&(Lo(0,"li",23),Lo(1,"h5"),xa(2),Fo(),Fo()),2&e){const e=Xo();Jr(2),Sa(e._settings.noDataAvailablePlaceholderText)}}class sy{constructor(e){"string"!=typeof e&&"number"!=typeof e||(this.id=this.text=e,this.isDisabled=!1),"object"==typeof e&&(this.id=e.id,this.text=e.text,this.isDisabled=e.isDisabled)}}const oy={provide:lm,useExisting:se(()=>ly),multi:!0},ay=()=>{};let ly=(()=>{let e=class{constructor(e){this.cdr=e,this._data=[],this.selectedItems=[],this.isDropdownOpen=!0,this._placeholder="Select",this._sourceDataType=null,this._sourceDataFields=[],this.filter=new sy(this.data),this.defaultSettings={singleSelection:!1,idField:"id",textField:"text",disabledField:"isDisabled",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",allowSearchFilter:!1,limitSelection:-1,clearSearchFilter:!0,maxHeight:197,itemsShowLimit:999999999999,searchPlaceholderText:"Search",noDataAvailablePlaceholderText:"No data available",closeDropDownOnSelection:!1,showSelectedItemsAtTop:!1,defaultOpen:!1,allowRemoteDataSearch:!1},this.disabled=!1,this.onFilterChange=new lc,this.onDropDownClose=new lc,this.onSelect=new lc,this.onDeSelect=new lc,this.onSelectAll=new lc,this.onDeSelectAll=new lc,this.onTouchedCallback=ay,this.onChangeCallback=ay}set placeholder(e){this._placeholder=e||"Select"}set settings(e){this._settings=e?Object.assign(this.defaultSettings,e):Object.assign(this.defaultSettings)}set data(e){if(e){const t=e[0];this._sourceDataType=typeof t,this._sourceDataFields=this.getFields(t),this._data=e.map(e=>new sy("string"==typeof e||"number"==typeof e?e:{id:e[this._settings.idField],text:e[this._settings.textField],isDisabled:e[this._settings.disabledField]}))}else this._data=[]}onFilterTextChange(e){this.onFilterChange.emit(e)}onItemClick(e,t){if(this.disabled||t.isDisabled)return!1;const n=this.isSelected(t),i=-1===this._settings.limitSelection||this._settings.limitSelection>0&&this.selectedItems.length<this._settings.limitSelection;n?this.removeSelected(t):i&&this.addSelected(t),this._settings.singleSelection&&this._settings.closeDropDownOnSelection&&this.closeDropdown()}writeValue(e){if(null!=e&&e.length>0)if(this._settings.singleSelection)try{if(e.length>=1){const t=e[0];this.selectedItems=[new sy("string"==typeof t||"number"==typeof t?t:{id:t[this._settings.idField],text:t[this._settings.textField],isDisabled:t[this._settings.disabledField]})]}}catch(t){}else{const t=e.map(e=>new sy("string"==typeof e||"number"==typeof e?e:{id:e[this._settings.idField],text:e[this._settings.textField],isDisabled:e[this._settings.disabledField]}));this.selectedItems=this._settings.limitSelection>0?t.splice(0,this._settings.limitSelection):t}else this.selectedItems=[];this.onChangeCallback(e)}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}onTouched(){this.closeDropdown(),this.onTouchedCallback()}trackByFn(e,t){return t.id}isSelected(e){let t=!1;return this.selectedItems.forEach(n=>{e.id===n.id&&(t=!0)}),t}isLimitSelectionReached(){return this._settings.limitSelection===this.selectedItems.length}isAllItemsSelected(){const e=this._data.filter(e=>e.isDisabled).length;return!((!this.data||0===this.data.length)&&this._settings.allowRemoteDataSearch)&&this._data.length===this.selectedItems.length+e}showButton(){return!(this._settings.singleSelection||this._settings.limitSelection>0)}itemShowRemaining(){return this.selectedItems.length-this._settings.itemsShowLimit}addSelected(e){this._settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(e)):this.selectedItems.push(e),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onSelect.emit(this.emittedValue(e))}removeSelected(e){this.selectedItems.forEach(t=>{e.id===t.id&&this.selectedItems.splice(this.selectedItems.indexOf(t),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onDeSelect.emit(this.emittedValue(e))}emittedValue(e){const t=[];if(Array.isArray(e))e.map(e=>{t.push(this.objectify(e))});else if(e)return this.objectify(e);return t}objectify(e){if("object"===this._sourceDataType){const t={};return t[this._settings.idField]=e.id,t[this._settings.textField]=e.text,this._sourceDataFields.includes(this._settings.disabledField)&&(t[this._settings.disabledField]=e.isDisabled),t}return"number"===this._sourceDataType?Number(e.id):e.text}toggleDropdown(e){e.preventDefault(),this.disabled&&this._settings.singleSelection||(this._settings.defaultOpen=!this._settings.defaultOpen,this._settings.defaultOpen||this.onDropDownClose.emit())}closeDropdown(){this._settings.defaultOpen=!1,this._settings.clearSearchFilter&&(this.filter.text=""),this.onDropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.onDeSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this._data.filter(e=>!e.isDisabled).slice(),this.onSelectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}getFields(e){const t=[];if("object"!=typeof e)return t;for(const n in e)t.push(n);return t}};return e.\u0275fac=function(t){return new(t||e)(Oo(xl))},e.\u0275cmp=$e({type:e,selectors:[["ng-multiselect-dropdown"]],hostBindings:function(e,t){1&e&&Uo("blur",function(){return t.onTouched()})},inputs:{disabled:"disabled",placeholder:"placeholder",settings:"settings",data:"data"},outputs:{onFilterChange:"onFilterChange",onDropDownClose:"onDropDownClose",onSelect:"onSelect",onDeSelect:"onDeSelect",onSelectAll:"onSelectAll",onDeSelectAll:"onDeSelectAll"},features:[qa([oy])],decls:16,vars:17,consts:[["tabindex","=0",1,"multiselect-dropdown",3,"blur","clickOutside"],["tabindex","-1",1,"dropdown-btn",3,"click"],[4,"ngIf"],["class","selected-item",3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],[2,"float","right !important","padding-right","4px"],["style","padding-right: 6px;",4,"ngIf"],[3,"ngClass"],[1,"dropdown-list",3,"hidden"],[1,"item1"],["class","multiselect-item-checkbox","style","border-bottom: 1px solid #ccc;padding:10px",3,"click",4,"ngIf"],["class","filter-textbox",4,"ngIf"],[1,"item2"],["class","multiselect-item-checkbox",3,"click",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"selected-item",3,"hidden"],[2,"padding-top","2px","padding-left","2px","color","white",3,"click"],[2,"padding-right","6px"],[1,"multiselect-item-checkbox",2,"border-bottom","1px solid #ccc","padding","10px",3,"click"],["type","checkbox","aria-label","multiselect-select-all",3,"checked","disabled"],[1,"filter-textbox"],["type","text","aria-label","multiselect-search",3,"readOnly","placeholder","ngModel","ngModelChange"],[1,"multiselect-item-checkbox",3,"click"],["type","checkbox","aria-label","multiselect-item",3,"checked","disabled"],[1,"no-data"]],template:function(e,t){1&e&&(Lo(0,"div",0),Uo("blur",function(){return t.onTouched()})("clickOutside",function(){return t.closeDropdown()}),Lo(1,"div"),Lo(2,"span",1),Uo("click",function(e){return t.toggleDropdown(e)}),Io(3,Qb,2,1,"span",2),Io(4,Jb,4,2,"span",3),Lo(5,"span",4),Io(6,ey,2,1,"span",5),No(7,"span",6),Fo(),Fo(),Fo(),Lo(8,"div",7),Lo(9,"ul",8),Io(10,ty,4,3,"li",9),Io(11,ny,2,3,"li",10),Fo(),Lo(12,"ul",11),Io(13,iy,4,3,"li",12),nc(14,"multiSelectFilter"),Io(15,ry,3,1,"li",13),Fo(),Fo(),Fo()),2&e&&(Jr(1),ca("disabled",t.disabled),Jr(2),Po("ngIf",0==t.selectedItems.length),Jr(1),Po("ngForOf",t.selectedItems)("ngForTrackBy",t.trackByFn),Jr(2),Po("ngIf",t.itemShowRemaining()>0),Jr(1),Po("ngClass",t._settings.defaultOpen?"dropdown-up":"dropdown-down"),Jr(1),Po("hidden",!t._settings.defaultOpen),Jr(2),Po("ngIf",(t._data.length>0||t._settings.allowRemoteDataSearch)&&!t._settings.singleSelection&&t._settings.enableCheckAll&&-1===t._settings.limitSelection),Jr(1),Po("ngIf",(t._data.length>0||t._settings.allowRemoteDataSearch)&&t._settings.allowSearchFilter),Jr(1),la("max-height",t._settings.maxHeight+"px"),Jr(1),Po("ngForOf",rc(14,14,t._data,t.filter)),Jr(2),Po("ngIf",0==t._data.length&&!t._settings.allowRemoteDataSearch))},directives:function(){return[cy,eu,Qh,Xh,pm,zm,dg]},pipes:function(){return[hy]},styles:['.multiselect-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;font-size:inherit;font-family:inherit}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #adadad;width:100%;padding:6px 12px;margin-bottom:0;font-weight:400;line-height:1.52857143;text-align:left;vertical-align:middle;cursor:pointer;background-image:none;border-radius:4px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]{border:1px solid #337ab7;margin-right:4px;background:#337ab7;padding:0 5px;color:#fff;border-radius:2px;float:left}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]:hover{box-shadow:1px 1px #959595}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-down[_ngcontent-%COMP%]{display:inline-block;top:10px;width:0;height:0;border-top:10px solid #adadad;border-left:10px solid transparent;border-right:10px solid transparent}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-up[_ngcontent-%COMP%]{display:inline-block;width:0;height:0;border-bottom:10px solid #adadad;border-left:10px solid transparent;border-right:10px solid transparent}.multiselect-dropdown[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:#eceeef}.dropdown-list[_ngcontent-%COMP%]{position:absolute;padding-top:6px;width:100%;z-index:9999;border:1px solid #ccc;border-radius:3px;background:#fff;margin-top:10px;box-shadow:0 1px 5px #959595}.dropdown-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;overflow:auto;margin:0}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;cursor:pointer;text-align:left}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;position:relative;padding:10px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;width:100%;padding:0 0 0 26px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus + div[_ngcontent-%COMP%]:before, .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover + div[_ngcontent-%COMP%]:before{border-color:#337ab7;background-color:#f2f2f2}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:active + div[_ngcontent-%COMP%]:before{transition-duration:0s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;margin:0;color:#000}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{box-sizing:content-box;content:"";color:#337ab7;position:absolute;top:50%;left:0;width:14px;height:14px;margin-top:-9px;border:2px solid #337ab7;text-align:center;transition:.4s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{box-sizing:content-box;content:"";position:absolute;transform:scale(0);transform-origin:50%;transition:transform .2s ease-out;background-color:transparent;top:50%;left:4px;width:8px;height:3px;margin-top:-4px;border-style:solid;border-color:#fff;border-width:0 0 3px 3px;-o-border-image:none;border-image:none;transform:rotate(-45deg) scale(0)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled + div[_ngcontent-%COMP%]:before{border-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:focus + div[_ngcontent-%COMP%]:before   .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:hover + div[_ngcontent-%COMP%]:before{background-color:inherit}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:checked + div[_ngcontent-%COMP%]:before{background-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{content:"";transition:transform .2s ease-out;transform:rotate(-45deg) scale(1)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{-webkit-animation:.2s ease-in borderscale;animation:.2s ease-in borderscale;background:#337ab7}@-webkit-keyframes borderscale{50%{box-shadow:0 0 0 2px #337ab7}}@keyframes borderscale{50%{box-shadow:0 0 0 2px #337ab7}}'],changeDetection:0}),e})(),cy=(()=>{let e=class{constructor(e){this._elementRef=e,this.clickOutside=new lc}onClick(e,t){t&&(this._elementRef.nativeElement.contains(t)||this.clickOutside.emit(e))}};return e.\u0275fac=function(t){return new(t||e)(Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","clickOutside",""]],hostBindings:function(e,t){1&e&&Uo("click",function(e){return t.onClick(e,e.target)},!1,hr)},outputs:{clickOutside:"clickOutside"}}),e})(),hy=(()=>{let e=class{transform(e,t){return e&&t?e.filter(e=>this.applyFilter(e,t)):e}applyFilter(e,t){return"string"==typeof e.text&&"string"==typeof t.text?!(t.text&&e.text&&-1===e.text.toLowerCase().indexOf(t.text.toLowerCase())):!(t.text&&e.text&&-1===e.text.toString().toLowerCase().indexOf(t.text.toString().toLowerCase()))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=Ke({name:"multiSelectFilter",type:e,pure:!1}),e})();var uy;let dy=(()=>{let e=uy=class{static forRoot(){return{ngModule:uy}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu,Pg]]}),e})();function py(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"div",11),Lo(2,"label",12),xa(3),Fo(),No(4,"input",13),Fo(),Fo()),2&e){const e=Xo().$implicit;Jr(2),ea("for",e.id),Jr(1),Ca("",e.label,": "),Jr(1),ea("id",e.id),ea("formControlName",e.id)}}function fy(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"div",14),Lo(2,"label",12),xa(3),Fo(),No(4,"input",15),Fo(),Fo()),2&e){const e=Xo().$implicit;Jr(2),ea("for",e.id),Jr(1),Ca("",e.label,": \xa0\xa0\xa0"),Jr(1),ea("id",e.id),ea("formControlName",e.id)}}function my(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"div",14),Lo(2,"label",12),xa(3),Fo(),No(4,"input",15),Fo(),Fo()),2&e){const e=Xo().$implicit;Jr(2),ea("for",e.id),Jr(1),Ca("",e.label,": \xa0\xa0\xa0"),Jr(1),ea("id",e.id),ea("formControlName",e.id)}}function gy(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"div",16),No(2,"input",17),Lo(3,"label",18),xa(4),Fo(),Fo(),Fo()),2&e){const e=Xo().$implicit;Jr(2),ea("id",e.id),ea("formControlName",e.id),Jr(1),ea("for",e.id),Jr(1),Sa(e.label)}}function vy(e,t){if(1&e&&(Lo(0,"option"),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Ca(" ",e," ")}}function by(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"div",11),Lo(2,"label",12),xa(3),Fo(),Lo(4,"select",19),Io(5,vy,2,1,"option",6),Fo(),Fo(),Fo()),2&e){const e=Xo().$implicit;Jr(2),ea("for",e.id),Jr(1),Sa(e.label),Jr(1),ea("id",e.id),ea("formControlName",e.id),Po("value",e.options[0]),Jr(1),Po("ngForOf",e.options)}}function yy(e,t){if(1&e&&(Lo(0,"div"),No(1,"ng-multiselect-dropdown",20),Fo()),2&e){const e=Xo().$implicit,t=Xo();Jr(1),ea("formControlName",e.id),Po("settings",t.repDropdownSettings)("data",e.options)("placeholder",e.label)}}function _y(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"div",9),Io(2,py,5,4,"div",10),Io(3,fy,5,4,"div",10),Io(4,my,5,4,"div",10),Io(5,gy,5,4,"div",10),Io(6,by,6,6,"div",10),Io(7,yy,2,4,"div",10),Fo(),Fo()),2&e){const e=t.$implicit;Jr(1),Po("ngSwitch",e.type),Jr(1),Po("ngSwitchCase","textBox"),Jr(1),Po("ngSwitchCase","number"),Jr(1),Po("ngSwitchCase","decimal"),Jr(1),Po("ngSwitchCase","boolean"),Jr(1),Po("ngSwitchCase","select"),Jr(1),Po("ngSwitchCase","multi_select")}}let wy=(()=>{class e{constructor(e,t){this.activeModal=e,this.modalService=t,this.params=[],this.repDropdownSettings={singleSelection:!1,idField:"id",textField:"text",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0}}ngOnInit(){const e={};this.report.params.forEach(t=>{this.add_fields(t,e)}),this.report.filter_params&&(console.log("adding params)"),this.filterParams.forEach(t=>{this.add_fields(t,e)})),this.myFormGroup=new sg(e)}add_fields(e,t){console.log("adding field"),t[e.id]=new rg("select"===e.type&&e.options.length>0?e.options[0]:""),this.params.push(e)}onSubmit(){this.activeModal.close(this.myFormGroup.value)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ab),Oo(Ob))},e.\u0275cmp=$e({type:e,selectors:[["app-report-params-dialog"]],inputs:{report:"report",filterParams:"filterParams"},decls:12,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","tabindex","-1","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[1,"form-group",2,"margin-top","1rem !important"],["type","submit","value","Run Report",1,"btn","btn-primary"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"form-group"],[3,"for"],["type","text",3,"id","formControlName"],[1,"form-group",2,"margin-top","1rem","margin-bottom","0rem !important"],["type","number",3,"id","formControlName"],[1,"form-check",2,"margin-top","1rem","margin-bottom","0rem !important"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"],[1,"custom-select",3,"id","formControlName","value"],[2,"padding-left","10px !important","padding-top","7px !important",3,"settings","data","formControlName","placeholder"]],template:function(e,t){1&e&&(zo(0),Lo(1,"div",0),Lo(2,"h3",1),xa(3),Fo(),Lo(4,"button",2),Uo("click",function(){return t.activeModal.dismiss("Cross click")}),Lo(5,"span",3),xa(6,"\xd7"),Fo(),Fo(),Fo(),Lo(7,"div",4),Lo(8,"form",5),Uo("ngSubmit",function(){return t.onSubmit()}),Io(9,_y,8,7,"div",6),Lo(10,"div",7),No(11,"input",8),Fo(),Fo(),Fo(),Vo()),2&e&&(Jr(3),Ca("Report Parameters - ",t.report.title,""),Jr(5),Po("formGroup",t.myFormGroup),Jr(1),Po("ngForOf",t.params))},directives:[pg,Vm,yg,Qh,ru,su,pm,zm,wg,mg,hm,Cg,kg,Tg,ly],styles:[".btn-sm{padding:.1rem .3rem!important;line-height:1!important}.i{line-height:inherit}.primary-icon{color:#007bff;align-items:center;vertical-align:bottom;line-height:20px}.header-text{color:rgba(0,0,0,.54);font-size:12px}.btn-solid-icon{background-color:#fff;color:#6c757d;border:none}"],encapsulation:2}),e})();function xy(e){return new b(t=>{let n;try{n=e()}catch(i){return void t.error(i)}return(n?F(n):Fg()).subscribe(t)})}function Sy(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new Cy(e,t,n))}}class Cy{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new ky(e,this.accumulator,this.seed,this.hasSeed))}}class ky extends f{constructor(e,t,n,i){super(e),this.accumulator=t,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}const Ey=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();function Ay(e=null){return t=>t.lift(new Ry(e))}class Ry{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ty(e,this.defaultValue))}}class Ty extends f{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Iy(e=Py){return t=>t.lift(new Dy(e))}class Dy{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Oy(e,this.errorFactory))}}class Oy extends f{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Py(){return new Ey}function My(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Cf((t,n)=>e(t,n,i)):v,gv(1),n?Ay(t):Iy(()=>new Ey))}function Ly(e){return function(t){const n=new Fy(e),i=t.lift(n);return n.caught=i}}class Fy{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Ny(e,this.selector,this.caught))}}class Ny extends z{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const i=new N(this);this.add(i);const r=V(n,i);r!==i&&this.add(r)}}}class zy{constructor(e){this.reportsService=e,this.reportResultSubject=new Jg({status:"PENDING",info:"",response:null}),this.reportResult$=this.reportResultSubject.asObservable()}requestReport(e,t,n,i,r,s,o,a){this.reportName=e,this.reportFormat=t,this.species=n,this.genSeqs=i,this.genFilters=r,this.repSeqs=s,this.repFilters=o,this.params=a,this.fetchReport()}fetchReport(){this.pollCount=0,this.reportsService.getReportsRunApi(this.reportName,this.reportFormat,this.species,this.genSeqs,this.genFilters,this.repSeqs,this.repFilters,this.params).subscribe(e=>{var t;this.fetchReportStatus(e.id).pipe((3e3,40,t=e=>("PENDING"===e.status&&this.reportResultSubject.next(e.info?{status:e.status,info:e.info.stage,response:e}:{status:e.status,info:e.status,response:e}),this.pollCount+=1,"SUCCESS"===e.status||"FAILURE"===e.status),e=>{return Ug(0,3e3).pipe(Sy(e=>++e,0),Ev(e=>{if(e>40)throw new Error("Error: max attempts")}),(n=e,Sv(()=>n)),My(t));var n})).subscribe(e=>{this.reportResultSubject.next("SUCCESS"===e.status?"ok"===e.results.status?{status:e.status,info:"",response:e}:{status:"FAILURE",info:e.results.description,response:e}:{status:"FAILURE",info:"return code:"+e.status+" "+e.description,response:e})},e=>{this.reportResultSubject.next({status:"FAILURE",info:"Timeout waiting for report",response:null})})},e=>{this.reportResultSubject.next({status:"FAILURE",info:"Error: "+this.formatError(e),response:null}),this.pollCount=999})}fetchReportStatus(e){return xy(()=>this.reportsService.getReportsStatus(e)).pipe(Ly(e=>xf({status:"FAILURE",description:this.formatError(e)})))}formatError(e){return"error"in e&&"message"in e.error&&e.error.message?e.error.message:"message"in e&&e.message?e.message:"statusText"in e&&e.statusText?e.status+". "+e.name+": "+e.statusText:e.status}}class Vy extends If{encodeKey(e){return(e=super.encodeKey(e)).replace(/\+/gi,"%2B")}encodeValue(e){return(e=super.encodeValue(e)).replace(/\+/gi,"%2B")}}const jy=new Yn("basePath");class By{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials}selectHeaderContentType(e){if(0==e.length)return;let t=e.find(e=>this.isJsonMime(e));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0==e.length)return;let t=e.find(e=>this.isJsonMime(e));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!=e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}}let Hy=(()=>{class e{constructor(e,t,n){this.httpClient=e,this.basePath="https://localhost/api",this.defaultHeaders=new Tf,this.configuration=new By,t&&(this.basePath=t),n&&(this.configuration=n,this.basePath=t||n.basePath||this.basePath)}canConsumeForm(e){for(const t of e)if("multipart/form-data"===t)return!0;return!1}getAssemblyApi(e,t,n="body",i=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getAssemblyApi.");if(null==t)throw new Error("Required parameter dataSets was null or undefined when calling getAssemblyApi.");let r=this.defaultHeaders;const s=this.configuration.selectHeaderAccept(["application/json"]);return null!=s&&(r=r.set("Accept",s)),this.httpClient.get(`${this.basePath}/genomic/assemblies/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{withCredentials:this.configuration.withCredentials,headers:r,observe:n,reportProgress:i})}getDataSetApi(e,t="body",n=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getDataSetApi.");let i=this.defaultHeaders;const r=this.configuration.selectHeaderAccept(["application/json"]);return null!=r&&(i=i.set("Accept",r)),this.httpClient.get(`${this.basePath}/genomic/data_sets/${encodeURIComponent(String(e))}`,{withCredentials:this.configuration.withCredentials,headers:i,observe:t,reportProgress:n})}getFeaturePosApi(e,t,n,i,r="body",s=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getFeaturePosApi.");if(null==t)throw new Error("Required parameter dataset was null or undefined when calling getFeaturePosApi.");if(null==n)throw new Error("Required parameter refSeqName was null or undefined when calling getFeaturePosApi.");if(null==i)throw new Error("Required parameter featureString was null or undefined when calling getFeaturePosApi.");let o=this.defaultHeaders;const a=this.configuration.selectHeaderAccept(["application/json"]);return null!=a&&(o=o.set("Accept",a)),this.httpClient.get(`${this.basePath}/genomic/feature_pos/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}/${encodeURIComponent(String(n))}/${encodeURIComponent(String(i))}`,{withCredentials:this.configuration.withCredentials,headers:o,observe:r,reportProgress:s})}getSequencesApi(e,t,n,i,r,s,o,a="body",l=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getSequencesApi.");if(null==t)throw new Error("Required parameter genomicDatasets was null or undefined when calling getSequencesApi.");let c=new Of({encoder:new Vy});null!=n&&(c=c.set("page_number",n)),null!=i&&(c=c.set("page_size",i)),null!=r&&(c=c.set("filter",r)),null!=s&&(c=c.set("sort_by",s)),null!=o&&(c=c.set("cols",o));let h=this.defaultHeaders;const u=this.configuration.selectHeaderAccept(["application/json"]);return null!=u&&(h=h.set("Accept",u)),this.httpClient.get(`${this.basePath}/genomic/sequences/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{params:c,withCredentials:this.configuration.withCredentials,headers:h,observe:a,reportProgress:l})}getSpeciesApi(e="body",t=!1){let n=this.defaultHeaders;const i=this.configuration.selectHeaderAccept(["application/json"]);return null!=i&&(n=n.set("Accept",i)),this.httpClient.get(`${this.basePath}/genomic/species`,{withCredentials:this.configuration.withCredentials,headers:n,observe:e,reportProgress:t})}getSubjectInfoApi(e,t,n,i="body",r=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getSubjectInfoApi.");if(null==t)throw new Error("Required parameter dataset was null or undefined when calling getSubjectInfoApi.");if(null==n)throw new Error("Required parameter subject was null or undefined when calling getSubjectInfoApi.");let s=this.defaultHeaders;const o=this.configuration.selectHeaderAccept(["application/json"]);return null!=o&&(s=s.set("Accept",o)),this.httpClient.get(`${this.basePath}/genomic/subject_info/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}/${encodeURIComponent(String(n))}`,{withCredentials:this.configuration.withCredentials,headers:s,observe:i,reportProgress:r})}getSubjectsApi(e,t,n,i,r,s,o,a="body",l=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getSubjectsApi.");if(null==t)throw new Error("Required parameter genomicDatasets was null or undefined when calling getSubjectsApi.");let c=new Of({encoder:new Vy});null!=n&&(c=c.set("page_number",n)),null!=i&&(c=c.set("page_size",i)),null!=r&&(c=c.set("filter",r)),null!=s&&(c=c.set("sort_by",s)),null!=o&&(c=c.set("cols",o));let h=this.defaultHeaders;const u=this.configuration.selectHeaderAccept(["application/json"]);return null!=u&&(h=h.set("Accept",u)),this.httpClient.get(`${this.basePath}/genomic/subjects/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{params:c,withCredentials:this.configuration.withCredentials,headers:h,observe:a,reportProgress:l})}}return e.\u0275fac=function(t){return new(t||e)(ui(qf),ui(jy,8),ui(By,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),qy=(()=>{class e{constructor(e,t,n){this.httpClient=e,this.basePath="https://localhost/api",this.defaultHeaders=new Tf,this.configuration=new By,t&&(this.basePath=t),n&&(this.configuration=n,this.basePath=t||n.basePath||this.basePath)}canConsumeForm(e){for(const t of e)if("multipart/form-data"===t)return!0;return!1}getReportsApi(e,t,n,i="body",r=!1){let s=new Of({encoder:new Vy});null!=e&&(s=s.set("species",e)),null!=t&&(s=s.set("genomic_datasets",t)),null!=n&&(s=s.set("rep_datasets",n));let o=this.defaultHeaders;const a=this.configuration.selectHeaderAccept(["application/json"]);return null!=a&&(o=o.set("Accept",a)),this.httpClient.get(`${this.basePath}/reports/reports/list`,{params:s,withCredentials:this.configuration.withCredentials,headers:o,observe:i,reportProgress:r})}getReportsRunApi(e,t,n,i,r,s,o,a,l="body",c=!1){if(null==e)throw new Error("Required parameter reportName was null or undefined when calling getReportsRunApi.");let h=new Of({encoder:new Vy});null!=t&&(h=h.set("format",t)),null!=n&&(h=h.set("species",n)),null!=i&&(h=h.set("genomic_datasets",i)),null!=r&&(h=h.set("genomic_filters",r)),null!=s&&(h=h.set("rep_datasets",s)),null!=o&&(h=h.set("rep_filters",o)),null!=a&&(h=h.set("params",a));let u=this.defaultHeaders;const d=this.configuration.selectHeaderAccept(["application/json"]);return null!=d&&(u=u.set("Accept",d)),this.httpClient.get(`${this.basePath}/reports/reports/run/${encodeURIComponent(String(e))}`,{params:h,withCredentials:this.configuration.withCredentials,headers:u,observe:l,reportProgress:c})}getReportsStatus(e,t="body",n=!1){if(null==e)throw new Error("Required parameter jobId was null or undefined when calling getReportsStatus.");let i=this.defaultHeaders;const r=this.configuration.selectHeaderAccept(["application/json"]);return null!=r&&(i=i.set("Accept",r)),this.httpClient.get(`${this.basePath}/reports/reports/status/${encodeURIComponent(String(e))}`,{withCredentials:this.configuration.withCredentials,headers:i,observe:t,reportProgress:n})}}return e.\u0275fac=function(t){return new(t||e)(ui(qf),ui(jy,8),ui(By,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),$y=(()=>{class e{constructor(e,t,n){this.httpClient=e,this.basePath="https://localhost/api",this.defaultHeaders=new Tf,this.configuration=new By,t&&(this.basePath=t),n&&(this.configuration=n,this.basePath=t||n.basePath||this.basePath)}canConsumeForm(e){for(const t of e)if("multipart/form-data"===t)return!0;return!1}getDataSetApi(e,t="body",n=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getDataSetApi.");let i=this.defaultHeaders;const r=this.configuration.selectHeaderAccept(["application/json"]);return null!=r&&(i=i.set("Accept",r)),this.httpClient.get(`${this.basePath}/repseq/ref_seqs/${encodeURIComponent(String(e))}`,{withCredentials:this.configuration.withCredentials,headers:i,observe:t,reportProgress:n})}getDataSetInfoApi(e,t,n="body",i=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getDataSetInfoApi.");if(null==t)throw new Error("Required parameter dataset was null or undefined when calling getDataSetInfoApi.");let r=this.defaultHeaders;const s=this.configuration.selectHeaderAccept(["application/json"]);return null!=s&&(r=r.set("Accept",s)),this.httpClient.get(`${this.basePath}/repseq/dataset_info/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{withCredentials:this.configuration.withCredentials,headers:r,observe:n,reportProgress:i})}getNovelsApi(e="body",t=!1){let n=this.defaultHeaders;const i=this.configuration.selectHeaderAccept(["application/json"]);return null!=i&&(n=n.set("Accept",i)),this.httpClient.get(`${this.basePath}/repseq/all_novels`,{withCredentials:this.configuration.withCredentials,headers:n,observe:e,reportProgress:t})}getNovelsSpApi(e,t,n="body",i=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getNovelsSpApi.");if(null==t)throw new Error("Required parameter dataset was null or undefined when calling getNovelsSpApi.");let r=this.defaultHeaders;const s=this.configuration.selectHeaderAccept(["application/json"]);return null!=s&&(r=r.set("Accept",s)),this.httpClient.get(`${this.basePath}/repseq/novels/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{withCredentials:this.configuration.withCredentials,headers:r,observe:n,reportProgress:i})}getSampleInfoApi(e,t,n,i="body",r=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getSampleInfoApi.");if(null==t)throw new Error("Required parameter dataset was null or undefined when calling getSampleInfoApi.");if(null==n)throw new Error("Required parameter sample was null or undefined when calling getSampleInfoApi.");let s=this.defaultHeaders;const o=this.configuration.selectHeaderAccept(["application/json"]);return null!=o&&(s=s.set("Accept",o)),this.httpClient.get(`${this.basePath}/repseq/sample_info/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}/${encodeURIComponent(String(n))}`,{withCredentials:this.configuration.withCredentials,headers:s,observe:i,reportProgress:r})}getSamplesApi(e,t,n,i,r,s,o,a="body",l=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getSamplesApi.");if(null==t)throw new Error("Required parameter dataset was null or undefined when calling getSamplesApi.");let c=new Of({encoder:new Vy});null!=n&&(c=c.set("page_number",n)),null!=i&&(c=c.set("page_size",i)),null!=r&&(c=c.set("filter",r)),null!=s&&(c=c.set("sort_by",s)),null!=o&&(c=c.set("cols",o));let h=this.defaultHeaders;const u=this.configuration.selectHeaderAccept(["application/json"]);return null!=u&&(h=h.set("Accept",u)),this.httpClient.get(`${this.basePath}/repseq/samples/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{params:c,withCredentials:this.configuration.withCredentials,headers:h,observe:a,reportProgress:l})}getSequencesApi(e,t,n,i,r,s,o,a="body",l=!1){if(null==e)throw new Error("Required parameter species was null or undefined when calling getSequencesApi.");if(null==t)throw new Error("Required parameter dataset was null or undefined when calling getSequencesApi.");let c=new Of({encoder:new Vy});null!=n&&(c=c.set("page_number",n)),null!=i&&(c=c.set("page_size",i)),null!=r&&(c=c.set("filter",r)),null!=s&&(c=c.set("sort_by",s)),null!=o&&(c=c.set("cols",o));let h=this.defaultHeaders;const u=this.configuration.selectHeaderAccept(["application/json"]);return null!=u&&(h=h.set("Accept",u)),this.httpClient.get(`${this.basePath}/repseq/sequences/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{params:c,withCredentials:this.configuration.withCredentials,headers:h,observe:a,reportProgress:l})}getSpeciesApi(e="body",t=!1){let n=this.defaultHeaders;const i=this.configuration.selectHeaderAccept(["application/json"]);return null!=i&&(n=n.set("Accept",i)),this.httpClient.get(`${this.basePath}/repseq/species`,{withCredentials:this.configuration.withCredentials,headers:n,observe:e,reportProgress:t})}}return e.\u0275fac=function(t){return new(t||e)(ui(qf),ui(jy,8),ui(By,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Uy=(()=>{class e{constructor(e,t,n){this.httpClient=e,this.basePath="https://localhost/api",this.defaultHeaders=new Tf,this.configuration=new By,t&&(this.basePath=t),n&&(this.configuration=n,this.basePath=t||n.basePath||this.basePath)}canConsumeForm(e){for(const t of e)if("multipart/form-data"===t)return!0;return!1}getConfigApi(e="body",t=!1){let n=this.defaultHeaders;const i=this.configuration.selectHeaderAccept(["application/json"]);return null!=i&&(n=n.set("Accept",i)),this.httpClient.get(`${this.basePath}/system/config`,{withCredentials:this.configuration.withCredentials,headers:n,observe:e,reportProgress:t})}getLoginApi(e,t,n="body",i=!1){if(null==e)throw new Error("Required parameter username was null or undefined when calling getLoginApi.");if(null==t)throw new Error("Required parameter password was null or undefined when calling getLoginApi.");let r=this.defaultHeaders;const s=this.configuration.selectHeaderAccept(["application/json"]);return null!=s&&(r=r.set("Accept",s)),this.httpClient.get(`${this.basePath}/system/login/${encodeURIComponent(String(e))}/${encodeURIComponent(String(t))}`,{withCredentials:this.configuration.withCredentials,headers:r,observe:n,reportProgress:i})}getRefreshApi(e="body",t=!1){let n=this.defaultHeaders;const i=this.configuration.selectHeaderAccept(["application/json"]);return null!=i&&(n=n.set("Accept",i)),this.httpClient.get(`${this.basePath}/system/refresh`,{withCredentials:this.configuration.withCredentials,headers:n,observe:e,reportProgress:t})}}return e.\u0275fac=function(t){return new(t||e)(ui(qf),ui(jy,8),ui(By,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Wy=(()=>{class e{constructor(e,t){if(e)throw new Error("ApiModule is already loaded. Import in your base AppModule only.");if(!t)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}static forRoot(t){return{ngModule:e,providers:[{provide:By,useFactory:t}]}}}return e.\u0275fac=function(t){return new(t||e)(ui(e,12),ui(qf,8))},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[Hy,qy,$y,Uy],imports:[[]]}),e})();function Gy(e,t){if(1&e&&(Lo(0,"div"),xa(1),Fo()),2&e){const e=Xo();Jr(1),Sa(e.statusText)}}function Yy(e,t){if(1&e&&(Lo(0,"div"),xa(1),Fo()),2&e){const e=Xo();Jr(1),Sa(e.errorText)}}function Zy(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"button",7),Uo("click",function(){return Pt(e),Xo().requestReport()}),xa(2,"Retry"),Fo(),Fo()}}let Xy=(()=>{class e{constructor(e,t){this.activeModal=e,this.reportsService=t,this.statusText="",this.lastStatusText="",this.errorText="",this.reportTitle="",this.enableRetry=!1,this.reportResult$Subscription=null}ngOnInit(){this.reportTitle=this.report.title,this.reportRequest=new zy(this.reportsService),this.reportResult$Subscription=this.reportRequest.reportResult$.subscribe(e=>{"PENDING"===e.status?(this.lastStatusText===e.info?this.statusText=this.statusText+".":(this.statusText=e.info,this.lastStatusText=e.info),this.errorText=""):"FAILURE"===e.status?(this.statusText="",this.errorText=e.info,this.enableRetry=!0):"SUCCESS"===e.status&&this.activeModal.close(e.response)}),this.requestReport()}requestReport(){this.enableRetry=!1,this.lastStatusText="",this.statusText="",this.errorText="",this.reportRequest.requestReport(this.report.name,this.format,this.species,this.genSeqs,this.genFilters,this.repSeqs,this.repFilters,this.params)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ab),Oo(qy))},e.\u0275cmp=$e({type:e,selectors:[["app-report-run-dialog"]],inputs:{report:"report",format:"format",params:"params",species:"species",genSeqs:"genSeqs",genFilters:"genFilters",repSeqs:"repSeqs",repFilters:"repFilters"},decls:13,vars:4,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"h4",1),xa(2),Fo(),Lo(3,"button",2),Uo("click",function(){return t.activeModal.close({status:"Cancelled"})}),Lo(4,"span",3),xa(5,"\xd7"),Fo(),Fo(),Fo(),Lo(6,"div",4),Io(7,Gy,2,1,"div",5),Io(8,Yy,2,1,"div",5),Fo(),Lo(9,"div",6),Lo(10,"button",7),Uo("click",function(){return t.activeModal.close({status:"Cancelled"})}),xa(11,"Cancel"),Fo(),Io(12,Zy,3,0,"div",5),Fo()),2&e&&(Jr(2),Ca("Preparing Report - ",t.reportTitle,""),Jr(5),Po("ngIf",""!==t.statusText),Jr(1),Po("ngIf",""!==t.errorText),Jr(4),Po("ngIf",t.enableRetry))},directives:[eu],styles:[".btn-sm{padding:.1rem .3rem!important;line-height:1!important}.i{line-height:inherit}.primary-icon{color:#007bff;align-items:center;vertical-align:bottom;line-height:20px}.header-text{color:rgba(0,0,0,.54);font-size:12px}.btn-solid-icon{background-color:#fff;color:#6c757d;border:none}"],encapsulation:2}),e})(),Ky=(()=>{class e{constructor(e){this.activeModal=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ab))},e.\u0275cmp=$e({type:e,selectors:[["app-report-error-dialog"]],inputs:{report:"report",errorMessage:"errorMessage"},decls:11,vars:2,consts:[[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"h4",1),xa(2),Fo(),Lo(3,"button",2),Uo("click",function(){return t.activeModal.close("Cancel")}),Lo(4,"span",3),xa(5,"\xd7"),Fo(),Fo(),Fo(),Lo(6,"div",4),xa(7),Fo(),Lo(8,"div",5),Lo(9,"button",6),Uo("click",function(){return t.activeModal.close("OK")}),xa(10,"OK"),Fo(),Fo()),2&e&&(Jr(2),Sa(t.report),Jr(5),Ca(" ",t.errorMessage," "))},styles:[".btn-sm{padding:.1rem .3rem!important;line-height:1!important}.i{line-height:inherit}.primary-icon{color:#007bff;align-items:center;vertical-align:bottom;line-height:20px}.header-text{color:rgba(0,0,0,.54);font-size:12px}.btn-solid-icon{background-color:#fff;color:#6c757d;border:none}"],encapsulation:2}),e})();function Qy(e){return t=>t.lift(new Jy(e))}class Jy{constructor(e){this.callback=e}call(e,t){return t.subscribe(new e_(e,this.callback))}}class e_ extends f{constructor(e,t){super(e),this.add(new u(t))}}class t_{constructor(e,t){this.notifier=e,this.source=t}call(e,t){return t.subscribe(new n_(e,this.notifier,this.source))}}class n_ extends z{constructor(e,t,n){super(e),this.notifier=t,this.source=n}error(e){if(!this.isStopped){let n=this.errors,i=this.retries,r=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new S;try{const{notifier:e}=this;i=e(n)}catch(t){return super.error(t)}r=V(i,new N(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=r,n.next(e)}}_unsubscribe(){const{errors:e,retriesSubscription:t}=this;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:e}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)}}function i_(e=500,t=3,n=1e3){let i=t;return r=>{return r.pipe((s=r=>r.pipe(j(r=>{if(i-- >0){const s=e+(t-i)*n;return xf(r).pipe(Lv(s))}return Ov(r.message)})),e=>e.lift(new t_(s,e))));var s}}let r_=(()=>{class e{constructor(){this.selection=new Jg({species:"Human",datasets:[],assemblies:[],repSeqs:["Human_IGH"],repDatasetDescriptions:[{dataset:"Human_IGH",description:""}]}),this.source=this.selection.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),s_=(()=>{class e{constructor(e,t){this.reportsService=e,this.geneTableService=t,this.reportListSubject=new Jg([]),this.globalReportFilterParamsSubject=new Jg(null),this.loadingSubject=new Jg(!1),this.errorSubject=new Jg(null),this.globalReportFilterParams$=this.globalReportFilterParamsSubject.asObservable(),this.loading$=this.loadingSubject.asObservable(),this.error$=this.errorSubject.asObservable(),this.geneTableServiceSubscription=null,this.geneTableSelection=null,this.load()}load(){this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{this.geneTableSelection=e,this.reload()})}reload(){this.loadingSubject.next(!0),this.errorSubject.next(null),this.reportsService.getReportsApi(this.geneTableSelection.species,this.geneTableSelection.datasets.join(","),this.geneTableSelection.repSeqs.join(",")).pipe(i_(),Ly(e=>(this.errorSubject.next(e),[])),Qy(()=>{this.loadingSubject.next(!1)})).subscribe(e=>{const t=[],n=e.reports;for(const i of Object.keys(n))t.push({name:i,title:n[i].title,description:n[i].description,thumbnail:n[i].thumbnail,params:n[i].params,filter_params:n[i].filter_params,scope:n[i].scope,format:n[i].format});this.reportListSubject.next(t),this.globalReportFilterParamsSubject.next(e.filters)})}connect(){return this.reportListSubject.asObservable()}disconnect(){this.reportListSubject.complete(),this.loadingSubject.complete(),this.errorSubject.complete()}}return e.\u0275fac=function(t){return new(t||e)(ui(qy),ui(r_))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),o_=(()=>{class e{constructor(e,t,n,i){this.modalService=e,this.reportsService=t,this.reportsListDataSource=n,this.httpClient=i,this.globalReportFilterParamsSubscription=null,this.globalReportFilters=null,this.reportWindow=null,this.reportRequest=null,this.lastReportInfo="",this.globalReportFilterParamsSubscription=this.reportsListDataSource.globalReportFilterParams$.subscribe(e=>{this.globalReportFilters=e}),this.reportRequest=new zy(this.reportsService),this.reportResult$Subscription=this.reportRequest.reportResult$.subscribe(e=>{this.reportWindow&&("PENDING"===e.status?e.info===this.lastReportInfo?this.reportWindow.document.getElementById("status_line").innerHTML=this.reportWindow.document.getElementById("status_line").innerHTML+".":(this.reportWindow.document.getElementById("status_line").innerHTML=e.info,this.lastReportInfo=e.info):"FAILURE"===e.status?(this.reportWindow.close(),this.reportWindow=null,this.displayError(e.info)):"SUCCESS"===e.status&&(this.reportWindow.location=e.response.results.url))})}runReport(e,t,n,i,r,s,o,a){if(!a){if(e.params.length>0||e.filter_params){const a=this.modalService.open(wy,{size:"m"});a.componentInstance.report=e;let l=null;return e.filter_params&&(l=e.scope.length>1?this.globalReportFilters.combined:e.scope.indexOf("rep_sample")>=0?this.globalReportFilters.rep:this.globalReportFilters.gen),a.componentInstance.filterParams=l,void a.result.then(a=>{a&&this.sendReportRequest(e,t,n,a,i,r,s,o)},()=>{})}a={}}this.sendReportRequest(e,t,n,a,i,r,s,o)}sendReportRequest(e,t,n,i,r,s,o,a){i=JSON.stringify(i),"html"!==t?this.sendDownloadReportRequest(e,t,n,r.join(","),JSON.stringify(s),o.join(","),JSON.stringify(a),i):this.sendHtmlReportRequest(e,t,n,r.join(","),JSON.stringify(s),o.join(","),JSON.stringify(a),i)}sendDownloadReportRequest(e,t,n,i,r,s,o,a){const l=this.modalService.open(Xy,{size:"m"});l.componentInstance.report=e,l.componentInstance.format=t,l.componentInstance.species=n,l.componentInstance.genSeqs=i,l.componentInstance.genFilters=r,l.componentInstance.repSeqs=s,l.componentInstance.repFilters=o,l.componentInstance.params=a,l.result.then(e=>{if("SUCCESS"===e.status){const t="my JWT",n=(new Tf).set("authorization","Bearer "+t);this.httpClient.get(e.results.url,{headers:n,responseType:"blob"}).subscribe(t=>{const n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.setAttribute("download",e.results.filename),document.body.appendChild(n),n.click()})}})}sendHtmlReportRequest(e,t,n,i,r,s,o,a){this.reportWindow=window.open("","_blank"),this.reportWindow.document.write('<h3>Preparing your report...</h3><p id="status_line"></p>'),this.reportRequest.requestReport(e.name,t,n,i,r,s,o,a)}displayError(e){const t=this.modalService.open(Ky,{size:"m"});t.componentInstance.report="Error running report",t.componentInstance.errorMessage=e,t.result.then()}}return e.\u0275fac=function(t){return new(t||e)(ui(Ob),ui(qy),ui(s_),ui(qf))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class a_{constructor(e,t,n,i,r,s){this.appProtected=e,this.userName=t,this._accessToken=n,this._accessTokenExpirationDate=i,this._refreshToken=r,this._refreshTokenExpirationDate=s}get accessToken(){return!this._accessTokenExpirationDate||new Date>this._accessTokenExpirationDate?(console.log("access token expired in User"),null):this._accessToken}get refreshToken(){return!this._refreshTokenExpirationDate||new Date>this._refreshTokenExpirationDate?null:this._refreshToken}set accessTokenExpirationDate(e){this._accessTokenExpirationDate=e}set accessToken(e){this._accessToken=e}}class l_{constructor(e,t,n,i){this.app_protected=e,this.wp_news_url=t,this.wp_help_url=n,this.wp_rest=i}}function c_(e){return function(t){return 0===e?Fg():t.lift(new h_(e))}}class h_{constructor(e){if(this.total=e,this.total<0)throw new mv}call(e,t){return t.subscribe(new u_(e,this.total))}}class u_ extends f{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=t++%n;e.next(i[r])}}e.complete()}}class d_{constructor(e,t){this.id=e,this.url=t}}class p_ extends d_{constructor(e,t,n="imperative",i=null){super(e,t),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class f_ extends d_{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class m_ extends d_{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class g_ extends d_{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class v_ extends d_{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b_ extends d_{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y_ extends d_{constructor(e,t,n,i,r){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class __ extends d_{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w_ extends d_{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x_{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class S_{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class C_{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k_{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E_{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A_{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R_{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class T_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function I_(e){return new T_(e)}function D_(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function O_(e,t,n){const i=n.path.split("/");if(i.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;const r={};for(let s=0;s<i.length;s++){const t=i[s],n=e[s];if(t.startsWith(":"))r[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function P_(e,t){const n=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!M_(e[r],t[r]))return!1;return!0}function M_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),i=[...t].sort();return n.every((e,t)=>i[t]===e)}return e===t}function L_(e){return Array.prototype.concat.apply([],e)}function F_(e){return e.length>0?e[e.length-1]:null}function N_(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function z_(e){return $o(e)?e:Ho(e)?F(Promise.resolve(e)):xf(e)}function V_(e,t,n){return n?function(e,t){return P_(e,t)}(e.queryParams,t.queryParams)&&j_(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>M_(e[n],t[n]))}(e.queryParams,t.queryParams)&&B_(e.root,t.root)}function j_(e,t){if(!W_(e.segments,t.segments))return!1;if(e.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children){if(!e.children[n])return!1;if(!j_(e.children[n],t.children[n]))return!1}return!0}function B_(e,t){return H_(e,t,t.segments)}function H_(e,t,n){if(e.segments.length>n.length)return!!W_(e.segments.slice(0,n.length),n)&&!t.hasChildren();if(e.segments.length===n.length){if(!W_(e.segments,n))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!B_(e.children[n],t.children[n]))return!1}return!0}{const i=n.slice(0,e.segments.length),r=n.slice(e.segments.length);return!!W_(e.segments,i)&&!!e.children.primary&&H_(e.children.primary,t,r)}}class q_{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=I_(this.queryParams)),this._queryParamMap}toString(){return Z_.serialize(this)}}class $_{constructor(e,t){this.segments=e,this.children=t,this.parent=null,N_(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return X_(this)}}class U_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=I_(this.parameters)),this._parameterMap}toString(){return iw(this)}}function W_(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class G_{}class Y_{parse(e){const t=new lw(e);return new q_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${K_(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${J_(t)}=${J_(e)}`).join("&"):`${J_(t)}=${J_(n)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Z_=new Y_;function X_(e){return e.segments.map(e=>iw(e)).join("/")}function K_(e,t){if(!e.hasChildren())return X_(e);if(t){const t=e.children.primary?K_(e.children.primary,!1):"",n=[];return N_(e.children,(e,t)=>{"primary"!==t&&n.push(`${t}:${K_(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return N_(e.children,(e,i)=>{"primary"===i&&(n=n.concat(t(e,i)))}),N_(e.children,(e,i)=>{"primary"!==i&&(n=n.concat(t(e,i)))}),n}(e,(t,n)=>"primary"===n?[K_(e.children.primary,!1)]:[`${n}:${K_(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${X_(e)}/${t[0]}`:`${X_(e)}/(${t.join("//")})`}}function Q_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function J_(e){return Q_(e).replace(/%3B/gi,";")}function ew(e){return Q_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tw(e){return decodeURIComponent(e)}function nw(e){return tw(e.replace(/\+/g,"%20"))}function iw(e){return`${ew(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${ew(e)}=${ew(t[e])}`).join("")}`;var t}const rw=/^[^\/()?;=#]+/;function sw(e){const t=e.match(rw);return t?t[0]:""}const ow=/^[^=?&#]+/,aw=/^[^?&#]+/;class lw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $_([],{}):new $_([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new $_(e,t)),n}parseSegment(){const e=sw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new U_(tw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sw(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=sw(this.remaining);e&&(n=e,this.capture(n))}e[tw(t)]=tw(n)}parseQueryParam(e){const t=function(e){const t=e.match(ow);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(aw);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const i=nw(t),r=nw(n);if(e.hasOwnProperty(i)){let t=e[i];Array.isArray(t)||(t=[t],e[i]=t),t.push(r)}else e[i]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=sw(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r="primary");const s=this.parseChildren();t[r]=1===Object.keys(s).length?s.primary:new $_([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class cw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hw(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=hw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=uw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return uw(e,this._root).map(e=>e.value)}}function hw(e,t){if(e===t.value)return t;for(const n of t.children){const t=hw(e,n);if(t)return t}return null}function uw(e,t){if(e===t.value)return[t];for(const n of t.children){const i=uw(e,n);if(i.length)return i.unshift(t),i}return[]}class dw{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pw(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class fw extends cw{constructor(e,t){super(e),this.snapshot=t,_w(this,e)}toString(){return this.snapshot.toString()}}function mw(e,t){const n=function(e,t){const n=new bw([],{},{},"",{},"primary",t,null,e.root,-1,{});return new yw("",new dw(n,[]))}(e,t),i=new Jg([new U_("",{})]),r=new Jg({}),s=new Jg({}),o=new Jg({}),a=new Jg(""),l=new gw(i,r,o,a,s,"primary",t,n.root);return l.snapshot=n.root,new fw(new dw(l,[]),n)}class gw{constructor(e,t,n,i,r,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(E(e=>I_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(E(e=>I_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vw(e,t="emptyOnly"){const n=e.pathFromRoot;let i=0;if("always"!==t)for(i=n.length-1;i>=1;){const e=n[i],t=n[i-1];if(e.routeConfig&&""===e.routeConfig.path)i--;else{if(t.component)break;i--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class bw{constructor(e,t,n,i,r,s,o,a,l,c,h){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=I_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=I_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yw extends cw{constructor(e,t){super(t),this.url=e,_w(this,t)}toString(){return ww(this._root)}}function _w(e,t){t.value._routerState=e,t.children.forEach(t=>_w(e,t))}function ww(e){const t=e.children.length>0?` { ${e.children.map(ww).join(", ")} } `:"";return`${e.value}${t}`}function xw(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,P_(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),P_(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!P_(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),P_(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Sw(e,t){var n,i;return P_(e.params,t.params)&&W_(n=e.url,i=t.url)&&n.every((e,t)=>P_(e.parameters,i[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||Sw(e.parent,t.parent))}function Cw(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=t.value;const r=function(e,t,n){return t.children.map(t=>{for(const i of n.children)if(e.shouldReuseRoute(t.value,i.value.snapshot))return Cw(e,t,i);return Cw(e,t)})}(e,t,n);return new dw(i,r)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return kw(t,e),e}}const n=new gw(new Jg((i=t.value).url),new Jg(i.params),new Jg(i.queryParams),new Jg(i.fragment),new Jg(i.data),i.outlet,i.component,i),r=t.children.map(t=>Cw(e,t));return new dw(n,r)}var i}function kw(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)kw(e.children[n],t.children[n])}function Ew(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Aw(e){return"object"==typeof e&&null!=e&&e.outlets}function Rw(e,t,n,i,r){let s={};return i&&N_(i,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new q_(n.root===e?t:Tw(n.root,e,t),s,r)}function Tw(e,t,n){const i={};return N_(e.children,(e,r)=>{i[r]=e===t?n:Tw(e,t,n)}),new $_(e.segments,i)}class Iw{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Ew(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(Aw);if(i&&i!==F_(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dw{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Ow(e,t,n){if(e||(e=new $_([],{})),0===e.segments.length&&e.hasChildren())return Pw(e,t,n);const i=function(e,t,n){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return s;const t=e.segments[r],o=n[i];if(Aw(o))break;const a=`${o}`,l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Nw(a,l,t))return s;i+=2}else{if(!Nw(a,{},t))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const t=new $_(e.segments.slice(0,i.pathIndex),{});return t.children.primary=new $_(e.segments.slice(i.pathIndex),e.children),Pw(t,0,r)}return i.match&&0===r.length?new $_(e.segments,{}):i.match&&!e.hasChildren()?Mw(e,t,n):i.match?Pw(e,0,r):Mw(e,t,n)}function Pw(e,t,n){if(0===n.length)return new $_(e.segments,{});{const i=function(e){return Aw(e[0])?e[0].outlets:{primary:e}}(n),r={};return N_(i,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[i]=Ow(e.children[i],t,n))}),N_(e.children,(e,t)=>{void 0===i[t]&&(r[t]=e)}),new $_(e.segments,r)}}function Mw(e,t,n){const i=e.segments.slice(0,t);let r=0;for(;r<n.length;){const s=n[r];if(Aw(s)){const e=Lw(s.outlets);return new $_(i,e)}if(0===r&&Ew(n[0])){i.push(new U_(e.segments[t].path,Fw(n[0]))),r++;continue}const o=Aw(s)?s.outlets.primary:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Ew(a)?(i.push(new U_(o,Fw(a))),r+=2):(i.push(new U_(o,{})),r++)}return new $_(i,{})}function Lw(e){const t={};return N_(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Mw(new $_([],{}),0,e))}),t}function Fw(e){const t={};return N_(e,(e,n)=>t[n]=`${e}`),t}function Nw(e,t,n){return e==n.path&&P_(t,n.parameters)}class zw{constructor(e,t,n,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),xw(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const i=pw(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,i[t],n),delete i[t]}),N_(i,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(e,t,r.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:i})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,r=pw(e);for(const s of Object.keys(r))this.deactivateRouteAndItsChildren(r[s],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const i=pw(t);e.children.forEach(e=>{this.activateRoutes(e,i[e.value.outlet],n),this.forwardEvent(new A_(e.value.snapshot))}),e.children.length&&this.forwardEvent(new k_(e.value.snapshot))}activateRoutes(e,t,n){const i=e.value,r=t?t.value:null;if(xw(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,r.children)}else this.activateChildRoutes(e,t,n);else if(i.component){const t=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const e=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Vw(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=i,t.resolver=r,t.outlet&&t.outlet.activateWith(i,r),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Vw(e){xw(e.value),e.children.forEach(Vw)}class jw{constructor(e,t){this.routes=e,this.module=t}}function Bw(e){return"function"==typeof e}function Hw(e){return e instanceof q_}const qw=Symbol("INITIAL_VALUE");function $w(){return Sv(e=>tv(e.map(e=>e.pipe(gv(1),yv(qw)))).pipe(Sy((e,t)=>{let n=!1;return t.reduce((e,i,r)=>{if(e!==qw)return e;if(i===qw&&(n=!0),!n){if(!1===i)return i;if(r===t.length-1||Hw(i))return i}return e},e)},qw),Cf(e=>e!==qw),E(e=>Hw(e)?e:!0===e),gv(1)))}let Uw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&No(0,"router-outlet")},directives:function(){return[Hx]},encapsulation:2}),e})();function Ww(e,t=""){for(let n=0;n<e.length;n++){const i=e[n];Gw(i,Yw(t,i))}}function Gw(e,t){e.children&&Ww(e.children,t)}function Yw(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Zw(e){const t=e.children&&e.children.map(Zw),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Uw),n}function Xw(e){return e.outlet||"primary"}function Kw(e,t){const n=e.filter(e=>Xw(e)===t);return n.push(...e.filter(e=>Xw(e)!==t)),n}const Qw={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Jw(e,t,n){var i;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Qw):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(t.matcher||O_)(n,e,t);if(!r)return Object.assign({},Qw);const s={};N_(r.posParams,(e,t)=>{s[t]=e.path});const o=r.consumed.length>0?Object.assign(Object.assign({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function ex(e,t,n,i,r="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>tx(e,t,n)&&"primary"!==Xw(n))}(e,n,i)){const r=new $_(t,function(e,t,n,i){const r={};r.primary=i,i._sourceSegment=e,i._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&"primary"!==Xw(s)){const n=new $_([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,r[Xw(s)]=n}return r}(e,t,i,new $_(n,e.children)));return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>tx(e,t,n))}(e,n,i)){const s=new $_(e.segments,function(e,t,n,i,r,s){const o={};for(const a of i)if(tx(e,n,a)&&!r[Xw(a)]){const n=new $_([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[Xw(a)]=n}return Object.assign(Object.assign({},r),o)}(e,t,n,i,e.children,r));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new $_(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function tx(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function nx(e,t,n,i){return!!(Xw(e)===i||"primary"!==i&&tx(t,n,e))&&("**"===e.path||Jw(t,e,n).matched)}function ix(e,t,n){return 0===t.length&&!e.children[n]}class rx{constructor(e){this.segmentGroup=e||null}}class sx{constructor(e){this.urlTree=e}}function ox(e){return new b(t=>t.error(new rx(e)))}function ax(e){return new b(t=>t.error(new sx(e)))}function lx(e){return new b(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class cx{constructor(e,t,n,i,r){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=e.get(Ol)}apply(){const e=ex(this.urlTree.root,[],[],this.config).segmentGroup,t=new $_(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,"primary").pipe(E(e=>this.createUrlTree(hx(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ly(e=>{if(e instanceof sx)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof rx)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(E(t=>this.createUrlTree(hx(t),e.queryParams,e.fragment))).pipe(Ly(e=>{if(e instanceof rx)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const i=e.segments.length>0?new $_([],{primary:e}):e;return new q_(i,t,n)}expandSegmentGroup(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(E(e=>new $_([],e))):this.expandSegment(e,n,t,n.segments,i,!0)}expandChildren(e,t,n){const i=[];for(const r of Object.keys(n.children))"primary"===r?i.unshift(r):i.push(r);return F(i).pipe(Sf(i=>{const r=n.children[i],s=Kw(t,i);return this.expandSegmentGroup(e,s,r,i).pipe(E(e=>({segment:e,outlet:i})))}),Sy((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return i=>i.pipe(e?Cf((t,n)=>e(t,n,i)):v,c_(1),n?Ay(t):Iy(()=>new Ey))}())}expandSegment(e,t,n,i,r,s){return F(n).pipe(Sf(o=>this.expandSegmentAgainstRoute(e,t,n,o,i,r,s).pipe(Ly(e=>{if(e instanceof rx)return xf(null);throw e}))),My(e=>!!e),Ly((e,n)=>{if(e instanceof Ey||"EmptyError"===e.name){if(ix(t,i,r))return xf(new $_([],{}));throw new rx(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,i,r,s,o){return nx(i,t,r,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s):ox(t):ox(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ax(r):this.lineralizeSegments(n,r).pipe(j(n=>{const r=new $_(n,{});return this.expandSegment(e,r,t,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=Jw(t,i,r);if(!o)return ox(t);const h=this.applyRedirectCommands(a,i.redirectTo,c);return i.redirectTo.startsWith("/")?ax(h):this.lineralizeSegments(i,h).pipe(j(i=>this.expandSegment(e,t,n,i.concat(r.slice(l)),s,!1)))}matchSegmentAgainstRoute(e,t,n,i,r){if("**"===n.path)return n.loadChildren?(n._loadedConfig?xf(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe(E(e=>(n._loadedConfig=e,new $_(i,{})))):xf(new $_(i,{}));const{matched:s,consumedSegments:o,lastChild:a}=Jw(t,n,i);if(!s)return ox(t);const l=i.slice(a);return this.getChildConfig(e,n,i).pipe(j(e=>{const i=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=ex(t,o,l,s),h=new $_(a.segments,a.children);if(0===c.length&&h.hasChildren())return this.expandChildren(i,s,h).pipe(E(e=>new $_(o,e)));if(0===s.length&&0===c.length)return xf(new $_(o,{}));const u=Xw(n)===r;return this.expandSegment(i,h,s,c,u?"primary":r,!0).pipe(E(e=>new $_(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?xf(new jw(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?xf(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(j(n=>n?this.configLoader.load(e.injector,t).pipe(E(e=>(t._loadedConfig=e,e))):function(e){return new b(t=>t.error(D_(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):xf(new jw([],e))}runCanLoadGuards(e,t,n){const i=t.canLoad;return i&&0!==i.length?xf(i.map(i=>{const r=e.get(i);let s;if(function(e){return e&&Bw(e.canLoad)}(r))s=r.canLoad(t,n);else{if(!Bw(r))throw new Error("Invalid CanLoad guard");s=r(t,n)}return z_(s)})).pipe($w(),Ev(e=>{if(!Hw(e))return;const t=D_(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),E(e=>!0===e)):xf(!0)}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return xf(n);if(i.numberOfChildren>1||!i.children.primary)return lx(e.redirectTo);i=i.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,i){const r=this.createSegmentGroup(e,t.root,n,i);return new q_(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return N_(e,(e,i)=>{if("string"==typeof e&&e.startsWith(":")){const r=e.substring(1);n[i]=t[r]}else n[i]=e}),n}createSegmentGroup(e,t,n,i){const r=this.createSegments(e,t.segments,n,i);let s={};return N_(t.children,(t,r)=>{s[r]=this.createSegmentGroup(e,t,n,i)}),new $_(r,s)}createSegments(e,t,n,i){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,i):this.findOrReturn(t,n))}findPosParam(e,t,n){const i=n[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let n=0;for(const i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}}function hx(e){const t={};for(const n of Object.keys(e.children)){const i=hx(e.children[n]);(i.segments.length>0||i.hasChildren())&&(t[n]=i)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new $_(e.segments.concat(t.segments),t.children)}return e}(new $_(e.segments,t))}class ux{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dx{constructor(e,t){this.component=e,this.route=t}}function px(e,t,n){const i=e._root;return mx(i,t?t._root:null,n,[i.value])}function fx(e,t,n){const i=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function mx(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=pw(t);return e.children.forEach(e=>{!function(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!W_(e.url,t.url);case"pathParamsOrQueryParamsChange":return!W_(e.url,t.url)||!P_(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sw(e,t)||!P_(e.queryParams,t.queryParams);case"paramsChange":default:return!Sw(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ux(i)):(s.data=o.data,s._resolvedData=o._resolvedData),mx(e,t,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new dx(a.outlet.component,o))}else o&&gx(t,a,r),r.canActivateChecks.push(new ux(i)),mx(e,null,s.component?a?a.children:null:n,i,r)}(e,s[e.value.outlet],n,i.concat([e.value]),r),delete s[e.value.outlet]}),N_(s,(e,t)=>gx(e,n.getContext(t),r)),r}function gx(e,t,n){const i=pw(e),r=e.value;N_(i,(e,i)=>{gx(e,r.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new dx(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class vx{}function bx(e){return new b(t=>t.error(e))}class yx{constructor(e,t,n,i,r,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){const e=ex(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary");if(null===t)return null;const n=new bw([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new dw(n,t),r=new yw(this.url,i);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(e){const t=e.value,n=vw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const r of Object.keys(t.children)){const i=t.children[r],s=Kw(e,r),o=this.processSegmentGroup(s,i,r);if(null===o)return null;n.push(...o)}const i=wx(n);return i.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,n,i){for(const r of e){const e=this.processSegmentAgainstRoute(r,t,n,i);if(null!==e)return e}return ix(t,n,i)?[]:null}processSegmentAgainstRoute(e,t,n,i){if(e.redirectTo||!nx(e,t,n,i))return null;let r,s=[],o=[];if("**"===e.path){const i=n.length>0?F_(n).parameters:{};r=new bw(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Cx(e),Xw(e),e.component,e,xx(t),Sx(t)+n.length,kx(e))}else{const i=Jw(t,e,n);if(!i.matched)return null;s=i.consumedSegments,o=n.slice(i.lastChild),r=new bw(s,i.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Cx(e),Xw(e),e.component,e,xx(t),Sx(t)+s.length,kx(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:c}=ex(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const e=this.processChildren(a,l);return null===e?null:[new dw(r,e)]}if(0===a.length&&0===c.length)return[new dw(r,[])];const h=Xw(e)===i,u=this.processSegment(a,l,c,h?"primary":i);return null===u?null:[new dw(r,u)]}}function _x(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function wx(e){const t=[],n=new Set;for(const i of e){if(!_x(i)){t.push(i);continue}const e=t.find(e=>i.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...i.children),n.add(e)):t.push(i)}for(const i of n){const e=wx(i.children);t.push(new dw(i.value,e))}return t.filter(e=>!n.has(e))}function xx(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Sx(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Cx(e){return e.data||{}}function kx(e){return e.resolve||{}}function Ex(e){return Sv(t=>{const n=e(t);return n?F(n).pipe(E(()=>t)):xf(t)})}class Ax{}class Rx extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Tx=new Yn("ROUTES");class Ix{constructor(e,t,n,i){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe(E(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new jw(L_(i.injector.get(Tx,void 0,we.Self|we.Optional)).map(Zw),i)}),Ly(e=>{throw t._loader$=void 0,e}));return t._loader$=new Z(n,()=>new S).pipe(W()),t._loader$}loadModuleFactory(e){return"string"==typeof e?F(this.loader.load(e)):z_(e()).pipe(j(e=>e instanceof Pl?xf(e):F(this.compiler.compileModuleAsync(e))))}}class Dx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ox,this.attachRef=null}}class Ox{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Dx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Px{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Mx(e){throw e}function Lx(e,t,n){return t.parse("/")}function Fx(e,t){return xf(null)}let Nx=(()=>{class e{constructor(e,t,n,i,r,s,o,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=Mx,this.malformedUriErrorHandler=Lx,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fx,afterPreactivation:Fx},this.urlHandlingStrategy=new Px,this.routeReuseStrategy=new Rx,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=r.get(Ol),this.console=r.get(Fc);const l=r.get(Zc);this.isNgZoneEnabled=l instanceof Zc&&Zc.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new q_(new $_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ix(s,o,e=>this.triggerEvent(new x_(e)),e=>this.triggerEvent(new S_(e))),this.routerState=mw(this.currentUrlTree,this.rootComponentType),this.transitions=new Jg({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Cf(e=>0!==e.id),E(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Sv(e=>{let n=!1,i=!1;return xf(e).pipe(Ev(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Sv(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return xf(e).pipe(Sv(e=>{const n=this.transitions.getValue();return t.next(new p_(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Lg:Promise.resolve(e)}),(i=this.ngModule.injector,r=this.configLoader,s=this.urlSerializer,o=this.config,Sv(e=>function(e,t,n,i,r){return new cx(e,t,n,i,r).apply()}(i,r,s,e.extractedUrl,o).pipe(E(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),Ev(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,i,r){return j(s=>function(e,t,n,i,r="emptyOnly",s="legacy"){try{const o=new yx(e,t,n,i,r,s).recognize();return null===o?bx(new vx):xf(o)}catch(o){return bx(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),i,r).pipe(E(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ev(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects);const n=new v_(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var i,r,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=e,a=new p_(n,this.serializeUrl(i),r,s);t.next(a);const l=mw(i,this.rootComponentType).snapshot;return xf(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Lg}),Ex(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),Ev(e=>{const t=new b_(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),E(e=>Object.assign(Object.assign({},e),{guards:px(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return j(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?xf(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,i){return F(e).pipe(j(e=>function(e,t,n,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?xf(s.map(s=>{const o=fx(s,t,r);let a;if(function(e){return e&&Bw(e.canDeactivate)}(o))a=z_(o.canDeactivate(e,t,n,i));else{if(!Bw(o))throw new Error("Invalid CanDeactivate guard");a=z_(o(e,t,n,i))}return a.pipe(My())})).pipe($w()):xf(!0)}(e.component,e.route,n,t,i)),My(e=>!0!==e,!0))}(o,i,r,e).pipe(j(n=>n&&"boolean"==typeof n?function(e,t,n,i){return F(t).pipe(Sf(t=>uv(function(e,t){return null!==e&&t&&t(new C_(e)),xf(!0)}(t.route.parent,i),function(e,t){return null!==e&&t&&t(new E_(e)),xf(!0)}(t.route,i),function(e,t,n){const i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>xy(()=>xf(t.guards.map(r=>{const s=fx(r,t.node,n);let o;if(function(e){return e&&Bw(e.canActivateChild)}(s))o=z_(s.canActivateChild(i,e));else{if(!Bw(s))throw new Error("Invalid CanActivateChild guard");o=z_(s(i,e))}return o.pipe(My())})).pipe($w())));return xf(r).pipe($w())}(e,t.path,n),function(e,t,n){const i=t.routeConfig?t.routeConfig.canActivate:null;return i&&0!==i.length?xf(i.map(i=>xy(()=>{const r=fx(i,t,n);let s;if(function(e){return e&&Bw(e.canActivate)}(r))s=z_(r.canActivate(t,e));else{if(!Bw(r))throw new Error("Invalid CanActivate guard");s=z_(r(t,e))}return s.pipe(My())}))).pipe($w()):xf(!0)}(e,t.route,n))),My(e=>!0!==e,!0))}(i,s,e,t):xf(n)),E(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),Ev(e=>{if(Hw(e.guardsResult)){const t=D_(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new y_(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Cf(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new m_(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Ex(e=>{if(e.guards.canActivateChecks.length)return xf(e).pipe(Ev(e=>{const t=new __(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Sv(e=>{let n=!1;return xf(e).pipe((i=this.paramsInheritanceStrategy,r=this.ngModule.injector,j(e=>{const{targetSnapshot:t,guards:{canActivateChecks:n}}=e;if(!n.length)return xf(e);let s=0;return F(n).pipe(Sf(e=>function(e,t,n,i){return function(e,t,n,i){const r=Object.keys(e);if(0===r.length)return xf({});const s={};return F(r).pipe(j(r=>function(e,t,n,i){const r=fx(e,t,i);return z_(r.resolve?r.resolve(t,n):r(t,n))}(e[r],t,n,i).pipe(Ev(e=>{s[r]=e}))),c_(1),j(()=>Object.keys(s).length===r.length?xf(s):Lg))}(e._resolve,e,t,i).pipe(E(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),vw(e,n).resolve),null)))}(e.route,t,i,r)),Ev(()=>s++),c_(1),j(t=>s===n.length?xf(e):Lg))})),Ev({next:()=>n=!0,complete:()=>{if(!n){const n=new m_(e.id,this.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");t.next(n),e.resolve(!1)}}}));var i,r}),Ev(e=>{const t=new w_(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Ex(e=>{const{targetSnapshot:t,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),E(e=>{const t=function(e,t,n){const i=Cw(e,t._root,n?n._root:void 0);return new fw(i,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),Ev(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(r=this.rootContexts,s=this.routeReuseStrategy,o=e=>this.triggerEvent(e),E(e=>(new zw(s,e.targetRouterState,e.currentRouterState,o).activate(r),e))),Ev({next(){n=!0},complete(){n=!0}}),Qy(()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new m_(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null}),Ly(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=Hw(n.url);i||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const r=new m_(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(r),i?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const i=new g_(e.id,this.serializeUrl(e.extractedUrl),n);t.next(i);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var r;return Lg}));var r,s,o}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:i}=t,r={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,0!==Object.keys(e).length&&(r.state=e)}this.scheduleNavigation(i,e,n,r)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Ww(e),this.config=e.map(Zw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:i,fragment:r,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:r;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=i||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,i,r){if(0===n.length)return Rw(t.root,t.root,t,i,r);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Iw(!0,0,e);let t=0,n=!1;const i=e.reduce((e,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const t={};return N_(i.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(i.segmentPath)return[...e,i.segmentPath]}return"string"!=typeof i?[...e,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?t++:""!=i&&e.push(i))}),e):[...e,i]},[]);return new Iw(n,t,i)}(n);if(s.toRoot())return Rw(t.root,new $_([],{}),t,i,r);const o=function(e,t,n){if(e.isAbsolute)return new Dw(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new Dw(e,e===t.root,0)}const i=Ew(e.commands[0])?0:1;return function(e,t,n){let i=e,r=t,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Dw(i,!1,r-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Pw(o.segmentGroup,o.index,s.commands):Ow(o.segmentGroup,o.index,s.commands);return Rw(o.segmentGroup,a,t,i,r)}(a,this.currentUrlTree,e,c,l)}navigateByUrl(e,t={skipLocationChange:!1}){const n=Hw(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(Hw(e))return V_(this.currentUrlTree,e,t);const n=this.parseUrl(e);return V_(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const i=e[n];return null!=i&&(t[n]=i),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new f_(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,i,r){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==t&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===e.toString();if(o&&a)return Promise.resolve(!0);let l,c,h;r?(l=r.resolve,c=r.reject,h=r.promise):h=new Promise((e,t)=>{l=e,c=t});const u=++this.navigationId;return this.setTransition({id:u,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:i,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,i){const r=this.urlSerializer.serialize(e);i=i||{},this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(t){return new(t||e)(ui(Xn),ui(G_),ui(Ox),ui(qh),ui(po),ui(bh),ui(Wc),ui(void 0))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),zx=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.route=t,this.commands=[],this.onChanges=new S,null==n&&i.setAttribute(r.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:jx(this.skipLocationChange),replaceUrl:jx(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jx(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Nx),Oo(gw),Wn("tabindex"),Oo(Ja),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&Uo("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[lt]}),e})(),Vx=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new S,this.subscription=e.events.subscribe(e=>{e instanceof f_&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,i,r){if(0!==e||t||n||i||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:jx(this.skipLocationChange),replaceUrl:jx(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jx(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Nx),Oo(gw),Oo(zh))},e.\u0275dir=Xe({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Uo("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(Aa("href",t.href,nr),Ro("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[lt]}),e})();function jx(e){return""===e||!!e}let Bx=(()=>{class e{constructor(e,t,n,i,r,s){this.router=e,this.element=t,this.renderer=n,this.cdr=i,this.link=r,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(e=>{e instanceof f_&&this.update()})}ngAfterContentInit(){xf(this.links.changes,this.linksWithHrefs.changes,xf(null)).pipe(q()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(e=>!!e).map(e=>e.onChanges);this.linkInputChangesSubscription=F(t).pipe(q()).subscribe(e=>{this.isActive!==this.isLinkActive(this.router)(e)&&this.update()})}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){return t=>e.isActive(t.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Nx),Oo(Xa),Oo(Ja),Oo(xl),Oo(zx,8),Oo(Vx,8))},e.\u0275dir=Xe({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){if(1&e&&(xc(n,zx,1),xc(n,Vx,1)),2&e){let e;_c(e=Sc())&&(t.links=e),_c(e=Sc())&&(t.linksWithHrefs=e)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[lt]}),e})(),Hx=(()=>{class e{constructor(e,t,n,i,r){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new lc,this.deactivateEvents=new lc,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new qx(e,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ox),Oo(Ll),Oo(Wa),Wn("name"),Oo(xl))},e.\u0275dir=Xe({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class qx{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===gw?this.route:e===Ox?this.childContexts:this.parent.get(e,t)}}class $x{}class Ux{preload(e,t){return xf(null)}}let Wx=(()=>{class e{constructor(e,t,n,i,r){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=new Ix(t,n,t=>e.triggerEvent(new x_(t)),t=>e.triggerEvent(new S_(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Cf(e=>e instanceof f_),Sf(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ol);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const i of t)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const e=i._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(e,i)):i.children&&n.push(this.processRoutes(e,i.children));return F(n).pipe(q(),E(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?xf(t._loadedConfig):this.loader.load(e.injector,t)).pipe(j(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(ui(Nx),ui(bh),ui(Wc),ui(po),ui($x))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Gx=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof p_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof f_&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof R_&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new R_(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(ui(Nx),ui(gu),ui(void 0))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Yx=new Yn("ROUTER_CONFIGURATION"),Zx=new Yn("ROUTER_FORROOT_GUARD"),Xx=[qh,{provide:G_,useClass:Y_},{provide:Nx,useFactory:function(e,t,n,i,r,s,o,a={},l,c){const h=new Nx(null,e,t,n,i,r,s,L_(o));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,h),a.enableTracing){const e=Ah();h.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return h},deps:[G_,Ox,qh,po,bh,Wc,Tx,Yx,[class{},new gi],[Ax,new gi]]},Ox,{provide:gw,useFactory:function(e){return e.routerState.root},deps:[Nx]},{provide:bh,useClass:wh},Wx,Ux,class{preload(e,t){return t().pipe(Ly(()=>xf(null)))}},{provide:Yx,useValue:{enableTracing:!1}}];function Kx(){return new uh("Router",Nx)}let Qx=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Xx,nS(t),{provide:Zx,useFactory:tS,deps:[[Nx,new gi,new vi]]},{provide:Yx,useValue:n||{}},{provide:zh,useFactory:eS,deps:[Th,[new mi(jh),new gi],Yx]},{provide:Gx,useFactory:Jx,deps:[Nx,gu,Yx]},{provide:$x,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ux},{provide:uh,multi:!0,useFactory:Kx},[iS,{provide:Rc,multi:!0,useFactory:rS,deps:[iS]},{provide:oS,useFactory:sS,deps:[iS]},{provide:Lc,multi:!0,useExisting:oS}]]}}static forChild(t){return{ngModule:e,providers:[nS(t)]}}}return e.\u0275fac=function(t){return new(t||e)(ui(Zx,8),ui(Nx,8))},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();function Jx(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Gx(e,t,n)}function eS(e,t,n={}){return n.useHash?new Hh(e,t):new Bh(e,t)}function tS(e){return"guarded"}function nS(e){return[{provide:Zn,multi:!0,useValue:e},{provide:Tx,multi:!0,useValue:e}]}let iS=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(Dh,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Nx),i=this.injector.get(Yx);return"disabled"===i.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?xf(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(Yx),n=this.injector.get(Wx),i=this.injector.get(Gx),r=this.injector.get(Nx),s=this.injector.get(gh);e===s.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||r.initialNavigation(),n.setUpPreloading(),i.init(),r.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return e.\u0275fac=function(t){return new(t||e)(ui(po))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function rS(e){return e.appInitializer.bind(e)}function sS(e){return e.bootstrapListener.bind(e)}const oS=new Yn("Router Initializer");let aS=(()=>{class e{constructor(e,t,n){this.http=e,this.router=t,this.systemService=n,this.user=new Jg(null),this.sysConfig=new Jg(new l_(!0,"","","")),this.userData=null}initialize(){return this.systemService.getConfigApi().pipe(Ly(e=>(console.log("error in getconfigapi call"),console.log(e),Ov(e))),Ev(e=>{console.log("auth: calling config api"),this.sysConfig.next(e),this.userData=new a_(e.app_protected,"Anonymous","",null,"",null),this.user.next(this.userData),this.userData.appProtected&&(console.log("app is protected"),this.autoLogin())}))}login(e,t,n){return this.systemService.getLoginApi(e,t).pipe(Ly(this.handleError),Ev(e=>{this.handleAuthentication(e.username,e.access_token,e.access_token_lifetime,e.refresh_token,e.refresh_token_lifetime,n)}))}autoLogin(){console.log("in auth.autoLogin: checking for stored token");const e=JSON.parse(localStorage.getItem("authData"));if(!e)return void console.log("stored token not found");const t=new a_(!0,e.userName,e._accessToken,new Date(e._accessTokenExpirationDate),e._refreshToken,new Date(e._refreshTokenExpirationDate));if(t.refreshToken){console.log("Loaded valid refresh token from store: refreshing access"),this.user.next(t),this.userData=t;const n=new Date(e._refreshTokenExpirationDate).getTime()-(new Date).getTime();this.refresh(),this.autoLogout(n)}console.log("auth.autoLogin succeeded")}logout(){console.log("in auth.logout: refresh token expired"),this.userData=new a_(!0,"","",null,"",null),this.user.next(this.userData),this.router.navigate(["/"]),localStorage.removeItem("authData"),this.accessTokenExpirationTimer&&clearTimeout(this.accessTokenExpirationTimer),this.refreshTokenExpirationTimer&&clearTimeout(this.refreshTokenExpirationTimer),this.refreshTokenExpirationTimer=null}autoLogout(e){console.log("in auth.autologout"),this.refreshTokenExpirationTimer=setTimeout(()=>{},e)}refresh(){console.log("in auth.refresh: refreshing access token"),this.systemService.getRefreshApi().pipe(Ly(e=>(console.log("error refreshing access token"),this.logout(),Ov(e)))).subscribe(e=>{console.log("refreshed access token"),this.handleRefresh(e.access_token,e.access_token_lifetime)})}autoRefresh(e){console.log("in auth.autorefresh"),this.accessTokenExpirationTimer&&clearTimeout(this.accessTokenExpirationTimer),console.log("setting access token timer"),this.accessTokenExpirationTimer=setTimeout(()=>{this.refresh()},e)}handleAuthentication(e,t,n,i,r,s){console.log("in auth.handleauthentication");const o=new Date((new Date).getTime()+1e3*n),a=new Date((new Date).getTime()+1e3*r),l=new a_(!0,e,t,o,i,a);this.user.next(l),this.userData=l,this.autoLogout(1e3*r),this.autoRefresh(1e3*n),s&&localStorage.setItem("authData",JSON.stringify(l))}handleRefresh(e,t){console.log("in handlerefresh"),this.userData.accessToken=e,this.userData.accessTokenExpirationDate=new Date((new Date).getTime()+1e3*t),this.autoRefresh(1e3*t),this.user.next(this.userData)}handleError(e){return Ov("Bad user name or password")}}return e.\u0275fac=function(t){return new(t||e)(ui(qf),ui(Nx),ui(Uy))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const lS=function(){return["./samplerep","null"]};function cS(e,t){if(1&e){const e=Bo();Lo(0,"li",10),Lo(1,"a",11),xa(2," AIRR-Seq Data "),Fo(),Lo(3,"div",12),Lo(4,"a",13),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(5,"Explore AIRR-Seq Data"),Fo(),Lo(6,"a",14),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(7,"Samples"),Fo(),Lo(8,"a",15),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(9,"Germline Genes"),Fo(),Fo(),Fo()}2&e&&(Jr(6),Po("routerLink",Xl(1,lS)))}const hS=function(){return["./genesample","null"]},uS=function(){return["./genebrowser","Human","Human_IGH"]};function dS(e,t){if(1&e){const e=Bo();Lo(0,"li",10),Lo(1,"a",16),xa(2," Genomic Data "),Fo(),Lo(3,"div",12),Lo(4,"a",14),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(5,"Subjects"),Fo(),Lo(6,"a",17),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(7,"Genes"),Fo(),Lo(8,"a",14),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(9,"Gene Browser"),Fo(),Fo(),Fo()}2&e&&(Jr(4),Po("routerLink",Xl(2,hS)),Jr(4),Po("routerLink",Xl(3,uS)))}function pS(e,t){if(1&e){const e=Bo();Lo(0,"li",18),Lo(1,"a",19),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(2,"Reports"),Fo(),Fo()}}function fS(e,t){if(1&e){const e=Bo();Lo(0,"li",10),Lo(1,"a",20),xa(2," Help / About "),Fo(),Lo(3,"div",12),Lo(4,"a",21),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(5,"User Guide"),Fo(),Lo(6,"a",22),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(7,"Quick Reference"),Fo(),Lo(8,"a",23),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(9,"Guide to Reports (pdf)"),Fo(),Lo(10,"a",24),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(11,"Glossary (pdf)"),Fo(),Lo(12,"a",25),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(13,"Licensing"),Fo(),Fo(),Fo()}}function mS(e,t){if(1&e){const e=Bo();Lo(0,"li",18),Lo(1,"a",26),Uo("click",function(){return Pt(e),Xo().isMenuCollapsed=!0}),xa(2,"Login"),Fo(),Fo()}}function gS(e,t){if(1&e){const e=Bo();Lo(0,"li",18),Lo(1,"a",26),Uo("click",function(){return Pt(e),Xo().onLogout()}),xa(2,"Logout"),Fo(),Fo()}}const vS=function(){return{exact:!0}};let bS=(()=>{class e{constructor(e,t){this.authService=e,this.router=t,this.isMenuCollapsed=!0,this.displayLogin=!1,this.displayLogout=!1,this.displayProtected=!0}ngOnInit(){this.authService.user.subscribe(e=>{e.appProtected?e.accessToken?(console.log("protected and we have an access token"),this.displayLogin=!1,this.displayLogout=!0,this.displayProtected=!0):(console.log("protected and no access token"),this.displayLogin=!0,this.displayLogout=!1,this.displayProtected=!1):(console.log("app is not protected"),this.displayLogin=!1,this.displayLogout=!1,this.displayProtected=!0)})}onLogout(){this.authService.logout(),this.router.navigate(["/auth"])}}return e.\u0275fac=function(t){return new(t||e)(Oo(aS),Oo(Nx))},e.\u0275cmp=$e({type:e,selectors:[["app-header"]],decls:14,vars:9,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-transparent"],["type","button","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngbCollapse"],["ngbNav","",1,"navbar-nav","mr-auto"],["ngbNavItem","","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions","click"],["ngbNavLink","","routerLink","/",1,"nav-link",2,"padding","0"],["src","./assets/img/logo_white_2.png","alt","VDJlogo","height","40",1,"navbar-brand",2,"padding","0"],["ngbDropdown","","class","nav-item dropdown",4,"ngIf"],["ngbNavItem","","class","nav-item","routerLinkActive","active",4,"ngIf"],["ngbDropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","","id","navbarAIRRSeq","role","button",1,"nav-link"],["ngbDropdownMenu","","aria-labelledby","navbarHelpAbout",1,"dropdown-menu"],["ngbDropdownItem","","routerLink","./datarep",1,"dropdown-item",3,"click"],["ngbDropdownItem","",1,"dropdown-item",3,"routerLink","click"],["ngbDropdownItem","","routerLink","./generep",1,"dropdown-item",3,"click"],["ngbDropdownToggle","","id","navbarGenomic","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link"],["ngbDropdownItem","","routerLink","./genetable",1,"dropdown-item",3,"click"],["ngbNavItem","","routerLinkActive","active",1,"nav-item"],["ngbNavLink","","routerLink","/reports",1,"nav-link",3,"click"],["ngbDropdownToggle","","id","navbarHelpAbout","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link"],["ngbDropdownItem","","href","./user-guide",1,"dropdown-item",3,"click"],["ngbDropdownItem","","href","./quick-ref",1,"dropdown-item",3,"click"],["ngbDropdownItem","","href","./assets/doc/report_documentation.pdf",1,"dropdown-item",3,"click"],["ngbDropdownItem","","href","./assets/doc/glossary.pdf",1,"dropdown-item",3,"click"],["ngbDropdownItem","","href","./licensing",1,"dropdown-item",3,"click"],["ngbNavLink","","routerLink","/auth",1,"nav-link",3,"click"]],template:function(e,t){1&e&&(Lo(0,"nav",0),Lo(1,"button",1),Uo("click",function(){return t.isMenuCollapsed=!t.isMenuCollapsed}),No(2,"span",2),Fo(),Lo(3,"div",3),Lo(4,"ul",4),Lo(5,"li",5),Uo("click",function(){return t.isMenuCollapsed=!0}),Lo(6,"a",6),No(7,"img",7),Fo(),Fo(),Io(8,cS,10,2,"li",8),Io(9,dS,10,4,"li",8),Io(10,pS,3,0,"li",9),Io(11,fS,14,0,"li",8),Io(12,mS,3,0,"li",9),Io(13,gS,3,0,"li",9),Fo(),Fo(),Fo()),2&e&&(Jr(3),Po("ngbCollapse",t.isMenuCollapsed),Jr(2),Po("routerLinkActiveOptions",Xl(8,vS)),Jr(3),Po("ngIf",t.displayProtected),Jr(1),Po("ngIf",t.displayProtected),Jr(1),Po("ngIf",t.displayProtected),Jr(1),Po("ngIf",t.displayProtected),Jr(1),Po("ngIf",t.displayLogin),Jr(1),Po("ngIf",t.displayLogout))},directives:[mb,ib,Vb,zb,Bx,jb,Vx,eu,_b,yb,vb,gb],styles:[".nav-item[_ngcontent-%COMP%], .navbar-nav[_ngcontent-%COMP%]{font-size:16px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}"]}),e})(),yS=(()=>{class e{constructor(){this.title="digby"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-root"]],features:[qa([o_])],decls:7,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-12"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"div",1),Lo(2,"div",2),No(3,"app-header"),Fo(),Fo(),Lo(4,"div",1),Lo(5,"div",2),No(6,"router-outlet"),Fo(),Fo(),Fo())},directives:[bS,Hx],styles:[""]}),e})();function _S(e,t){if(1&e&&(Lo(0,"option",10),xa(1),Fo()),2&e){const e=t.$implicit;Po("ngValue",e),Jr(1),Sa(e.name)}}function wS(e,t){if(1&e){const e=Bo();Lo(0,"div",1),Lo(1,"div",2),Lo(2,"div",3),Lo(3,"label",11),xa(4,"Genomic Sets"),Fo(),Fo(),Lo(5,"ng-multiselect-dropdown",12),Uo("ngModelChange",function(t){return Pt(e),Xo().selectedGen=t})("ngModelChange",function(){return Pt(e),Xo().refSeqChange()}),Fo(),Fo(),Fo()}if(2&e){const e=Xo();Jr(5),ha("selector-dropdown"),Po("settings",e.genDropdownSettings)("data",e.datasets)("ngModel",e.selectedGen)("placeholder","Select Datasets")}}function xS(e,t){if(1&e){const e=Bo();Lo(0,"div",1),Lo(1,"div",2),Lo(2,"div",3),Lo(3,"label",13),xa(4,"Genomic Assemblies"),Fo(),Fo(),Lo(5,"ng-multiselect-dropdown",14),Uo("ngModelChange",function(t){return Pt(e),Xo().selectedAssembly=t})("ngModelChange",function(){return Pt(e),Xo().assemblyChange()}),Fo(),Fo(),Fo()}if(2&e){const e=Xo();Jr(5),ha("selector-dropdown"),Po("settings",e.genAssemblyDropdownSettings)("data",e.assemblies)("ngModel",e.selectedAssembly)("placeholder","Select Datasets")}}function SS(e,t){if(1&e){const e=Bo();Lo(0,"div",1),Lo(1,"div",2),Lo(2,"div",3),Lo(3,"label",15),xa(4,"AIRR-seq Sets"),Fo(),Fo(),Lo(5,"ng-multiselect-dropdown",16),Uo("ngModelChange",function(t){return Pt(e),Xo().selectedRep=t})("ngModelChange",function(){return Pt(e),Xo().repSeqChange()}),Fo(),Fo(),Fo()}if(2&e){const e=Xo();Jr(5),ha("selector-dropdown"),Po("settings",e.repDropdownSettings)("data",e.repSeqs)("ngModel",e.selectedRep)("placeholder","Select Datasets")}}function CS(e,t){1&e&&(Lo(0,"div",17),Lo(1,"span",18),xa(2,"Loading..."),Fo(),Fo())}function kS(e,t){if(1&e&&(Lo(0,"div",19),Lo(1,"div",20),Lo(2,"h4"),xa(3),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(3),Ca("Error loading data: ",e.error,"")}}let ES=(()=>{class e{constructor(e,t,n){this.genomicService=e,this.repseqService=t,this.geneTableService=n,this.species=null,this.selectedSpecies=null,this.notifiedUpdates={species:!1,refSeq:!1,repSeq:!1,assemblies:!1},this.datasets=[],this.assemblies=[],this.repSeqs=[],this.selectedGen=[],this.selectedAssembly=[],this.selectedRep=[],this.repDatasetDescriptions=[],this.initializing=!1,this.error=null,this.geneTableServiceSubscription=null,this.genDropdownSettings={singleSelection:!1,idField:"id",textField:"text",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.genAssemblyDropdownSettings={singleSelection:!0,idField:"id",textField:"text",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.repDropdownSettings={singleSelection:!1,idField:"id",textField:"text",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0}}ngOnInit(){this.isFetching=!0}ngAfterViewInit(){setTimeout(()=>{this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{this.species?!e.species||this.selectedSpecies&&e.species===this.selectedSpecies.name?(e.repSeqs&&AS(new Set(e.repSeqs),new Set(this.selectedRep.map(e=>e.text))).size&&(this.selectedRep=this.repSeqs.filter(t=>e.repSeqs.indexOf(t.text)>=0)),e.datasets&&AS(new Set(e.datasets),new Set(this.selectedGen.map(e=>e.text))).size&&(this.selectedGen=this.datasets.filter(t=>e.datasets.indexOf(t.text)>=0)),e.assemblies&&AS(new Set(e.assemblies),new Set(this.selectedAssembly.map(e=>e.text))).size&&(this.selectedAssembly=this.assemblies.filter(t=>e.assemblies.indexOf(t.text)>=0))):(this.selectedSpecies=this.species.filter(t=>t.name===e.species)[0],this.updateGen(e.datasets),this.updateRep(e.repSeqs)):(this.initializing=!0,this.updateSpecies(e))})})}updateSpecies(e){this.genomicService.getSpeciesApi().pipe(i_(),Ly(e=>(this.isFetching=!1,this.error=e,Lg))).subscribe(t=>{this.isFetching=!1;let n=1;this.species=[];for(const i of t){const t={id:n,name:i};this.species.push(t),i===e.species&&(this.selectedSpecies=t),n+=1}this.updateGen(e.datasets),this.updateRep(e.repSeqs)},e=>{this.isFetching=!1,this.error=e.message})}updateGen(e){this.genomicService.getDataSetApi(this.selectedSpecies.name).pipe(i_(),Ly(e=>(this.isFetching=!1,this.error=e,Lg))).subscribe(t=>{this.isFetching=!1,this.datasets=[],this.selectedGen=[];let n=1;for(const i of t)this.datasets.push({id:n,text:i.dataset}),e&&e.indexOf(i.ref_seq)>=0&&this.selectedGen.push({id:n,text:i.dataset}),n+=1;0===this.selectedGen.length&&this.datasets.length>0&&this.selectedGen.push(this.datasets[0]),this.notifiedUpdates.refSeq=!0,this.onSelectionChange(),this.updateAssemblies(this.geneTableService.selection.value.assemblies)},e=>{this.isFetching=!1,this.error=e.message})}updateAssemblies(e){this.selectedGen.length>0?this.genomicService.getAssemblyApi(this.selectedSpecies.name,this.selectedGen.map(e=>e.text).join()).pipe(i_(),Ly(e=>(this.isFetching=!1,this.error=e,Lg))).subscribe(t=>{this.isFetching=!1,this.assemblies=[],this.selectedAssembly=[];let n=1;for(const i of t)this.assemblies.push({id:n,text:i.assembly}),e&&e.indexOf(i.ref_seq)>=0&&this.selectedAssembly.push({id:n,text:i.dataset}),n+=1;0===this.selectedAssembly.length&&this.assemblies.length>0&&this.selectedAssembly.push(this.assemblies[0])},e=>{this.isFetching=!1,this.error=e.message}):(this.assemblies=[],this.selectedAssembly=[]),this.notifiedUpdates.assemblies=!0,this.onSelectionChange()}updateRep(e){this.repseqService.getDataSetApi(this.selectedSpecies.name).pipe(i_(),Ly(e=>(this.isFetching=!1,this.error=e,Lg))).subscribe(t=>{this.isFetching=!1,this.repSeqs=[],this.selectedRep=[],this.repDatasetDescriptions=t;let n=1;for(const i of t){const t=i.dataset;this.repSeqs.push({id:n,text:t}),e.indexOf(t)>=0&&this.selectedRep.push({id:n,text:t}),n+=1}0===this.selectedRep.length&&this.repSeqs.length>0&&this.selectedRep.push(this.repSeqs[0]),this.notifiedUpdates.repSeq=!0,this.onSelectionChange()},e=>{this.isFetching=!1,this.error=e.message})}handleError(e){this.isFetching=!1,this.error=e.message}speciesChange(){this.notifiedUpdates.species=!0,this.selectedGen=[],this.selectedRep=[],this.selectedAssembly=[],"None"!==this.selectedSpecies.name&&(this.geneTableService.selection.value.species===this.selectedSpecies.name?(this.updateGen(this.geneTableService.selection.value.datasets),this.updateRep(this.geneTableService.selection.value.repSeqs)):(this.updateGen([]),this.updateRep([])))}repSeqChange(){this.notifiedUpdates.repSeq=!0,(AS(new Set(this.geneTableService.selection.value.repSeqs),new Set(this.selectedRep.map(e=>e.text))).size||this.initializing)&&this.onSelectionChange(),this.initializing=!1}assemblyChange(){this.notifiedUpdates.repSeq=!0,(AS(new Set(this.geneTableService.selection.value.repSeqs),new Set(this.selectedAssembly.map(e=>e.text))).size||this.initializing)&&this.onSelectionChange(),this.initializing=!1}refSeqChange(){this.notifiedUpdates.refSeq=!0,AS(new Set(this.geneTableService.selection.value.datasets),new Set(this.selectedGen.map(e=>e.text))).size&&this.onSelectionChange()}onSelectionChange(){(!this.notifiedUpdates.species||this.notifiedUpdates.repSeq&&this.notifiedUpdates.refSeq&&this.notifiedUpdates.assemblies)&&this.selectedSpecies&&(this.notifiedUpdates={species:!1,refSeq:!1,repSeq:!1,assemblies:!1},this.geneTableService.selection.next({species:this.selectedSpecies.name,datasets:this.selectedGen.map(e=>e.text),assemblies:this.selectedAssembly.map(e=>e.text),repSeqs:this.selectedRep.map(e=>e.text),repDatasetDescriptions:this.repDatasetDescriptions}))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Hy),Oo($y),Oo(r_))},e.\u0275cmp=$e({type:e,selectors:[["app-gene-table-selector"]],inputs:{showGenomic:"showGenomic",showAssembly:"showAssembly",showRepseq:"showRepseq"},decls:13,vars:7,consts:[[1,"form-row","align-items-center"],[1,"col-auto","my-1"],[1,"input-group"],[1,"input-group-prepend"],["for","selectSpecies",1,"input-group-text"],["id","selectSpecies",1,"custom-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["class","col-auto my-1",4,"ngIf"],["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"ngValue"],["for","selectGenomic",1,"input-group-text",2,"height","38px"],["id","selectGenomic",3,"settings","data","ngModel","placeholder","ngModelChange"],["for","selectAssembly",1,"input-group-text",2,"height","38px"],["id","selectAssembly",3,"settings","data","ngModel","placeholder","ngModelChange"],["for","selectAIRR",1,"input-group-text",2,"height","38px"],["id","selectAIRR",3,"settings","data","ngModel","placeholder","ngModelChange"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"row"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"div",1),Lo(2,"div",2),Lo(3,"div",3),Lo(4,"label",4),xa(5,"Species"),Fo(),Fo(),Lo(6,"select",5),Uo("ngModelChange",function(e){return t.selectedSpecies=e})("ngModelChange",function(){return t.speciesChange()}),Io(7,_S,2,2,"option",6),Fo(),Fo(),Fo(),Io(8,wS,6,6,"div",7),Io(9,xS,6,6,"div",7),Io(10,SS,6,6,"div",7),Fo(),Io(11,CS,3,0,"div",8),Io(12,kS,4,1,"div",9)),2&e&&(Jr(6),Po("ngModel",t.selectedSpecies),Jr(1),Po("ngForOf",t.species),Jr(1),Po("ngIf",t.showGenomic),Jr(1),Po("ngIf",t.showAssembly),Jr(1),Po("ngIf",t.showRepseq),Jr(1),Po("ngIf",t.isFetching),Jr(1),Po("ngIf",t.error))},directives:[Cg,zm,dg,Qh,eu,kg,Tg,ly],styles:[".selector-dropdown .dropdown-btn{line-height:24px!important;height:38px!important;border-top-left-radius:0!important;border-bottom-left-radius:0!important;border-color:#ced4da!important}"],encapsulation:2}),e})();function AS(e,t){const n=new Set(e);for(const i of t)n.has(i)?n.delete(i):n.add(i);return n}var RS=n("LvDl");let TS,IS=(()=>{class e{constructor(e){this.activeModal=e,this.width=50,this.gapped=!1,this.fasta=!1,this.gappedAvailable=!1}ngOnInit(){this.gappedAvailable=this.content.gapped&&this.content.gapped.length>0,this.format_sequence()}format_sequence(){let e=1;this.displayContent="";let t="";if(t=this.gapped?this.content.gapped?this.content.gapped:"":this.content.ungapped?this.content.ungapped:"",t){this.fasta&&(this.displayContent+=">"+this.name+"<br>");for(const n of this.chunkSubstr(t,this.width))this.fasta?this.displayContent+=n+"<br>":(this.displayContent+=RS.padEnd(e.toString(),5),n.length>10&&(this.displayContent+=RS.repeat(" ",n.length-10)+RS.padStart((e+n.length-1).toString(),5)),this.displayContent+="<br>"+n+"<br><br>",e+=n.length)}}chunkSubstr(e,t){const n=Math.ceil(e.length/t),i=new Array(n);for(let r=0,s=0;r<n;++r,s+=t)i[r]=e.substr(s,t);return i}onGappedClick(e){this.gapped=!this.gapped,e.textContent=this.gapped?"Ungapped":"Gapped",this.format_sequence()}onFastaClick(e){this.fasta=!this.fasta,e.textContent=this.fasta?"Numbered":"FASTA",this.format_sequence()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ab))},e.\u0275cmp=$e({type:e,selectors:[["app-seq-modal"]],inputs:{name:"name",content:"content"},decls:18,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"lead"],[2,"width","600px","margin-left","auto","margin-right","auto",3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"disabled","click"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"h4",1),xa(2),Fo(),Lo(3,"button",2),Uo("click",function(){return t.activeModal.dismiss("Cross click")}),Lo(4,"span",3),xa(5,"\xd7"),Fo(),Fo(),Fo(),Lo(6,"div",4),Lo(7,"pre",5),xa(8,"    "),No(9,"div",6),xa(10,"\n  "),Fo(),Fo(),Lo(11,"div",7),Lo(12,"button",8),Uo("click",function(e){return t.onGappedClick(e.target)}),xa(13,"Gapped"),Fo(),Lo(14,"button",9),Uo("click",function(e){return t.onFastaClick(e.target)}),xa(15,"FASTA"),Fo(),Lo(16,"button",9),Uo("click",function(){return t.activeModal.close("Close click")}),xa(17,"Close"),Fo(),Fo()),2&e&&(Jr(2),Sa(t.name),Jr(7),Po("innerHTML",t.displayContent,tr),Jr(3),Po("disabled",!t.gappedAvailable))},styles:[""]}),e})();class DS{constructor(e){this.genomicService=e,this.geneSequenceSubject=new Jg([]),this.choicesSubject=new Jg({}),this.loadingSubject=new Jg(!1),this.errorSubject=new Jg(null),this.choices$=this.choicesSubject.asObservable(),this.loading$=this.loadingSubject.asObservable(),this.error$=this.errorSubject.asObservable(),this.totalItems=0}loadGeneSequences(e,t,n,i,r,s,o){t="Test"===t?"Human_IGH":t,this.loadingSubject.next(!0),this.errorSubject.next(null),e&&t?this.genomicService.getSequencesApi(e,t,n,i,r,s,o).pipe(i_(),Ly(e=>(this.errorSubject.next(e),[])),Qy(()=>{this.loadingSubject.next(!1)})).subscribe(e=>{this.totalItems=e.total_items,this.choicesSubject.next(e.uniques),void 0!==e&&e.hasOwnProperty("sequences")?this.geneSequenceSubject.next(e.sequences):this.geneSequenceSubject.next([])}):(this.loadingSubject.next(!1),this.totalItems=0,this.geneSequenceSubject.next([]))}connect(e){return this.geneSequenceSubject.asObservable()}disconnect(e){this.geneSequenceSubject.complete(),this.loadingSubject.complete(),this.errorSubject.complete(),this.choicesSubject.complete()}}function OS(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function PS(e,t=qg){return n=>n.lift(new MS(e,t))}class MS{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new LS(e,this.dueTime,this.scheduler))}}class LS extends f{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(FS,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function FS(e){e.debouncedNext()}function NS(e){return null!=e&&"false"!=`${e}`}function zS(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function VS(e){return Array.isArray(e)?e:[e]}function jS(e){return null==e?"":"string"==typeof e?e:`${e}px`}function BS(e){return e instanceof Xa?e.nativeElement:e}try{TS="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(cj){TS=!1}let HS,qS=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?mu(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!TS)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(ui(Mc))},e.\u0275prov=de({factory:function(){return new e(ui(Mc))},token:e,providedIn:"root"}),e})(),$S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();const US=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function WS(){if(HS)return HS;if("object"!=typeof document||!document)return HS=new Set(US),HS;let e=document.createElement("input");return HS=new Set(US.filter(t=>(e.setAttribute("type",t),e.type===t))),HS}let GS,YS,ZS;function XS(e){return function(){if(null==GS&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>GS=!0}))}finally{GS=GS||!1}return GS}()?e:!!e.capture}function KS(){if(null==YS){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return YS=!1,YS;if("scrollBehavior"in document.documentElement.style)YS=!0;else{const e=Element.prototype.scrollTo;YS=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return YS}function QS(e){if(function(){if(null==ZS){const e="undefined"!=typeof document?document.head:null;ZS=!(!e||!e.createShadowRoot&&!e.attachShadow)}return ZS}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}let JS=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})(),eC=(()=>{class e{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=BS(e);return new b(e=>{const n=this._observeElement(t).subscribe(e);return()=>{n.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new S,n=this._mutationObserverFactory.create(e=>t.next(e));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:n}=this._observedElements.get(e);t&&t.disconnect(),n.complete(),this._observedElements.delete(e)}}}return e.\u0275fac=function(t){return new(t||e)(ui(JS))},e.\u0275prov=de({factory:function(){return new e(ui(JS))},token:e,providedIn:"root"}),e})(),tC=(()=>{class e{constructor(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new lc,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=NS(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=zS(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(PS(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Oo(eC),Oo(Xa),Oo(Zc))},e.\u0275dir=Xe({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),nC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[JS]}),e})();function iC(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}let rC=0;const sC=new Map;let oC=null,aC=(()=>{class e{constructor(e){this._document=e}describe(e,t,n){if(!this._canBeDescribed(e,t))return;const i=lC(t,n);"string"!=typeof t?(cC(t),sC.set(i,{messageElement:t,referenceCount:0})):sC.has(i)||this._createMessageElement(t,n),this._isElementDescribedByMessage(e,i)||this._addMessageReference(e,i)}removeDescription(e,t,n){if(!t||!this._isElementNode(e))return;const i=lC(t,n);if(this._isElementDescribedByMessage(e,i)&&this._removeMessageReference(e,i),"string"==typeof t){const e=sC.get(i);e&&0===e.referenceCount&&this._deleteMessageElement(i)}oC&&0===oC.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const e=this._document.querySelectorAll("[cdk-describedby-host]");for(let t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute("cdk-describedby-host");oC&&this._deleteMessagesContainer(),sC.clear()}_createMessageElement(e,t){const n=this._document.createElement("div");cC(n),n.textContent=e,t&&n.setAttribute("role",t),this._createMessagesContainer(),oC.appendChild(n),sC.set(lC(e,t),{messageElement:n,referenceCount:0})}_deleteMessageElement(e){const t=sC.get(e),n=t&&t.messageElement;oC&&n&&oC.removeChild(n),sC.delete(e)}_createMessagesContainer(){if(!oC){const e=this._document.getElementById("cdk-describedby-message-container");e&&e.parentNode&&e.parentNode.removeChild(e),oC=this._document.createElement("div"),oC.id="cdk-describedby-message-container",oC.style.visibility="hidden",oC.classList.add("cdk-visually-hidden"),this._document.body.appendChild(oC)}}_deleteMessagesContainer(){oC&&oC.parentNode&&(oC.parentNode.removeChild(oC),oC=null)}_removeCdkDescribedByReferenceIds(e){const t=iC(e,"aria-describedby").filter(e=>0!=e.indexOf("cdk-describedby-message"));e.setAttribute("aria-describedby",t.join(" "))}_addMessageReference(e,t){const n=sC.get(t);!function(e,t,n){const i=iC(e,t);i.some(e=>e.trim()==n.trim())||(i.push(n.trim()),e.setAttribute(t,i.join(" ")))}(e,"aria-describedby",n.messageElement.id),e.setAttribute("cdk-describedby-host",""),n.referenceCount++}_removeMessageReference(e,t){const n=sC.get(t);n.referenceCount--,function(e,t,n){const i=iC(e,t).filter(e=>e!=n.trim());i.length?e.setAttribute(t,i.join(" ")):e.removeAttribute(t)}(e,"aria-describedby",n.messageElement.id),e.removeAttribute("cdk-describedby-host")}_isElementDescribedByMessage(e,t){const n=iC(e,"aria-describedby"),i=sC.get(t),r=i&&i.messageElement.id;return!!r&&-1!=n.indexOf(r)}_canBeDescribed(e,t){if(!this._isElementNode(e))return!1;if(t&&"object"==typeof t)return!0;const n=null==t?"":`${t}`.trim(),i=e.getAttribute("aria-label");return!(!n||i&&i.trim()===n)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(Rh))},token:e,providedIn:"root"}),e})();function lC(e,t){return"string"==typeof e?`${t||""}/${e}`:e}function cC(e){e.id||(e.id="cdk-describedby-message-"+rC++)}class hC{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new S,this._typeaheadSubscription=u.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new S,this.change=new S,e instanceof hc&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ev(e=>this._pressedLetters.push(e)),PS(e),Cf(()=>this._pressedLetters.length>0),E(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let n=1;n<t.length+1;n++){const i=(this._activeItemIndex+n)%t.length,r=t[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||OS(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),i=t[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const i=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof hc?this._items.toArray():this._items}}class uC extends hC{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class dC extends hC{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let pC=(()=>{class e{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const t=function(e){try{return e.frameElement}catch(cj){return null}}((n=e).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(t){if(-1===mC(t))return!1;if(!this.isVisible(t))return!1}let i=e.nodeName.toLowerCase(),r=mC(e);return e.hasAttribute("contenteditable")?-1!==r:"iframe"!==i&&"object"!==i&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){let t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==r:"video"===i?-1!==r&&(null!==r||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,t){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){let t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||fC(e))}(e)&&!this.isDisabled(e)&&((null==t?void 0:t.ignoreVisibility)||this.isVisible(e))}}return e.\u0275fac=function(t){return new(t||e)(ui(qS))},e.\u0275prov=de({factory:function(){return new e(ui(qS))},token:e,providedIn:"root"}),e})();function fC(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function mC(e){if(!fC(e))return null;const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class gC{constructor(e,t,n,i,r=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let n=0;n<t.length;n++)t[n].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]):t[n].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=0;n<t.length;n++){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(e)return e}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=t.length-1;n>=0;n--){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(e)return e}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(gv(1)).subscribe(e)}}let vC=(()=>{class e{constructor(e,t,n){this._checker=e,this._ngZone=t,this._document=n}create(e,t=!1){return new gC(e,this._checker,this._ngZone,this._document,t)}}return e.\u0275fac=function(t){return new(t||e)(ui(pC),ui(Zc),ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(pC),ui(Zc),ui(Rh))},token:e,providedIn:"root"}),e})(),bC=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._focusTrapFactory=t,this._previouslyFocusedElement=null,this._document=n,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=NS(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=NS(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const t=e.autoCapture;t&&!t.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){var e,t;const n=null===(e=this._document)||void 0===e?void 0:e.activeElement;this._previouslyFocusedElement=(null===(t=null==n?void 0:n.shadowRoot)||void 0===t?void 0:t.activeElement)||n,this.focusTrap.focusInitialElementWhenReady()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(vC),Oo(Rh))},e.\u0275dir=Xe({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[lt]}),e})();"undefined"!=typeof Element&&Element;const yC=new Yn("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),_C=new Yn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let wC=(()=>{class e{constructor(e,t,n,i){this._ngZone=t,this._defaultOptions=i,this._document=n,this._liveElement=e||this._createLiveElement()}announce(e,...t){const n=this._defaultOptions;let i,r;return 1===t.length&&"number"==typeof t[0]?r=t[0]:[i,r]=t,this.clear(),clearTimeout(this._previousTimeout),i||(i=n&&n.politeness?n.politeness:"polite"),null==r&&n&&(r=n.duration),this._liveElement.setAttribute("aria-live",i),this._ngZone.runOutsideAngular(()=>new Promise(t=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,t(),"number"==typeof r&&(this._previousTimeout=setTimeout(()=>this.clear(),r))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div");for(let n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}return e.\u0275fac=function(t){return new(t||e)(ui(yC,8),ui(Zc),ui(Rh),ui(_C,8))},e.\u0275prov=de({factory:function(){return new e(ui(yC,8),ui(Zc),ui(Rh),ui(_C,8))},token:e,providedIn:"root"}),e})(),xC=(()=>{class e{constructor(e,t,n,i){this._elementRef=e,this._liveAnnouncer=t,this._contentObserver=n,this._ngZone=i,this._politeness="polite"}get politeness(){return this._politeness}set politeness(e){this._politeness="off"===e||"assertive"===e?e:"polite","off"===this._politeness?this._subscription&&(this._subscription.unsubscribe(),this._subscription=null):this._subscription||(this._subscription=this._ngZone.runOutsideAngular(()=>this._contentObserver.observe(this._elementRef).subscribe(()=>{const e=this._elementRef.nativeElement.textContent;e!==this._previousAnnouncedText&&(this._liveAnnouncer.announce(e,this._politeness),this._previousAnnouncedText=e)})))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(wC),Oo(eC),Oo(Zc))},e.\u0275dir=Xe({type:e,selectors:[["","cdkAriaLive",""]],inputs:{politeness:["cdkAriaLive","politeness"]},exportAs:["cdkAriaLive"]}),e})();function SC(e){return 0===e.buttons}function CC(e){const t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const kC=new Yn("cdk-focus-monitor-default-options"),EC=XS({passive:!0,capture:!0});let AC=(()=>{class e{constructor(e,t,n,i){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=e=>{if(!this._lastTouchTarget){const t=SC(e)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=e=>{CC(e)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=RC(e),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=e=>{const t=RC(e),n="focus"===e.type?this._onFocus:this._onBlur;for(let i=t;i;i=i.parentElement)n.call(this,e,i)},this._document=n,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(e,t=!1){const n=BS(e);if(!this._platform.isBrowser||1!==n.nodeType)return xf(null);const i=QS(n)||this._getDocument(),r=this._elementInfo.get(n);if(r)return t&&(r.checkChildren=!0),r.subject;const s={checkChildren:t,subject:new S,rootNode:i};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){const t=BS(e),n=this._elementInfo.get(t);n&&(n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(n))}focusVia(e,t,n){const i=BS(e);i===this._getDocument().activeElement?this._getClosestElementsInfo(i).forEach(([e,n])=>this._originChanged(e,t,n)):(this._setOriginForCurrentEventQueue(t),"function"==typeof i.focus&&i.focus(n))}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}_getFocusOrigin(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}_setClasses(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(e){const t=RC(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const n=this._elementInfo.get(t);n&&(n.checkChildren||t===RC(e))&&this._originChanged(t,this._getFocusOrigin(e),n)}_onBlur(e,t){const n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const t=e.rootNode,n=this._rootNodeFocusListenerCount.get(t)||0;n||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,EC),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,EC)}),this._rootNodeFocusListenerCount.set(t,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const e=this._getDocument(),t=this._getWindow();e.addEventListener("keydown",this._documentKeydownListener,EC),e.addEventListener("mousedown",this._documentMousedownListener,EC),e.addEventListener("touchstart",this._documentTouchstartListener,EC),t.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(e){const t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){const e=this._rootNodeFocusListenerCount.get(t);e>1?this._rootNodeFocusListenerCount.set(t,e-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,EC),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,EC),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){const e=this._getDocument(),t=this._getWindow();e.removeEventListener("keydown",this._documentKeydownListener,EC),e.removeEventListener("mousedown",this._documentMousedownListener,EC),e.removeEventListener("touchstart",this._documentTouchstartListener,EC),t.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(e,t,n){this._setClasses(e,t),this._emitOrigin(n.subject,t),this._lastFocusOrigin=t}_getClosestElementsInfo(e){const t=[];return this._elementInfo.forEach((n,i)=>{(i===e||n.checkChildren&&i.contains(e))&&t.push([i,n])}),t}}return e.\u0275fac=function(t){return new(t||e)(ui(Zc),ui(qS),ui(Rh,8),ui(kC,8))},e.\u0275prov=de({factory:function(){return new e(ui(Zc),ui(qS),ui(Rh,8),ui(kC,8))},token:e,providedIn:"root"}),e})();function RC(e){return e.composedPath?e.composedPath()[0]:e.target}let TC=(()=>{class e{constructor(e,t){this._elementRef=e,this._focusMonitor=t,this.cdkFocusChange=new lc}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(e=>this.cdkFocusChange.emit(e))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(AC))},e.\u0275dir=Xe({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),e})(),IC=(()=>{class e{constructor(e,t){this._platform=e,this._document=t}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const t=this._document.defaultView||window,n=t&&t.getComputedStyle?t.getComputedStyle(e):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black");const t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}return e.\u0275fac=function(t){return new(t||e)(ui(qS),ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(qS),ui(Rh))},token:e,providedIn:"root"}),e})(),DC=(()=>{class e{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return e.\u0275fac=function(t){return new(t||e)(ui(IC))},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[$S,nC]]}),e})();const OC=new Yn("cdk-dir-doc",{providedIn:"root",factory:function(){return di(Rh)}});let PC=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new lc,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(ui(OC,8))},e.\u0275prov=de({factory:function(){return new e(ui(OC,8))},token:e,providedIn:"root"}),e})(),MC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();const LC=new nl("11.2.13");function FC(e,t){if(1&e&&No(0,"mat-pseudo-checkbox",4),2&e){const e=Xo();Po("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function NC(e,t){if(1&e&&(Lo(0,"span",5),xa(1),Fo()),2&e){const e=Xo();Jr(1),Ca("(",e.group.label,")")}}const zC=["*"],VC=new nl("11.2.13"),jC=new Yn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let BC=(()=>{class e{constructor(e,t,n){this._hasDoneGlobalChecks=!1,this._document=n,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=t,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const e=this._document.defaultView||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return ch()&&!this._isTestEnv()}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&VC.full!==LC.full&&console.warn("The Angular Material version ("+VC.full+") does not match the Angular CDK version ("+LC.full+").\nPlease ensure the versions of these two packages exactly match.")}}return e.\u0275fac=function(t){return new(t||e)(ui(IC),ui(jC,8),ui(Rh))},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[MC],MC]}),e})();function HC(e){return class extends e{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=NS(e)}}}function qC(e,t){return class extends e{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const t=e||this.defaultColor;t!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),t&&this._elementRef.nativeElement.classList.add(`mat-${t}`),this._color=t)}}}function $C(e){return class extends e{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=NS(e)}}}function UC(e,t=0){return class extends e{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?zS(e):this.defaultTabIndex}}}function WC(e){return class extends e{constructor(...e){super(...e),this.errorState=!1,this.stateChanges=new S}updateErrorState(){const e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}}function GC(e){return class extends e{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new b(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}const YC=new Yn("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return di(Nc)}});class ZC{constructor(){this._localeChanges=new S,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}sameDate(e,t){if(e&&t){let n=this.isValid(e),i=this.isValid(t);return n&&i?!this.compareDate(e,t):n==i}return e==t}clampDate(e,t,n){return t&&this.compareDate(e,t)<0?t:n&&this.compareDate(e,n)>0?n:e}}const XC=new Yn("mat-date-formats");let KC;try{KC="undefined"!=typeof Intl}catch(cj){KC=!1}const QC={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},JC=nk(31,e=>String(e+1)),ek={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},tk=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function nk(e,t){const n=Array(e);for(let i=0;i<e;i++)n[i]=t(i);return n}let ik=(()=>{class e extends ZC{constructor(e,t){super(),this.useUtcForDisplay=!0,super.setLocale(e),this.useUtcForDisplay=!t.TRIDENT,this._clampDate=t.TRIDENT||t.EDGE}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){if(KC){const t=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return nk(12,e=>this._stripDirectionalityCharacters(this._format(t,new Date(2017,e,1))))}return QC[e]}getDateNames(){if(KC){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return nk(31,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,t+1))))}return JC}getDayOfWeekNames(e){if(KC){const t=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return nk(7,e=>this._stripDirectionalityCharacters(this._format(t,new Date(2017,0,e+1))))}return ek[e]}getYearName(e){if(KC){const t=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(t,e))}return String(this.getYear(e))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,t,n){let i=this._createDateWithOverflow(e,t,n);return i.getMonth(),i}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,t){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");if(KC){this._clampDate&&(e.getFullYear()<1||e.getFullYear()>9999)&&(e=this.clone(e)).setFullYear(Math.max(1,Math.min(9999,e.getFullYear()))),t=Object.assign(Object.assign({},t),{timeZone:"utc"});const n=new Intl.DateTimeFormat(this.locale,t);return this._stripDirectionalityCharacters(this._format(n,e))}return this._stripDirectionalityCharacters(e.toDateString())}addCalendarYears(e,t){return this.addCalendarMonths(e,12*t)}addCalendarMonths(e,t){let n=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+t,this.getDate(e));return this.getMonth(n)!=((this.getMonth(e)+t)%12+12)%12&&(n=this._createDateWithOverflow(this.getYear(n),this.getMonth(n),0)),n}addCalendarDays(e,t){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+t)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(tk.test(e)){let t=new Date(e);if(this.isValid(t))return t}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,t,n){const i=new Date;return i.setFullYear(e,t,n),i.setHours(0,0,0,0),i}_2digit(e){return("00"+e).slice(-2)}_stripDirectionalityCharacters(e){return e.replace(/[\u200e\u200f]/g,"")}_format(e,t){const n=new Date;return n.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setUTCHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e.format(n)}}return e.\u0275fac=function(t){return new(t||e)(ui(YC,8),ui(qS))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),rk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[{provide:ZC,useClass:ik}],imports:[[$S]]}),e})();const sk={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let ok=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[{provide:XC,useValue:sk}],imports:[[rk]]}),e})(),ak=(()=>{class e{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();class lk{constructor(e,t,n){this._renderer=e,this.element=t,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ck={enterDuration:450,exitDuration:400},hk=XS({passive:!0}),uk=["mousedown","touchstart"],dk=["mouseup","mouseleave","touchend","touchcancel"];class pk{constructor(e,t,n,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=BS(n))}fadeInRipple(e,t,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},ck),n.animation);n.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const s=n.radius||function(e,t,n){const i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}(e,t,i),o=e-i.left,a=t-i.top,l=r.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const h=new lk(this,c,n);return h.state=0,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const e=h===this._mostRecentTransientRipple;h.state=1,n.persistent||e&&this._isPointerDown||h.fadeOut()},l),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const n=e.element,i=Object.assign(Object.assign({},ck),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=BS(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(uk))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(dk),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=SC(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!CC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let e=0;e<t.length;e++)this.fadeInRipple(t[e].clientX,t[e].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(e=>{this._triggerElement.addEventListener(e,this,hk)})})}_removeTriggerEvents(){this._triggerElement&&(uk.forEach(e=>{this._triggerElement.removeEventListener(e,this,hk)}),this._pointerUpEventsRegistered&&dk.forEach(e=>{this._triggerElement.removeEventListener(e,this,hk)}))}}const fk=new Yn("mat-ripple-global-options");let mk=(()=>{class e{constructor(e,t,n,i,r){this._elementRef=e,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new pk(this,t,e,n)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,n){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Zc),Oo(qS),Oo(fk,8),Oo(yf,8))},e.\u0275dir=Xe({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&ca("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),e})(),gk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[BC,$S],BC]}),e})(),vk=(()=>{class e{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)(Oo(yf,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,t){2&e&&ca("mat-pseudo-checkbox-indeterminate","indeterminate"===t.state)("mat-pseudo-checkbox-checked","checked"===t.state)("mat-pseudo-checkbox-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),e})(),bk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[BC]]}),e})();const yk=new Yn("MAT_OPTION_PARENT_COMPONENT");class _k{}const wk=HC(_k);let xk=0,Sk=(()=>{class e extends wk{constructor(e){var t;super(),this._labelId="mat-optgroup-label-"+xk++,this._inert=null!==(t=null==e?void 0:e.inertGroups)&&void 0!==t&&t}}return e.\u0275fac=function(t){return new(t||e)(Oo(yk,8))},e.\u0275dir=Xe({type:e,inputs:{label:"label"},features:[mo]}),e})();const Ck=new Yn("MatOptgroup");let kk=0;class Ek{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let Ak=(()=>{class e{constructor(e,t,n,i){this._element=e,this._changeDetectorRef=t,this._parent=n,this.group=i,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+kk++,this.onSelectionChange=new lc,this._stateChanges=new S}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=NS(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,t){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){13!==e.keyCode&&32!==e.keyCode||OS(e)||(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Ek(this,e))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(xl),Oo(void 0),Oo(Sk))},e.\u0275dir=Xe({type:e,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),e})(),Rk=(()=>{class e extends Ak{constructor(e,t,n,i){super(e,t,n,i)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(xl),Oo(yk,8),Oo(Ck,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,t){1&e&&Uo("click",function(){return t._selectViaInteraction()})("keydown",function(e){return t._handleKeydown(e)}),2&e&&(Aa("id",t.id),Ro("tabindex",t._getTabIndex())("aria-selected",t._getAriaSelected())("aria-disabled",t.disabled.toString()),ca("mat-selected",t.selected)("mat-option-multiple",t.multiple)("mat-active",t.active)("mat-option-disabled",t.disabled))},exportAs:["matOption"],features:[mo],ngContentSelectors:zC,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,t){1&e&&(Qo(),Io(0,FC,1,2,"mat-pseudo-checkbox",0),Lo(1,"span",1),Jo(2),Fo(),Io(3,NC,2,1,"span",2),No(4,"div",3)),2&e&&(Po("ngIf",t.multiple),Jr(3),Po("ngIf",t.group&&t.group._inert),Jr(1),Po("matRippleTrigger",t._getHostElement())("matRippleDisabled",t.disabled||t.disableRipple))},directives:[eu,mk,vk],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),e})();function Tk(e,t,n){if(n.length){let i=t.toArray(),r=n.toArray(),s=0;for(let t=0;t<e+1;t++)i[t].group&&i[t].group===r[s]&&s++;return s}return 0}let Ik=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[gk,fu,BC,bk]]}),e})();const Dk=["mat-button",""],Ok=["*"],Pk=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class Mk{constructor(e){this._elementRef=e}}const Lk=qC(HC($C(Mk)));let Fk=(()=>{class e extends Lk{constructor(e,t,n){super(e),this._focusMonitor=t,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of Pk)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,t){e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(e=>this._getHostElement().hasAttribute(e))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(AC),Oo(yf,8))},e.\u0275cmp=$e({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){if(1&e&&wc(mk,1),2&e){let e;_c(e=Sc())&&(t.ripple=e.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,t){2&e&&(Ro("disabled",t.disabled||null),ca("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-button-disabled",t.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[mo],attrs:Dk,ngContentSelectors:Ok,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(Qo(),Lo(0,"span",0),Jo(1),Fo(),No(2,"span",1),No(3,"span",2)),2&e&&(Jr(2),ca("mat-button-ripple-round",t.isRoundButton||t.isIconButton),Po("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[mk],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),e})(),Nk=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[gk,BC],BC]}),e})();class zk extends jg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}class Vk extends Hg{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,i=-1,r=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++i<r&&(e=t.shift()));if(this.active=!1,n){for(;++i<r&&(e=t.shift());)e.unsubscribe();throw n}}}const jk=new Vk(zk);let Bk=1;const Hk=(()=>Promise.resolve())(),qk={};function $k(e){return e in qk&&(delete qk[e],!0)}const Uk={setImmediate(e){const t=Bk++;return qk[t]=!0,Hk.then(()=>$k(t)&&e()),t},clearImmediate(e){$k(e)}};class Wk extends jg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=Uk.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(Uk.clearImmediate(t),e.scheduled=void 0)}}class Gk extends Hg{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,i=-1,r=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++i<r&&(e=t.shift()));if(this.active=!1,n){for(;++i<r&&(e=t.shift());)e.unsubscribe();throw n}}}const Yk=new Gk(Wk);class Zk{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new Xk(e,this.durationSelector))}}class Xk extends z{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:t}=this;n=t(e)}catch(t){return this.destination.error(t)}const i=V(n,new N(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Kk(e,t=qg){return n=()=>Ug(e,t),function(e){return e.lift(new Zk(n))};var n}class Qk{call(e,t){return t.subscribe(new Jk(e))}}class Jk extends f{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class eE extends jg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}class tE extends Hg{}const nE=new tE(eE);class iE extends f{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(iE.dispatch,this.delay,new rE(e,this.destination)))}_next(e){this.scheduleMessage(Mv.createNext(e))}_error(e){this.scheduleMessage(Mv.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Mv.createComplete()),this.unsubscribe()}}class rE{constructor(e,t){this.notification=e,this.destination=t}}class sE extends S{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new oE(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let s;if(this.closed)throw new _;if(this.isStopped||this.hasError?s=u.EMPTY:(this.observers.push(e),s=new w(this,e)),i&&e.add(e=new iE(e,i)),t)for(let o=0;o<r&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<r&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||nE).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let s=0;for(;s<r&&!(e-i[s].time<n);)s++;return r>t&&(s=Math.max(s,r-t)),s>0&&i.splice(0,s),i}}class oE{constructor(e,t){this.time=e,this.value=t}}class aE{}function lE(e){return e&&"function"==typeof e.connect}class cE{applyChanges(e,t,n,i,r){e.forEachOperation((e,i,s)=>{let o,a;if(null==e.previousIndex){const r=n(e,i,s);o=t.createEmbeddedView(r.templateRef,r.context,r.index),a=1}else null==s?(t.remove(i),a=3):(o=t.get(i),t.move(o,s),a=2);r&&r({context:null==o?void 0:o.context,operation:a,record:e})})}detach(){}}class hE{constructor(e=!1,t,n=!0){this._multiple=e,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new S,t&&t.length&&(e?t.forEach(e=>this._markSelected(e)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const uE=new Yn("_ViewRepeater");let dE=(()=>{class e{constructor(e,t,n){this._ngZone=e,this._platform=t,this._scrolled=new S,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new b(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(Kk(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):xf()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Cf(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,e)&&t.push(i)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let n=BS(t),i=e.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ng(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(ui(Zc),ui(qS),ui(Rh,8))},e.\u0275prov=de({factory:function(){return new e(ui(Zc),ui(qS),ui(Rh,8))},token:e,providedIn:"root"}),e})(),pE=(()=>{class e{constructor(e,t,n){this._platform=e,this._change=new S,this._changeListener=e=>{this._change.next(e)},this._document=n,t.runOutsideAngular(()=>{if(e.isBrowser){const e=this._getWindow();e.addEventListener("resize",this._changeListener),e.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,t=this._getWindow(),n=e.documentElement,i=n.getBoundingClientRect();return{top:-i.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-i.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Kk(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(ui(qS),ui(Zc),ui(Rh,8))},e.\u0275prov=de({factory:function(){return new e(ui(qS),ui(Zc),ui(Rh,8))},token:e,providedIn:"root"}),e})(),fE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})(),mE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[MC,$S,fE],MC,fE]}),e})();class gE{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class vE extends gE{constructor(e,t,n,i){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=i}}class bE extends gE{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class yE extends gE{constructor(e){super(),this.element=e instanceof Xa?e.nativeElement:e}}class _E{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof vE?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof bE?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof yE?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class wE extends _E{constructor(e,t,n,i,r){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");t.parentNode.insertBefore(n,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=r}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),n.detectChanges(),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),this._attachedPortal=e,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let xE=(()=>{class e extends _E{constructor(e,t,n){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new lc,this.attachDomPortal=e=>{const t=e.element,n=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(n,t),this._getRootNode().appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i=t.createComponent(n,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return e.\u0275fac=function(t){return new(t||e)(Oo(Wa),Oo(Ll),Oo(Rh))},e.\u0275dir=Xe({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[mo]}),e})(),SE=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();class CE{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new kE(e,this.predicate,this.inclusive))}}class kE extends f{constructor(e,t,n){super(e),this.predicate=t,this.inclusive=n,this.index=0}_next(e){const t=this.destination;let n;try{n=this.predicate(e,this.index++)}catch(i){return void t.error(i)}this.nextOrComplete(e,n)}nextOrComplete(e,t){const n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())}}const EE=KS();class AE{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=jS(-this._previousScrollPosition.left),e.style.top=jS(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,i=t.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),EE&&(t.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),EE&&(t.scrollBehavior=i,n.scrollBehavior=r)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}class RE{constructor(e,t,n,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class TE{enable(){}disable(){}attach(){}}function IE(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function DE(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class OE{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();IE(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let PE=(()=>{class e{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=()=>new TE,this.close=e=>new RE(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new AE(this._viewportRuler,this._document),this.reposition=e=>new OE(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=i}}return e.\u0275fac=function(t){return new(t||e)(ui(dE),ui(pE),ui(Zc),ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(dE),ui(pE),ui(Zc),ui(Rh))},token:e,providedIn:"root"}),e})();class ME{constructor(e){if(this.scrollStrategy=new TE,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class LE{constructor(e,t,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class FE{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let NE=(()=>{class e{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(Rh))},token:e,providedIn:"root"}),e})(),zE=(()=>{class e extends NE{constructor(e){super(e),this._keydownListener=e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(Rh))},token:e,providedIn:"root"}),e})(),VE=(()=>{class e extends NE{constructor(e,t){super(e),this._platform=t,this._cursorStyleIsSet=!1,this._clickListener=e=>{const t=e.composedPath?e.composedPath()[0]:e.target,n=this._attachedOverlays.slice();for(let i=n.length-1;i>-1;i--){const r=n[i];if(!(r._outsidePointerEvents.observers.length<1)&&r.hasAttached()){if(r.overlayElement.contains(t))break;r._outsidePointerEvents.next(e)}}}}add(e){if(super.add(e),!this._isAttached){const e=this._document.body;e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=e.style.cursor,e.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh),ui(qS))},e.\u0275prov=de({factory:function(){return new e(ui(Rh),ui(qS))},token:e,providedIn:"root"}),e})();const jE=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let BE=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){if(this._platform.isBrowser||jE){const e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),jE?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh),ui(qS))},e.\u0275prov=de({factory:function(){return new e(ui(Rh),ui(qS))},token:e,providedIn:"root"}),e})();class HE{constructor(e,t,n,i,r,s,o,a,l){this._portalOutlet=e,this._host=t,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=s,this._document=o,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new S,this._attachments=new S,this._detachments=new S,this._locationChanges=u.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new S,this._outsidePointerEvents=new S,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(gv(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=jS(this._config.width),e.height=jS(this._config.height),e.minWidth=jS(this._config.minWidth),e.minHeight=jS(this._config.minHeight),e.maxWidth=jS(this._config.maxWidth),e.maxHeight=jS(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const i=e.classList;VS(t).forEach(e=>{e&&(n?i.add(e):i.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(dv(U(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const qE=/([A-Za-z%]+)$/;class $E{constructor(e,t,n,i,r){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new S,this._resizeSubscription=u.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,i=[];let r;for(let s of this._preferredPositions){let o=this._getOriginPoint(e,s),a=this._getOverlayPoint(o,t,s),l=this._getOverlayFit(a,t,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(l,a,n)?i.push({position:s,origin:o,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!r||r.overlayFit.visibleArea<l.visibleArea)&&(r={overlayFit:l,overlayPoint:a,originPoint:o,position:s,overlayRect:t})}if(i.length){let e=null,t=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>t&&(t=i,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&UE(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,i;if("center"==t.originX)n=e.left+e.width/2;else{const i=this._isRtl()?e.right:e.left,r=this._isRtl()?e.left:e.right;n="start"==t.originX?i:r}return i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:n,y:i}}_getOverlayPoint(e,t,n){let i,r;return i="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+i,y:e.y+r}}_getOverlayFit(e,t,n,i){const r=GE(t);let{x:s,y:o}=e,a=this._getOffset(i,"x"),l=this._getOffset(i,"y");a&&(s+=a),l&&(o+=l);let c=0-o,h=o+r.height-n.height,u=this._subtractOverflows(r.width,0-s,s+r.width-n.width),d=this._subtractOverflows(r.height,c,h),p=u*d;return{visibleArea:p,isCompletelyWithinViewport:r.width*r.height===p,fitsInViewportVertically:d===r.height,fitsInViewportHorizontally:u==r.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const i=n.bottom-t.y,r=n.right-t.x,s=WE(this._overlayRef.getConfig().minHeight),o=WE(this._overlayRef.getConfig().minWidth),a=e.fitsInViewportHorizontally||null!=o&&o<=r;return(e.fitsInViewportVertically||null!=s&&s<=i)&&a}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=GE(t),r=this._viewportRect,s=Math.max(e.x+i.width-r.width,0),o=Math.max(e.y+i.height-r.height,0),a=Math.max(r.top-n.top-e.y,0),l=Math.max(r.left-n.left-e.x,0);let c=0,h=0;return c=i.width<=r.width?l||-s:e.x<this._viewportMargin?r.left-n.left-e.x:0,h=i.height<=r.height?a||-o:e.y<this._viewportMargin?r.top-n.top-e.y:0,this._previousPushAmount={x:c,y:h},{x:e.x+c,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),n=new FE(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,i=this._isRtl();let r,s,o,a,l,c;if("top"===t.overlayY)s=e.y,r=n.height-s+this._viewportMargin;else if("bottom"===t.overlayY)o=n.height-e.y+2*this._viewportMargin,r=n.height-o+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),i=this._lastBoundingBoxSize.height;r=2*t,s=e.y-t,r>i&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-i/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)c=n.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)l=e.x,a=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),i=this._lastBoundingBoxSize.width;a=2*t,l=e.x-t,a>i&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-i/2)}return{top:s,left:l,bottom:o,right:c,width:a,height:r}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=jS(n.height),i.top=jS(n.top),i.bottom=jS(n.bottom),i.width=jS(n.width),i.left=jS(n.left),i.right=jS(n.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(i.maxHeight=jS(e)),r&&(i.maxWidth=jS(r))}this._lastBoundingBoxSize=n,UE(this._boundingBox.style,i)}_resetBoundingBoxStyles(){UE(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){UE(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const i=this._viewportRuler.getViewportScrollPosition();UE(n,this._getExactOverlayY(t,e,i)),UE(n,this._getExactOverlayX(t,e,i))}else n.position="static";let o="",a=this._getOffset(t,"x"),l=this._getOffset(t,"y");a&&(o+=`translateX(${a}px) `),l&&(o+=`translateY(${l}px)`),n.transform=o.trim(),s.maxHeight&&(i?n.maxHeight=jS(s.maxHeight):r&&(n.maxHeight="")),s.maxWidth&&(i?n.maxWidth=jS(s.maxWidth):r&&(n.maxWidth="")),UE(this._pane.style,n)}_getExactOverlayY(e,t,n){let i={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=s,"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=jS(r.y),i}_getExactOverlayX(e,t,n){let i,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),i=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===i?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=jS(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:DE(e,n),isOriginOutsideView:IE(e,n),isOverlayClipped:DE(t,n),isOverlayOutsideView:IE(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&VS(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Xa)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function UE(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function WE(e){if("number"!=typeof e&&null!=e){const[t,n]=e.split(qE);return n&&"px"!==n?null:parseFloat(t)}return e||null}function GE(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}class YE{constructor(e,t,n,i,r,s,o){this._preferredPositions=[],this._positionStrategy=new $E(n,i,r,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,i){const r=new LE(e,t,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}class ZE{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:s,maxHeight:o}=n,a=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==r&&"100vh"!==r||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=a?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,a?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let XE=(()=>{class e{constructor(e,t,n,i){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=i}global(){return new ZE}connectedTo(e,t,n){return new YE(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new $E(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(ui(pE),ui(Rh),ui(qS),ui(BE))},e.\u0275prov=de({factory:function(){return new e(ui(pE),ui(Rh),ui(qS),ui(BE))},token:e,providedIn:"root"}),e})(),KE=0,QE=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,h){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=s,this._ngZone=o,this._document=a,this._directionality=l,this._location=c,this._outsideClickDispatcher=h}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),i=this._createPortalOutlet(n),r=new ME(e);return r.direction=r.direction||this._directionality.value,new HE(i,t,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+KE++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(gh)),new wE(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(ui(PE),ui(BE),ui(Wa),ui(XE),ui(zE),ui(po),ui(Zc),ui(Rh),ui(PC),ui(qh),ui(VE))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const JE=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],eA=new Yn("cdk-connected-overlay-scroll-strategy");let tA=(()=>{class e{constructor(e){this.elementRef=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),nA=(()=>{class e{constructor(e,t,n,i,r){this._overlay=e,this._dir=r,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=u.EMPTY,this._attachSubscription=u.EMPTY,this._detachSubscription=u.EMPTY,this._positionSubscription=u.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new lc,this.positionChange=new lc,this.attach=new lc,this.detach=new lc,this.overlayKeydown=new lc,this.overlayOutsideClick=new lc,this._templatePortal=new bE(t,n),this._scrollStrategyFactory=i,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=NS(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=NS(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=NS(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=NS(e)}get push(){return this._push}set push(e){this._push=NS(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=JE);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(e=>{this.overlayKeydown.next(e),27!==e.keyCode||this.disableClose||OS(e)||(e.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(e=>{this.overlayOutsideClick.next(e)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new ME({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){const t=this.positions.map(e=>({originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||this.offsetX,offsetY:e.offsetY||this.offsetY,panelClass:e.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(e,t=!1){return n=>n.lift(new CE(e,t))}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Oo(QE),Oo(Rl),Oo(Ll),Oo(eA),Oo(PC,8))},e.\u0275dir=Xe({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[lt]}),e})();const iA={provide:eA,deps:[QE],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let rA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[QE,iA],imports:[[MC,SE,mE],mE]}),e})();const sA=["underline"],oA=["connectionContainer"],aA=["inputContainer"],lA=["label"];function cA(e,t){1&e&&(zo(0),Lo(1,"div",14),No(2,"div",15),No(3,"div",16),No(4,"div",17),Fo(),Lo(5,"div",18),No(6,"div",15),No(7,"div",16),No(8,"div",17),Fo(),Vo())}function hA(e,t){1&e&&(Lo(0,"div",19),Jo(1,1),Fo())}function uA(e,t){if(1&e&&(zo(0),Jo(1,2),Lo(2,"span"),xa(3),Fo(),Vo()),2&e){const e=Xo(2);Jr(3),Sa(e._control.placeholder)}}function dA(e,t){1&e&&Jo(0,3,["*ngSwitchCase","true"])}function pA(e,t){1&e&&(Lo(0,"span",23),xa(1," *"),Fo())}function fA(e,t){if(1&e){const e=Bo();Lo(0,"label",20,21),Uo("cdkObserveContent",function(){return Pt(e),Xo().updateOutlineGap()}),Io(2,uA,4,1,"ng-container",12),Io(3,dA,1,0,"ng-content",12),Io(4,pA,2,0,"span",22),Fo()}if(2&e){const e=Xo();ca("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),Po("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),Ro("for",e._control.id)("aria-owns",e._control.id),Jr(2),Po("ngSwitchCase",!1),Jr(1),Po("ngSwitchCase",!0),Jr(1),Po("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function mA(e,t){1&e&&(Lo(0,"div",24),Jo(1,4),Fo())}function gA(e,t){if(1&e&&(Lo(0,"div",25,26),No(2,"span",27),Fo()),2&e){const e=Xo();Jr(2),ca("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function vA(e,t){1&e&&(Lo(0,"div"),Jo(1,5),Fo()),2&e&&Po("@transitionMessages",Xo()._subscriptAnimationState)}function bA(e,t){if(1&e&&(Lo(0,"div",31),xa(1),Fo()),2&e){const e=Xo(2);Po("id",e._hintLabelId),Jr(1),Sa(e.hintLabel)}}function yA(e,t){if(1&e&&(Lo(0,"div",28),Io(1,bA,2,2,"div",29),Jo(2,6),No(3,"div",30),Jo(4,7),Fo()),2&e){const e=Xo();Po("@transitionMessages",e._subscriptAnimationState),Jr(1),Po("ngIf",e.hintLabel)}}const _A=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],wA=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],xA=new Yn("MatError"),SA={transitionMessages:Ku("transitionMessages",[td("enter",ed({opacity:1,transform:"translateY(0%)"})),id("void => enter",[ed({opacity:0,transform:"translateY(-5px)"}),Qu("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let CA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e}),e})();const kA=new Yn("MatHint");let EA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-label"]]}),e})(),AA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-placeholder"]]}),e})();const RA=new Yn("MatPrefix"),TA=new Yn("MatSuffix");let IA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","matSuffix",""]],features:[qa([{provide:TA,useExisting:e}])]}),e})(),DA=0;class OA{constructor(e){this._elementRef=e}}const PA=qC(OA,"primary"),MA=new Yn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),LA=new Yn("MatFormField");let FA=(()=>{class e extends PA{constructor(e,t,n,i,r,s,o,a){super(e),this._elementRef=e,this._changeDetectorRef=t,this._dir=i,this._defaults=r,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new S,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+DA++,this._labelId="mat-form-field-label-"+DA++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=NS(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(yv(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(dv(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dv(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),U(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(yv(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(yv(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(dv(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const t=this._control?this._control.ngControl:null;return t&&t[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Ng(this._label.nativeElement,"transitionend").pipe(gv(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const t=this._hintChildren?this._hintChildren.find(e=>"start"===e.align):null,n=this._hintChildren?this._hintChildren.find(e=>"end"===e.align):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&e.push(...this._errorChildren.map(e=>e.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!e||!e.children.length||!e.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let t=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),s=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(r),o=e.children,a=this._getStartEnd(o[0].getBoundingClientRect());let l=0;for(let e=0;e<o.length;e++)l+=o[e].offsetWidth;t=Math.abs(a-s)-5,n=l>0?.75*l+10:0}for(let o=0;o<r.length;o++)r[o].style.width=`${t}px`;for(let o=0;o<s.length;o++)s[o].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(xl),Oo(Xa),Oo(PC,8),Oo(MA,8),Oo(qS),Oo(Zc),Oo(yf,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-form-field"]],contentQueries:function(e,t,n){if(1&e&&(xc(n,CA,1),xc(n,CA,3),xc(n,EA,1),xc(n,EA,3),xc(n,AA,1),xc(n,xA,1),xc(n,kA,1),xc(n,RA,1),xc(n,TA,1)),2&e){let e;_c(e=Sc())&&(t._controlNonStatic=e.first),_c(e=Sc())&&(t._controlStatic=e.first),_c(e=Sc())&&(t._labelChildNonStatic=e.first),_c(e=Sc())&&(t._labelChildStatic=e.first),_c(e=Sc())&&(t._placeholderChild=e.first),_c(e=Sc())&&(t._errorChildren=e),_c(e=Sc())&&(t._hintChildren=e),_c(e=Sc())&&(t._prefixChildren=e),_c(e=Sc())&&(t._suffixChildren=e)}},viewQuery:function(e,t){if(1&e&&(wc(sA,1),wc(oA,3),wc(aA,1),wc(lA,1)),2&e){let e;_c(e=Sc())&&(t.underlineRef=e.first),_c(e=Sc())&&(t._connectionContainerRef=e.first),_c(e=Sc())&&(t._inputContainerRef=e.first),_c(e=Sc())&&(t._label=e.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,t){2&e&&ca("mat-form-field-appearance-standard","standard"==t.appearance)("mat-form-field-appearance-fill","fill"==t.appearance)("mat-form-field-appearance-outline","outline"==t.appearance)("mat-form-field-appearance-legacy","legacy"==t.appearance)("mat-form-field-invalid",t._control.errorState)("mat-form-field-can-float",t._canLabelFloat())("mat-form-field-should-float",t._shouldLabelFloat())("mat-form-field-has-label",t._hasFloatingLabel())("mat-form-field-hide-placeholder",t._hideControlPlaceholder())("mat-form-field-disabled",t._control.disabled)("mat-form-field-autofilled",t._control.autofilled)("mat-focused",t._control.focused)("ng-untouched",t._shouldForward("untouched"))("ng-touched",t._shouldForward("touched"))("ng-pristine",t._shouldForward("pristine"))("ng-dirty",t._shouldForward("dirty"))("ng-valid",t._shouldForward("valid"))("ng-invalid",t._shouldForward("invalid"))("ng-pending",t._shouldForward("pending"))("_mat-animation-noopable",!t._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[qa([{provide:LA,useExisting:e}]),mo],ngContentSelectors:wA,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,t){1&e&&(Qo(_A),Lo(0,"div",0),Lo(1,"div",1,2),Uo("click",function(e){return t._control.onContainerClick&&t._control.onContainerClick(e)}),Io(3,cA,9,0,"ng-container",3),Io(4,hA,2,0,"div",4),Lo(5,"div",5,6),Jo(7),Lo(8,"span",7),Io(9,fA,5,16,"label",8),Fo(),Fo(),Io(10,mA,2,0,"div",9),Fo(),Io(11,gA,3,4,"div",10),Lo(12,"div",11),Io(13,vA,2,1,"div",12),Io(14,yA,5,2,"div",13),Fo(),Fo()),2&e&&(Jr(3),Po("ngIf","outline"==t.appearance),Jr(1),Po("ngIf",t._prefixChildren.length),Jr(5),Po("ngIf",t._hasFloatingLabel()),Jr(1),Po("ngIf",t._suffixChildren.length),Jr(1),Po("ngIf","outline"!=t.appearance),Jr(1),Po("ngSwitch",t._getDisplayedMessages()),Jr(1),Po("ngSwitchCase","error"),Jr(1),Po("ngSwitchCase","hint"))},directives:[eu,ru,su,tC],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[SA.transitionMessages]},changeDetection:0}),e})(),NA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu,BC,nC],BC]}),e})();const zA=["trigger"],VA=["panel"];function jA(e,t){if(1&e&&(Lo(0,"span",8),xa(1),Fo()),2&e){const e=Xo();Jr(1),Sa(e.placeholder)}}function BA(e,t){if(1&e&&(Lo(0,"span",12),xa(1),Fo()),2&e){const e=Xo(2);Jr(1),Sa(e.triggerValue)}}function HA(e,t){1&e&&Jo(0,0,["*ngSwitchCase","true"])}function qA(e,t){1&e&&(Lo(0,"span",9),Io(1,BA,2,1,"span",10),Io(2,HA,1,0,"ng-content",11),Fo()),2&e&&(Po("ngSwitch",!!Xo().customTrigger),Jr(2),Po("ngSwitchCase",!0))}function $A(e,t){if(1&e){const e=Bo();Lo(0,"div",13),Lo(1,"div",14,15),Uo("@transformPanel.done",function(t){return Pt(e),Xo()._panelDoneAnimatingStream.next(t.toState)})("keydown",function(t){return Pt(e),Xo()._handleKeydown(t)}),Jo(3,1),Fo(),Fo()}if(2&e){const e=Xo();Po("@transformPanelWrap",void 0),Jr(1),Ea("mat-select-panel ",e._getPanelTheme(),""),la("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),Po("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),Ro("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const UA=[[["mat-select-trigger"]],"*"],WA=["mat-select-trigger","*"],GA={transformPanelWrap:Ku("transformPanelWrap",[id("* => void",sd("@transformPanel",[rd()],{optional:!0}))]),transformPanel:Ku("transformPanel",[td("void",ed({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),td("showing",ed({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),td("showing-multiple",ed({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),id("void => *",Qu("120ms cubic-bezier(0, 0, 0.2, 1)")),id("* => void",Qu("100ms 25ms linear",ed({opacity:0})))])};let YA=0;const ZA=new Yn("mat-select-scroll-strategy"),XA=new Yn("MAT_SELECT_CONFIG"),KA={provide:ZA,deps:[QE],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};class QA{constructor(e,t){this.source=e,this.value=t}}class JA{constructor(e,t,n,i,r){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r}}const eR=$C(UC(HC(WC(JA)))),tR=new Yn("MatSelectTrigger");let nR=(()=>{class e extends eR{constructor(e,t,n,i,r,s,o,a,l,c,h,u,d,p){var f,m,g;super(r,i,o,a,c),this._viewportRuler=e,this._changeDetectorRef=t,this._ngZone=n,this._dir=s,this._parentFormField=l,this.ngControl=c,this._liveAnnouncer=d,this._defaultOptions=p,this._panelOpen=!1,this._compareWith=(e,t)=>e===t,this._uid="mat-select-"+YA++,this._triggerAriaLabelledBy=null,this._destroy=new S,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+YA++,this._panelDoneAnimatingStream=new S,this._overlayPanelClass=(null===(f=this._defaultOptions)||void 0===f?void 0:f.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(g=null===(m=this._defaultOptions)||void 0===m?void 0:m.disableOptionCentering)&&void 0!==g&&g,this.ariaLabel="",this.optionSelectionChanges=xy(()=>{const e=this.options;return e?e.changes.pipe(yv(e),Sv(()=>U(...e.map(e=>e.onSelectionChange)))):this._ngZone.onStable.pipe(gv(1),Sv(()=>this.optionSelectionChanges))}),this.openedChange=new lc,this._openedStream=this.openedChange.pipe(Cf(e=>e),E(()=>{})),this._closedStream=this.openedChange.pipe(Cf(e=>!e),E(()=>{})),this.selectionChange=new lc,this.valueChange=new lc,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==p?void 0:p.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=p.typeaheadDebounceInterval),this._scrollStrategyFactory=u,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=NS(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=NS(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=NS(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=zS(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new hE(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(_v(),dv(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(dv(this._destroy)).subscribe(e=>{e.added.forEach(e=>e.select()),e.removed.forEach(e=>e.deselect())}),this.options.changes.pipe(yv(null),dv(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const t=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?t.setAttribute("aria-labelledby",e):t.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(e=>e.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const t=e.keyCode,n=40===t||38===t||37===t||39===t,i=13===t||32===t,r=this._keyManager;if(!r.isTyping()&&i&&!OS(e)||(this.multiple||e.altKey)&&n)e.preventDefault(),this.open();else if(!this.multiple){const t=this.selected;r.onKeydown(e);const n=this.selected;n&&t!==n&&this._liveAnnouncer.announce(n.viewValue,1e4)}}_handleOpenKeydown(e){const t=this._keyManager,n=e.keyCode,i=40===n||38===n,r=t.isTyping();if(i&&e.altKey)e.preventDefault(),this.close();else if(r||13!==n&&32!==n||!t.activeItem||OS(e))if(!r&&this._multiple&&65===n&&e.ctrlKey){e.preventDefault();const t=this.options.some(e=>!e.disabled&&!e.selected);this.options.forEach(e=>{e.disabled||(t?e.select():e.deselect())})}else{const n=t.activeItemIndex;t.onKeydown(e),this._multiple&&i&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==n&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(gv(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(e=>e.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(e=>this._selectValue(e)),this._sortValues();else{const t=this._selectValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const t=this.options.find(t=>{if(this._selectionModel.isSelected(t))return!1;try{return null!=t.value&&this._compareWith(t.value,e)}catch(n){return!1}});return t&&this._selectionModel.select(t),t}_initKeyManager(){this._keyManager=new uC(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(dv(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(dv(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=U(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(dv(e)).subscribe(e=>{this._onSelect(e.source,e.isUserInput),e.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),U(...this.options.map(e=>e._stateChanges)).pipe(dv(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,t){const n=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(n!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((t,n)=>this.sortComparator?this.sortComparator(t,n,e):e.indexOf(t)-e.indexOf(n)),this.stateChanges.next()}}_propagateChanges(e){let t=null;t=this.multiple?this.selected.map(e=>e.value):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const t=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const t=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return e.\u0275fac=function(t){return new(t||e)(Oo(pE),Oo(xl),Oo(Zc),Oo(ak),Oo(Xa),Oo(PC,8),Oo(cg,8),Oo(yg,8),Oo(LA,8),Oo(Fm,10),Wn("tabindex"),Oo(ZA),Oo(wC),Oo(XA,8))},e.\u0275dir=Xe({type:e,viewQuery:function(e,t){if(1&e&&(wc(zA,1),wc(VA,1),wc(nA,1)),2&e){let e;_c(e=Sc())&&(t.trigger=e.first),_c(e=Sc())&&(t.panel=e.first),_c(e=Sc())&&(t.overlayDir=e.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[mo,lt]}),e})(),iR=(()=>{class e extends nR{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,t,n){const i=this._getItemHeight();return Math.min(Math.max(0,i*e-t+i/2),n)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(dv(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(gv(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const t=Tk(e,this.options,this.optionGroups),n=this._getItemHeight();var i,r,s;this.panel.nativeElement.scrollTop=(r=n,(i=(e+t)*n)<(s=this.panel.nativeElement.scrollTop)?i:i+r>s+256?Math.max(0,i-256+r):s)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new QA(this,e)}_calculateOverlayOffsetX(){const e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),t=this._viewportRuler.getViewportSize(),n=this._isRtl(),i=this.multiple?56:32;let r;if(this.multiple)r=40;else if(this.disableOptionCentering)r=16;else{let e=this._selectionModel.selected[0]||this.options.first;r=e&&e.group?32:16}n||(r*=-1);const s=0-(e.left+r-(n?i:0)),o=e.right+r-t.width+(n?0:i);s>0?r+=s+8:o>0&&(r-=o+8),this.overlayDir.offsetX=Math.round(r),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,t,n){const i=this._getItemHeight(),r=(i-this._triggerRect.height)/2,s=Math.floor(256/i);let o;return this.disableOptionCentering?0:(o=0===this._scrollTop?e*i:this._scrollTop===n?(e-(this._getItemCount()-s))*i+(i-(this._getItemCount()*i-256)%i):t-i/2,Math.round(-1*o-r))}_checkOverlayWithinViewport(e){const t=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),i=this._triggerRect.top-8,r=n.height-this._triggerRect.bottom-8,s=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*t,256)-s-this._triggerRect.height;o>r?this._adjustPanelUp(o,r):s>i?this._adjustPanelDown(s,i,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,t){const n=Math.round(e-t);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,t,n){const i=Math.round(e-t);if(this._scrollTop+=i,this._offsetY+=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),t=this._getItemCount(),n=Math.min(t*e,256),i=t*e-n;let r;r=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),r+=Tk(r,this.options,this.optionGroups);const s=n/2;this._scrollTop=this._calculateOverlayScroll(r,s,i),this._offsetY=this._calculateOverlayOffsetY(r,s,i),this._checkOverlayWithinViewport(i)}_getOriginBasedOnOption(){const e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-t+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(t){return rR(t||e)},e.\u0275cmp=$e({type:e,selectors:[["mat-select"]],contentQueries:function(e,t,n){if(1&e&&(xc(n,tR,1),xc(n,Rk,1),xc(n,Ck,1)),2&e){let e;_c(e=Sc())&&(t.customTrigger=e.first),_c(e=Sc())&&(t.options=e),_c(e=Sc())&&(t.optionGroups=e)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,t){1&e&&Uo("keydown",function(e){return t._handleKeydown(e)})("focus",function(){return t._onFocus()})("blur",function(){return t._onBlur()}),2&e&&(Ro("id",t.id)("tabindex",t.tabIndex)("aria-controls",t.panelOpen?t.id+"-panel":null)("aria-expanded",t.panelOpen)("aria-label",t.ariaLabel||null)("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),ca("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty)("mat-select-multiple",t.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[qa([{provide:CA,useExisting:e},{provide:yk,useExisting:e}]),mo],ngContentSelectors:WA,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(Qo(UA),Lo(0,"div",0,1),Uo("click",function(){return t.toggle()}),Lo(3,"div",2),Io(4,jA,2,1,"span",3),Io(5,qA,3,2,"span",4),Fo(),Lo(6,"div",5),No(7,"div",6),Fo(),Fo(),Io(8,$A,4,14,"ng-template",7),Uo("backdropClick",function(){return t.close()})("attach",function(){return t._onAttached()})("detach",function(){return t.close()})),2&e){const e=Do(1);Ro("aria-owns",t.panelOpen?t.id+"-panel":null),Jr(3),Po("ngSwitch",t.empty),Ro("id",t._valueId),Jr(1),Po("ngSwitchCase",!0),Jr(1),Po("ngSwitchCase",!1),Jr(3),Po("cdkConnectedOverlayPanelClass",t._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[tA,ru,su,nA,ou,Xh],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px}\n'],encapsulation:2,data:{animation:[GA.transformPanelWrap,GA.transformPanel]},changeDetection:0}),e})();const rR=$n(iR);let sR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[KA],imports:[[fu,rA,Ik,BC],fE,NA,Ik,BC]}),e})();const oR=new Set;let aR,lR=(()=>{class e{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cR}matchMedia(e){return this._platform.WEBKIT&&function(e){if(!oR.has(e))try{aR||(aR=document.createElement("style"),aR.setAttribute("type","text/css"),document.head.appendChild(aR)),aR.sheet&&(aR.sheet.insertRule(`@media ${e} {.fx-query-test{ }}`,0),oR.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return e.\u0275fac=function(t){return new(t||e)(ui(qS))},e.\u0275prov=de({factory:function(){return new e(ui(qS))},token:e,providedIn:"root"}),e})();function cR(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let hR=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new S}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return uR(VS(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){let t=tv(uR(VS(e)).map(e=>this._registerQuery(e).observable));return t=uv(t.pipe(gv(1)),t.pipe((1,e=>e.lift(new Vv(1))),PS(0))),t.pipe(E(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(({matches:e,query:n})=>{t.matches=t.matches||e,t.breakpoints[n]=e}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),n={observable:new b(e=>{const n=t=>this._zone.run(()=>e.next(t));return t.addListener(n),()=>{t.removeListener(n)}}).pipe(yv(t),E(({matches:t})=>({query:e,matches:t})),dv(this._destroySubject)),mql:t};return this._queries.set(e,n),n}}return e.\u0275fac=function(t){return new(t||e)(ui(lR),ui(Zc))},e.\u0275prov=de({factory:function(){return new e(ui(lR),ui(Zc))},token:e,providedIn:"root"}),e})();function uR(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const dR={tooltipState:Ku("state",[td("initial, void, hidden",ed({opacity:0,transform:"scale(0)"})),td("visible",ed({transform:"scale(1)"})),id("* => visible",Qu("200ms cubic-bezier(0, 0, 0.2, 1)",nd([ed({opacity:0,transform:"scale(0)",offset:0}),ed({opacity:.5,transform:"scale(0.99)",offset:.5}),ed({opacity:1,transform:"scale(1)",offset:1})]))),id("* => hidden",Qu("100ms cubic-bezier(0, 0, 0.2, 1)",ed({opacity:0})))])},pR=XS({passive:!0}),fR=new Yn("mat-tooltip-scroll-strategy"),mR={provide:fR,deps:[QE],useFactory:function(e){return()=>e.scrollStrategies.reposition({scrollThrottle:20})}},gR=new Yn("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let vR=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,h,u){this._overlay=e,this._elementRef=t,this._scrollDispatcher=n,this._viewContainerRef=i,this._ngZone=r,this._platform=s,this._ariaDescriber=o,this._focusMonitor=a,this._dir=c,this._defaultOptions=h,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new S,this._handleKeydown=e=>{this._isTooltipVisible()&&27===e.keyCode&&!OS(e)&&(e.preventDefault(),e.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=l,h&&(h.position&&(this.position=h.position),h.touchGestures&&(this.touchGestures=h.touchGestures)),r.runOutsideAngular(()=>{t.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=NS(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(dv(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([t,n])=>{e.removeEventListener(t,n,pR)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const t=this._createOverlay();this._detach(),this._portal=this._portal||new vE(bR,this._viewContainerRef),this._tooltipInstance=t.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(dv(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),t=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e);return t.positionChanges.pipe(dv(this._destroyed)).subscribe(e=>{this._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:t,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(dv(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(){const e=this._overlayRef.getConfig().positionStrategy,t=this._getOrigin(),n=this._getOverlayPosition();e.withPositions([Object.assign(Object.assign({},t.main),n.main),Object.assign(Object.assign({},t.fallback),n.fallback)])}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let n;"above"==t||"below"==t?n={originX:"center",originY:"above"==t?"top":"bottom"}:"before"==t||"left"==t&&e||"right"==t&&!e?n={originX:"start",originY:"center"}:("after"==t||"right"==t&&e||"left"==t&&!e)&&(n={originX:"end",originY:"center"});const{x:i,y:r}=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:i,originY:r}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let n;"above"==t?n={overlayX:"center",overlayY:"bottom"}:"below"==t?n={overlayX:"center",overlayY:"top"}:"before"==t||"left"==t&&e||"right"==t&&!e?n={overlayX:"end",overlayY:"center"}:("after"==t||"right"==t&&e||"left"==t&&!e)&&(n={overlayX:"start",overlayY:"center"});const{x:i,y:r}=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:i,overlayY:r}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(gv(1),dv(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,t){return"above"===this.position||"below"===this.position?"top"===t?t="bottom":"bottom"===t&&(t="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:t}}_setupPointerEnterEventsIfNeeded(){!this._disabled&&this.message&&this._viewInitialized&&!this._passiveListeners.length&&(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",()=>this.hide()],["wheel",e=>this._wheelListener(e)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const t=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",t],["touchcancel",t])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([e,t])=>{this._elementRef.nativeElement.addEventListener(e,t,pR)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const t=(this._document||document).elementFromPoint(e.clientX,e.clientY),n=this._elementRef.nativeElement;t===n||n.contains(t)||this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const t=this._elementRef.nativeElement,n=t.style;("on"===e||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName)&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),"on"!==e&&t.draggable||(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}}return e.\u0275fac=function(t){return new(t||e)(Oo(QE),Oo(Xa),Oo(dE),Oo(Ll),Oo(Zc),Oo(qS),Oo(aC),Oo(AC),Oo(fR),Oo(PC,8),Oo(gR,8),Oo(Rh))},e.\u0275dir=Xe({type:e,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),e})(),bR=(()=>{class e{constructor(e,t){this._changeDetectorRef=e,this._breakpointObserver=t,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new S,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}show(e){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},e)}hide(e){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},e)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(Oo(xl),Oo(hR))},e.\u0275cmp=$e({type:e,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,t){1&e&&Uo("click",function(){return t._handleBodyInteraction()},!1,ur)("auxclick",function(){return t._handleBodyInteraction()},!1,ur),2&e&&la("zoom","visible"===t._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,t){if(1&e&&(Lo(0,"div",0),Uo("@state.start",function(){return t._animationStart()})("@state.done",function(e){return t._animationDone(e)}),nc(1,"async"),xa(2),Fo()),2&e){let e=null;ca("mat-tooltip-handset",null==(e=ic(1,5,t._isHandset))?null:e.matches),Po("ngClass",t.tooltipClass)("@state",t._visibility),Jr(2),Sa(t.message)}},directives:[Xh],pipes:[uu],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[dR.tooltipState]},changeDetection:0}),e})(),yR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[mR],imports:[[DC,fu,rA,BC],BC,fE]}),e})();function _R(e,t){if(1&e&&(Lo(0,"mat-option",19),xa(1),Fo()),2&e){const e=t.$implicit;Po("value",e),Jr(1),Ca(" ",e," ")}}function wR(e,t){if(1&e){const e=Bo();Lo(0,"mat-form-field",16),Lo(1,"mat-select",17),Uo("selectionChange",function(t){return Pt(e),Xo(2)._changePageSize(t.value)}),Io(2,_R,2,2,"mat-option",18),Fo(),Fo()}if(2&e){const e=Xo(2);Po("appearance",e._formFieldAppearance)("color",e.color),Jr(1),Po("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),Jr(1),Po("ngForOf",e._displayedPageSizeOptions)}}function xR(e,t){if(1&e&&(Lo(0,"div",20),xa(1),Fo()),2&e){const e=Xo(2);Jr(1),Sa(e.pageSize)}}function SR(e,t){if(1&e&&(Lo(0,"div",12),Lo(1,"div",13),xa(2),Fo(),Io(3,wR,3,6,"mat-form-field",14),Io(4,xR,2,1,"div",15),Fo()),2&e){const e=Xo();Jr(2),Ca(" ",e._intl.itemsPerPageLabel," "),Jr(1),Po("ngIf",e._displayedPageSizeOptions.length>1),Jr(1),Po("ngIf",e._displayedPageSizeOptions.length<=1)}}function CR(e,t){if(1&e){const e=Bo();Lo(0,"button",21),Uo("click",function(){return Pt(e),Xo().firstPage()}),ln(),Lo(1,"svg",7),No(2,"path",22),Fo(),Fo()}if(2&e){const e=Xo();Po("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),Ro("aria-label",e._intl.firstPageLabel)}}function kR(e,t){if(1&e){const e=Bo();ln(),cn(),Lo(0,"button",23),Uo("click",function(){return Pt(e),Xo().lastPage()}),ln(),Lo(1,"svg",7),No(2,"path",24),Fo(),Fo()}if(2&e){const e=Xo();Po("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),Ro("aria-label",e._intl.lastPageLabel)}}let ER=(()=>{class e{constructor(){this.changes=new S,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,t,n)=>{if(0==n||0==t)return`0 of ${n}`;const i=e*t;return`${i+1} \u2013 ${i<(n=Math.max(n,0))?Math.min(i+t,n):i+t} of ${n}`}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();const AR={provide:ER,deps:[[new gi,new vi,ER]],useFactory:function(e){return e||new ER}},RR=new Yn("MAT_PAGINATOR_DEFAULT_OPTIONS");class TR{}const IR=HC(GC(TR));let DR=(()=>{class e extends IR{constructor(e,t,n){if(super(),this._intl=e,this._changeDetectorRef=t,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new lc,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),n){const{pageSize:e,pageSizeOptions:t,hidePageSize:i,showFirstLastButtons:r}=n;null!=e&&(this._pageSize=e),null!=t&&(this._pageSizeOptions=t),null!=i&&(this._hidePageSize=i),null!=r&&(this._showFirstLastButtons=r)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(zS(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=zS(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(zS(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(e=>zS(e)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=NS(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=NS(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex++,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex--,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const t=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(t)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,t)=>e-t),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return e.\u0275fac=function(t){return new(t||e)(Oo(ER),Oo(xl),Oo(void 0))},e.\u0275dir=Xe({type:e,inputs:{pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",color:"color"},outputs:{page:"page"},features:[mo]}),e})(),OR=(()=>{class e extends DR{constructor(e,t,n){super(e,t,n),n&&null!=n.formFieldAppearance&&(this._formFieldAppearance=n.formFieldAppearance)}}return e.\u0275fac=function(t){return new(t||e)(Oo(ER),Oo(xl),Oo(RR,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[mo],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"div",1),Io(2,SR,5,3,"div",2),Lo(3,"div",3),Lo(4,"div",4),xa(5),Fo(),Io(6,CR,3,5,"button",5),Lo(7,"button",6),Uo("click",function(){return t.previousPage()}),ln(),Lo(8,"svg",7),No(9,"path",8),Fo(),Fo(),cn(),Lo(10,"button",9),Uo("click",function(){return t.nextPage()}),ln(),Lo(11,"svg",7),No(12,"path",10),Fo(),Fo(),Io(13,kR,3,5,"button",11),Fo(),Fo(),Fo()),2&e&&(Jr(2),Po("ngIf",!t.hidePageSize),Jr(3),Ca(" ",t._intl.getRangeLabel(t.pageIndex,t.pageSize,t.length)," "),Jr(1),Po("ngIf",t.showFirstLastButtons),Jr(1),Po("matTooltip",t._intl.previousPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),Ro("aria-label",t._intl.previousPageLabel),Jr(3),Po("matTooltip",t._intl.nextPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),Ro("aria-label",t._intl.nextPageLabel),Jr(3),Po("ngIf",t.showFirstLastButtons))},directives:[eu,Fk,vR,FA,iR,Qh,Rk],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}\n"],encapsulation:2,changeDetection:0}),e})(),PR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[AR],imports:[[fu,Nk,sR,yR,BC]]}),e})();const MR=[[["caption"]],[["colgroup"],["col"]]],LR=["caption","colgroup, col"];function FR(e){return class extends e{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=NS(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const NR=new Yn("CDK_TABLE");let zR=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl))},e.\u0275dir=Xe({type:e,selectors:[["","cdkCellDef",""]]}),e})(),VR=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl))},e.\u0275dir=Xe({type:e,selectors:[["","cdkHeaderCellDef",""]]}),e})(),jR=(()=>{class e{constructor(e){this.template=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl))},e.\u0275dir=Xe({type:e,selectors:[["","cdkFooterCellDef",""]]}),e})();class BR{}const HR=FR(BR);let qR=(()=>{class e extends HR{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const t=this._stickyEnd;this._stickyEnd=NS(e),this._hasStickyChanged=t!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return e.\u0275fac=function(t){return new(t||e)(Oo(NR,8))},e.\u0275dir=Xe({type:e,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,t,n){if(1&e&&(xc(n,zR,1),xc(n,VR,1),xc(n,jR,1)),2&e){let e;_c(e=Sc())&&(t.cell=e.first),_c(e=Sc())&&(t.headerCell=e.first),_c(e=Sc())&&(t.footerCell=e.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[qa([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:e}]),mo]}),e})();class $R{constructor(e,t){const n=t.nativeElement.classList;for(const i of e._columnCssClassName)n.add(i)}}let UR=(()=>{class e extends $R{constructor(e,t){super(e,t)}}return e.\u0275fac=function(t){return new(t||e)(Oo(qR),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[mo]}),e})(),WR=(()=>{class e extends $R{constructor(e,t){super(e,t)}}return e.\u0275fac=function(t){return new(t||e)(Oo(qR),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:["role","gridcell",1,"cdk-cell"],features:[mo]}),e})();class GR{constructor(){this.tasks=[],this.endTasks=[]}}const YR=new Yn("_COALESCED_STYLE_SCHEDULER");let ZR=(()=>{class e{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new S}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new GR,this._getScheduleObservable().pipe(dv(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new GR;for(const t of e.tasks)t();for(const t of e.endTasks)t()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?F(Promise.resolve(void 0)):this._ngZone.onStable.pipe(gv(1))}}return e.\u0275fac=function(t){return new(t||e)(ui(Zc))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),XR=(()=>{class e{constructor(e,t){this.template=e,this._differs=t}ngOnChanges(e){if(!this._columnsDiffer){const t=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(t).create(),this._columnsDiffer.diff(t)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof JR?e.headerCell.template:this instanceof nT?e.footerCell.template:e.cell.template}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl),Oo(ml))},e.\u0275dir=Xe({type:e,features:[lt]}),e})();class KR extends XR{}const QR=FR(KR);let JR=(()=>{class e extends QR{constructor(e,t,n){super(e,t),this._table=n}ngOnChanges(e){super.ngOnChanges(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl),Oo(ml),Oo(NR,8))},e.\u0275dir=Xe({type:e,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[mo,lt]}),e})();class eT extends XR{}const tT=FR(eT);let nT=(()=>{class e extends tT{constructor(e,t,n){super(e,t),this._table=n}ngOnChanges(e){super.ngOnChanges(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl),Oo(ml),Oo(NR,8))},e.\u0275dir=Xe({type:e,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[mo,lt]}),e})(),iT=(()=>{class e extends XR{constructor(e,t,n){super(e,t),this._table=n}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl),Oo(ml),Oo(NR,8))},e.\u0275dir=Xe({type:e,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[mo]}),e})(),rT=(()=>{class e{constructor(t){this._viewContainer=t,e.mostRecentCellOutlet=this}ngOnDestroy(){e.mostRecentCellOutlet===this&&(e.mostRecentCellOutlet=null)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll))},e.\u0275dir=Xe({type:e,selectors:[["","cdkCellOutlet",""]]}),e.mostRecentCellOutlet=null,e})(),sT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&jo(0,0)},directives:[rT],encapsulation:2}),e})(),oT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&jo(0,0)},directives:[rT],encapsulation:2}),e})(),aT=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl))},e.\u0275dir=Xe({type:e,selectors:[["ng-template","cdkNoDataRow",""]]}),e})();const lT=["top","bottom","left","right"];class cT{constructor(e,t,n,i,r=!0,s=!0,o){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=n,this._coalescedStyleScheduler=i,this._isBrowser=r,this._needsPositionStickyOnElement=s,this._positionListener=o,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const n=[];for(const i of e)if(i.nodeType===i.ELEMENT_NODE){n.push(i);for(let e=0;e<i.children.length;e++)n.push(i.children[e])}this._scheduleStyleChanges(()=>{for(const e of n)this._removeStickyStyle(e,t)})}updateStickyColumns(e,t,n,i=!0){if(!e.length||!this._isBrowser||!t.some(e=>e)&&!n.some(e=>e))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const r=e[0],s=r.children.length,o=this._getCellWidths(r,i),a=this._getStickyStartColumnPositions(o,t),l=this._getStickyEndColumnPositions(o,n),c=t.lastIndexOf(!0),h=n.indexOf(!0);this._scheduleStyleChanges(()=>{const i="rtl"===this.direction,r=i?"right":"left",u=i?"left":"right";for(const o of e)for(let e=0;e<s;e++){const i=o.children[e];t[e]&&this._addStickyStyle(i,r,a[e],e===c),n[e]&&this._addStickyStyle(i,u,l[e],e===h)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===c?[]:o.slice(0,c+1).map((e,n)=>t[n]?e:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===h?[]:o.slice(h).map((e,t)=>n[t+h]?e:null).reverse()}))})}stickRows(e,t,n){if(!this._isBrowser)return;const i="bottom"===n?e.slice().reverse():e,r="bottom"===n?t.slice().reverse():t,s=[],o=[],a=[];for(let c=0,h=0;c<i.length;c++){if(s[c]=h,!r[c])continue;const e=i[c];a[c]=this._isNativeHtmlTable?Array.from(e.children):[e];const t=e.getBoundingClientRect().height;h+=t,o[c]=t}const l=r.lastIndexOf(!0);this._scheduleStyleChanges(()=>{var e,t;for(let o=0;o<i.length;o++){if(!r[o])continue;const e=s[o],t=o===l;for(const i of a[o])this._addStickyStyle(i,n,e,t)}"top"===n?null===(e=this._positionListener)||void 0===e||e.stickyHeaderRowsUpdated({sizes:o,elements:a}):null===(t=this._positionListener)||void 0===t||t.stickyFooterRowsUpdated({sizes:o,elements:a})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const n=e.querySelector("tfoot");this._scheduleStyleChanges(()=>{t.some(e=>!e)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const n of t)e.style[n]="",e.classList.remove(this._borderCellCss[n]);lT.some(n=>-1===t.indexOf(n)&&e.style[n])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,n,i){e.classList.add(this._stickCellCss),i&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${n}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let n=0;for(const i of lT)e.style[i]&&(n+=t[i]);return n?`${n}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const n=[],i=e.children;for(let r=0;r<i.length;r++)n.push(i[r].getBoundingClientRect().width);return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(e,t){const n=[];let i=0;for(let r=0;r<e.length;r++)t[r]&&(n[r]=i,i+=e[r]);return n}_getStickyEndColumnPositions(e,t){const n=[];let i=0;for(let r=e.length;r>0;r--)t[r]&&(n[r]=i,i+=e[r]);return n}_scheduleStyleChanges(e){this._coalescedStyleScheduler?this._coalescedStyleScheduler.schedule(e):e()}}const hT=new Yn("CDK_SPL");let uT=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","rowOutlet",""]]}),e})(),dT=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","headerRowOutlet",""]]}),e})(),pT=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","footerRowOutlet",""]]}),e})(),fT=(()=>{class e{constructor(e,t){this.viewContainer=e,this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Xa))},e.\u0275dir=Xe({type:e,selectors:[["","noDataRowOutlet",""]]}),e})(),mT=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,h){this._differs=e,this._changeDetectorRef=t,this._elementRef=n,this._dir=r,this._platform=o,this._viewRepeater=a,this._coalescedStyleScheduler=l,this._stickyPositioningListener=c,this._viewportRuler=h,this._onDestroy=new S,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.viewChange=new Jg({start:0,end:Number.MAX_VALUE}),i||this._elementRef.nativeElement.setAttribute("role","grid"),this._document=s,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=NS(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=NS(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,t)=>this.trackBy?this.trackBy(t.dataIndex,t.data):t),this._viewportRuler&&this._viewportRuler.change().pipe(dv(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const e=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||e,this._forceRecalculateCellWidths=e,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){this._rowOutlet.viewContainer.clear(),this._noDataRowOutlet.viewContainer.clear(),this._headerRowOutlet.viewContainer.clear(),this._footerRowOutlet.viewContainer.clear(),this._cachedRenderRowsMap.clear(),this._onDestroy.next(),this._onDestroy.complete(),lE(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return void this._updateNoDataRow();const t=this._rowOutlet.viewContainer;this._viewRepeater?this._viewRepeater.applyChanges(e,t,(e,t,n)=>this._getEmbeddedViewArgs(e.item,n),e=>e.item.data,e=>{1===e.operation&&e.context&&this._renderCellTemplateForItem(e.record.item.rowDef,e.context)}):e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const t=e.item;this._renderRow(this._rowOutlet,t.rowDef,i,{$implicit:t.data})}else if(null==i)t.remove(n);else{const e=t.get(n);t.move(e,i)}}),this._updateRowIndexContext(),e.forEachIdentityChange(e=>{t.get(e.currentIndex).context.$implicit=e.item.data}),this._updateNoDataRow(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),t=this._elementRef.nativeElement.querySelector("thead");t&&(t.style.display=e.length?"":"none");const n=this._headerRowDefs.map(e=>e.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,n,"top"),this._headerRowDefs.forEach(e=>e.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),t=this._elementRef.nativeElement.querySelector("tfoot");t&&(t.style.display=e.length?"":"none");const n=this._footerRowDefs.map(e=>e.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(e=>e.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),t=this._getRenderedRows(this._rowOutlet),n=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...t,...n],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((e,t)=>{this._addStickyColumnStyles([e],this._headerRowDefs[t])}),this._rowDefs.forEach(e=>{const n=[];for(let i=0;i<t.length;i++)this._renderRows[i].rowDef===e&&n.push(t[i]);this._addStickyColumnStyles(n,e)}),n.forEach((e,t)=>{this._addStickyColumnStyles([e],this._footerRowDefs[t])}),Array.from(this._columnDefsByName.values()).forEach(e=>e.resetStickyChanged())}_getAllRenderRows(){const e=[],t=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let n=0;n<this._data.length;n++){let i=this._data[n];const r=this._getRenderRowsForData(i,n,t.get(i));this._cachedRenderRowsMap.has(i)||this._cachedRenderRowsMap.set(i,new WeakMap);for(let t=0;t<r.length;t++){let n=r[t];const i=this._cachedRenderRowsMap.get(n.data);i.has(n.rowDef)?i.get(n.rowDef).push(n):i.set(n.rowDef,[n]),e.push(n)}}return e}_getRenderRowsForData(e,t,n){return this._getRowDefs(e,t).map(i=>{const r=n&&n.has(i)?n.get(i):[];if(r.length){const e=r.shift();return e.dataIndex=t,e}return{data:e,rowDef:i,dataIndex:t}})}_cacheColumnDefs(){this._columnDefsByName.clear(),gT(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(e=>{this._columnDefsByName.has(e.name),this._columnDefsByName.set(e.name,e)})}_cacheRowDefs(){this._headerRowDefs=gT(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=gT(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=gT(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(e=>!e.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(e,t)=>e||!!t.getColumnsDiff(),t=this._rowDefs.reduce(e,!1);t&&this._forceRenderDataRows();const n=this._headerRowDefs.reduce(e,!1);n&&this._forceRenderHeaderRows();const i=this._footerRowDefs.reduce(e,!1);return i&&this._forceRenderFooterRows(),t||n||i}_switchDataSource(e){this._data=[],lE(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;var t;lE(this.dataSource)?e=this.dataSource.connect(this):(t=this.dataSource)&&(t instanceof b||"function"==typeof t.lift&&"function"==typeof t.subscribe)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=xf(this.dataSource)),this._renderChangeSubscription=e.pipe(dv(this._onDestroy)).subscribe(e=>{this._data=e||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,t)=>this._renderRow(this._headerRowOutlet,e,t)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,t)=>this._renderRow(this._footerRowOutlet,e,t)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,t){const n=Array.from(t.columns||[]).map(e=>this._columnDefsByName.get(e)),i=n.map(e=>e.sticky),r=n.map(e=>e.stickyEnd);this._stickyStyler.updateStickyColumns(e,i,r,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const t=[];for(let n=0;n<e.viewContainer.length;n++){const i=e.viewContainer.get(n);t.push(i.rootNodes[0])}return t}_getRowDefs(e,t){if(1==this._rowDefs.length)return[this._rowDefs[0]];let n=[];if(this.multiTemplateDataRows)n=this._rowDefs.filter(n=>!n.when||n.when(t,e));else{let i=this._rowDefs.find(n=>n.when&&n.when(t,e))||this._defaultRowDef;i&&n.push(i)}return n}_getEmbeddedViewArgs(e,t){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:t}}_renderRow(e,t,n,i={}){const r=e.viewContainer.createEmbeddedView(t.template,i,n);return this._renderCellTemplateForItem(t,i),r}_renderCellTemplateForItem(e,t){for(let n of this._getCellTemplates(e))rT.mostRecentCellOutlet&&rT.mostRecentCellOutlet._viewContainer.createEmbeddedView(n,t);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let t=0,n=e.length;t<n;t++){const i=e.get(t).context;i.count=n,i.first=0===t,i.last=t===n-1,i.even=t%2==0,i.odd=!i.even,this.multiTemplateDataRows?(i.dataIndex=this._renderRows[t].dataIndex,i.renderIndex=t):i.index=this._renderRows[t].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,t=>{const n=this._columnDefsByName.get(t);return e.extractCellTemplate(n)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),t=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const n of t){const t=this._document.createElement(n.tag);t.setAttribute("role","rowgroup");for(const e of n.outlets)t.appendChild(e.elementRef.nativeElement);e.appendChild(t)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(e,t)=>e||t.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new cT(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:xf()).pipe(dv(this._onDestroy)).subscribe(e=>{this._stickyStyler.direction=e,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(e=>!e._table||e._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(e){const t=0===this._rowOutlet.viewContainer.length;if(t!==this._isShowingNoDataRow){const n=this._noDataRowOutlet.viewContainer;t?n.createEmbeddedView(e.templateRef):n.clear(),this._isShowingNoDataRow=t}}}}return e.\u0275fac=function(t){return new(t||e)(Oo(ml),Oo(xl),Oo(Xa),Wn("role"),Oo(PC,8),Oo(Rh),Oo(qS),Oo(uE,8),Oo(YR,8),Oo(hT,12),Oo(pE,8))},e.\u0275cmp=$e({type:e,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,t,n){if(1&e&&(xc(n,aT,1),xc(n,qR,1),xc(n,iT,1),xc(n,JR,1),xc(n,nT,1)),2&e){let e;_c(e=Sc())&&(t._noDataRow=e.first),_c(e=Sc())&&(t._contentColumnDefs=e),_c(e=Sc())&&(t._contentRowDefs=e),_c(e=Sc())&&(t._contentHeaderRowDefs=e),_c(e=Sc())&&(t._contentFooterRowDefs=e)}},viewQuery:function(e,t){if(1&e&&(wc(uT,3),wc(dT,3),wc(pT,3),wc(fT,3)),2&e){let e;_c(e=Sc())&&(t._rowOutlet=e.first),_c(e=Sc())&&(t._headerRowOutlet=e.first),_c(e=Sc())&&(t._footerRowOutlet=e.first),_c(e=Sc())&&(t._noDataRowOutlet=e.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,t){2&e&&ca("cdk-table-fixed-layout",t.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},exportAs:["cdkTable"],features:[qa([{provide:NR,useExisting:e},{provide:uE,useClass:cE},{provide:YR,useClass:ZR},{provide:hT,useValue:null}])],ngContentSelectors:LR,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,t){1&e&&(Qo(MR),Jo(0),Jo(1,1),jo(2,0),jo(3,1),jo(4,2),jo(5,3))},directives:[dT,uT,fT,pT],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),e})();function gT(e,t){return e.concat(Array.from(t))}let vT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[mE]]}),e})();const bT=[[["caption"]],[["colgroup"],["col"]]],yT=["caption","colgroup, col"];let _T=(()=>{class e extends mT{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return e.\u0275fac=function(t){return wT(t||e)},e.\u0275cmp=$e({type:e,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,t){2&e&&ca("mat-table-fixed-layout",t.fixedLayout)},exportAs:["matTable"],features:[qa([{provide:uE,useClass:cE},{provide:mT,useExisting:e},{provide:NR,useExisting:e},{provide:YR,useClass:ZR}]),mo],ngContentSelectors:yT,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,t){1&e&&(Qo(bT),Jo(0),Jo(1,1),jo(2,0),jo(3,1),jo(4,2),jo(5,3))},directives:[dT,uT,fT,pT],styles:['mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-row::after,mat-header-row::after,mat-footer-row::after{display:inline-block;min-height:inherit;content:""}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:-webkit-sticky !important;position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n'],encapsulation:2}),e})();const wT=$n(_T);let xT=(()=>{class e extends zR{}return e.\u0275fac=function(t){return ST(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","matCellDef",""]],features:[qa([{provide:zR,useExisting:e}]),mo]}),e})();const ST=$n(xT);let CT=(()=>{class e extends VR{}return e.\u0275fac=function(t){return kT(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","matHeaderCellDef",""]],features:[qa([{provide:VR,useExisting:e}]),mo]}),e})();const kT=$n(CT);let ET=(()=>{class e extends qR{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return e.\u0275fac=function(t){return AT(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[qa([{provide:qR,useExisting:e},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:e}]),mo]}),e})();const AT=$n(ET);let RT=(()=>{class e extends UR{}return e.\u0275fac=function(t){return TT(t||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[mo]}),e})();const TT=$n(RT);let IT=(()=>{class e extends WR{}return e.\u0275fac=function(t){return DT(t||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[mo]}),e})();const DT=$n(IT);let OT=(()=>{class e extends JR{}return e.\u0275fac=function(t){return PT(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[qa([{provide:JR,useExisting:e}]),mo]}),e})();const PT=$n(OT);let MT=(()=>{class e extends iT{}return e.\u0275fac=function(t){return LT(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[qa([{provide:iT,useExisting:e}]),mo]}),e})();const LT=$n(MT);let FT=(()=>{class e extends sT{}return e.\u0275fac=function(t){return NT(t||e)},e.\u0275cmp=$e({type:e,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[qa([{provide:sT,useExisting:e}]),mo],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&jo(0,0)},directives:[rT],encapsulation:2}),e})();const NT=$n(FT);let zT=(()=>{class e extends oT{}return e.\u0275fac=function(t){return VT(t||e)},e.\u0275cmp=$e({type:e,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[qa([{provide:oT,useExisting:e}]),mo],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,t){1&e&&jo(0,0)},directives:[rT],encapsulation:2}),e})();const VT=$n(zT);let jT=(()=>{class e extends aT{}return e.\u0275fac=function(t){return BT(t||e)},e.\u0275dir=Xe({type:e,selectors:[["ng-template","matNoDataRow",""]],features:[qa([{provide:aT,useExisting:e}]),mo]}),e})();const BT=$n(jT);let HT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[vT,BC],BC]}),e})();const qT=[{id:"name",name:"Name",hidden:!1,type:"string",size:"large-col",description:"Allele name (reference allele name with SNPs in VDJbase format)"},{id:"imgt_name",name:"IMGT Name",hidden:!1,type:"string",size:"large-col",description:"Corresponding IMGT name, if any"},{id:"type",name:"Type",hidden:!1,type:"string",size:"small-col",description:"Type of gene (V, D, J, C) or element"},{id:"novel",name:"Novel",hidden:!1,type:"boolean",size:"small-col",description:"True if this allele is not in the reference set used by the pipeline"},{id:"functional",name:"Functional",hidden:!1,type:"boolean",size:"small-col",description:"True if the gene or element matches canonical/expected functional characteristics"},{id:"notes",name:"Notes",hidden:!1,type:"string",size:"small-col",description:"Notes on functionality"},{id:"deleted",name:"Deleted",hidden:!1,type:"boolean",size:"small-col",description:"True if is record indicates that the associated gene is deleted in the corresponding haplotypes"},{id:"sequence",name:"Sequence",hidden:!1,type:"string",size:"small-col",description:"Sequence of the allele (click to display)"},{id:"gapped_sequence",name:"Gapped",hidden:!0,type:"string",size:"small-col",description:"IMGT-gapped sequence of the allele (click to display)"},{id:"appearances",name:"Appearances",hidden:!1,type:"integer",size:"small-col",description:"Number of subjects in which the allele has been inferred (click for list)"},{id:"dataset",name:"Dataset",hidden:!0,type:"string",size:"small-col",description:"The dataset in which the allele was determined"}];var $T=function(e){return e[e.TEXT_MODE=0]="TEXT_MODE",e[e.NUMBER_MODE=1]="NUMBER_MODE",e[e.DATE_MODE=2]="DATE_MODE",e[e.BOOL_MODE=3]="BOOL_MODE",e}({});let UT=(()=>{class e{loadSavedInfo(e,t){if(t){if(!localStorage)return;let n=localStorage.getItem(`table-params-${t}`);if(n&&"{}"!==n)try{let e=JSON.parse(n);return e=new Map(e),e}catch(cj){n=null}return!n&&t&&this.saveInfo(e,t),e}}saveInfo(e,t){if(t){if(!localStorage)return;const n=Array.from(e),i=JSON.stringify(n);localStorage.setItem(`table-params-${t}`,i)}}mapToObj(e){return Array.from(e).reduce((e,[t,n])=>(e[t]=n,e),{})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),WT=(()=>{class e{constructor(){this.selection=new Jg({names:[],onlySelected:!1}),this.source=this.selection.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),GT=(()=>{class e{constructor(){this.selection=new Jg({ids:[]}),this.source=this.selection.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const YT=["*"];function ZT(e){return Error(`Unable to find icon with the name "${e}"`)}function XT(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function KT(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class QT{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let JT=(()=>{class e{constructor(e,t,n,i){this._httpClient=e,this._sanitizer=t,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}addSvgIconLiteral(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}addSvgIconInNamespace(e,t,n,i){return this._addSvgIconConfig(e,t,new QT(n,null,i))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,n,i){const r=this._sanitizer.sanitize(er.HTML,n);if(!r)throw KT(n);return this._addSvgIconConfig(e,t,new QT("",r,i))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,n){return this._addSvgIconSetConfig(e,new QT(t,null,n))}addSvgIconSetLiteralInNamespace(e,t,n){const i=this._sanitizer.sanitize(er.HTML,t);if(!i)throw KT(t);return this._addSvgIconSetConfig(e,new QT("",i,n))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const t=this._sanitizer.sanitize(er.RESOURCE_URL,e);if(!t)throw XT(e);const n=this._cachedIconsByUrl.get(t);return n?xf(eI(n)):this._loadSvgIconFromConfig(new QT(e,null)).pipe(Ev(e=>this._cachedIconsByUrl.set(t,e)),E(e=>eI(e)))}getNamedSvgIcon(e,t=""){const n=tI(t,e);let i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);if(i=this._getIconConfigFromResolvers(t,e),i)return this._svgIconConfigs.set(n,i),this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(t);return r?this._getSvgFromIconSetConfigs(e,r):Ov(ZT(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?xf(eI(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(E(e=>eI(e)))}_getSvgFromIconSetConfigs(e,t){const n=this._extractIconWithNameFromAnySet(e,t);return n?xf(n):sm(t.filter(e=>!e.svgText).map(e=>this._loadSvgIconSetFromConfig(e).pipe(Ly(t=>{const n=this._sanitizer.sanitize(er.RESOURCE_URL,e.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${t.message}`)),xf(null)})))).pipe(E(()=>{const n=this._extractIconWithNameFromAnySet(e,t);if(!n)throw ZT(e);return n}))}_extractIconWithNameFromAnySet(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.svgText&&i.svgText.indexOf(e)>-1){const t=this._svgElementFromConfig(i),n=this._extractSvgIconFromSet(t,e,i.options);if(n)return n}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ev(t=>e.svgText=t),E(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?xf(null):this._fetchIcon(e).pipe(Ev(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,n){const i=e.querySelector(`[id="${t}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(r),this._setSvgAttributes(s,n)}_svgElementFromString(e){const t=this._document.createElement("DIV");t.innerHTML=e;const n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){const t=this._svgElementFromString("<svg></svg>"),n=e.attributes;for(let i=0;i<n.length;i++){const{name:e,value:r}=n[i];"id"!==e&&t.setAttribute(e,r)}for(let i=0;i<e.childNodes.length;i++)e.childNodes[i].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[i].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){var t;const{url:n,options:i}=e,r=null!==(t=null==i?void 0:i.withCredentials)&&void 0!==t&&t;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(er.RESOURCE_URL,n);if(!s)throw XT(n);const o=this._inProgressUrlFetches.get(s);if(o)return o;const a=this._httpClient.get(s,{responseType:"text",withCredentials:r}).pipe(Qy(()=>this._inProgressUrlFetches.delete(s)),J());return this._inProgressUrlFetches.set(s,a),a}_addSvgIconConfig(e,t,n){return this._svgIconConfigs.set(tI(e,t),n),this}_addSvgIconSetConfig(e,t){const n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){const t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let i=0;i<this._resolvers.length;i++){const r=this._resolvers[i](t,e);if(r)return(n=r).url&&n.options?new QT(r.url,null,r.options):new QT(r,null)}var n}}return e.\u0275fac=function(t){return new(t||e)(ui(qf,8),ui(Uu),ui(Rh,8),ui(ar))},e.\u0275prov=de({factory:function(){return new e(ui(qf,8),ui(Uu),ui(Rh,8),ui(ar))},token:e,providedIn:"root"}),e})();function eI(e){return e.cloneNode(!0)}function tI(e,t){return e+":"+t}class nI{constructor(e){this._elementRef=e}}const iI=qC(nI),rI=new Yn("mat-icon-location",{providedIn:"root",factory:function(){const e=di(Rh),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),sI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],oI=sI.map(e=>`[${e}]`).join(", "),aI=/^url\(['"]?#(.*?)['"]?\)$/;let lI=(()=>{class e extends iI{constructor(e,t,n,i,r){super(e),this._iconRegistry=t,this._location=i,this._errorHandler=r,this._inline=!1,this._currentIconFetch=u.EMPTY,n||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=NS(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const t=e.querySelectorAll("style");for(let i=0;i<t.length;i++)t[i].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){const n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const t=this._elementsWithExternalReferences;t&&t.forEach((t,n)=>{t.forEach(t=>{n.setAttribute(t.name,`url('${e}#${t.value}')`)})})}_cacheChildrenWithExternalReferences(e){const t=e.querySelectorAll(oI),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<t.length;i++)sI.forEach(e=>{const r=t[i],s=r.getAttribute(e),o=s?s.match(aI):null;if(o){let t=n.get(r);t||(t=[],n.set(r,t)),t.push({name:e,value:o[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[t,n]=this._splitIconName(e);t&&(this._svgNamespace=t),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,t).pipe(gv(1)).subscribe(e=>this._setSvgElement(e),e=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${t}:${n}! ${e.message}`))})}}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(JT),Wn("aria-hidden"),Oo(rI),Oo(ar))},e.\u0275cmp=$e({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,t){2&e&&(Ro("data-mat-icon-type",t._usingFontIcon()?"font":"svg")("data-mat-icon-name",t._svgName||t.fontIcon)("data-mat-icon-namespace",t._svgNamespace||t.fontSet),ca("mat-icon-inline",t.inline)("mat-icon-no-color","primary"!==t.color&&"accent"!==t.color&&"warn"!==t.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[mo],ngContentSelectors:YT,decls:1,vars:0,template:function(e,t){1&e&&(Qo(),Jo(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),e})(),cI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[BC],BC]}),e})();function hI(e){const{subscriber:t,counter:n,period:i}=e;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}function uI(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function dI(e,t){const n=t?"":"none";uI(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function pI(e,t){const n=e.style;n.position=t?"":"fixed",n.top=n.opacity=t?"":"0",n.left=t?"":"-999em"}function fI(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function mI(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}function gI(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function vI(e,t,n){const{top:i,bottom:r,left:s,right:o}=e;return n>=i&&n<=r&&t>=s&&t<=o}function bI(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function yI(e,t,n,i){const{top:r,right:s,bottom:o,left:a,width:l,height:c}=e,h=l*t,u=c*t;return i>r-u&&i<o+u&&n>a-h&&n<s+h}class _I{constructor(e,t){this._document=e,this._viewportRuler=t,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:gI(e)})})}handleScroll(e){const t=e.target,n=this.positions.get(t);if(!n)return null;const i=t===this._document?t.documentElement:t,r=n.scrollPosition;let s,o;if(t===this._document){const e=this._viewportRuler.getViewportScrollPosition();s=e.top,o=e.left}else s=t.scrollTop,o=t.scrollLeft;const a=r.top-s,l=r.left-o;return this.positions.forEach((e,n)=>{e.clientRect&&t!==n&&i.contains(n)&&bI(e.clientRect,a,l)}),r.top=s,r.left=o,{top:a,left:l}}}function wI(e){const t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<n.length;r++)n[r].removeAttribute("id");return"canvas"===i?kI(e,t):"input"!==i&&"select"!==i&&"textarea"!==i||CI(e,t),xI("canvas",e,t,kI),xI("input, textarea, select",e,t,CI),t}function xI(e,t,n,i){const r=t.querySelectorAll(e);if(r.length){const t=n.querySelectorAll(e);for(let e=0;e<r.length;e++)i(r[e],t[e])}}let SI=0;function CI(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${SI++}`)}function kI(e,t){const n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(cj){}}const EI=XS({passive:!0}),AI=XS({passive:!1});class RI{constructor(e,t,n,i,r,s){this._config=t,this._document=n,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new S,this._pointerMoveSubscription=u.EMPTY,this._pointerUpSubscription=u.EMPTY,this._scrollSubscription=u.EMPTY,this._resizeSubscription=u.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new S,this.started=new S,this.released=new S,this.ended=new S,this.entered=new S,this.exited=new S,this.dropped=new S,this.moved=this._moveEvents,this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const t=this._handles.find(t=>{const n=e.target;return!!n&&(n===t||t.contains(n))});!t||this._disabledHandles.has(t)||this.disabled||this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{const t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging){if(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const t=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),n=this._dropContainer;if(!t)return void this._endDragSequence(e);n&&(n.isDragging()||n.isReceiving())||(e.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect())),e.preventDefault();const n=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,t);else{const e=this._activeTransform;e.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:e,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{this._endDragSequence(e)},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new _I(n,r),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=NS(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>dI(e,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(e=>BS(e)),this._handles.forEach(e=>dI(e,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(e=>{this._handles.indexOf(e)>-1&&t.add(e)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=BS(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,AI),t.addEventListener("touchstart",this._pointerDown,EI)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?BS(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&DI(this._rootElement),DI(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),dI(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),dI(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&DI(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&DI(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(e){OI(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const e=this._rootElement,n=e.parentNode,i=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),o=this._getShadowRoot();n.insertBefore(s,e),pI(e,!1),this._document.body.appendChild(n.replaceChild(r,e)),function(e,t){return t||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body}(this._document,o).appendChild(i),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),i=OI(t),r=!i&&0!==t.button,s=this._rootElement,o=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),n||r||o)return;this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor||"",s.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{this._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=gI(this._boundaryElement));const a=this._previewTemplate;this._pickupPositionInElement=a&&a.template&&!a.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){pI(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),r=this._getDragDistance(this._getPointerPositionOnPage(e)),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:r}),t.drop(this,n,this._initialIndex,this._initialContainer,s,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:i}){let r=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,e,t,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(n,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._preview.style.transform=TI(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,n=e?e.template:null;let i;if(n&&e){const t=e.matchSize?this._rootElement.getBoundingClientRect():null,r=e.viewContainer.createEmbeddedView(n,e.context);r.detectChanges(),i=PI(r,this._document),this._previewRef=r,e.matchSize?MI(i,t):i.style.transform=TI(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement;i=wI(e),MI(i,e.getBoundingClientRect())}return uI(i.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:`${this._config.zIndex||1e3}`}),dI(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(e=>i.classList.add(e)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=TI(e.left,e.top);const t=function(e){const t=getComputedStyle(e),n=mI(t,"transition-property"),i=n.find(e=>"transform"===e||"all"===e);if(!i)return 0;const r=n.indexOf(i),s=mI(t,"transition-duration"),o=mI(t,"transition-delay");return fI(s[r])+fI(o[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const n=t=>{(!t||t.target===this._preview&&"transform"===t.propertyName)&&(this._preview.removeEventListener("transitionend",n),e(),clearTimeout(i))},i=setTimeout(n,1.5*t);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=PI(this._placeholderRef,this._document)):n=wI(this._rootElement),n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t){const n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,s=OI(t)?t.targetTouches[0]:t,o=this._getViewportScrollPosition();return{x:r.left-n.left+(s.pageX-r.left-o.left),y:r.top-n.top+(s.pageY-r.top-o.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),n=OI(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,r=n.pageY-t.top;if(this._ownerSVGElement){const e=this._ownerSVGElement.getScreenCTM();if(e){const t=this._ownerSVGElement.createSVGPoint();return t.x=i,t.y=r,t.matrixTransform(e.inverse())}}return{x:i,y:r}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:i}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:t}=this._pickupPositionInElement,r=this._boundaryRect,s=this._previewRect,o=r.top+t,a=r.bottom-(s.height-t);n=II(n,r.left+e,r.right-(s.width-e)),i=II(i,o,a)}return{x:n,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:n}=e,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-r.x),o=Math.abs(n-r.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>r.x?1:-1,r.x=t),o>this._config.pointerDirectionChangeThreshold&&(i.y=n>r.y?1:-1,r.y=n),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,dI(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,AI),e.removeEventListener("touchstart",this._pointerDown,EI)}_applyRootElementTransform(e,t){const n=TI(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===i.width&&0===i.height)return;const r=n.left-i.left,s=i.right-n.right,o=n.top-i.top,a=i.bottom-n.bottom;n.width>i.width?(r>0&&(e+=r),s>0&&(e-=s)):e=0,n.height>i.height?(o>0&&(t+=o),a>0&&(t-=a)):t=0,e===this._passiveTransform.x&&t===this._passiveTransform.y||this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:OI(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const n=e.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&bI(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=QS(this._rootElement)),this._cachedShadowRoot}}function TI(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function II(e,t,n){return Math.max(t,Math.min(n,e))}function DI(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function OI(e){return"t"===e.type[0]}function PI(e,t){const n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];const i=t.createElement("div");return n.forEach(e=>i.appendChild(e)),i}function MI(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.transform=TI(t.left,t.top)}function LI(e,t,n){const i=FI(t,e.length-1),r=FI(n,e.length-1);if(i===r)return;const s=e[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)e[a]=e[a+o];e[r]=s}function FI(e,t){return Math.max(0,Math.min(t,e))}class NI{constructor(e,t,n,i,r){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new S,this.entered=new S,this.exited=new S,this.dropped=new S,this.sorted=new S,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=u.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new S,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(e=0,t=qg){return(!$g(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=qg),new b(n=>(n.add(t.schedule(hI,e,{subscriber:n,counter:0,period:e})),n))}(0,jk).pipe(dv(this._stopScrollTimers)).subscribe(()=>{const e=this._scrollNode,t=this.autoScrollStep;1===this._verticalScrollDirection?VI(e,-t):2===this._verticalScrollDirection&&VI(e,t),1===this._horizontalScrollDirection?jI(e,-t):2===this._horizontalScrollDirection&&jI(e,t)})},this.element=BS(e),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new _I(n,r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,n,i){let r;this._draggingStarted(),null==i?(r=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===r&&(r=this._getItemIndexFromPointerPosition(e,t,n))):r=i;const s=this._activeDraggables,o=s.indexOf(e),a=e.getPlaceholderElement();let l=s[r];if(l===e&&(l=s[r+1]),o>-1&&s.splice(o,1),l&&!this._dragDropRegistry.isDragging(l)){const t=l.getRootElement();t.parentElement.insertBefore(a,t),s.splice(r,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){const t=s[0].getRootElement();t.parentNode.insertBefore(a,t),s.unshift(e)}else BS(this.element).appendChild(a),s.push(e);a.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,i,r,s){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:r,distance:s})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&(t.filter(e=>e.isDragging()).every(t=>-1===e.indexOf(t))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=BS(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?zI("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,t=>t.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,i){if(this.sortingDisabled||!this._clientRect||!yI(this._clientRect,.05,t,n))return;const r=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,n,i);if(-1===s&&r.length>0)return;const o="horizontal"===this._orientation,a=zI(r,t=>t.drag===e),l=r[s],c=l.clientRect,h=a>s?1:-1,u=this._getItemOffsetPx(r[a].clientRect,c,h),d=this._getSiblingOffsetPx(a,r,h),p=r.slice();LI(r,a,s),this.sorted.next({previousIndex:a,currentIndex:s,container:this,item:e}),r.forEach((t,n)=>{if(p[n]===t)return;const i=t.drag===e,r=i?u:d,s=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=r,o?(s.style.transform=`translate3d(${Math.round(t.offset)}px, 0, 0)`,bI(t.clientRect,0,r)):(s.style.transform=`translate3d(0, ${Math.round(t.offset)}px, 0)`,bI(t.clientRect,r,0))}),this._previousSwap.overlaps=vI(c,t,n),this._previousSwap.drag=l.drag,this._previousSwap.delta=o?i.x:i.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,i=0,r=0;if(this._parentPositions.positions.forEach((s,o)=>{o!==this._document&&s.clientRect&&!n&&yI(s.clientRect,.05,e,t)&&([i,r]=function(e,t,n,i){const r=BI(t,i),s=HI(t,n);let o=0,a=0;if(r){const t=e.scrollTop;1===r?t>0&&(o=1):e.scrollHeight-t>e.clientHeight&&(o=2)}if(s){const t=e.scrollLeft;1===s?t>0&&(a=1):e.scrollWidth-t>e.clientWidth&&(a=2)}return[o,a]}(o,s.clientRect,e,t),(i||r)&&(n=o))}),!i&&!r){const{width:s,height:o}=this._viewportRuler.getViewportSize(),a={width:s,height:o,top:0,right:s,bottom:o,left:0};i=BI(a,t),r=HI(a,e),n=window}!n||i===this._verticalScrollDirection&&r===this._horizontalScrollDirection&&n===this._scrollNode||(this._verticalScrollDirection=i,this._horizontalScrollDirection=r,this._scrollNode=n,(i||r)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=BS(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=BS(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,clientRect:gI(t)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const e=BS(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const t=e.getRootElement();t&&(t.style.transform="")}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,n){const i="horizontal"===this._orientation,r=t[e].clientRect,s=t[e+-1*n];let o=r[i?"width":"height"]*n;if(s){const e=i?"left":"top",t=i?"right":"bottom";-1===n?o-=s.clientRect[e]-r[t]:o+=r[e]-s.clientRect[t]}return o}_getItemOffsetPx(e,t,n){const i="horizontal"===this._orientation;let r=i?t.left-e.left:t.top-e.top;return-1===n&&(r+=i?t.width-e.width:t.height-e.height),r}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const r=n[n.length-1].clientRect;return i?e>=r.right:t>=r.bottom}{const r=n[0].clientRect;return i?e<=r.left:t<=r.top}}_getItemIndexFromPointerPosition(e,t,n,i){const r="horizontal"===this._orientation,s=zI(this._itemPositions,({drag:s,clientRect:o},a,l)=>{if(s===e)return l.length<2;if(i){const e=r?i.x:i.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&e===this._previousSwap.delta)return!1}return r?t>=Math.floor(o.left)&&t<Math.floor(o.right):n>=Math.floor(o.top)&&n<Math.floor(o.bottom)});return-1!==s&&this.sortPredicate(s,e,this)?s:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&vI(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(i=>i._canReceive(e,t,n))}_canReceive(e,t,n){if(!this._clientRect||!vI(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;const r=BS(this.element);return i===r||r.contains(i)}_startReceiving(e,t){const n=this._activeSiblings;!n.has(e)&&t.every(e=>this.enterPredicate(e,this)||this._draggables.indexOf(e)>-1)&&(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:e})=>{bI(e,t.top,t.left)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=QS(BS(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function zI(e,t){for(let n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function VI(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function jI(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function BI(e,t){const{top:n,bottom:i,height:r}=e,s=.05*r;return t>=n-s&&t<=n+s?1:t>=i-s&&t<=i+s?2:0}function HI(e,t){const{left:n,right:i,width:r}=e,s=.05*r;return t>=n-s&&t<=n+s?1:t>=i-s&&t<=i+s?2:0}const qI=XS({passive:!1,capture:!0});let $I=(()=>{class e{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=e=>e.isDragging(),this.pointerMove=new S,this.pointerUp=new S,this.scroll=new S,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=e=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,qI)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,qI)}startDragging(e,t){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const e=t.type.startsWith("touch");this._globalListeners.set(e?"touchend":"mouseup",{handler:e=>this.pointerUp.next(e),options:!0}).set("scroll",{handler:e=>this.scroll.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:qI}),e||this._globalListeners.set("mousemove",{handler:e=>this.pointerMove.next(e),options:qI}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){const t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275fac=function(t){return new(t||e)(ui(Zc),ui(Rh))},e.\u0275prov=de({factory:function(){return new e(ui(Zc),ui(Rh))},token:e,providedIn:"root"}),e})();const UI={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let WI=(()=>{class e{constructor(e,t,n,i){this._document=e,this._ngZone=t,this._viewportRuler=n,this._dragDropRegistry=i}createDrag(e,t=UI){return new RI(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new NI(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return e.\u0275fac=function(t){return new(t||e)(ui(Rh),ui(Zc),ui(pE),ui($I))},e.\u0275prov=de({factory:function(){return new e(ui(Rh),ui(Zc),ui(pE),ui($I))},token:e,providedIn:"root"}),e})();const GI=new Yn("CDK_DRAG_PARENT"),YI=new Yn("CdkDropListGroup"),ZI=new Yn("CDK_DRAG_CONFIG");let XI=0;const KI=new Yn("CdkDropList");let QI=(()=>{class e{constructor(t,n,i,r,s,o,a){this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=r,this._dir=s,this._group=o,this._destroyed=new S,this.connectedTo=[],this.id="cdk-drop-list-"+XI++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new lc,this.entered=new lc,this.exited=new lc,this.sorted=new lc,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,a&&this._assignDefaults(a),this._dropListRef.enterPredicate=(e,t)=>this.enterPredicate(e.data,t.data),this._dropListRef.sortPredicate=(e,t,n)=>this.sortPredicate(e,t.data,n.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),o&&o._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=NS(e)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(yv(this._dir.value),dv(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{const n=VS(this.connectedTo).map(t=>"string"==typeof t?e._dropLists.find(e=>e.id===t):t);if(this._group&&this._group._items.forEach(e=>{-1===n.indexOf(e)&&n.push(e)}),!this._scrollableParentsResolved){const e=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(e=>e.getElementRef().nativeElement);this._dropListRef.withScrollableParents(e),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=NS(this.sortingDisabled),t.autoScrollDisabled=NS(this.autoScrollDisabled),t.autoScrollStep=zS(this.autoScrollStep,2),t.connectedTo(n.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:t,draggingDisabled:n,sortingDisabled:i,listAutoScrollDisabled:r,listOrientation:s}=e;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=r&&r,this.orientation=s||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(WI),Oo(xl),Oo(dE),Oo(PC,8),Oo(YI,12),Oo(ZI,8))},e.\u0275dir=Xe({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(Ro("id",t.id),ca("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[qa([{provide:YI,useValue:void 0},{provide:KI,useExisting:e}])]}),e._dropLists=[],e})();const JI=new Yn("CdkDragHandle");let eD=(()=>{class e{constructor(e,t){this.element=e,this._stateChanges=new S,this._disabled=!1,this._parentDrag=t}get disabled(){return this._disabled}set disabled(e){this._disabled=NS(e),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(GI,12))},e.\u0275dir=Xe({type:e,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[qa([{provide:JI,useExisting:e}])]}),e})();const tD=new Yn("CdkDragPlaceholder"),nD=new Yn("CdkDragPreview");let iD=(()=>{class e{constructor(e){this.templateRef=e,this._matchSize=!1}get matchSize(){return this._matchSize}set matchSize(e){this._matchSize=NS(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl))},e.\u0275dir=Xe({type:e,selectors:[["ng-template","cdkDragPreview",""]],inputs:{matchSize:"matchSize",data:"data"},features:[qa([{provide:nD,useExisting:e}])]}),e})(),rD=(()=>{class e{constructor(t,n,i,r,s,o,a,l,c,h,u){this.element=t,this.dropContainer=n,this._ngZone=r,this._viewContainerRef=s,this._dir=a,this._changeDetectorRef=c,this._selfHandle=h,this._parentDrag=u,this._destroyed=new S,this.started=new lc,this.released=new lc,this.ended=new lc,this.entered=new lc,this.exited=new lc,this.dropped=new lc,this.moved=new b(e=>{const t=this._dragRef.moved.pipe(E(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{t.unsubscribe()}}),this._dragRef=l.createDrag(t,{dragStartThreshold:o&&null!=o.dragStartThreshold?o.dragStartThreshold:5,pointerDirectionChangeThreshold:o&&null!=o.pointerDirectionChangeThreshold?o.pointerDirectionChangeThreshold:5,zIndex:null==o?void 0:o.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),o&&this._assignDefaults(o),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=NS(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.pipe(gv(1),dv(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(yv(this._handles),Ev(e=>{const t=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),Sv(e=>U(...e.map(e=>e._stateChanges.pipe(yv(e))))),dv(this._destroyed)).subscribe(e=>{const t=this._dragRef,n=e.element.nativeElement;e.disabled?t.disableHandle(n):t.enableHandle(n)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=e._dragInstances.indexOf(this);t>-1&&e._dragInstances.splice(t,1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,t=this.rootElementSelector?sD(e,this.rootElementSelector):e;this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?sD(this.element.nativeElement,e):BS(e):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const e=this._dir,n=this.dragStartDelay,i=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof n&&n?n:zS(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(i).withPreviewTemplate(r),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(gv(1)).subscribe(()=>{var n,i;if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(null===(n=r.classList)||void 0===n?void 0:n.contains("cdk-drag")){t.withParent((null===(i=e._dragInstances.find(e=>e.element.nativeElement===r))||void 0===i?void 0:i._dragRef)||null);break}r=r.parentElement}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:n,constrainPosition:i,previewClass:r,boundaryElement:s,draggingDisabled:o,rootElementSelector:a}=e;this.disabled=null!=o&&o,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),r&&(this.previewClass=r),s&&(this.boundaryElement=s),a&&(this.rootElementSelector=a)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(KI,12),Oo(Rh),Oo(Zc),Oo(Ll),Oo(ZI,8),Oo(PC,8),Oo(WI),Oo(xl),Oo(JI,10),Oo(GI,12))},e.\u0275dir=Xe({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){if(1&e&&(xc(n,nD,1),xc(n,tD,1),xc(n,JI,1)),2&e){let e;_c(e=Sc())&&(t._previewTemplate=e.first),_c(e=Sc())&&(t._placeholderTemplate=e.first),_c(e=Sc())&&(t._handles=e)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&ca("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[qa([{provide:GI,useExisting:e}]),lt]}),e._dragInstances=[],e})();function sD(e,t){let n=e.parentElement;for(;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}let oD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[WI],imports:[fE]}),e})(),aD=(()=>{class e{loadSavedColumnInfo(e,t){if(t){if(!localStorage)return;const n=localStorage.getItem(`${t}-columns`);return n?JSON.parse(n):(t&&this.saveColumnInfo(e,t),this.saveColumnInfo(e),e)}}saveColumnInfo(e,t){if(t){if(!localStorage)return;localStorage.setItem(`${t}-columns`,JSON.stringify(e))}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const lD=["mat-menu-item",""],cD=["*"];function hD(e,t){if(1&e){const e=Bo();Lo(0,"div",0),Uo("keydown",function(t){return Pt(e),Xo()._handleKeydown(t)})("click",function(){return Pt(e),Xo().closed.emit("click")})("@transformMenu.start",function(t){return Pt(e),Xo()._onAnimationStart(t)})("@transformMenu.done",function(t){return Pt(e),Xo()._onAnimationDone(t)}),Lo(1,"div",1),Jo(2),Fo(),Fo()}if(2&e){const e=Xo();Po("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),Ro("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const uD={transformMenu:Ku("transformMenu",[td("void",ed({opacity:0,transform:"scale(0.8)"})),id("void => enter",Qu("120ms cubic-bezier(0, 0, 0.2, 1)",ed({opacity:1,transform:"scale(1)"}))),id("* => void",Qu("100ms 25ms linear",ed({opacity:0})))]),fadeInItems:Ku("fadeInItems",[td("showing",ed({opacity:1})),id("void => *",[ed({opacity:0}),Qu("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},dD=new Yn("MatMenuContent");let pD=(()=>{class e{constructor(e,t,n,i,r,s,o){this._template=e,this._componentFactoryResolver=t,this._appRef=n,this._injector=i,this._viewContainerRef=r,this._document=s,this._changeDetectorRef=o,this._attached=new S}attach(e={}){this._portal||(this._portal=new bE(this._template,this._viewContainerRef)),this.detach(),this._outlet||(this._outlet=new wE(this._document.createElement("div"),this._componentFactoryResolver,this._appRef,this._injector));const t=this._template.elementRef.nativeElement;t.parentNode.insertBefore(this._outlet.outletElement,t),this._changeDetectorRef&&this._changeDetectorRef.markForCheck(),this._portal.attach(this._outlet,e),this._attached.next()}detach(){this._portal.isAttached&&this._portal.detach()}ngOnDestroy(){this._outlet&&this._outlet.dispose()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Rl),Oo(Wa),Oo(gh),Oo(po),Oo(Ll),Oo(Rh),Oo(xl))},e.\u0275dir=Xe({type:e,selectors:[["ng-template","matMenuContent",""]],features:[qa([{provide:dD,useExisting:e}])]}),e})();const fD=new Yn("MAT_MENU_PANEL");class mD{}const gD=$C(HC(mD));let vD=(()=>{class e extends gD{constructor(e,t,n,i){super(),this._elementRef=e,this._focusMonitor=n,this._parentMenu=i,this.role="menuitem",this._hovered=new S,this._focused=new S,this._highlighted=!1,this._triggersSubmenu=!1,i&&i.addItem&&i.addItem(this)}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,t;const n=this._elementRef.nativeElement.cloneNode(!0),i=n.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++){const t=i[r];null===(e=t.parentNode)||void 0===e||e.removeChild(t)}return(null===(t=n.textContent)||void 0===t?void 0:t.trim())||""}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Rh),Oo(AC),Oo(fD,8))},e.\u0275cmp=$e({type:e,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,t){1&e&&Uo("click",function(e){return t._checkDisabled(e)})("mouseenter",function(){return t._handleMouseEnter()}),2&e&&(Ro("role",t.role)("tabindex",t._getTabIndex())("aria-disabled",t.disabled.toString())("disabled",t.disabled||null),ca("mat-menu-item",!0)("mat-menu-item-highlighted",t._highlighted)("mat-menu-item-submenu-trigger",t._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[mo],attrs:lD,ngContentSelectors:cD,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(e,t){1&e&&(Qo(),Jo(0),No(1,"div",0)),2&e&&(Jr(1),Po("matRippleDisabled",t.disableRipple||t.disabled)("matRippleTrigger",t._getHostElement()))},directives:[mk],encapsulation:2,changeDetection:0}),e})();const bD=new Yn("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let yD=0,_D=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._ngZone=t,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new hc,this._tabSubscription=u.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new S,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new lc,this.close=this.closed,this.panelId="mat-menu-panel-"+yD++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=NS(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=NS(e)}set panelClass(e){const t=this._previousPanelClass;t&&t.length&&t.split(" ").forEach(e=>{this._classList[e]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(e=>{this._classList[e]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new dC(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(yv(this._directDescendantItems),Sv(e=>U(...e.map(e=>e._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(yv(this._directDescendantItems),Sv(e=>U(...e.map(e=>e._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const t=e.keyCode,n=this._keyManager;switch(t){case 27:OS(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:38!==t&&40!==t||n.setFocusOrigin("keyboard"),n.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(gv(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const t=this._keyManager;if(t.setFocusOrigin(e).setFirstItemActive(),!t.activeItem&&this._directDescendantItems.length){let e=this._directDescendantItems.first._getHostElement().parentElement;for(;e;){if("menu"===e.getAttribute("role")){e.focus();break}e=e.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const t=`mat-elevation-z${Math.min(4+e,24)}`,n=Object.keys(this._classList).find(e=>e.startsWith("mat-elevation-z"));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[t]=!0,this._previousElevation=t)}setPositionClasses(e=this.xPosition,t=this.yPosition){const n=this._classList;n["mat-menu-before"]="before"===e,n["mat-menu-after"]="after"===e,n["mat-menu-above"]="above"===t,n["mat-menu-below"]="below"===t}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(yv(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(e=>e._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Zc),Oo(bD))},e.\u0275dir=Xe({type:e,contentQueries:function(e,t,n){if(1&e&&(xc(n,dD,1),xc(n,vD,1),xc(n,vD,0)),2&e){let e;_c(e=Sc())&&(t.lazyContent=e.first),_c(e=Sc())&&(t._allItems=e),_c(e=Sc())&&(t.items=e)}},viewQuery:function(e,t){if(1&e&&wc(Rl,1),2&e){let e;_c(e=Sc())&&(t.templateRef=e.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),e})(),wD=(()=>{class e extends _D{constructor(e,t,n){super(e,t,n)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Zc),Oo(bD))},e.\u0275cmp=$e({type:e,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,t){2&e&&Ro("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[qa([{provide:fD,useExisting:e}]),mo],ngContentSelectors:cD,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,t){1&e&&(Qo(),Io(0,hD,3,6,"ng-template"))},directives:[Xh],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[uD.transformMenu,uD.fadeInItems]},changeDetection:0}),e})();const xD=new Yn("mat-menu-scroll-strategy"),SD={provide:xD,deps:[QE],useFactory:function(e){return()=>e.scrollStrategies.reposition()}},CD=XS({passive:!0});let kD=(()=>{class e{constructor(e,t,n,i,r,s,o,a){this._overlay=e,this._element=t,this._viewContainerRef=n,this._menuItemInstance=s,this._dir=o,this._focusMonitor=a,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=u.EMPTY,this._hoverSubscription=u.EMPTY,this._menuCloseSubscription=u.EMPTY,this._handleTouchStart=e=>{CC(e)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new lc,this.onMenuOpen=this.menuOpened,this.menuClosed=new lc,this.onMenuClose=this.menuClosed,this._scrollStrategy=i,this._parentMaterialMenu=r instanceof _D?r:void 0,t.nativeElement.addEventListener("touchstart",this._handleTouchStart,CD),s&&(s._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(e=>{this._destroyMenu(e),"click"!==e&&"tab"!==e||!this._parentMaterialMenu||this._parentMaterialMenu.closed.emit(e)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,CD),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),t=e.getConfig();this._setPosition(t.positionStrategy),t.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof _D&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const t=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==e&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,t instanceof _D?(t._resetAnimation(),t.lazyContent?t._animationDone.pipe(Cf(e=>"void"===e.toState),gv(1),dv(t.lazyContent._attached)).subscribe({next:()=>t.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),t.lazyContent&&t.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,t=this.menu.parentMenu;for(;t;)e++,t=t.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new ME({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(e=>{this.menu.setPositionClasses("start"===e.connectionPair.overlayX?"after":"before","top"===e.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[t,n]="before"===this.menu.xPosition?["end","start"]:["start","end"],[i,r]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[s,o]=[i,r],[a,l]=[t,n],c=0;this.triggersSubmenu()?(l=t="before"===this.menu.xPosition?"start":"end",n=a="end"===t?"start":"end",c="bottom"===i?8:-8):this.menu.overlapTrigger||(s="top"===i?"bottom":"top",o="top"===r?"bottom":"top"),e.withPositions([{originX:t,originY:s,overlayX:a,overlayY:i,offsetY:c},{originX:n,originY:s,overlayX:l,overlayY:i,offsetY:c},{originX:t,originY:o,overlayX:a,overlayY:r,offsetY:-c},{originX:n,originY:o,overlayX:l,overlayY:r,offsetY:-c}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),t=this._overlayRef.detachments();return U(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:xf(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Cf(e=>e!==this._menuItemInstance),Cf(()=>this._menuOpen)):xf(),t)}_handleMousedown(e){SC(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const t=e.keyCode;13!==t&&32!==t||(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===t&&"ltr"===this.dir||37===t&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Cf(e=>e===this._menuItemInstance&&!e.disabled),Lv(0,Yk)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof _D&&this.menu._isAnimating?this.menu._animationDone.pipe(gv(1),Lv(0,Yk),dv(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new bE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return e.\u0275fac=function(t){return new(t||e)(Oo(QE),Oo(Xa),Oo(Ll),Oo(xD),Oo(fD,8),Oo(vD,10),Oo(PC,8),Oo(AC))},e.\u0275dir=Xe({type:e,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(e,t){1&e&&Uo("mousedown",function(e){return t._handleMousedown(e)})("keydown",function(e){return t._handleKeydown(e)})("click",function(e){return t._handleClick(e)}),2&e&&Ro("aria-expanded",t.menuOpen||null)("aria-controls",t.menuOpen?t.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),e})(),ED=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[SD],imports:[BC]}),e})(),AD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[SD],imports:[[fu,BC,gk,rA,ED],fE,BC,ED]}),e})();const RD=["input"],TD=function(){return{enterDuration:150}},ID=["*"],DD=new Yn("mat-checkbox-default-options",{providedIn:"root",factory:OD});function OD(){return{color:"accent",clickAction:"check-indeterminate"}}let PD=0;const MD=OD(),LD={provide:lm,useExisting:se(()=>VD),multi:!0};class FD{}class ND{constructor(e){this._elementRef=e}}const zD=UC(qC($C(HC(ND))));let VD=(()=>{class e extends zD{constructor(e,t,n,i,r,s,o){super(e),this._changeDetectorRef=t,this._focusMonitor=n,this._ngZone=i,this._animationMode=s,this._options=o,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++PD,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new lc,this.indeterminateChange=new lc,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||MD,this.color=this.defaultColor=this._options.color||MD.color,this.tabIndex=parseInt(r)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=NS(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const t=NS(e);t!==this.disabled&&(this._disabled=t,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const t=e!=this._indeterminate;this._indeterminate=NS(e),t&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let t=this._currentCheckState,n=this._elementRef.nativeElement;if(t!==e&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const e=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(e)},1e3)})}}_emitChangeEvent(){const e=new FD;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(e){var t;const n=null===(t=this._options)||void 0===t?void 0:t.clickAction;e.stopPropagation(),this.disabled||"noop"===n?this.disabled||"noop"!==n||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==n&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(e,t){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,t){if("NoopAnimations"===this._animationMode)return"";let n="";switch(e){case 0:if(1===t)n="unchecked-checked";else{if(3!=t)return"";n="unchecked-indeterminate"}break;case 2:n=1===t?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===t?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===t?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${n}`}_syncIndeterminate(e){const t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(xl),Oo(AC),Oo(Zc),Wn("tabindex"),Oo(yf,8),Oo(DD,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-checkbox"]],viewQuery:function(e,t){if(1&e&&(wc(RD,1),wc(mk,1)),2&e){let e;_c(e=Sc())&&(t._inputElement=e.first),_c(e=Sc())&&(t.ripple=e.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(e,t){2&e&&(Aa("id",t.id),Ro("tabindex",null),ca("mat-checkbox-indeterminate",t.indeterminate)("mat-checkbox-checked",t.checked)("mat-checkbox-disabled",t.disabled)("mat-checkbox-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[qa([LD]),mo],ngContentSelectors:ID,decls:17,vars:20,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,t){if(1&e&&(Qo(),Lo(0,"label",0,1),Lo(2,"span",2),Lo(3,"input",3,4),Uo("change",function(e){return t._onInteractionEvent(e)})("click",function(e){return t._onInputClick(e)}),Fo(),Lo(5,"span",5),No(6,"span",6),Fo(),No(7,"span",7),Lo(8,"span",8),ln(),Lo(9,"svg",9),No(10,"path",10),Fo(),cn(),No(11,"span",11),Fo(),Fo(),Lo(12,"span",12,13),Uo("cdkObserveContent",function(){return t._onLabelTextChange()}),Lo(14,"span",14),xa(15,"\xa0"),Fo(),Jo(16),Fo(),Fo()),2&e){const e=Do(1),n=Do(13);Ro("for",t.inputId),Jr(2),ca("mat-checkbox-inner-container-no-side-margin",!n.textContent||!n.textContent.trim()),Jr(1),Po("id",t.inputId)("required",t.required)("checked",t.checked)("disabled",t.disabled)("tabIndex",t.tabIndex),Ro("value",t.value)("name",t.name)("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby)("aria-checked",t._getAriaChecked())("aria-describedby",t.ariaDescribedby),Jr(2),Po("matRippleTrigger",e)("matRippleDisabled",t._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Xl(19,TD))}},directives:[mk,tC],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),e})(),jD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})(),BD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[gk,BC,nC,jD],BC,jD]}),e})();const HD=["*",[["mat-card-footer"]]],qD=["*","mat-card-footer"];let $D=(()=>{class e{constructor(e){this._animationMode=e}}return e.\u0275fac=function(t){return new(t||e)(Oo(yf,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,t){2&e&&ca("_mat-animation-noopable","NoopAnimations"===t._animationMode)},exportAs:["matCard"],ngContentSelectors:qD,decls:2,vars:0,template:function(e,t){1&e&&(Qo(HD),Jo(0),Jo(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),e})(),UD=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[BC],BC]}),e})();function WD(e,t){if(1&e&&(Lo(0,"mat-card",12),Lo(1,"mat-icon"),xa(2,"drag_handle"),Fo(),Lo(3,"mat-checkbox",13),xa(4),Fo(),Fo()),2&e){const e=Xo().$implicit;Jr(3),Po("checked",!e.hidden),Jr(1),Ca(" ",e.name," ")}}const GD=function(e,t){return{columnIndex:e,columnTitle:t}};function YD(e,t){if(1&e){const e=Bo();Lo(0,"div",8),Uo("cdkDragDropped",function(t){return Pt(e),Xo().columnMenuDropped(t)}),Lo(1,"mat-icon",9),xa(2,"drag_handle"),Fo(),Lo(3,"mat-checkbox",10),Uo("click",function(e){return e.stopPropagation()})("change",function(){Pt(e);const n=t.$implicit;return Xo().toggleSelectedColumn(n.id)}),xa(4),Fo(),Io(5,WD,5,2,"mat-card",11),Fo()}if(2&e){const e=t.$implicit;Po("cdkDragData",Ql(5,GD,t.index,e.id)),Jr(3),Po("disabled",e.preventBeingHidden)("checked",!e.hidden)("matTooltip",e.description),Jr(1),Ca(" ",e.name," ")}}function ZD(e,t){if(1&e&&(Lo(0,"div",16),xa(1),Fo()),2&e){const e=Xo().$implicit;Jr(1),Ca(" ",e," ")}}function XD(e,t){if(1&e){const e=Bo();Lo(0,"div",17),Lo(1,"mat-checkbox",18),Uo("click",function(e){return e.stopPropagation()})("change",function(){Pt(e);const n=t.$implicit;return Xo(2).toggleSelectedColumn(n.id)}),xa(2),Fo(),Fo()}if(2&e){const e=t.$implicit;Jr(1),Po("hidden",!e.hidden)("matTooltip",e.description),Jr(1),Ca(" ",e.name," ")}}function KD(e,t){if(1&e&&(Lo(0,"div"),Io(1,ZD,2,1,"div",14),Io(2,XD,3,3,"div",15),Fo()),2&e){const e=t.$implicit,n=Xo();Jr(1),Po("ngIf","Selection"!==e),Jr(1),Po("ngForOf",n.classifiedColumnInfo[e])}}const QD=["*"];function JD(e,t){const n=new Set(e);for(const i of t)n.has(i)?n.delete(i):n.add(i);return n}let eO=(()=>{class e{constructor(e,t){this.elementRef=e,this.columnSorterService=t,this.columnsChange=new lc}ngOnInit(){const e=this.columnSorterService.loadSavedColumnInfo(this.columnInfo,this.saveName),t=new Set(this.columnInfo.map(e=>e.id)),n=new Set(e.map(e=>e.id)),i=new Set(this.columnInfo.map(e=>e.name)),r=new Set(e.map(e=>e.name));this.initialColumnInfo=Object(RS.cloneDeep)(this.columnInfo),JD(i,r).size||JD(t,n).size||(this.columnInfo=e),this.selectedColumnInfo=this.columnInfo.filter(e=>!e.hidden),this.reorderColumns(),this.emitColumns(!1)}ngAfterViewInit(){this.elementRef.nativeElement.classList+="va-mat-button-no-input"}reorderColumns(){let e=this.selectedColumnInfo;if(e=e.concat(this.columnInfo.filter(e=>e.hidden)),this.classifiedColumnInfo={},"section"in this.columnInfo[0])for(const t of this.columnInfo)t.hidden&&(t.section in this.classifiedColumnInfo||(this.classifiedColumnInfo[t.section]=[]),this.classifiedColumnInfo[t.section].push(t));else this.classifiedColumnInfo.Selection=this.columnInfo.filter(e=>e.hidden);this.sections=Object.keys(this.classifiedColumnInfo),this.columnInfo=e}columnMenuDropped(e){LI(this.selectedColumnInfo,e.item.data.columnIndex,e.currentIndex),this.reorderColumns(),this.emitColumns(!0)}toggleSelectedColumn(e){const t=this.columnInfo.find(t=>t.id===e);t.hidden=!t.hidden,this.selectedColumnInfo=this.columnInfo.filter(e=>!e.hidden),this.reorderColumns(),this.emitColumns(!0)}onResetColumns(){this.columnInfo=Object(RS.cloneDeep)(this.initialColumnInfo),this.selectedColumnInfo=this.columnInfo.filter(e=>!e.hidden),this.reorderColumns(),this.emitColumns(!0)}emitColumns(e){window.requestAnimationFrame(()=>{this.columnInfo.filter(e=>!e.hidden).map(e=>e.id),this.columnsChange.emit(this.columnInfo.filter(e=>!e.hidden).map(e=>e.id)),e&&this.columnSorterService.saveColumnInfo(this.columnInfo,this.saveName)})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(aD))},e.\u0275cmp=$e({type:e,selectors:[["digby-table-column-sorter"],["button","digby-table-column-sorter",""]],inputs:{columns:"columns",saveName:"saveName",columnInfo:"columnInfo"},outputs:{columnsChange:"columnsChange"},features:[qa([aD])],ngContentSelectors:QD,decls:12,vars:3,consts:[[2,"border-width","0px","background-color","transparent",3,"matMenuTriggerFor"],["columnMenu","matMenu"],["cdkDropList","","dkDropListLockAxis","y","cdkDropListOrientation","vertical",1,"digby-table-dragable-container"],["digby-table-column-clear","","id","col-clear-button",2,"border-width","0px !important",3,"click"],[1,"primary-icon",2,"padding-left","0px !important"],["for","col-clear-button",1,"form-check-label"],["class","dragable-row","cdkDrag","",3,"cdkDragData","cdkDragDropped",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["cdkDrag","",1,"dragable-row",3,"cdkDragData","cdkDragDropped"],["cdkDragHandle",""],["matTooltipPosition","left","matTooltipClass","digby-table-tooltip",3,"disabled","checked","matTooltip","click","change"],["class","digby-table-drag-preview",4,"cdkDragPreview"],[1,"digby-table-drag-preview"],[3,"checked"],["class","digby-table-section-header",4,"ngIf"],["class","digby-table-undragable dragable-row",4,"ngFor","ngForOf"],[1,"digby-table-section-header"],[1,"digby-table-undragable","dragable-row"],["matTooltipPosition","left","matTooltipClass","digby-table-tooltip",3,"hidden","matTooltip","click","change"]],template:function(e,t){1&e&&(Qo(),Lo(0,"button",0),Jo(1),Fo(),Lo(2,"mat-menu",null,1),Lo(4,"div",2),Lo(5,"button",3),Uo("click",function(){return t.onResetColumns()}),Lo(6,"mat-icon",4),xa(7,"clear"),Fo(),Fo(),Lo(8,"label",5),xa(9,"Reset Columns"),Fo(),Io(10,YD,6,8,"div",6),Io(11,KD,3,2,"div",7),Fo(),Fo()),2&e&&(Po("matMenuTriggerFor",Do(3)),Jr(10),Po("ngForOf",t.selectedColumnInfo),Jr(1),Po("ngForOf",t.sections))},directives:[kD,wD,QI,lI,Qh,rD,eD,VD,vR,iD,$D,eu],styles:[".va-mat-button-no-input{border:none;background:transparent;outline:none}.digby-table-dragable-container{min-width:200px}.digby-table-dragable-container .dragable-row{width:100%;line-height:14px;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.digby-table-dragable-container .dragable-row mat-checkbox,.digby-table-dragable-container .dragable-row mat-icon{vertical-align:top}.digby-table-dragable-container .dragable-row mat-icon{opacity:.15;transition:opacity .5s;margin-right:8px;padding-left:4px;color:#616161;cursor:-webkit-grab;cursor:grab}.digby-table-dragable-container .dragable-row:hover mat-icon{opacity:1}.digby-table-drag-preview{padding:4px 8px 4px 4px!important;cursor:-webkit-grabbing!important;cursor:grabbing!important;margin-top:-4px;margin-left:-4px;font-size:14px}.digby-table-drag-preview mat-checkbox,.digby-table-drag-preview mat-icon{vertical-align:top}.digby-table-drag-preview mat-icon{margin-right:8px;padding-left:4px;color:#616161}.cdk-drop-list-dragging .cdk-drag{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-animating{transition:transform .3s cubic-bezier(0,0,.2,1)}.digby-table-undragable{padding:0 0 0 32px!important}.digby-table-section-header{line-height:16px;font-size:14px;font-weight:700;padding:0 0 0 8px!important}.digby-table-tooltip{font-size:14px}"],encapsulation:2,changeDetection:0}),e})();function tO(e,t,n=3){return Math.abs(e-t)<n}function nO(e,t,n,i){const r={top:e.top,bottom:e.bottom,left:e.left,right:e.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=n),t.right&&(r.right+=n),r.height=r.bottom-r.top,r.width=r.right-r.left,r}function iO({clientY:e,rect:t}){return e>=t.top&&e<=t.bottom}function rO({clientX:e,rect:t}){return e>=t.left&&e<=t.right}function sO({clientX:e,clientY:t,elm:n,allowedEdges:i,cursorPrecision:r}){const s=n.nativeElement.getBoundingClientRect(),o={};return i.left&&tO(e,s.left,r)&&iO({clientY:t,rect:s})&&(o.left=!0),i.right&&tO(e,s.right,r)&&iO({clientY:t,rect:s})&&(o.right=!0),i.top&&tO(t,s.top,r)&&rO({clientX:e,rect:s})&&(o.top=!0),i.bottom&&tO(t,s.bottom,r)&&rO({clientX:e,rect:s})&&(o.bottom=!0),o}const oO=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function aO(e,t){return e.left&&e.top?t.topLeft:e.right&&e.top?t.topRight:e.left&&e.bottom?t.bottomLeft:e.right&&e.bottom?t.bottomRight:e.left||e.right?t.leftOrRight:e.top||e.bottom?t.topOrBottom:""}function lO({edges:e,initialRectangle:t,newRectangle:n}){const i={};return Object.keys(e).forEach(e=>{i[e]=(n[e]||0)-(t[e]||0)}),i}let cO=(()=>{class e{constructor(e,t,n,i){this.platformId=e,this.renderer=t,this.elm=n,this.zone=i,this.resizeEdges={},this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=oO,this.resizeCursorPrecision=3,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=50,this.resizeStart=new lc,this.resizing=new lc,this.resizeEnd=new lc,this.mouseup=new S,this.mousedown=new S,this.mousemove=new S,this.destroy$=new S,this.resizeEdges$=new S,this.pointerEventListeners=hO.getInstance(t,i)}ngOnInit(){const e=U(this.pointerEventListeners.pointerDown,this.mousedown),t=U(this.pointerEventListeners.pointerMove,this.mousemove).pipe(Ev(({event:e})=>{i&&e.preventDefault()}),J()),n=U(this.pointerEventListeners.pointerUp,this.mouseup);let i;const r=()=>{i&&i.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(i.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},s=()=>Object.assign({},oO,this.resizeCursors);this.resizeEdges$.pipe(yv(this.resizeEdges),E(()=>this.resizeEdges&&Object.keys(this.resizeEdges).some(e=>!!this.resizeEdges[e])),Sv(e=>e?t:Lg),Kk(this.mouseMoveThrottleMS),dv(this.destroy$)).subscribe(({clientX:e,clientY:t})=>{const n=sO({clientX:e,clientY:t,elm:this.elm,allowedEdges:this.resizeEdges,cursorPrecision:this.resizeCursorPrecision}),r=s();if(!i){const e=aO(n,r);this.renderer.setStyle(this.elm.nativeElement,"cursor",e)}this.setElementClass(this.elm,"resize-left-hover",!0===n.left),this.setElementClass(this.elm,"resize-right-hover",!0===n.right),this.setElementClass(this.elm,"resize-top-hover",!0===n.top),this.setElementClass(this.elm,"resize-bottom-hover",!0===n.bottom)}),e.pipe(j(r=>{function s(e){return{clientX:e.clientX-r.clientX,clientY:e.clientY-r.clientY}}const o=()=>{const e={x:1,y:1};return i&&(this.resizeSnapGrid.left&&i.edges.left?e.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&i.edges.right&&(e.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&i.edges.top?e.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&i.edges.bottom&&(e.y=+this.resizeSnapGrid.bottom)),e};function a(e,t){return{x:Math.ceil(e.clientX/t.x),y:Math.ceil(e.clientY/t.y)}}return U(t.pipe(gv(1)).pipe(E(e=>[,e])),t.pipe(e=>e.lift(new Qk))).pipe(E(([e,t])=>[e?s(e):e,s(t)])).pipe(Cf(([e,t])=>{if(!e)return!0;const n=o(),i=a(e,n),r=a(t,n);return i.x!==r.x||i.y!==r.y})).pipe(E(([,e])=>{const t=o();return{clientX:Math.round(e.clientX/t.x)*t.x,clientY:Math.round(e.clientY/t.y)*t.y}})).pipe(dv(U(n,e)))})).pipe(Cf(()=>!!i)).pipe(E(({clientX:e,clientY:t})=>nO(i.startingRect,i.edges,e,t))).pipe(Cf(e=>this.allowNegativeResizes||!!(e.height&&e.width&&e.height>0&&e.width>0))).pipe(Cf(e=>!this.validateResize||this.validateResize({rectangle:e,edges:lO({edges:i.edges,initialRectangle:i.startingRect,newRectangle:e})})),dv(this.destroy$)).subscribe(e=>{i&&i.clonedNode&&(this.renderer.setStyle(i.clonedNode,"height",`${e.height}px`),this.renderer.setStyle(i.clonedNode,"width",`${e.width}px`),this.renderer.setStyle(i.clonedNode,"top",`${e.top}px`),this.renderer.setStyle(i.clonedNode,"left",`${e.left}px`)),this.zone.run(()=>{this.resizing.emit({edges:lO({edges:i.edges,initialRectangle:i.startingRect,newRectangle:e}),rectangle:e})}),i.currentRect=e}),e.pipe(E(({clientX:e,clientY:t,edges:n})=>n||sO({clientX:e,clientY:t,elm:this.elm,allowedEdges:this.resizeEdges,cursorPrecision:this.resizeCursorPrecision}))).pipe(Cf(e=>Object.keys(e).length>0),dv(this.destroy$)).subscribe(e=>{i&&r();const t=function(e,t){let n=0,i=0;const r=e.nativeElement.style,s=["transform","-ms-transform","-moz-transform","-o-transform"].map(e=>r[e]).find(e=>!!e);if(s&&s.includes("translate")&&(n=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),"absolute"===t)return{height:e.nativeElement.offsetHeight,width:e.nativeElement.offsetWidth,top:e.nativeElement.offsetTop-i,bottom:e.nativeElement.offsetHeight+e.nativeElement.offsetTop-i,left:e.nativeElement.offsetLeft-n,right:e.nativeElement.offsetWidth+e.nativeElement.offsetLeft-n};{const t=e.nativeElement.getBoundingClientRect();return{height:t.height,width:t.width,top:t.top-i,bottom:t.bottom-i,left:t.left-n,right:t.right-n,scrollTop:e.nativeElement.scrollTop,scrollLeft:e.nativeElement.scrollLeft}}}(this.elm,this.ghostElementPositioning);i={edges:e,startingRect:t,currentRect:t};const n=s(),o=aO(i.edges,n);this.renderer.setStyle(document.body,"cursor",o),this.setElementClass(this.elm,"resize-active",!0),this.enableGhostResize&&(i.clonedNode=this.elm.nativeElement.cloneNode(!0),this.elm.nativeElement.parentElement.appendChild(i.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(i.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(i.clonedNode,"left",`${i.startingRect.left}px`),this.renderer.setStyle(i.clonedNode,"top",`${i.startingRect.top}px`),this.renderer.setStyle(i.clonedNode,"height",`${i.startingRect.height}px`),this.renderer.setStyle(i.clonedNode,"width",`${i.startingRect.width}px`),this.renderer.setStyle(i.clonedNode,"cursor",aO(i.edges,n)),this.renderer.addClass(i.clonedNode,"resize-ghost-element"),i.clonedNode.scrollTop=i.startingRect.scrollTop,i.clonedNode.scrollLeft=i.startingRect.scrollLeft),this.zone.run(()=>{this.resizeStart.emit({edges:lO({edges:e,initialRectangle:t,newRectangle:t}),rectangle:nO(t,{},0,0)})})}),n.pipe(dv(this.destroy$)).subscribe(()=>{i&&(this.renderer.removeClass(this.elm.nativeElement,"resize-active"),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.zone.run(()=>{this.resizeEnd.emit({edges:lO({edges:i.edges,initialRectangle:i.startingRect,newRectangle:i.currentRect}),rectangle:i.currentRect})}),r(),i=null)})}ngOnChanges(e){e.resizeEdges&&this.resizeEdges$.next(this.resizeEdges)}ngOnDestroy(){mu(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.resizeEdges$.complete(),this.destroy$.next()}setElementClass(e,t,n){n?this.renderer.addClass(e.nativeElement,t):this.renderer.removeClass(e.nativeElement,t)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Mc),Oo(Ja),Oo(Xa),Oo(Zc))},e.\u0275dir=Xe({type:e,selectors:[["","mwlResizable",""]],inputs:{resizeEdges:"resizeEdges",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",resizeCursorPrecision:"resizeCursorPrecision",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS",validateResize:"validateResize"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},features:[lt]}),e})();class hO{static getInstance(e,t){return hO.instance||(hO.instance=new hO(e,t)),hO.instance}constructor(e,t){this.pointerDown=new b(n=>{let i,r;return t.runOutsideAngular(()=>{i=e.listen("document","mousedown",e=>{n.next({clientX:e.clientX,clientY:e.clientY,event:e})}),r=e.listen("document","touchstart",e=>{n.next({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,event:e})})}),()=>{i(),r()}}).pipe(J()),this.pointerMove=new b(n=>{let i,r;return t.runOutsideAngular(()=>{i=e.listen("document","mousemove",e=>{n.next({clientX:e.clientX,clientY:e.clientY,event:e})}),r=e.listen("document","touchmove",e=>{n.next({clientX:e.targetTouches[0].clientX,clientY:e.targetTouches[0].clientY,event:e})})}),()=>{i(),r()}}).pipe(J()),this.pointerUp=new b(n=>{let i,r,s;return t.runOutsideAngular(()=>{i=e.listen("document","mouseup",e=>{n.next({clientX:e.clientX,clientY:e.clientY,event:e})}),r=e.listen("document","touchend",e=>{n.next({clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,event:e})}),s=e.listen("document","touchcancel",e=>{n.next({clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,event:e})})}),()=>{i(),r(),s()}}).pipe(J())}}let uO=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();const dO=XS({passive:!0});let pO=(()=>{class e{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Lg;const t=BS(e),n=this._monitoredElements.get(t);if(n)return n.subject;const i=new S,r="cdk-text-field-autofilled",s=e=>{"cdk-text-field-autofill-start"!==e.animationName||t.classList.contains(r)?"cdk-text-field-autofill-end"===e.animationName&&t.classList.contains(r)&&(t.classList.remove(r),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!1}))):(t.classList.add(r),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",s,dO),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:i,unlisten:()=>{t.removeEventListener("animationstart",s,dO)}}),i}stopMonitoring(e){const t=BS(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}}return e.\u0275fac=function(t){return new(t||e)(ui(qS),ui(Zc))},e.\u0275prov=de({factory:function(){return new e(ui(qS),ui(Zc))},token:e,providedIn:"root"}),e})(),fO=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[$S]]}),e})();const mO=new Yn("MAT_INPUT_VALUE_ACCESSOR"),gO=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let vO=0;class bO{constructor(e,t,n,i){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}}const yO=WC(bO);let _O=(()=>{class e extends yO{constructor(e,t,n,i,r,s,o,a,l,c){super(s,i,r,n),this._elementRef=e,this._platform=t,this.ngControl=n,this._autofillMonitor=a,this._formField=c,this._uid="mat-input-"+vO++,this.focused=!1,this.stateChanges=new S,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>WS().has(e));const h=this._elementRef.nativeElement,u=h.nodeName.toLowerCase();this._inputValueAccessor=o||h,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&l.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",e=>{let t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===u,this._isTextarea="textarea"===u,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=NS(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=NS(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&WS().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=NS(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,t;const n=(null===(t=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===t?void 0:t.call(e))?null:this.placeholder;if(n!==this._previousPlaceholder){const e=this._elementRef.nativeElement;this._previousPlaceholder=n,n?e.setAttribute("placeholder",n):e.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){gO.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(qS),Oo(Fm,10),Oo(cg,8),Oo(yg,8),Oo(ak),Oo(mO,10),Oo(pO),Oo(Zc),Oo(LA,8))},e.\u0275dir=Xe({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(e,t){1&e&&Uo("focus",function(){return t._focusChanged(!0)})("blur",function(){return t._focusChanged(!1)})("input",function(){return t._onInput()}),2&e&&(Aa("disabled",t.disabled)("required",t.required),Ro("id",t.id)("data-placeholder",t.placeholder)("readonly",t.readonly&&!t._isNativeSelect||null)("aria-invalid",t.errorState&&!t.empty)("aria-required",t.required),ca("mat-input-server",t._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[qa([{provide:CA,useExisting:e}]),mo,lt]}),e})(),wO=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[ak],imports:[[fO,NA,BC],fO,NA]}),e})();const xO=["filterMenu"];function SO(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"filter_list"),Fo())}function CO(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_downward"),Fo())}function kO(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_upward"),Fo())}function EO(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",9),Lo(2,"button",10),Uo("click",function(){return Pt(e),Xo().onSortAsc()}),xa(3,"Sort Ascending"),Fo(),Fo(),Fo()}}function AO(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",5),Lo(2,"div",11),Lo(3,"button",10),Uo("click",function(){return Pt(e),Xo().onSortDesc()}),xa(4,"Sort Descending"),Fo(),Fo(),Fo(),Fo()}}function RO(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",5),Lo(2,"button",12),Uo("click",function(){return Pt(e),Xo().onSortClear()}),xa(3,"Clear Sort"),Fo(),Fo(),Fo()}}function TO(e,t){if(1&e&&(Lo(0,"mat-option",17),xa(1),Fo()),2&e){const e=t.$implicit;Po("value",e),Jr(1),Ca(" ",e.name," ")}}function IO(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",5),Lo(2,"span",14),xa(3,"and"),Fo(),Fo(),Lo(4,"div",5),Lo(5,"mat-form-field",18),Uo("click",function(e){return e.stopPropagation()}),Lo(6,"input",20),Uo("ngModelChange",function(t){return Pt(e),Xo(3).operand2Input=t}),Fo(),Fo(),Fo(),Vo()}if(2&e){const e=Xo(3);Jr(6),Po("ngModel",e.operand2Input)}}function DO(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",5),Lo(2,"mat-form-field",18),Uo("click",function(e){return e.stopPropagation()}),Lo(3,"input",19),Uo("ngModelChange",function(t){return Pt(e),Xo(2).operand1Input=t}),Fo(),Fo(),Fo(),Io(4,IO,7,1,"ng-container",1),Lo(5,"div",5),Lo(6,"button",12),Uo("click",function(){return Pt(e),Xo(2).onClearFilter()}),xa(7,"Clear Filter"),Fo(),Fo(),No(8,"div",13),Vo()}if(2&e){const e=Xo(2);Jr(3),Po("ngModel",e.operand1Input),Jr(1),Po("ngIf",3===e.selectedOperator.operands)}}function OO(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",5),No(2,"div",13),Lo(3,"mat-form-field",14),Lo(4,"mat-select",15),Uo("valueChange",function(t){return Pt(e),Xo().selectedOperator=t}),Io(5,TO,2,2,"mat-option",16),Fo(),Fo(),Fo(),Io(6,DO,9,2,"ng-container",1),Fo()}if(2&e){const e=Xo();Jr(4),Po("value",e.selectedOperator)("compareWith",e.compareFn),Jr(1),Po("ngForOf",e.operatorList),Jr(1),Po("ngIf",e.selectedOperator)}}function PO(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",5),Lo(2,"button",12),Uo("click",function(){return Pt(e),Xo().onClearSelection()}),xa(3,"Clear Selection"),Fo(),Fo(),Fo()}}let MO=(()=>{class e{constructor(){this.showTextFilter=!0,this.showSort=!0,this.predicateEmitter=new lc,this.operand1Input="",this.operand2Input="",this.filterCleared=!1,this.operatorList=[{name:"Begins with",operands:2,operator:"ilike",postfix:"%"},{name:"Ends with",operands:2,operator:"ilike",prefix:"%"},{name:"Includes",operands:2,operator:"ilike",prefix:"%",postfix:"%"},{name:"Matches",operands:2,operator:"ilike"}],this.selectedSort=null,this.dropdownSettings={itemsShowLimit:6,allowSearchFilter:!0,defaultOpen:!1},this.selectedItems=[],this.compareFn=this.compareByValue}ngOnInit(){this.choices$&&this.choices$.subscribe(e=>{if(void 0!==e&&e[this.columnName]){this.choices=[];for(let t=0;t<e[this.columnName].length;t++)this.choices.push({id:t,text:e[this.columnName][t]})}}),this.clear$&&this.clear$.subscribe(e=>{this.selectedOperator=null,this.selectedSort=null,this.selectedItems=[],this.filterCleared=!0}),this.setFilter$&&this.setFilter$.subscribe(e=>{e&&(e.op1.length>0?(this.selectedOperator=e.operator,this.operand1Input=e.op1,this.operand2Input=e.op2,this.onValidation()):(this.selectedOperator=null,this.operand1Input="",this.operand2Input="",this.onValidation()))})}onValidation(){this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onClearFilter(){this.selectedOperator=null,this.filterCleared=!0}onClearSelection(){this.selectedItems=[]}onSortAsc(){this.selectedSort="asc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortDesc(){this.selectedSort="desc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortClear(){this.selectedSort=null,this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}generatePredicate(){const e={field:this.columnName,predicates:[],sort:{field:this.columnName,order:this.selectedSort}};return this.selectedOperator&&2===this.selectedOperator.operands&&e.predicates.push({field:this.columnName,op:this.selectedOperator.operator,value:(this.selectedOperator.prefix?this.selectedOperator.prefix:"")+this.operand1Input+(this.selectedOperator.postfix?this.selectedOperator.postfix:"")}),this.selectedItems.length>0&&e.predicates.push({field:this.columnName,op:"in",value:this.selectedItems.map(e=>e.text)}),e}compareByValue(e,t){return e&&t&&e.name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-text-filter"]],viewQuery:function(e,t){if(1&e&&(wc(xO,1),wc(ly,1)),2&e){let e;_c(e=Sc())&&(t.matMenuTrigger=e.first),_c(e=Sc())&&(t.ngMultiSelect=e.first)}},inputs:{columnName:"columnName",choices$:"choices$",clear$:"clear$",setFilter$:"setFilter$",showTextFilter:"showTextFilter",showSort:"showSort"},outputs:{predicateEmitter:"predicateEmitter"},decls:22,vars:15,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],[4,"ngIf"],["xPosition","before",1,"menu-overflow-hidden","tf-mat-menu"],["filterMenu","matMenu"],[1,"container","content-centered",3,"click"],[1,"row"],[1,"col-4","ml-auto"],["mat-flat-button","","color","primary",1,"float-right",2,"min-width","0px",3,"click"],["name","multi",1,"col-12",3,"settings","data","placeholder","ngModel","ngModelChange"],[1,"col-8",2,"padding-left","0px","padding-right","16px"],["mat-button","",1,"float-left",3,"click"],[1,"col-12",2,"padding-left","0px"],["mat-button","",3,"click"],[1,"dropdown-divider"],[1,"col-12"],["placeholder","Select Filter",3,"value","compareWith","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-12",3,"click"],["matInput","","placeholder","Filter value","name","operand1Input",3,"ngModel","ngModelChange"],["matInput","","placeholder","Filter value 2","name","operand2Input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(Lo(0,"button",0),Lo(1,"span"),Io(2,SO,2,0,"mat-icon",1),Io(3,CO,2,0,"mat-icon",1),Io(4,kO,2,0,"mat-icon",1),Lo(5,"mat-icon"),xa(6,"arrow_drop_down"),Fo(),Fo(),Fo(),Lo(7,"mat-menu",2,3),Lo(9,"div",4),Uo("click",function(e){return e.stopPropagation()}),Lo(10,"form"),Lo(11,"div",5),Io(12,EO,4,0,"div",1),Lo(13,"div",6),Lo(14,"button",7),Uo("click",function(){return t.onValidation()}),xa(15," OK "),Fo(),Fo(),Fo(),Io(16,AO,5,0,"div",1),Io(17,RO,4,0,"div",1),Io(18,OO,7,4,"div",1),Io(19,PO,4,0,"div",1),Lo(20,"div"),Lo(21,"ng-multiselect-dropdown",8),Uo("ngModelChange",function(e){return t.selectedItems=e}),Fo(),Fo(),Fo(),Fo(),Fo()),2&e&&(Po("matMenuTriggerFor",Do(8)),Jr(2),Po("ngIf",t.selectedOperator||t.selectedItems.length>0),Jr(1),Po("ngIf","desc"===t.selectedSort),Jr(1),Po("ngIf","asc"===t.selectedSort),Jr(8),Po("ngIf",t.showSort),Jr(4),Po("ngIf",t.showSort),Jr(1),Po("ngIf",t.selectedSort),Jr(1),Po("ngIf",t.showTextFilter),Jr(1),Po("ngIf",t.selectedItems.length),Jr(2),ha("filter-dropdown"),Po("settings",t.dropdownSettings)("data",t.choices)("placeholder","Select Items")("ngModel",t.selectedItems))},directives:[Fk,kD,eu,lI,wD,pg,Vm,cg,ly,zm,dg,FA,iR,Qh,Rk,_O,pm],styles:[".content-centered{text-align:center}button.active:focus,button:active:focus,button:focus{outline:none!important;outline-style:none!important}.tf-mat-menu{overflow:visible!important;max-width:none!important;min-width:240px!important}.filter-dropdown .dropdown-btn{border:none!important;padding:0!important}.multiselect-item-checkbox{padding:0 10px!important}li,p{font-size:.9rem!important}"],encapsulation:2}),e})();const LO=["filterMenu"];function FO(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"filter_list"),Fo())}function NO(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_upward"),Fo())}function zO(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_downward"),Fo())}function VO(e,t){if(1&e){const e=Bo();Lo(0,"div",6),Lo(1,"button",8),Uo("click",function(){return Pt(e),Xo().onSortClear()}),xa(2,"Clear Sort"),Fo(),Fo()}}function jO(e,t){if(1&e&&(Lo(0,"mat-option",16),xa(1),Fo()),2&e){const e=t.$implicit;Po("value",e),Jr(1),Ca(" ",e.name," ")}}function BO(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",6),Lo(2,"span",5),xa(3,"and"),Fo(),Fo(),Lo(4,"div",6),Lo(5,"mat-form-field",17),Uo("click",function(e){return e.stopPropagation()}),Lo(6,"input",20),Uo("ngModelChange",function(t){return Pt(e),Xo(2).operand2Input=t}),Fo(),Fo(),Fo(),Vo()}if(2&e){const e=Xo(2);Jr(6),Po("ngModel",e.operand2Input)}}function HO(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",6),Lo(2,"mat-form-field",17),Uo("click",function(e){return e.stopPropagation()}),Lo(3,"input",18),Uo("ngModelChange",function(t){return Pt(e),Xo().operand1Input=t}),Fo(),Fo(),Fo(),Io(4,BO,7,1,"ng-container",1),Lo(5,"div",6),Lo(6,"button",19),Uo("click",function(){return Pt(e),Xo().onClearFilter()}),xa(7,"Clear Filter"),Fo(),Fo(),No(8,"div",12),Vo()}if(2&e){const e=Xo();Jr(3),Po("ngModel",e.operand1Input),Jr(1),Po("ngIf",3===e.selectedOperator.operands)}}function qO(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",6),Lo(2,"button",19),Uo("click",function(){return Pt(e),Xo().onClearSelection()}),xa(3,"Clear Selection"),Fo(),Fo(),Fo()}}let $O=(()=>{class e{constructor(){this.predicateEmitter=new lc,this.operand1Input="",this.operand2Input="",this.filterCleared=!1,this.operatorList=[{name:"Less than",operands:2,operator:"<"},{name:"Greater than",operands:2,operator:">"},{name:"Equal to",operands:2,operator:"=="},{name:"Not equal to",operands:2,operator:"!="},{name:"Between",operands:3,operator:">",operator2:"<"}],this.selectedSort=null,this.dropdownSettings={itemsShowLimit:6,allowSearchFilter:!0,defaultOpen:!1},this.selectedItems=[]}ngOnInit(){this.choices$&&this.choices$.subscribe(e=>{if(void 0!==e&&e[this.columnName]){this.choices=[];for(let t=0;t<e[this.columnName].length;t++)this.choices.push({id:t,text:e[this.columnName][t]})}}),this.clear$&&this.clear$.subscribe(e=>{this.selectedOperator=null,this.selectedSort=null,this.selectedItems=[],this.filterCleared=!0})}onValidation(){this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onClearFilter(){this.selectedOperator=null,this.filterCleared=!0}onClearSelection(){this.selectedItems=[]}onSortAsc(){this.selectedSort="asc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortDesc(){this.selectedSort="desc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortClear(){this.selectedSort=null,this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}generatePredicate(){const e={field:this.columnName,predicates:[],sort:{field:this.columnName,order:this.selectedSort}};return this.selectedOperator&&2===this.selectedOperator.operands?e.predicates.push({field:this.columnName,op:this.selectedOperator.operator,value:this.operand1Input}):this.selectedOperator&&3===this.selectedOperator.operands&&(e.predicates.push({field:this.columnName,op:this.selectedOperator.operator,value:this.operand1Input<this.operand2Input?this.operand1Input:this.operand2Input}),e.predicates.push({field:this.columnName,op:this.selectedOperator.operator2,value:this.operand1Input<this.operand2Input?this.operand2Input:this.operand1Input})),this.selectedItems.length>0&&e.predicates.push({field:this.columnName,op:"in",value:this.selectedItems.map(e=>e.text)}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-number-filter"]],viewQuery:function(e,t){if(1&e&&wc(LO,1),2&e){let e;_c(e=Sc())&&(t.matMenuTrigger=e.first)}},inputs:{columnName:"columnName",choices$:"choices$",clear$:"clear$"},outputs:{predicateEmitter:"predicateEmitter"},decls:31,vars:15,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],[4,"ngIf"],["xPosition","before",1,"menu-overflow-hidden","tf-mat-menu"],["filterMenu","matMenu"],[1,"content-centered",3,"click"],[1,"col-12"],[1,"row"],[1,"col-6",2,"padding-left","0px"],["mat-button","",1,"float-left",3,"click"],[1,"col-6",2,"text-align","right"],["mat-flat-button","","color","primary",1,"float-right",3,"click"],["class","row",4,"ngIf"],[1,"dropdown-divider"],["placeholder","Select comparison",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["name","multi",1,"col-12",3,"settings","data","placeholder","ngModel","ngModelChange"],[3,"value"],[1,"col-12",3,"click"],["matInput","","placeholder","Numeric operand 1","name","operand1Input",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["matInput","","placeholder","Numeric operand 2","name","operand2Input",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(Lo(0,"button",0),Lo(1,"span"),Io(2,FO,2,0,"mat-icon",1),Io(3,NO,2,0,"mat-icon",1),Io(4,zO,2,0,"mat-icon",1),Lo(5,"mat-icon"),xa(6,"arrow_drop_down"),Fo(),Fo(),Fo(),Lo(7,"mat-menu",2,3),Lo(9,"div",4),Uo("click",function(e){return e.stopPropagation()}),Lo(10,"form",5),Lo(11,"div",6),Lo(12,"div",7),Lo(13,"button",8),Uo("click",function(){return t.onSortAsc()}),xa(14,"Sort Ascending"),Fo(),Fo(),Lo(15,"div",9),Lo(16,"button",10),Uo("click",function(){return t.onValidation()}),xa(17," OK "),Fo(),Fo(),Fo(),Lo(18,"div",6),Lo(19,"button",8),Uo("click",function(){return t.onSortDesc()}),xa(20,"Sort Descending"),Fo(),Fo(),Io(21,VO,3,0,"div",11),Lo(22,"div",6),No(23,"div",12),Lo(24,"mat-form-field",5),Lo(25,"mat-select",13),Uo("valueChange",function(e){return t.selectedOperator=e}),Io(26,jO,2,2,"mat-option",14),Fo(),Fo(),Fo(),Io(27,HO,9,2,"ng-container",1),Io(28,qO,4,0,"div",1),Lo(29,"div"),Lo(30,"ng-multiselect-dropdown",15),Uo("ngModelChange",function(e){return t.selectedItems=e}),Fo(),Fo(),Fo(),Fo(),Fo()),2&e&&(Po("matMenuTriggerFor",Do(8)),Jr(2),Po("ngIf",t.selectedOperator||t.selectedItems.length>0),Jr(1),Po("ngIf","desc"===t.selectedSort),Jr(1),Po("ngIf","asc"===t.selectedSort),Jr(17),Po("ngIf",t.selectedSort),Jr(4),Po("value",t.selectedOperator),Jr(1),Po("ngForOf",t.operatorList),Jr(1),Po("ngIf",t.selectedOperator),Jr(1),Po("ngIf",t.selectedItems.length),Jr(2),ha("filter-dropdown"),Po("settings",t.dropdownSettings)("data",t.choices)("placeholder","Select Items")("ngModel",t.selectedItems))},directives:[Fk,kD,eu,lI,wD,pg,Vm,cg,FA,iR,Qh,ly,zm,dg,Rk,_O,pm],styles:[".content-centered{text-align:center}button.active:focus,button:active:focus,button:focus{outline:none!important;outline-style:none!important}.tf-mat-menu{overflow:visible!important;max-width:none!important}.filter-dropdown .dropdown-btn{border:none!important;padding:0!important}.multiselect-item-checkbox{padding:0 10px!important}li,p{font-size:.9rem!important}"],encapsulation:2}),e})();function UO(e,t){}class WO{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const GO={dialogContainer:Ku("dialogContainer",[td("void, exit",ed({opacity:0,transform:"scale(0.7)"})),td("enter",ed({transform:"none"})),id("* => enter",Qu("150ms cubic-bezier(0, 0, 0.2, 1)",ed({transform:"none",opacity:1}))),id("* => void, * => exit",Qu("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",ed({opacity:0})))])};let YO=(()=>{class e extends _E{constructor(e,t,n,i,r,s){super(),this._elementRef=e,this._focusTrapFactory=t,this._changeDetectorRef=n,this._config=r,this._focusMonitor=s,this._animationStateChanged=new lc,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=e=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(e)),this._ariaLabelledBy=r.ariaLabelledBy||null,this._document=i}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const t=this._getActiveElement(),n=this._elementRef.nativeElement;t&&t!==this._document.body&&t!==n&&!n.contains(t)||(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._getActiveElement())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,t=this._getActiveElement();return e===t||e.contains(t)}_getActiveElement(){var e;const t=this._document.activeElement;return(null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.activeElement)||t}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(vC),Oo(xl),Oo(Rh,8),Oo(WO),Oo(AC))},e.\u0275dir=Xe({type:e,viewQuery:function(e,t){if(1&e&&wc(xE,3),2&e){let e;_c(e=Sc())&&(t._portalOutlet=e.first)}},features:[mo]}),e})(),ZO=(()=>{class e extends YO{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:t}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:t}))}_onAnimationStart({toState:e,totalTime:t}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:t}):"exit"!==e&&"void"!==e||this._animationStateChanged.next({state:"closing",totalTime:t})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return XO(t||e)},e.\u0275cmp=$e({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,t){1&e&&Wo("@dialogContainer.start",function(e){return t._onAnimationStart(e)})("@dialogContainer.done",function(e){return t._onAnimationDone(e)}),2&e&&(Aa("id",t._id),Ro("role",t._config.role)("aria-labelledby",t._config.ariaLabel?null:t._ariaLabelledBy)("aria-label",t._config.ariaLabel)("aria-describedby",t._config.ariaDescribedBy||null),Ra("@dialogContainer",t._state))},features:[mo],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&Io(0,UO,0,0,"ng-template",0)},directives:[xE],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[GO.dialogContainer]}}),e})();const XO=$n(ZO);let KO=0;class QO{constructor(e,t,n="mat-dialog-"+KO++){this._overlayRef=e,this._containerInstance=t,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new S,this._afterClosed=new S,this._beforeClosed=new S,this._state=0,t._id=n,t._animationStateChanged.pipe(Cf(e=>"opened"===e.state),gv(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Cf(e=>"closed"===e.state),gv(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Cf(e=>27===e.keyCode&&!this.disableClose&&!OS(e))).subscribe(e=>{e.preventDefault(),JO(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():JO(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Cf(e=>"closing"===e.state),gv(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function JO(e,t,n){return void 0!==e._containerInstance&&(e._containerInstance._closeInteractionType=t),e.close(n)}const eP=new Yn("MatDialogData"),tP=new Yn("mat-dialog-default-options"),nP=new Yn("mat-dialog-scroll-strategy"),iP={provide:nP,deps:[QE],useFactory:function(e){return()=>e.scrollStrategies.block()}};let rP=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l){this._overlay=e,this._injector=t,this._defaultOptions=n,this._parentDialog=i,this._overlayContainer=r,this._dialogRefConstructor=o,this._dialogContainerType=a,this._dialogDataToken=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new S,this._afterOpenedAtThisLevel=new S,this._ariaHiddenElements=new Map,this.afterAllClosed=xy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(yv(void 0))),this._scrollStrategy=s}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,t){(t=function(e,t){return Object.assign(Object.assign({},t),e)}(t,this._defaultOptions||new WO)).id&&this.getDialogById(t.id);const n=this._createOverlay(t),i=this._attachDialogContainer(n,t),r=this._attachDialogContent(e,i,n,t);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(r),r.afterClosed().subscribe(()=>this._removeOpenDialog(r)),this.afterOpened.next(r),i._initializeWithAttachedContent(),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const t=this._getOverlayConfig(e);return this._overlay.create(t)}_getOverlayConfig(e){const t=new ME({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachDialogContainer(e,t){const n=po.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:WO,useValue:t}]}),i=new vE(this._dialogContainerType,t.viewContainerRef,n,t.componentFactoryResolver);return e.attach(i).instance}_attachDialogContent(e,t,n,i){const r=new this._dialogRefConstructor(n,t,i.id);if(e instanceof Rl)t.attachTemplatePortal(new bE(e,null,{$implicit:i.data,dialogRef:r}));else{const n=this._createInjector(i,r,t),s=t.attachComponentPortal(new vE(e,i.viewContainerRef,n));r.componentInstance=s.instance}return r.updateSize(i.width,i.height).updatePosition(i.position),r}_createInjector(e,t,n){const i=e&&e.viewContainerRef&&e.viewContainerRef.injector,r=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:t}];return!e.direction||i&&i.get(PC,null)||r.push({provide:PC,useValue:{value:e.direction,change:xf()}}),po.create({parent:i||this._injector,providers:r})}_removeOpenDialog(e){const t=this.openDialogs.indexOf(e);t>-1&&(this.openDialogs.splice(t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const t=e.parentElement.children;for(let n=t.length-1;n>-1;n--){let i=t[n];i===e||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}}return e.\u0275fac=function(t){return new(t||e)(Oo(QE),Oo(po),Oo(void 0),Oo(void 0),Oo(BE),Oo(void 0),Oo(Xn),Oo(Xn),Oo(Yn))},e.\u0275dir=Xe({type:e}),e})(),sP=(()=>{class e extends rP{constructor(e,t,n,i,r,s,o){super(e,t,i,s,o,r,QO,ZO,eP)}}return e.\u0275fac=function(t){return new(t||e)(ui(QE),ui(po),ui(qh,8),ui(tP,8),ui(nP),ui(e,12),ui(BE))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),oP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[sP,iP],imports:[[rA,SE,BC],BC]}),e})();const aP=["mat-calendar-body",""];function lP(e,t){if(1&e&&(Lo(0,"tr",2),Lo(1,"td",3),xa(2),Fo(),Fo()),2&e){const e=Xo();Jr(1),la("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ro("colspan",e.numCols),Jr(1),Ca(" ",e.label," ")}}function cP(e,t){if(1&e&&(Lo(0,"td",7),xa(1),Fo()),2&e){const e=Xo(2);la("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ro("colspan",e._firstRowOffset),Jr(1),Ca(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function hP(e,t){if(1&e){const e=Bo();Lo(0,"td",8),Uo("click",function(n){Pt(e);const i=t.$implicit;return Xo(2)._cellClicked(i,n)}),Lo(1,"div",9),xa(2),Fo(),No(3,"div",10),Fo()}if(2&e){const e=t.$implicit,n=t.index,i=Xo().index,r=Xo();la("width",r._cellWidth)("padding-top",r._cellPadding)("padding-bottom",r._cellPadding),ca("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",r._isActiveCell(i,n))("mat-calendar-body-range-start",r._isRangeStart(e.compareValue))("mat-calendar-body-range-end",r._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",r._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",r._isComparisonBridgeStart(e.compareValue,i,n))("mat-calendar-body-comparison-bridge-end",r._isComparisonBridgeEnd(e.compareValue,i,n))("mat-calendar-body-comparison-start",r._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",r._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",r._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",r._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",r._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",r._isInPreview(e.compareValue)),Po("ngClass",e.cssClasses)("tabindex",r._isActiveCell(i,n)?0:-1),Ro("data-mat-row",i)("data-mat-col",n)("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-selected",r._isSelected(e.compareValue)),Jr(1),ca("mat-calendar-body-selected",r._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",r._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",r.todayValue===e.compareValue),Jr(1),Ca(" ",e.displayValue," ")}}function uP(e,t){if(1&e&&(Lo(0,"tr",4),Io(1,cP,2,6,"td",5),Io(2,hP,4,46,"td",6),Fo()),2&e){const e=t.$implicit,n=t.index,i=Xo();Jr(1),Po("ngIf",0===n&&i._firstRowOffset),Jr(1),Po("ngForOf",e)}}function dP(e,t){if(1&e&&(Lo(0,"th",5),xa(1),Fo()),2&e){const e=t.$implicit;Ro("aria-label",e.long),Jr(1),Sa(e.narrow)}}const pP=["*"];function fP(e,t){}function mP(e,t){if(1&e){const e=Bo();Lo(0,"mat-month-view",5),Uo("activeDateChange",function(t){return Pt(e),Xo().activeDate=t})("_userSelection",function(t){return Pt(e),Xo()._dateSelected(t)}),Fo()}if(2&e){const e=Xo();Po("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function gP(e,t){if(1&e){const e=Bo();Lo(0,"mat-year-view",6),Uo("activeDateChange",function(t){return Pt(e),Xo().activeDate=t})("monthSelected",function(t){return Pt(e),Xo()._monthSelectedInYearView(t)})("selectedChange",function(t){return Pt(e),Xo()._goToDateInView(t,"month")}),Fo()}if(2&e){const e=Xo();Po("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function vP(e,t){if(1&e){const e=Bo();Lo(0,"mat-multi-year-view",7),Uo("activeDateChange",function(t){return Pt(e),Xo().activeDate=t})("yearSelected",function(t){return Pt(e),Xo()._yearSelectedInMultiYearView(t)})("selectedChange",function(t){return Pt(e),Xo()._goToDateInView(t,"year")}),Fo()}if(2&e){const e=Xo();Po("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function bP(e,t){}const yP=["button"];function _P(e,t){1&e&&(ln(),Lo(0,"svg",3),No(1,"path",4),Fo())}const wP=[[["","matDatepickerToggleIcon",""]]],xP=["[matDatepickerToggleIcon]"];let SP=(()=>{class e{constructor(){this.changes=new S,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,t){return`${e} \u2013 ${t}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();class CP{constructor(e,t,n,i,r={},s=e,o){this.value=e,this.displayValue=t,this.ariaLabel=n,this.enabled=i,this.cssClasses=r,this.compareValue=s,this.rawValue=o}}let kP=(()=>{class e{constructor(e,t){this._elementRef=e,this._ngZone=t,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new lc,this.previewChange=new lc,this._enterHandler=e=>{if(this._skipNextFocus&&"focus"===e.type)this._skipNextFocus=!1;else if(e.target&&this.isRange){const t=this._getCellFromElement(e.target);t&&this._ngZone.run(()=>this.previewChange.emit({value:t.enabled?t:null,event:e}))}},this._leaveHandler=e=>{null!==this.previewEnd&&this.isRange&&e.target&&EP(e.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e}))},t.runOutsideAngular(()=>{const t=e.nativeElement;t.addEventListener("mouseenter",this._enterHandler,!0),t.addEventListener("focus",this._enterHandler,!0),t.addEventListener("mouseleave",this._leaveHandler,!0),t.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(e,t){e.enabled&&this.selectedValueChange.emit({value:e.value,event:t})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const t=e.numCols,{rows:n,numCols:i}=this;(e.rows||t)&&(this._firstRowOffset=n&&n.length&&n[0].length?i-n[0].length:0),(e.cellAspectRatio||t||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/i+"%"),!t&&this._cellWidth||(this._cellWidth=100/i+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,t){let n=e*this.numCols+t;return e&&(n-=this._firstRowOffset),n==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(gv(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");t&&(e||(this._skipNextFocus=!0),t.focus())})})}_isRangeStart(e){return AP(e,this.startValue,this.endValue)}_isRangeEnd(e){return RP(e,this.startValue,this.endValue)}_isInRange(e){return TP(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return AP(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,t,n){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let i=this.rows[t][n-1];if(!i){const e=this.rows[t-1];i=e&&e[e.length-1]}return i&&!this._isRangeEnd(i.compareValue)}_isComparisonBridgeEnd(e,t,n){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let i=this.rows[t][n+1];if(!i){const e=this.rows[t+1];i=e&&e[0]}return i&&!this._isRangeStart(i.compareValue)}_isComparisonEnd(e){return RP(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return TP(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return AP(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return RP(e,this.previewStart,this.previewEnd)}_isInPreview(e){return TP(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let t;if(EP(e)?t=e:EP(e.parentNode)&&(t=e.parentNode),t){const e=t.getAttribute("data-mat-row"),n=t.getAttribute("data-mat-col");if(e&&n)return this.rows[parseInt(e)][parseInt(n)]}return null}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Zc))},e.\u0275cmp=$e({type:e,selectors:[["","mat-calendar-body",""]],hostAttrs:["role","grid","aria-readonly","true",1,"mat-calendar-body"],inputs:{numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",previewStart:"previewStart",previewEnd:"previewEnd",label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[lt],attrs:aP,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["aria-hidden","true","class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell",3,"ngClass","tabindex","mat-calendar-body-disabled","mat-calendar-body-active","mat-calendar-body-range-start","mat-calendar-body-range-end","mat-calendar-body-in-range","mat-calendar-body-comparison-bridge-start","mat-calendar-body-comparison-bridge-end","mat-calendar-body-comparison-start","mat-calendar-body-comparison-end","mat-calendar-body-in-comparison-range","mat-calendar-body-preview-start","mat-calendar-body-preview-end","mat-calendar-body-in-preview","width","paddingTop","paddingBottom","click",4,"ngFor","ngForOf"],["aria-hidden","true",1,"mat-calendar-body-label"],["role","gridcell",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],[1,"mat-calendar-body-cell-preview"]],template:function(e,t){1&e&&(Io(0,lP,3,6,"tr",0),Io(1,uP,3,2,"tr",1)),2&e&&(Po("ngIf",t._firstRowOffset<t.labelMinRequiredCells),Jr(1),Po("ngForOf",t.rows))},directives:[eu,Qh,Xh],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:none;cursor:pointer}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.mat-datepicker-dialog .mat-dialog-container{position:relative;overflow:visible}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}[dir=rtl] .mat-calendar-body-label{text-align:right}@media(hover: none){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){background-color:transparent}}\n'],encapsulation:2,changeDetection:0}),e})();function EP(e){return"TD"===e.nodeName}function AP(e,t,n){return null!==n&&t!==n&&e<n&&e===t}function RP(e,t,n){return null!==t&&t!==n&&e>=t&&e===n}function TP(e,t,n,i){return i&&null!==t&&null!==n&&t!==n&&e>=t&&e<=n}class IP{constructor(e,t){this.start=e,this.end=t}}let DP=(()=>{class e{constructor(e,t){this.selection=e,this._adapter=t,this._selectionChanged=new S,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,t){const n=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:t,oldValue:n})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}clone(){return null}}return e.\u0275fac=function(t){return new(t||e)(ui(void 0),ui(ZC))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),OP=(()=>{class e extends DP{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const t=new e(this._adapter);return t.updateSelection(this.selection,this),t}}return e.\u0275fac=function(t){return new(t||e)(ui(ZC))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const PP={provide:DP,deps:[[new gi,new vi,DP],ZC],useFactory:function(e,t){return e||new OP(t)}},MP=new Yn("MAT_DATE_RANGE_SELECTION_STRATEGY");let LP=(()=>{class e{constructor(e,t,n,i,r){this._changeDetectorRef=e,this._dateFormats=t,this._dateAdapter=n,this._dir=i,this._rangeStrategy=r,this._rerenderSubscription=u.EMPTY,this.selectedChange=new lc,this._userSelection=new lc,this.activeDateChange=new lc,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const t=this._activeDate,n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._hasSameMonthAndYear(t,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof IP?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yv(null)).subscribe(()=>this._init())}ngOnChanges(e){const t=e.comparisonStart||e.comparisonEnd;t&&!t.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const t=e.value,n=this._dateAdapter.getYear(this.activeDate),i=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.createDate(n,i,t);let s,o;this._selected instanceof IP?(s=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):s=o=this._getDateInCurrentMonth(this._selected),s===t&&o===t||this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(e){const t=this._activeDate,n=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return void(this.dateFilter&&!this.dateFilter(this._activeDate)||(this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),e.preventDefault()));case 27:return void(null==this._previewEnd||OS(e)||(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_previewChanged({event:e,value:t}){if(this._rangeStrategy){const n=this._rangeStrategy.createPreview(t?t.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(n.start),this._previewEnd=this._getCellCompareValue(n.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),t=this._dateAdapter.getDayOfWeekNames("narrow");let n=this._dateAdapter.getDayOfWeekNames("long").map((e,n)=>({long:e,narrow:t[n]}));this._weekdays=n.slice(e).concat(n.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),t=this._dateAdapter.getDateNames();this._weeks=[[]];for(let n=0,i=this._firstWeekOffset;n<e;n++,i++){7==i&&(this._weeks.push([]),i=0);const e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),n+1),r=this._shouldEnableDate(e),s=this._dateAdapter.format(e,this._dateFormats.display.dateA11yLabel),o=this.dateClass?this.dateClass(e,"month"):void 0;this._weeks[this._weeks.length-1].push(new CP(n+1,t[n],s,r,o,this._getCellCompareValue(e),e))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,t){return!(!e||!t||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(t)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(t))}_getCellCompareValue(e){if(e){const t=this._dateAdapter.getYear(e),n=this._dateAdapter.getMonth(e),i=this._dateAdapter.getDate(e);return new Date(t,n,i).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof IP?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}}return e.\u0275fac=function(t){return new(t||e)(Oo(xl),Oo(XC,8),Oo(ZC,8),Oo(PC,8),Oo(MP,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-month-view"]],viewQuery:function(e,t){if(1&e&&wc(kP,1),2&e){let e;_c(e=Sc())&&(t._matCalendarBody=e.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[lt],decls:7,vars:13,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["colspan","7","aria-hidden","true",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keydown"],["scope","col"]],template:function(e,t){1&e&&(Lo(0,"table",0),Lo(1,"thead",1),Lo(2,"tr"),Io(3,dP,2,2,"th",2),Fo(),Lo(4,"tr"),No(5,"th",3),Fo(),Fo(),Lo(6,"tbody",4),Uo("selectedValueChange",function(e){return t._dateSelected(e)})("previewChange",function(e){return t._previewChanged(e)})("keydown",function(e){return t._handleCalendarBodyKeydown(e)}),Fo(),Fo()),2&e&&(Jr(3),Po("ngForOf",t._weekdays),Jr(3),Po("label",t._monthLabel)("rows",t._weeks)("todayValue",t._todayDate)("startValue",t._rangeStart)("endValue",t._rangeEnd)("comparisonStart",t._comparisonRangeStart)("comparisonEnd",t._comparisonRangeEnd)("previewStart",t._previewStart)("previewEnd",t._previewEnd)("isRange",t._isRange)("labelMinRequiredCells",3)("activeCell",t._dateAdapter.getDate(t.activeDate)-1))},directives:[Qh,kP],encapsulation:2,changeDetection:0}),e})(),FP=(()=>{class e{constructor(e,t,n){this._changeDetectorRef=e,this._dateAdapter=t,this._dir=n,this._rerenderSubscription=u.EMPTY,this.selectedChange=new lc,this.yearSelected=new lc,this.activeDateChange=new lc,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate;const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),NP(this._dateAdapter,t,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof IP?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yv(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const e=this._dateAdapter.getYear(this._activeDate)-zP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let t=0,n=[];t<24;t++)n.push(e+t),4==n.length&&(this._years.push(n.map(e=>this._createCellForYear(e))),n=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const t=e.value;this.yearSelected.emit(this._dateAdapter.createDate(t,0,1));let n=this._dateAdapter.getMonth(this.activeDate),i=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,n,1));this.selectedChange.emit(this._dateAdapter.createDate(t,n,Math.min(this._dateAdapter.getDate(this.activeDate),i)))}_handleCalendarBodyKeydown(e){const t=this._activeDate,n=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-zP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-zP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e});break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_getActiveCell(){return zP(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(e){const t=this._dateAdapter.createDate(e,0,1),n=this._dateAdapter.getYearName(t),i=this.dateClass?this.dateClass(t,"multi-year"):void 0;return new CP(e,n,n,this._shouldEnableYear(e),i)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let t=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(t)==e;t=this._dateAdapter.addCalendarDays(t,1))if(this.dateFilter(t))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof IP){const t=e.start||e.end;t&&(this._selectedYear=this._dateAdapter.getYear(t))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return e.\u0275fac=function(t){return new(t||e)(Oo(xl),Oo(ZC,8),Oo(PC,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-multi-year-view"]],viewQuery:function(e,t){if(1&e&&wc(kP,1),2&e){let e;_c(e=Sc())&&(t._matCalendarBody=e.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"]],template:function(e,t){1&e&&(Lo(0,"table",0),Lo(1,"thead",1),Lo(2,"tr"),No(3,"th",2),Fo(),Fo(),Lo(4,"tbody",3),Uo("selectedValueChange",function(e){return t._yearSelected(e)})("keydown",function(e){return t._handleCalendarBodyKeydown(e)}),Fo(),Fo()),2&e&&(Jr(4),Po("rows",t._years)("todayValue",t._todayYear)("startValue",t._selectedYear)("endValue",t._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",t._getActiveCell()))},directives:[kP],encapsulation:2,changeDetection:0}),e})();function NP(e,t,n,i,r){const s=e.getYear(t),o=e.getYear(n),a=VP(e,i,r);return Math.floor((s-a)/24)===Math.floor((o-a)/24)}function zP(e,t,n,i){return((e.getYear(t)-VP(e,n,i))%24+24)%24}function VP(e,t,n){let i=0;return n?i=e.getYear(n)-24+1:t&&(i=e.getYear(t)),i}let jP=(()=>{class e{constructor(e,t,n,i){this._changeDetectorRef=e,this._dateFormats=t,this._dateAdapter=n,this._dir=i,this._rerenderSubscription=u.EMPTY,this.selectedChange=new lc,this.monthSelected=new lc,this.activeDateChange=new lc,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let t=this._activeDate;const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._dateAdapter.getYear(t)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof IP?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(yv(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const t=e.value,n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this.monthSelected.emit(n);const i=this._dateAdapter.getNumDaysInMonth(n);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),i)))}_handleCalendarBodyKeydown(e){const t=this._activeDate,n=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e});break;default:return}this._dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(t=>t.map(t=>this._createCellForMonth(t,e[t]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_createCellForMonth(e,t){const n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),i=this._dateAdapter.format(n,this._dateFormats.display.monthYearA11yLabel),r=this.dateClass?this.dateClass(n,"year"):void 0;return new CP(e,t.toLocaleUpperCase(),i,this._shouldEnableMonth(e),r)}_shouldEnableMonth(e){const t=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(t,e)||this._isYearAndMonthBeforeMinDate(t,e))return!1;if(!this.dateFilter)return!0;for(let n=this._dateAdapter.createDate(t,e,1);this._dateAdapter.getMonth(n)==e;n=this._dateAdapter.addCalendarDays(n,1))if(this.dateFilter(n))return!0;return!1}_isYearAndMonthAfterMaxDate(e,t){if(this.maxDate){const n=this._dateAdapter.getYear(this.maxDate),i=this._dateAdapter.getMonth(this.maxDate);return e>n||e===n&&t>i}return!1}_isYearAndMonthBeforeMinDate(e,t){if(this.minDate){const n=this._dateAdapter.getYear(this.minDate),i=this._dateAdapter.getMonth(this.minDate);return e<n||e===n&&t<i}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof IP?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(xl),Oo(XC,8),Oo(ZC,8),Oo(PC,8))},e.\u0275cmp=$e({type:e,selectors:[["mat-year-view"]],viewQuery:function(e,t){if(1&e&&wc(kP,1),2&e){let e;_c(e=Sc())&&(t._matCalendarBody=e.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"]],template:function(e,t){1&e&&(Lo(0,"table",0),Lo(1,"thead",1),Lo(2,"tr"),No(3,"th",2),Fo(),Fo(),Lo(4,"tbody",3),Uo("selectedValueChange",function(e){return t._monthSelected(e)})("keydown",function(e){return t._handleCalendarBodyKeydown(e)}),Fo(),Fo()),2&e&&(Jr(4),Po("label",t._yearLabel)("rows",t._months)("todayValue",t._todayMonth)("startValue",t._selectedMonth)("endValue",t._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",t._dateAdapter.getMonth(t.activeDate)))},directives:[kP],encapsulation:2,changeDetection:0}),e})(),BP=0,HP=(()=>{class e{constructor(e,t,n,i,r){this._intl=e,this.calendar=t,this._dateAdapter=n,this._dateFormats=i,this._buttonDescriptionId="mat-calendar-button-"+BP++,this.calendar.stateChanges.subscribe(()=>r.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const e=this._dateAdapter.getYear(this.calendar.activeDate)-zP(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),t=e+24-1,n=this._dateAdapter.getYearName(this._dateAdapter.createDate(e,0,1)),i=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1));return this._intl.formatYearRange(n,i)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,t){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(t):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(t):NP(this._dateAdapter,e,t,this.calendar.minDate,this.calendar.maxDate)}}return e.\u0275fac=function(t){return new(t||e)(Oo(SP),Oo(se(()=>qP)),Oo(ZC,8),Oo(XC,8),Oo(xl))},e.\u0275cmp=$e({type:e,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:pP,decls:10,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","cdkAriaLive","polite",1,"mat-calendar-period-button",3,"click"],[1,"mat-calendar-arrow"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,t){1&e&&(Qo(),Lo(0,"div",0),Lo(1,"div",1),Lo(2,"button",2),Uo("click",function(){return t.currentPeriodClicked()}),Lo(3,"span"),xa(4),Fo(),No(5,"div",3),Fo(),No(6,"div",4),Jo(7),Lo(8,"button",5),Uo("click",function(){return t.previousClicked()}),Fo(),Lo(9,"button",6),Uo("click",function(){return t.nextClicked()}),Fo(),Fo(),Fo()),2&e&&(Jr(2),Ro("aria-label",t.periodButtonLabel)("aria-describedby",t._buttonDescriptionId),Jr(1),Ro("id",t._buttonDescriptionId),Jr(1),Sa(t.periodButtonText),Jr(1),ca("mat-calendar-invert","month"!==t.calendar.currentView),Jr(3),Po("disabled",!t.previousEnabled()),Ro("aria-label",t.prevButtonLabel),Jr(1),Po("disabled",!t.nextEnabled()),Ro("aria-label",t.nextButtonLabel))},directives:[Fk,xC],encapsulation:2,changeDetection:0}),e})(),qP=(()=>{class e{constructor(e,t,n,i){this._dateAdapter=t,this._dateFormats=n,this._changeDetectorRef=i,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new lc,this.yearSelected=new lc,this.monthSelected=new lc,this.viewChanged=new lc(!0),this._userSelection=new lc,this.stateChanges=new S,this._intlChanges=e.changes.subscribe(()=>{i.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof IP?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const t=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),t&&this.viewChanged.emit(t)}ngAfterContentInit(){this._calendarHeaderPortal=new vE(this.headerComponent||HP),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const t=e.minDate||e.maxDate||e.dateFilter;if(t&&!t.firstChange){const e=this._getCurrentViewComponent();e&&(this._changeDetectorRef.detectChanges(),e._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){const e=this.currentView;let t;t="month"===e?this.monthView:"year"===e?this.yearView:this.multiYearView,t._init()}_dateSelected(e){const t=e.value;(this.selected instanceof IP||t&&!this._dateAdapter.sameDate(t,this.selected))&&this.selectedChange.emit(t),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,t){this.activeDate=e,this.currentView=t}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return e.\u0275fac=function(t){return new(t||e)(Oo(SP),Oo(ZC,8),Oo(XC,8),Oo(xl))},e.\u0275cmp=$e({type:e,selectors:[["mat-calendar"]],viewQuery:function(e,t){if(1&e&&(wc(LP,1),wc(jP,1),wc(FP,1)),2&e){let e;_c(e=Sc())&&(t.monthView=e.first),_c(e=Sc())&&(t.yearView=e.first),_c(e=Sc())&&(t.multiYearView=e.first)}},hostAttrs:[1,"mat-calendar"],inputs:{startView:"startView",startAt:"startAt",selected:"selected",minDate:"minDate",maxDate:"maxDate",headerComponent:"headerComponent",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[qa([PP]),lt],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,t){1&e&&(Io(0,fP,0,0,"ng-template",0),Lo(1,"div",1),Io(2,mP,1,8,"mat-month-view",2),Io(3,gP,1,6,"mat-year-view",3),Io(4,vP,1,6,"mat-multi-year-view",4),Fo()),2&e&&(Po("cdkPortalOutlet",t._calendarHeaderPortal),Jr(1),Po("ngSwitch",t.currentView),Jr(1),Po("ngSwitchCase","month"),Jr(1),Po("ngSwitchCase","year"),Jr(1),Po("ngSwitchCase","multi-year"))},directives:[xE,TC,ru,su,LP,jP,FP],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),e})();const $P={transformPanel:Ku("transformPanel",[td("void",ed({opacity:0,transform:"scale(1, 0.8)"})),id("void => enter",Qu("120ms cubic-bezier(0, 0, 0.2, 1)",ed({opacity:1,transform:"scale(1, 1)"}))),id("* => void",Qu("100ms linear",ed({opacity:0})))]),fadeInCalendar:Ku("fadeInCalendar",[td("void",ed({opacity:0})),td("enter",ed({opacity:1})),id("void => *",Qu("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let UP=0;const WP=new Yn("mat-datepicker-scroll-strategy"),GP={provide:WP,deps:[QE],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};class YP{constructor(e){this._elementRef=e}}const ZP=qC(YP);let XP=(()=>{class e extends ZP{constructor(e,t,n,i,r,s){super(e),this._changeDetectorRef=t,this._globalModel=n,this._dateAdapter=i,this._rangeSelectionStrategy=r,this._subscriptions=new u,this._animationState="enter",this._animationDone=new S,this._actionsPortal=null,this._closeButtonText=(null==s?void 0:s.closeCalendarLabel)||"Close calendar"}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const t=this._model.selection,n=e.value,i=t instanceof IP;if(i&&this._rangeSelectionStrategy){const i=this._rangeSelectionStrategy.selectionFinished(n,t,e.event);this._model.updateSelection(i,this)}else!n||!i&&this._dateAdapter.sameDate(n,t)||this._model.add(n);this._model&&!this._model.isComplete()||this._actionsPortal||this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(xl),Oo(DP),Oo(ZC),Oo(MP,8),Oo(SP))},e.\u0275cmp=$e({type:e,selectors:[["mat-datepicker-content"]],viewQuery:function(e,t){if(1&e&&wc(qP,1),2&e){let e;_c(e=Sc())&&(t._calendar=e.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,t){1&e&&Wo("@transformPanel.done",function(){return t._animationDone.next()}),2&e&&(Ra("@transformPanel",t._animationState),ca("mat-datepicker-content-touch",t.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[mo],decls:5,vars:20,consts:[["cdkTrapFocus","",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"mat-calendar",1),Uo("yearSelected",function(e){return t.datepicker._selectYear(e)})("monthSelected",function(e){return t.datepicker._selectMonth(e)})("viewChanged",function(e){return t.datepicker._viewChanged(e)})("_userSelection",function(e){return t._handleUserSelection(e)}),Fo(),Io(2,bP,0,0,"ng-template",2),Lo(3,"button",3),Uo("focus",function(){return t._closeButtonFocused=!0})("blur",function(){return t._closeButtonFocused=!1})("click",function(){return t.datepicker.close()}),xa(4),Fo(),Fo()),2&e&&(ca("mat-datepicker-content-container-with-actions",t._actionsPortal),Jr(1),Po("id",t.datepicker.id)("ngClass",t.datepicker.panelClass)("startAt",t.datepicker.startAt)("startView",t.datepicker.startView)("minDate",t.datepicker._getMinDate())("maxDate",t.datepicker._getMaxDate())("dateFilter",t.datepicker._getDateFilter())("headerComponent",t.datepicker.calendarHeaderComponent)("selected",t._getSelected())("dateClass",t.datepicker.dateClass)("comparisonStart",t.comparisonStart)("comparisonEnd",t.comparisonEnd)("@fadeInCalendar","enter"),Jr(1),Po("cdkPortalOutlet",t._actionsPortal),Jr(1),ca("cdk-visually-hidden",!t._closeButtonFocused),Po("color",t.color||"primary"),Jr(1),Sa(t._closeButtonText))},directives:[bC,qP,Xh,xE,Fk],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;overflow:auto;margin:-24px}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[$P.transformPanel,$P.fadeInCalendar]},changeDetection:0}),e})(),KP=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l){this._dialog=e,this._overlay=t,this._ngZone=n,this._viewContainerRef=i,this._dateAdapter=s,this._dir=o,this._document=a,this._model=l,this._inputStateChanges=u.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new lc,this.monthSelected=new lc,this.viewChanged=new lc(!0),this.openedStream=new lc,this.closedStream=new lc,this._opened=!1,this.id="mat-datepicker-"+UP++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new S,this._scrollStrategy=r}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=NS(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const t=NS(e);t!==this._disabled&&(this._disabled=t,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=NS(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function(e,t=/\s+/){const n=[];if(null!=e){const i=Array.isArray(e)?e:`${e}`.split(t);for(const e of i){const t=`${e}`.trim();t&&n.push(t)}}return n}(e)}get opened(){return this._opened}set opened(e){NS(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(e){const t=e.xPosition||e.yPosition;t&&!t.firstChange&&this._popupRef&&(this._setConnectedPositions(this._popupRef.getConfig().positionStrategy),this.opened&&this._popupRef.updatePosition()),this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyPopup(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._popupComponentRef&&this._popupRef){const e=this._popupComponentRef.instance;e._startExitAnimation(),e._animationDone.pipe(gv(1)).subscribe(()=>this._destroyPopup())}this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null);const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_applyPendingSelection(){var e,t;const n=(null===(e=this._popupComponentRef)||void 0===e?void 0:e.instance)||(null===(t=this._dialogRef)||void 0===t?void 0:t.componentInstance);null==n||n._applyPendingSelection()}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(XP,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"mat-datepicker-dialog",hasBackdrop:!0,disableClose:!1,backdropClass:["cdk-overlay-dark-backdrop",this._backdropHarnessClass],width:"",height:"",minWidth:"",minHeight:"",maxWidth:"80vw",maxHeight:"",position:{},autoFocus:!1,restoreFocus:!1}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._forwardContentValues(this._dialogRef.componentInstance)}_openAsPopup(){const e=new vE(XP,this._viewContainerRef);this._destroyPopup(),this._createPopup(),this._popupComponentRef=this._popupRef.attach(e),this._forwardContentValues(this._popupComponentRef.instance),this._ngZone.onStable.pipe(gv(1)).subscribe(()=>{this._popupRef.updatePosition()})}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._actionsPortal=this._actionsPortal}_createPopup(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition(),t=new ME({positionStrategy:this._setConnectedPositions(e),hasBackdrop:!0,backdropClass:["mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-datepicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),U(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Cf(e=>27===e.keyCode&&!OS(e)||this.datepickerInput&&OS(e,"altKey")&&38===e.keyCode))).subscribe(e=>{e&&e.preventDefault(),this.close()})}_destroyPopup(){this._popupRef&&(this._popupRef.dispose(),this._popupRef=this._popupComponentRef=null)}_setConnectedPositions(e){const t="end"===this.xPosition?"end":"start",n="start"===t?"end":"start",i="above"===this.yPosition?"bottom":"top",r="top"===i?"bottom":"top";return e.withPositions([{originX:t,originY:r,overlayX:t,overlayY:i},{originX:t,originY:i,overlayX:t,overlayY:r},{originX:n,originY:r,overlayX:n,overlayY:i},{originX:n,originY:i,overlayX:n,overlayY:r}])}}return e.\u0275fac=function(t){return new(t||e)(Oo(sP),Oo(QE),Oo(Zc),Oo(Ll),Oo(WP),Oo(ZC,8),Oo(PC,8),Oo(Rh,8),Oo(DP))},e.\u0275dir=Xe({type:e,inputs:{startView:"startView",xPosition:"xPosition",yPosition:"yPosition",startAt:"startAt",color:"color",touchUi:"touchUi",disabled:"disabled",restoreFocus:"restoreFocus",panelClass:"panelClass",opened:"opened",calendarHeaderComponent:"calendarHeaderComponent",dateClass:"dateClass"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[lt]}),e})(),QP=(()=>{class e extends KP{}return e.\u0275fac=function(t){return JP(t||e)},e.\u0275cmp=$e({type:e,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[qa([PP,{provide:KP,useExisting:e}]),mo],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})();const JP=$n(QP);class eM{constructor(e,t){this.target=e,this.targetElement=t,this.value=this.target.value}}let tM=(()=>{class e{constructor(e,t,n){this._elementRef=e,this._dateAdapter=t,this._dateFormats=n,this.dateChange=new lc,this.dateInput=new lc,this.stateChanges=new S,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=u.EMPTY,this._localeSubscription=u.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=e=>{const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!t||this._matchesFilter(t)?null:{matDatepickerFilter:!0}},this._minValidator=e=>{const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this._getMinDate();return!n||!t||this._dateAdapter.compareDate(n,t)<=0?null:{matDatepickerMin:{min:n,actual:t}}},this._maxValidator=e=>{const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),n=this._getMaxDate();return!n||!t||this._dateAdapter.compareDate(n,t)>=0?null:{matDatepickerMax:{max:n,actual:t}}},this._lastValueValid=!1,this._localeSubscription=t.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const t=NS(e),n=this._elementRef.nativeElement;this._disabled!==t&&(this._disabled=t,this.stateChanges.next(void 0)),t&&this._isInitialized&&n.blur&&n.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(e=>{if(this._shouldHandleChangeEvent(e)){const t=this._getValueFromModel(e.selection);this._lastValueValid=this._isValidValue(t),this._cvaOnChange(t),this._onTouched(),this._formatValue(t),this.dateInput.emit(new eM(this,this._elementRef.nativeElement)),this.dateChange.emit(new eM(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){(function(e,t){const n=Object.keys(e);for(let i of n){const{previousValue:n,currentValue:r}=e[i];if(!t.isDateInstance(n)||!t.isDateInstance(r))return!0;if(!t.sameDate(n,r))return!0}return!1})(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const t=this._lastValueValid;let n=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(n),n=this._dateAdapter.getValidDateOrNull(n),this._dateAdapter.sameDate(n,this.value)?(e&&!this.value&&this._cvaOnChange(n),t!==this._lastValueValid&&this._validatorOnChange()):(this._assignValue(n),this._cvaOnChange(n),this.dateInput.emit(new eM(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new eM(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const t=this._getDateFilter();return!t||t(e)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(ZC,8),Oo(XC,8))},e.\u0275dir=Xe({type:e,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[lt]}),e})();const nM={provide:lm,useExisting:se(()=>rM),multi:!0},iM={provide:gm,useExisting:se(()=>rM),multi:!0};let rM=(()=>{class e extends tM{constructor(e,t,n,i){super(e,t,n),this._formField=i,this._closedSubscription=u.EMPTY,this._validator=class{static min(e){return function(e){return t=>{if(fm(t.value)||fm(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}static max(e){return function(e){return t=>{if(fm(t.value)||fm(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}static required(e){return ym(e)}static requiredTrue(e){return function(e){return!0===e.value?null:{required:!0}}(e)}static email(e){return function(e){return fm(e.value)||bm.test(e.value)?null:{email:!0}}(e)}static minLength(e){return function(e){return t=>fm(t.value)||!mm(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static maxLength(e){return function(e){return t=>mm(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static pattern(e){return function(e){if(!e)return _m;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(fm(e.value))return null;const i=e.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Em(e)}static composeAsync(e){return Rm(e)}}.compose(super._getValidators())}set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._min)||(this._min=t,this._validatorOnChange())}get max(){return this._max}set max(e){const t=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(t,this._max)||(this._max=t,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){const t=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==t&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(ZC,8),Oo(XC,8),Oo(LA,8))},e.\u0275dir=Xe({type:e,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(e,t){1&e&&Uo("input",function(e){return t._onInput(e.target.value)})("change",function(){return t._onChange()})("blur",function(){return t._onBlur()})("keydown",function(e){return t._onKeydown(e)}),2&e&&(Aa("disabled",t.disabled),Ro("aria-haspopup",t._datepicker?"dialog":null)("aria-owns",(null==t._datepicker?null:t._datepicker.opened)&&t._datepicker.id||null)("min",t.min?t._dateAdapter.toIso8601(t.min):null)("max",t.max?t._dateAdapter.toIso8601(t.max):null)("data-mat-calendar",t._datepicker?t._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[qa([nM,iM,{provide:mO,useExisting:e}]),mo]}),e})(),sM=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Xe({type:e,selectors:[["","matDatepickerToggleIcon",""]]}),e})(),oM=(()=>{class e{constructor(e,t,n){this._intl=e,this._changeDetectorRef=t,this._stateChanges=u.EMPTY;const i=Number(n);this.tabIndex=i||0===i?i:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=NS(e)}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:xf(),t=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:xf(),n=this.datepicker?U(this.datepicker.openedStream,this.datepicker.closedStream):xf();this._stateChanges.unsubscribe(),this._stateChanges=U(this._intl.changes,e,t,n).subscribe(()=>this._changeDetectorRef.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(Oo(SP),Oo(xl),Wn("tabindex"))},e.\u0275cmp=$e({type:e,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,t,n){if(1&e&&xc(n,sM,1),2&e){let e;_c(e=Sc())&&(t._customIcon=e.first)}},viewQuery:function(e,t){if(1&e&&wc(yP,1),2&e){let e;_c(e=Sc())&&(t._button=e.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,t){1&e&&Uo("click",function(e){return t._open(e)}),2&e&&(Ro("tabindex",null)("data-mat-calendar",t.datepicker?t.datepicker.id:null),ca("mat-datepicker-toggle-active",t.datepicker&&t.datepicker.opened)("mat-accent",t.datepicker&&"accent"===t.datepicker.color)("mat-warn",t.datepicker&&"warn"===t.datepicker.color))},inputs:{tabIndex:"tabIndex",disabled:"disabled",datepicker:["for","datepicker"],ariaLabel:["aria-label","ariaLabel"],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[lt],ngContentSelectors:xP,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,t){1&e&&(Qo(wP),Lo(0,"button",0,1),Io(2,_P,2,0,"svg",2),Jo(3),Fo()),2&e&&(Po("disabled",t.disabled)("disableRipple",t.disableRipple),Ro("aria-haspopup",t.datepicker?"dialog":null)("aria-label",t.ariaLabel||t._intl.openCalendarLabel)("tabindex",t.disabled?-1:t.tabIndex),Jr(2),Po("ngIf",!t._customIcon))},directives:[Fk,eu],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),e})(),aM=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[SP,GP],imports:[[fu,Nk,oP,rA,DC,SE,BC],fE]}),e})();const lM=["filterMenu"];function cM(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"filter_list"),Fo())}function hM(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_upward"),Fo())}function uM(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_downward"),Fo())}function dM(e,t){if(1&e){const e=Bo();Lo(0,"div",6),Lo(1,"button",8),Uo("click",function(){return Pt(e),Xo().onSortClear()}),xa(2,"Clear Sort"),Fo(),Fo()}}function pM(e,t){if(1&e&&(Lo(0,"mat-option",16),xa(1),Fo()),2&e){const e=t.$implicit;Po("value",e),Jr(1),Ca(" ",e.name," ")}}function fM(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",6),Lo(2,"span",5),xa(3,"and"),Fo(),Fo(),Lo(4,"div",6),Lo(5,"mat-form-field",17),Uo("click",function(e){return e.stopPropagation()}),Lo(6,"input",22),Uo("ngModelChange",function(t){return Pt(e),Xo(2).operand2Input=t}),Fo(),No(7,"mat-datepicker-toggle",19),No(8,"mat-datepicker",null,20),Fo(),Fo(),Vo()}if(2&e){const e=Do(9),t=Xo(2);Jr(6),Po("matDatepicker",e)("ngModel",t.operand2Input),Jr(1),Po("for",e)}}function mM(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",6),Lo(2,"mat-form-field",17),Uo("click",function(e){return e.stopPropagation()}),Lo(3,"input",18),Uo("ngModelChange",function(t){return Pt(e),Xo().operand1Input=t}),Fo(),No(4,"mat-datepicker-toggle",19),No(5,"mat-datepicker",null,20),Fo(),Fo(),Io(7,fM,10,3,"ng-container",1),Lo(8,"div",6),Lo(9,"button",21),Uo("click",function(){return Pt(e),Xo().onClearFilter()}),xa(10,"Clear Filter"),Fo(),Fo(),No(11,"div",12),Vo()}if(2&e){const e=Do(6),t=Xo();Jr(3),Po("matDatepicker",e)("ngModel",t.operand1Input),Jr(1),Po("for",e),Jr(3),Po("ngIf",3===t.selectedOperator.operands)}}function gM(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",6),Lo(2,"button",21),Uo("click",function(){return Pt(e),Xo().onClearSelection()}),xa(3,"Clear Selection"),Fo(),Fo(),Fo()}}let vM=(()=>{class e{constructor(){this.predicateEmitter=new lc,this.filterCleared=!1,this.operatorList=[{name:"Less than",operands:2,operator:"<"},{name:"Greater than",operands:2,operator:">"},{name:"Equal to",operands:2,operator:"=="},{name:"Not equal to",operands:2,operator:"!="},{name:"Between",operands:3,operator:">",operator2:"<"}],this.selectedSort=null,this.dropdownSettings={itemsShowLimit:6,allowSearchFilter:!0,defaultOpen:!1},this.selectedItems=[]}ngOnInit(){this.choices$&&this.choices$.subscribe(e=>{if(void 0!==e&&e[this.columnName]){this.choices=[];for(let t=0;t<e[this.columnName].length;t++)this.choices.push({id:t,text:e[this.columnName][t]})}}),this.clear$&&this.clear$.subscribe(e=>{this.selectedOperator=null,this.selectedSort=null,this.selectedItems=[],this.filterCleared=!0})}onValidation(){this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortAsc(){this.selectedSort="asc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortDesc(){this.selectedSort="desc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortClear(){this.selectedSort=null,this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onClearFilter(){this.selectedOperator=null,this.filterCleared=!0}onClearSelection(){this.selectedItems=[]}generatePredicate(){const e={field:this.columnName,predicates:[],sort:{field:this.columnName,order:this.selectedSort}};return this.selectedOperator&&2===this.selectedOperator.operands?e.predicates.push({field:this.columnName,op:this.selectedOperator.operator,value:this.operand1Input}):this.selectedOperator&&3===this.selectedOperator.operands&&(e.predicates.push({field:this.columnName,op:this.selectedOperator.operator,value:this.operand1Input<this.operand2Input?this.operand1Input:this.operand2Input}),e.predicates.push({field:this.columnName,op:this.selectedOperator.operator2,value:this.operand1Input<this.operand2Input?this.operand2Input:this.operand1Input})),this.selectedItems.length>0&&e.predicates.push({field:this.columnName,op:"in",value:this.selectedItems.map(e=>e.text)}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-date-filter"]],viewQuery:function(e,t){if(1&e&&wc(lM,1),2&e){let e;_c(e=Sc())&&(t.matMenuTrigger=e.first)}},inputs:{columnName:"columnName",choices$:"choices$",clear$:"clear$"},outputs:{predicateEmitter:"predicateEmitter"},decls:31,vars:15,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],[4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"content-centered",3,"click"],[1,"col-12"],[1,"row"],[1,"col-6",2,"padding-left","0px"],["mat-button","",1,"float-left",3,"click"],[1,"col-6",2,"text-align","right"],["mat-flat-button","","color","primary",1,"float-right",3,"click"],["class","row",4,"ngIf"],[1,"dropdown-divider"],["placeholder","Select comparison",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["name","multi",1,"col-12",3,"settings","data","placeholder","ngModel","ngModelChange"],[3,"value"],[1,"col-12",3,"click"],["matInput","","placeholder","Choose a date","name","operand1Input",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["mat-button","",3,"click"],["matInput","","placeholder","Choose a date","name","operand2Input",3,"matDatepicker","ngModel","ngModelChange"]],template:function(e,t){1&e&&(Lo(0,"button",0),Lo(1,"span"),Io(2,cM,2,0,"mat-icon",1),Io(3,hM,2,0,"mat-icon",1),Io(4,uM,2,0,"mat-icon",1),Lo(5,"mat-icon"),xa(6,"arrow_drop_down"),Fo(),Fo(),Fo(),Lo(7,"mat-menu",2,3),Lo(9,"div",4),Uo("click",function(e){return e.stopPropagation()}),Lo(10,"form",5),Lo(11,"div",6),Lo(12,"div",7),Lo(13,"button",8),Uo("click",function(){return t.onSortAsc()}),xa(14,"Sort Ascending"),Fo(),Fo(),Lo(15,"div",9),Lo(16,"button",10),Uo("click",function(){return t.onValidation()}),xa(17," OK "),Fo(),Fo(),Fo(),Lo(18,"div",6),Lo(19,"button",8),Uo("click",function(){return t.onSortDesc()}),xa(20,"Sort Descending"),Fo(),Fo(),Io(21,dM,3,0,"div",11),Lo(22,"div",6),No(23,"div",12),Lo(24,"mat-form-field",5),Lo(25,"mat-select",13),Uo("valueChange",function(e){return t.selectedOperator=e}),Io(26,pM,2,2,"mat-option",14),Fo(),Fo(),Fo(),Io(27,mM,12,4,"ng-container",1),Io(28,gM,4,0,"div",1),Lo(29,"div"),Lo(30,"ng-multiselect-dropdown",15),Uo("ngModelChange",function(e){return t.selectedItems=e}),Fo(),Fo(),Fo(),Fo(),Fo()),2&e&&(Po("matMenuTriggerFor",Do(8)),Jr(2),Po("ngIf",t.selectedOperator||t.selectedItems.length>0),Jr(1),Po("ngIf","desc"===t.selectedSort),Jr(1),Po("ngIf","asc"===t.selectedSort),Jr(17),Po("ngIf",t.selectedSort),Jr(4),Po("value",t.selectedOperator),Jr(1),Po("ngForOf",t.operatorList),Jr(1),Po("ngIf",t.selectedOperator),Jr(1),Po("ngIf",t.selectedItems.length),Jr(2),ha("filter-dropdown"),Po("settings",t.dropdownSettings)("data",t.choices)("placeholder","Select Items")("ngModel",t.selectedItems))},directives:[Fk,kD,eu,lI,wD,pg,Vm,cg,FA,iR,Qh,ly,zm,dg,Rk,_O,rM,pm,oM,IA,QP],styles:["button.active:focus,button:active:focus,button:focus{outline:none!important;outline-style:none!important}li,p{font-size:.9rem!important}"],encapsulation:2}),e})();const bM=["filterMenu"];function yM(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"filter_list"),Fo())}function _M(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_downward"),Fo())}function wM(e,t){1&e&&(Lo(0,"mat-icon"),xa(1,"arrow_upward"),Fo())}function xM(e,t){if(1&e){const e=Bo();Lo(0,"div",6),Lo(1,"button",8),Uo("click",function(){return Pt(e),Xo().onSortClear()}),xa(2,"Clear Sort"),Fo(),Fo()}}function SM(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"div",6),Lo(2,"button",8),Uo("click",function(){return Pt(e),Xo().onClearSelection()}),xa(3,"Clear Selection"),Fo(),Fo(),Fo()}}let CM=(()=>{class e{constructor(){this.predicateEmitter=new lc,this.filterCleared=!1,this.selectedSort=null,this.dropdownSettings={itemsShowLimit:2,allowSearchFilter:!0,defaultOpen:!1},this.selectedItems=[]}ngOnInit(){this.choices$&&this.choices$.subscribe(e=>{if(void 0!==e&&e[this.columnName]){this.choices=[];for(let t=0;t<e[this.columnName].length;t++)this.choices.push({id:t,text:e[this.columnName][t]})}}),this.clear$&&this.clear$.subscribe(e=>{this.selectedSort=null,this.selectedItems=[]})}onValidation(){this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortAsc(){this.selectedSort="asc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortDesc(){this.selectedSort="desc",this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onSortClear(){this.selectedSort=null,this.predicateEmitter.emit(this.generatePredicate()),this.matMenuTrigger&&this.matMenuTrigger.closed.emit()}onClearSelection(){this.selectedItems=[]}generatePredicate(){const e={field:this.columnName,predicates:[],sort:{field:this.columnName,order:this.selectedSort}};return this.selectedItems.length>0&&e.predicates.push({field:this.columnName,op:"in",value:this.selectedItems.map(e=>"boolean"==typeof e.text?e.text?"1":"0":e.text)}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-bool-filter"]],viewQuery:function(e,t){if(1&e&&wc(bM,1),2&e){let e;_c(e=Sc())&&(t.matMenuTrigger=e.first)}},inputs:{columnName:"columnName",choices$:"choices$",clear$:"clear$"},outputs:{predicateEmitter:"predicateEmitter"},decls:25,vars:12,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],[4,"ngIf"],["xPosition","before",1,"menu-overflow-hidden","tf-mat-menu"],["filterMenu","matMenu"],[1,"content-centered",3,"click"],[1,"col-12"],[1,"row"],[1,"col-6",2,"padding-left","0px"],["mat-button","",1,"float-left",3,"click"],[1,"col-6",2,"text-align","right"],["mat-flat-button","","color","primary",1,"float-right",3,"click"],["class","row",4,"ngIf"],["name","multi",1,"col-12",3,"settings","data","placeholder","ngModel","ngModelChange"]],template:function(e,t){1&e&&(Lo(0,"button",0),Lo(1,"span"),Io(2,yM,2,0,"mat-icon",1),Io(3,_M,2,0,"mat-icon",1),Io(4,wM,2,0,"mat-icon",1),Lo(5,"mat-icon"),xa(6,"arrow_drop_down"),Fo(),Fo(),Fo(),Lo(7,"mat-menu",2,3),Lo(9,"div",4),Uo("click",function(e){return e.stopPropagation()}),Lo(10,"form",5),Lo(11,"div",6),Lo(12,"div",7),Lo(13,"button",8),Uo("click",function(){return t.onSortAsc()}),xa(14,"Sort Ascending"),Fo(),Fo(),Lo(15,"div",9),Lo(16,"button",10),Uo("click",function(){return t.onValidation()}),xa(17," OK "),Fo(),Fo(),Fo(),Lo(18,"div",6),Lo(19,"button",8),Uo("click",function(){return t.onSortDesc()}),xa(20,"Sort Descending"),Fo(),Fo(),Io(21,xM,3,0,"div",11),Io(22,SM,4,0,"div",1),Lo(23,"div",6),Lo(24,"ng-multiselect-dropdown",12),Uo("ngModelChange",function(e){return t.selectedItems=e}),Fo(),Fo(),Fo(),Fo(),Fo()),2&e&&(Po("matMenuTriggerFor",Do(8)),Jr(2),Po("ngIf",t.selectedItems.length>0),Jr(1),Po("ngIf","desc"===t.selectedSort),Jr(1),Po("ngIf","asc"===t.selectedSort),Jr(17),Po("ngIf",t.selectedSort),Jr(1),Po("ngIf",t.selectedItems.length),Jr(2),ha("filter-dropdown"),Po("settings",t.dropdownSettings)("data",t.choices)("placeholder","Select Items")("ngModel",t.selectedItems))},directives:[Fk,kD,eu,lI,wD,pg,Vm,cg,ly,zm,dg],styles:[".content-centered{text-align:center}button.active:focus,button:active:focus,button:focus{outline:none!important;outline-style:none!important}.tf-mat-menu{overflow:visible!important;max-width:none!important}.filter-dropdown .dropdown-btn{border:none!important;padding:0!important}.multiselect-item-checkbox{padding:0 10px!important}li,p{font-size:.9rem!important}"],encapsulation:2}),e})();const kM=new Yn("EventArgument",{providedIn:"root",factory:function(){return"$event"}}),EM=new Yn("DynamicComponentInjector");let AM=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu]]}),e})();function RM(e){return new at(void 0,e,!0)}function TM(){}let IM=(()=>{class e{constructor(e,t,n,i){this.differs=e,this.cfr=t,this.eventArgument=n,this.cdr=i,this.checkInit=this.failInit,this.lastComponentInst=null,this.inputsDiffer=this.differs.find({}).create(),this.compFactory=null,this.outputsShouldDisconnect$=new S,this.outputsChanged=()=>!1}get compRef(){return this.compInjector.componentRef}get componentInst(){return this.compRef?this.compRef.instance:null}get componentInstChanged(){return this.lastComponentInst!==this.componentInst&&(this.lastComponentInst=this.componentInst,!0)}get compCdr(){return this.compRef?this.compRef.injector.get(xl):null}ngOnDestroy(){this._disconnectOutputs()}init(e,t={}){if(this.checkInit=e?TM:this.failInit,this.compInjector=e,t.trackOutputChanges){const e=this.differs.find({}).create();this.outputsChanged=t=>!!e.diff(t)}}update(e,t,n,i){this.checkInit(),this.updateIO(e,t);const r=this.componentInstChanged;if(r||n){const e=this._getInputsChanges();e&&this._updateInputChanges(e),this.updateInputs(r||!this.lastInputChanges)}(r||i)&&this.bindOutputs()}maybeUpdate(){if(this.checkInit(),this.componentInstChanged)return this.updateInputs(!0),void this.bindOutputs();if(this.outputsChanged(this.outputs)&&this.bindOutputs(),!this.inputs)return;const e=this._getInputsChanges();if(e){const t=!!this.lastInputChanges;this._updateInputChanges(e),t&&this.updateInputs()}}updateIO(e,t){this.inputs=e,this.outputs=t}updateInputs(e=!1){e&&this._updateCompFactory();const t=this.componentInst;let n=this.inputs;n&&t&&(n=this._resolveInputs(n),Object.keys(n).forEach(e=>t[e]=n[e]),this.compCdr&&this.compCdr.markForCheck(),this.notifyOnInputChanges(this.lastInputChanges,e))}bindOutputs(){this._disconnectOutputs();const e=this.componentInst;let t=this.outputs;t&&e&&(t=this._resolveOutputs(t),Object.keys(t).filter(t=>e[t]).forEach(n=>e[n].pipe(dv(this.outputsShouldDisconnect$)).subscribe(e=>(this.cdr.markForCheck(),t[n](e)))))}notifyOnInputChanges(e={},t){this.componentInst.ngOnChanges&&(t&&(e=this._collectFirstChanges()),this.componentInst.ngOnChanges(e))}_disconnectOutputs(){this.outputsShouldDisconnect$.next()}_getInputsChanges(){return this.inputsDiffer.diff(this.inputs)}_updateInputChanges(e){this.lastInputChanges=this._collectChangesFromDiffer(e)}_collectFirstChanges(){const e={},t=this.inputs;return Object.keys(t).forEach(n=>e[n]=RM(t[n])),this._resolveChanges(e)}_collectChangesFromDiffer(e){const t={};return e.forEachAddedItem(e=>t[e.key]=RM(e.currentValue)),e.forEachChangedItem(e=>t[e.key]=new at(e.previousValue,e.currentValue,!1)),this._resolveChanges(t)}_resolveCompFactory(){try{try{return this.cfr.resolveComponentFactory(this.compRef.componentType)}catch(e){return this.cfr.resolveComponentFactory(this.compRef.instance.constructor)}}catch(e){return null}}_updateCompFactory(){this.compFactory=this._resolveCompFactory()}_resolveInputs(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}_resolveOutputs(e){return e=this._processOutputs(e),this.compFactory?this._remapIO(e,this.compFactory.outputs):e}_processOutputs(e){const t={};return Object.keys(e).forEach(n=>{const i=e[n];t[n]="function"==typeof i?i:i&&this._processOutputArgs(i)}),t}_processOutputArgs(e){const{handler:t}=e,n="args"in e?e.args||[]:[this.eventArgument];return e=>t(...n.map(t=>t===this.eventArgument?e:t))}_resolveChanges(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}_remapIO(e,t){const n={};return Object.keys(e).forEach(i=>{const r=this._findPropByTplInMapping(i,t)||i;n[r]=e[i]}),n}_findPropByTplInMapping(e,t){for(const n of t)if(n.templateName===e)return n.propName;return null}failInit(){throw Error("IoService: ComponentInjector was not set! Please call init() method!")}}return e.\u0275fac=function(t){return new(t||e)(ui(vl),ui(Wa),ui(kM),ui(xl))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),DM=(()=>{class e{constructor(e,t){this.ioService=e,this.componentInjector=t,this.ioService.init(this.componentInjector)}get inputs(){return this.ndcDynamicInputs||this.ngComponentOutletNdcDynamicInputs}get outputs(){return this.ndcDynamicOutputs||this.ngComponentOutletNdcDynamicOutputs}ngOnChanges(e){this.ioService.update(this.inputs,this.outputs,this.inputsChanged(e),this.outputsChanged(e))}ngDoCheck(){this.ioService.maybeUpdate()}inputsChanged(e){return"ngComponentOutletNdcDynamicInputs"in e||"ndcDynamicInputs"in e}outputsChanged(e){return"ngComponentOutletNdcDynamicOutputs"in e||"ndcDynamicOutputs"in e}}return e.\u0275fac=function(t){return new(t||e)(Oo(IM),Oo(EM,8))},e.\u0275dir=Xe({type:e,selectors:[["","ndcDynamicInputs",""],["","ndcDynamicOutputs",""],["","ngComponentOutletNdcDynamicInputs",""],["","ngComponentOutletNdcDynamicOutputs",""]],inputs:{ndcDynamicInputs:"ndcDynamicInputs",ngComponentOutletNdcDynamicInputs:"ngComponentOutletNdcDynamicInputs",ndcDynamicOutputs:"ndcDynamicOutputs",ngComponentOutletNdcDynamicOutputs:"ngComponentOutletNdcDynamicOutputs"},features:[qa([IM]),lt]}),e})(),OM=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu],AM]}),e})(),PM=(()=>{class e{constructor(e,t){this.vcr=e,this.cfr=t,this.ndcDynamicCreated=new lc}ngOnChanges(e){e.ndcDynamicComponent&&this.createDynamicComponent()}createDynamicComponent(){this.vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this.vcr.createComponent(this.cfr.resolveComponentFactory(this.ndcDynamicComponent),0,this._resolveInjector(),this.ndcDynamicContent),this.ndcDynamicCreated.emit(this.componentRef))}_resolveInjector(){let e=this.ndcDynamicInjector||this.vcr.injector;return this.ndcDynamicProviders&&(e=po.create({providers:this.ndcDynamicProviders,parent:e})),e}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ll),Oo(Wa))},e.\u0275cmp=$e({type:e,selectors:[["ndc-dynamic"]],inputs:{ndcDynamicComponent:"ndcDynamicComponent",ndcDynamicInjector:"ndcDynamicInjector",ndcDynamicProviders:"ndcDynamicProviders",ndcDynamicContent:"ndcDynamicContent"},outputs:{ndcDynamicCreated:"ndcDynamicCreated"},features:[qa([{provide:EM,useExisting:e}]),lt],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),MM=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[fu,OM],OM]}),e})();new Yn("WindowRef",{providedIn:"root",factory:function(){return window}});let LM=(()=>{class e{constructor(){this.showTextFilter=!0,this.showSort=!0,this.predicateEmitter=new lc,this.inputs=null,this.outputs={predicateEmitter:e=>this.predicateEmitter.emit(e)}}ngOnInit(){switch(this.inputs={columnName:this.columnName,choices$:this.choices$,clear$:this.clear$,setFilter$:this.setFilter$,showTextFilter:this.showTextFilter,showSort:this.showSort},this.filterMode){case $T.TEXT_MODE:this.filterImplementationComponent=MO;break;case $T.NUMBER_MODE:this.filterImplementationComponent=$O;break;case $T.DATE_MODE:this.filterImplementationComponent=vM;break;case $T.BOOL_MODE:this.filterImplementationComponent=CM}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-filter"]],inputs:{columnName:"columnName",choices$:"choices$",clear$:"clear$",setFilter$:"setFilter$",filterMode:"filterMode",showTextFilter:"showTextFilter",showSort:"showSort"},outputs:{predicateEmitter:"predicateEmitter"},exportAs:["menuInOtherComponent"],decls:1,vars:3,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicOutputs"]],template:function(e,t){1&e&&No(0,"ndc-dynamic",0),2&e&&Po("ndcDynamicComponent",t.filterImplementationComponent)("ndcDynamicInputs",t.inputs)("ndcDynamicOutputs",t.outputs)},directives:[PM,DM],styles:[""]}),e})();const FM=["searchBox"];function NM(e,t){1&e&&(Lo(0,"div",24),Lo(1,"span",25),xa(2,"Loading..."),Fo(),Fo())}function zM(e,t){if(1&e&&(Lo(0,"div",26),Lo(1,"div",0),Lo(2,"h4"),xa(3,"Error loading table"),Fo(),Lo(4,"p"),xa(5),nc(6,"async"),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(5),Sa(ic(6,1,e.dataSource.error$))}}function VM(e,t){if(1&e){const e=Bo();Lo(0,"div",3),Lo(1,"div",27),Lo(2,"input",28),Uo("ngModelChange",function(t){return Pt(e),Xo().isSelectedGenesChecked=t})("change",function(){Pt(e);const t=Xo();return t.onSelectedIdsChange(t.isSelectedGenesChecked)}),Fo(),Lo(3,"label",29),xa(4," Only alleles from selected samples "),Fo(),Fo(),Fo()}if(2&e){const e=Xo();Jr(2),Po("ngModel",e.isSelectedGenesChecked)}}function jM(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"app-filter",34,35),Uo("predicateEmitter",function(t){return Pt(e),Xo(4).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(3).$implicit,t=Xo();Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function BM(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"app-filter",36,35),Uo("predicateEmitter",function(t){return Pt(e),Xo(4).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(3).$implicit,t=Xo();Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}const HM=function(){return{bottom:!1,right:!0,top:!1,left:!0}};function qM(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",33),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Io(2,jM,3,5,"div",30),Io(3,BM,3,4,"div",30),Fo()}if(2&e){const e=Xo(2).$implicit;ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(8,HM)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("ngIf","name"===e.id),Jr(1),Po("ngIf","name"!==e.id)}}function $M(e,t){if(1&e){const e=Bo();Lo(0,"mat-cell",38),Uo("click",function(){Pt(e);const n=t.$implicit;return Xo(4).onSequenceClick(n)}),xa(1),Fo()}if(2&e){const e=t.$implicit,n=Xo(3).$implicit;Ea("",n.size," mat-ellipsis"),Jr(1),Ca(" ",e[n.id]," ")}}function UM(e,t){1&e&&(Lo(0,"div"),Io(1,$M,2,4,"mat-cell",37),Fo())}function WM(e,t){if(1&e&&(Lo(0,"mat-cell"),xa(1),Fo()),2&e){const e=t.$implicit,n=Xo(3).$implicit;ha(n.size),Jr(1),Ca(" ",e[n.id]," ")}}function GM(e,t){1&e&&(Lo(0,"div"),Io(1,WM,2,4,"mat-cell",39),Fo())}function YM(e,t){if(1&e&&(zo(0),zo(1,31),Io(2,qM,4,9,"mat-header-cell",32),Io(3,UM,2,0,"div",30),Io(4,GM,2,0,"div",30),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id),Jr(2),Po("ngIf","sequence"===e.id||"gapped_sequence"===e.id),Jr(1),Po("ngIf",!("sequence"===e.id||"gapped_sequence"===e.id))}}function ZM(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",33),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",34,35),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,HM)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.NUMBER_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function XM(e,t){if(1&e){const e=Bo();Lo(0,"div",38),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(3).onAppearancesClick(t)}),xa(1),Fo()}if(2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function KM(e,t){if(1&e&&(Lo(0,"div"),xa(1),Fo()),2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function QM(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,XM,2,1,"div",40),Io(2,KM,2,1,"div",30),Fo()),2&e){const e=Xo(2).$implicit;ha(e.size),Jr(1),Po("ngIf","appearances"===e.id),Jr(1),Po("ngIf","appearances"!==e.id)}}function JM(e,t){if(1&e&&(zo(0),zo(1,31),Io(2,ZM,4,12,"mat-header-cell",32),Io(3,QM,3,5,"mat-cell",39),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function eL(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",33),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",34,35),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,HM)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.BOOL_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function tL(e,t){1&e&&No(0,"i",42)}function nL(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,tL,1,0,"i",41),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Po("ngIf",e[n.id])}}function iL(e,t){if(1&e&&(zo(0),zo(1,31),Io(2,eL,4,12,"mat-header-cell",32),Io(3,nL,2,4,"mat-cell",39),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function rL(e,t){if(1&e&&(zo(0),Io(1,YM,5,3,"ng-container",30),Io(2,JM,4,1,"ng-container",30),Io(3,iL,4,1,"ng-container",30),Vo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf","string"===e.type),Jr(1),Po("ngIf","integer"===e.type||"number"===e.type),Jr(1),Po("ngIf","boolean"===e.type)}}function sL(e,t){1&e&&No(0,"mat-header-row")}function oL(e,t){1&e&&No(0,"mat-row")}function aL(e,t){if(1&e){const e=Bo();Lo(0,"div",43),Lo(1,"div",44),Lo(2,"b"),xa(3,"Download data for selected genes"),Fo(),Fo(),Lo(4,"div",45),xa(5," Ungapped sequences (fasta) "),Lo(6,"span"),xa(7,"\xa0\xa0"),Fo(),Lo(8,"button",46),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_gen_data","fasta",{type:"Ungapped sequences (fasta)"})}),No(9,"i",47),Fo(),Fo(),Lo(10,"div",45),xa(11," Gapped sequences (fasta) "),Lo(12,"span"),xa(13,"\xa0\xa0"),Fo(),Lo(14,"button",46),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_gen_data","fasta",{type:"Gapped sequences (fasta)"})}),No(15,"i",47),Fo(),Fo(),Lo(16,"div",45),xa(17," Gene information (csv) "),Lo(18,"span"),xa(19,"\xa0\xa0"),Fo(),Lo(20,"button",46),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_gen_data","csv",{type:"Gene information (csv)"})}),No(21,"i",47),Fo(),Fo(),Fo()}}const lL=function(){return[25,50,100,250]};let cL=(()=>{class e{constructor(e,t,n,i,r,s,o,a){this.genomicService=e,this.geneTableService=t,this.modalService=n,this.genGeneSelectedService=i,this.tableParamsStorageService=r,this.genSampleSelectedService=s,this.router=o,this.reportRunService=a,this.displayedColumns=[],this.allColumns=qT,this.lastLoadedColumns=[],this.paginatorSubscription=null,this.geneTableServiceSubscription=null,this.filterModeEnum=$T,this.filters=[],this.sorts=[],this.choices$Subscription=null,this.loading$Subscription=null,this.genSampleSelectedServiceSubscription=null,this.selectedSampleIds=[],this.samplesSelected=!1,this.isSelectedGenesChecked=!1,this.resizeEvents=new Map,this.clearSubject=new Jg(null),this.clear$=this.clearSubject.asObservable(),this.setFilterSubject=new Jg(null),this.setFilter$=this.setFilterSubject.asObservable(),this.redirectOnLoad=null,this.onlySelectedSamplesSet=!1}ngOnInit(){this.resizeEvents=this.tableParamsStorageService.loadSavedInfo(this.resizeEvents,"gen-gene-table-widths"),this.dataSource=new DS(this.genomicService)}ngOnDestroy(){this.paginatorSubscription.unsubscribe(),this.geneTableServiceSubscription.unsubscribe(),this.choices$Subscription.unsubscribe(),this.genSampleSelectedServiceSubscription.unsubscribe()}ngAfterViewInit(){this.paginatorSubscription=this.paginator.page.subscribe(()=>this.loadSequencesPage()),setTimeout(()=>{this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{e.species&&e.datasets&&(this.selection=e,this.paginator.firstPage(),this.table.renderRows(),this.loadSequencesPage())}),this.loading$Subscription=this.dataSource.loading$.subscribe(e=>{if(!e&&(this.applyResizes(),this.redirectOnLoad)){const e=this.redirectOnLoad;this.redirectOnLoad=null,this.router.navigate(e)}}),this.choices$Subscription=this.dataSource.choices$.subscribe(e=>{this.filters.length>0&&!this.isSelectedGenesChecked?this.genGeneSelectedService.selection.next({names:e.name,onlySelected:this.onlySelectedSamplesSet}):(this.onlySelectedSamplesSet=!1,this.genGeneSelectedService.selection.next({names:[],onlySelected:this.onlySelectedSamplesSet}))}),this.loading$Subscription=this.dataSource.loading$.subscribe(e=>{e||this.applyResizes()}),this.genSampleSelectedServiceSubscription=this.genSampleSelectedService.source.subscribe(e=>{var t,n;t=e.ids,n=this.selectedSampleIds,hL(Object.keys(t),Object.keys(n))&&Object.keys(t).every(e=>hL(t[e],n[e]))||(this.selectedSampleIds=e.ids,this.samplesSelected=Object.keys(this.selectedSampleIds).length>0,this.isSelectedGenesChecked&&(this.samplesSelected||(this.isSelectedGenesChecked=!1),this.onSelectedIdsChange(null)))}),this.router.events.subscribe(e=>{e instanceof f_&&this.applyResizes()})}),Ng(this.searchBox.nativeElement,"keyup").pipe(E(e=>e.target.value),PS(1e3),_v()).subscribe(e=>{this.quickSearch(e)})}onSelectedIdsChange(e){this.applyFilter(this.isSelectedGenesChecked&&this.samplesSelected?{field:"subject_id",predicates:[{field:"subject_id",op:"in",value:this.selectedSampleIds}],sort:{order:""}}:{field:"subject_id",predicates:[],sort:{order:""}})}quickSearch(e){this.setFilterSubject.next({operator:{name:"Includes",operands:2,operator:"like",prefix:"%",postfix:"%"},op1:e,op2:""}),this.loadSequencesPage()}clearSelection(){this.filters=[],this.clearSubject.next(null),this.searchBox.nativeElement.value="",this.loadSequencesPage()}applyFilter(e){for(let t=this.filters.length-1;t>=0;t--)this.filters[t].field===e.field&&this.filters.splice(t,1),"name"===e.field&&1===e.predicates.length&&"like"===e.predicates[0].op&&e.predicates[0].value==="%"+this.searchBox.nativeElement.value+"%"||(this.searchBox.nativeElement.value="");for(const t of e.predicates)t.op&&this.filters.push(t);for(let t=this.sorts.length-1;t>=0;t--)this.sorts[t].field===e.field&&this.sorts.splice(t,1);e.sort.order&&this.sorts.push(e.sort),this.paginator.pageIndex=0,this.loadSequencesPage()}updateColumnData(e){const t=function(e,t){const n=new Set(e);for(const i of t)n.delete(i);return n}(new Set(this.lastLoadedColumns),new Set(this.displayedColumns));this.filters=this.filters.filter(e=>!t.has(e.field)),this.sorts=this.sorts.filter(e=>!t.has(e.field)),this.loadSequencesPage()}loadSequencesPage(){this.selection&&this.dataSource.loadGeneSequences(this.selection.species,this.selection.datasets.join(),this.paginator.pageIndex,this.paginator.pageSize,JSON.stringify(this.filters),JSON.stringify(this.sorts),JSON.stringify(this.displayedColumns))}onSequenceClick(e){const t=this.modalService.open(IS,{size:"lg"});t.componentInstance.name=e.name,t.componentInstance.content={ungapped:e.sequence,gapped:e.gapped_sequence}}onAppearancesClick(e){this.onlySelectedSamplesSet=!0,this.redirectOnLoad=["./genesample","true"],this.setFilterSubject.next({operator:{name:"Includes",operands:2,operator:"like",prefix:"",postfix:""},op1:e.name,op2:""})}onResizeEnd(e,t){if(e.edges.right){const n=e.rectangle.width+"px";this.updateColumnWidth(t,n),this.resizeEvents.set(t,n),this.tableParamsStorageService.saveInfo(this.resizeEvents,"gen-gene-table-widths")}}applyResizes(){for(const[e,t]of this.resizeEvents)this.updateColumnWidth(e,t)}updateColumnWidth(e,t){const n=document.getElementsByClassName("mat-column-"+e);for(let i=0;i<n.length;i++)n[i].style.width=t}sendReportRequest(e,t,n){const i=this.selection.datasets;n.filters=this.filters,this.reportRunService.runReport({name:e,title:"Download",filter_params:[]},t,this.selection.species,i,[],[],[],n)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Hy),Oo(r_),Oo(Ob),Oo(WT),Oo(UT),Oo(GT),Oo(Nx),Oo(o_))},e.\u0275cmp=$e({type:e,selectors:[["app-gene-table-panel"]],viewQuery:function(e,t){if(1&e&&(wc(OR,1),wc(_T,1),wc(FM,3)),2&e){let e;_c(e=Sc())&&(t.paginator=e.first),_c(e=Sc())&&(t.table=e.first),_c(e=Sc())&&(t.searchBox=e.first)}},inputs:{selection:"selection"},features:[qa([UT])],decls:41,vars:20,consts:[[1,"row"],["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex"],[1,"header-text"],[1,"searchBox"],["searchBox",""],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex","padding-left","0px !important"],[2,"border-width","0px","background-color","transparent",3,"click"],[1,"primary-icon"],["digby-table-column-sorter","",3,"columns","columnInfo","saveName","columnsChange"],["id","downloadbutton",2,"border-width","0px","background-color","transparent",3,"matMenuTriggerFor"],["for","downloadbutton",1,"form-check-label"],["class","col-auto","style","align-items: center; justify-content: flex-start; display: flex;",4,"ngIf"],[1,"col-auto","ml-auto"],[3,"length","pageSize","pageSizeOptions"],[1,"col"],[3,"dataSource"],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["xPosition","before",1,"menu-overflow-hidden"],["downloadMenu","matMenu"],["matMenuContent",""],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"form-check"],["type","checkbox","id","chk-selected-items",1,"form-check-input",2,"margin-top",".1rem",3,"ngModel","ngModelChange","change"],["for","chk-selected-items",1,"form-check-label"],[4,"ngIf"],[3,"matColumnDef"],["mwlResizable","",3,"class","enableGhostResize","resizeEdges","resizeEnd",4,"matHeaderCellDef"],["mwlResizable","",3,"enableGhostResize","resizeEdges","resizeEnd"],[3,"columnName","filterMode","setFilter$","clear$","choices$","predicateEmitter"],["filterComponent","menuInOtherComponent"],[3,"columnName","filterMode","clear$","choices$","predicateEmitter"],[3,"class","click",4,"matCellDef"],[3,"click"],[3,"class",4,"matCellDef"],[3,"click",4,"ngIf"],["class","fa fa-check","style","line-height: inherit;",4,"ngIf"],[1,"fa","fa-check",2,"line-height","inherit"],[1,"container"],[1,"row","ml-1","mr-2"],[1,"row","ml-4","mr-2","mb-0","align-middle"],[1,"btn","btn-sm","btn-solid-icon","addr",3,"click"],[1,"fa","fa-file-text-o",2,"line-height","inherit"]],template:function(e,t){if(1&e&&(Lo(0,"div",0),Io(1,NM,3,0,"div",1),nc(2,"async"),Io(3,zM,7,3,"div",2),nc(4,"async"),Fo(),Lo(5,"div",0),Lo(6,"div",3),Lo(7,"span",4),xa(8,"Quick search:\xa0"),Fo(),No(9,"input",5,6),Fo(),Lo(11,"div",7),Lo(12,"button",8),Uo("click",function(){return t.clearSelection()}),Lo(13,"mat-icon",9),xa(14,"delete_sweep"),Fo(),Lo(15,"span",4),xa(16,"Clear filters"),Fo(),Fo(),Fo(),Lo(17,"div",7),Lo(18,"button",10),Uo("columnsChange",function(e){return t.displayedColumns=e})("columnsChange",function(e){return t.updateColumnData(e)}),Lo(19,"mat-icon",9),xa(20,"view_column"),Fo(),Lo(21,"span",4),xa(22,"Arrange Columns"),Fo(),Fo(),Fo(),Lo(23,"div",7),Lo(24,"button",11),Lo(25,"mat-icon",9),xa(26,"cloud_download"),Fo(),Fo(),Lo(27,"label",12),xa(28,"Download"),Fo(),Fo(),Io(29,VM,5,1,"div",13),Lo(30,"div",14),No(31,"mat-paginator",15),Fo(),Fo(),Lo(32,"div",0),Lo(33,"div",16),Lo(34,"mat-table",17),Io(35,rL,4,3,"ng-container",18),Io(36,sL,1,0,"mat-header-row",19),Io(37,oL,1,0,"mat-row",20),Fo(),Fo(),Fo(),Lo(38,"mat-menu",21,22),Io(40,aL,22,0,"ng-template",23),Fo()),2&e){const e=Do(39);Jr(1),Po("ngIf",ic(2,15,t.dataSource.loading$)),Jr(2),Po("ngIf",ic(4,17,t.dataSource.error$)),Jr(15),Po("columns",t.displayedColumns)("columnInfo",t.allColumns)("saveName","gen-gene-table"),Jr(6),Po("matMenuTriggerFor",e),Jr(5),Po("ngIf",t.samplesSelected),Jr(2),Po("length",null==t.dataSource?null:t.dataSource.totalItems)("pageSize",25)("pageSizeOptions",Xl(19,lL)),Jr(3),Po("dataSource",t.dataSource),Jr(1),Po("ngForOf",t.allColumns),Jr(1),Po("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),Jr(1),Po("matRowDefColumns",t.displayedColumns)}},directives:[eu,lI,eO,kD,OR,_T,Qh,OT,MT,wD,pD,hm,zm,dg,ET,CT,RT,cO,LM,xT,IT,FT,zT],pipes:[uu],styles:[".btn-sm{padding:.1rem .3rem!important;line-height:1!important}.i{line-height:inherit}.primary-icon{color:#007bff;align-items:center;vertical-align:bottom;line-height:20px}.header-text{color:rgba(0,0,0,.54);font-size:12px}.btn-solid-icon{background-color:#fff;color:#6c757d;border:none}mwlResizable{box-sizing:border-box}.mat-paginator-range-label{margin:0!important}.searchbox{border:1px solid #ced4ff}mat-cell,mat-footer-cell,mat-header-cell{width:200px;flex:none!important;display:block}mat-header-cell{border-left:1px solid #eee}.mat-cell,.mat-header-cell{padding-left:6px;padding-right:6px}.mat-cell{border-left:1px solid #eee;vertical-align:middle;overflow:hidden;text-overflow:ellipsis}.mat-row{min-height:18px!important;height:100%!important;padding-bottom:6px!important;padding-top:6px!important}.small-col{width:100px}.large-col{width:300px}.mat-ellipsis{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block}"],encapsulation:2}),e})();function hL(e,t){return e.length===t.length&&e.every(e=>t.includes(e))}let uL=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-genetable"]],decls:3,vars:3,consts:[[1,"container-fluid"],[3,"showGenomic","showAssembly","showRepseq"]],template:function(e,t){1&e&&(Lo(0,"div",0),No(1,"app-gene-table-selector",1),No(2,"app-gene-table-panel"),Fo()),2&e&&(Jr(1),Po("showGenomic",!0)("showAssembly",!1)("showRepseq",!1))},directives:[ES,cL],styles:[""]}),e})(),dL=(()=>{class e{constructor(e,t,n){this.httpClient=e,this.systemService=t,this.authService=n,this.config=null,this.sysConfig=new Jg(new l_(!0,"","","")),this.init()}init(){console.log("wordpress init started"),this.authService.sysConfig.subscribe(e=>{console.log("wordpress init got config update"),this.config=e,this.sysConfig.next(e)})}fetchNews(){return this.httpClient.get(`${this.config.vdjbase_news}&per_page=5`).pipe(i_(),E(e=>{const t=[];for(const n in e)t.push([e[n].title.rendered,e[n].link]);return t}),Ly(e=>Ov(e)))}fetchHelp(){return this.httpClient.get(`${this.config.vdjbase_help}&per_page=5`).pipe(i_(),E(e=>{const t=[];for(const n in e)t.push([e[n].title.rendered,e[n].link]);return t}),Ly(e=>Ov(e)))}}return e.\u0275fac=function(t){return new(t||e)(ui(qf),ui(Uy),ui(aS))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function pL(e,t){1&e&&(Lo(0,"div",33),Lo(1,"span",34),xa(2,"Loading..."),Fo(),Fo())}function fL(e,t){1&e&&(Lo(0,"div",35),Lo(1,"h4"),xa(2,"Error loading news"),Fo(),Fo())}function mL(e,t){1&e&&(Lo(0,"p"),xa(1,"No posts available!"),Fo())}function gL(e,t){if(1&e&&(Lo(0,"li"),Lo(1,"a",12),xa(2),Fo(),Fo()),2&e){const e=t.$implicit;Jr(1),ea("href",e[1],nr),Jr(1),Sa(e[0])}}function vL(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"ul",36),Io(2,gL,3,2,"li",37),Fo(),Fo()),2&e){const e=Xo();Jr(2),Po("ngForOf",e.loadedNewsPosts)}}function bL(e,t){1&e&&(Lo(0,"div",33),Lo(1,"span",34),xa(2,"Loading..."),Fo(),Fo())}function yL(e,t){1&e&&(Lo(0,"div",35),Lo(1,"h4"),xa(2,"Error loading help"),Fo(),Fo())}function _L(e,t){1&e&&(Lo(0,"p"),xa(1,"No posts available!"),Fo())}function wL(e,t){if(1&e&&(Lo(0,"li"),Lo(1,"a",12),xa(2),Fo(),Fo()),2&e){const e=t.$implicit;Jr(1),ea("href",e[1],nr),Jr(1),Sa(e[0])}}function xL(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"ul",36),Io(2,wL,3,2,"li",37),Fo(),Fo()),2&e){const e=Xo();Jr(2),Po("ngForOf",e.loadedHelpPosts)}}let SL=(()=>{class e{constructor(e,t){this.wordpressService=e,this.authService=t,this.loadedNewsPosts=[],this.loadingNews=!1,this.errorNews=null,this.loadedHelpPosts=[],this.loadingHelp=!1,this.errorHelp=null,this.wpConfig=new l_(!0,"","","")}fillNews(){this.loadingNews=!0,this.wordpressService.fetchNews().subscribe(e=>{this.loadedNewsPosts=e,this.loadingNews=!1},e=>{this.errorNews=e,console.log("error in main"),this.loadingNews=!1})}fillHelp(){this.loadingHelp=!0,this.wordpressService.fetchHelp().subscribe(e=>{this.loadedHelpPosts=e,this.loadingHelp=!1},e=>{this.errorHelp=e,console.log("error in main"),this.loadingHelp=!1})}ngOnInit(){console.log("home ngoninit"),this.wordpressService.sysConfig.subscribe(e=>{console.log("home has an updated config"),""!=e.wp_rest?(this.wpConfig=e,this.fillNews(),this.fillHelp()):console.log("config is empty")},e=>{this.errorHelp=e,console.log("error in main")})}}return e.\u0275fac=function(t){return new(t||e)(Oo(dL),Oo(aS))},e.\u0275cmp=$e({type:e,selectors:[["app-home"]],decls:118,vars:10,consts:[[1,"container-fluid"],[1,"text-center","py-1","bg-primary","shadow-none",2,"background-image","url(./assets/img/virions.png)","background-position","center","background-size","100%","background-repeat","repeat","height","200px"],[1,"container-fluid",2,"padding-top","1vw","padding-bottom","5vw"],[1,"row","mt-1","mb-5","ml-1","mr-1"],[1,"col-lg-2","col-md-3","col-sm-4","bg-light",2,"border-radius","2vw"],["src","./assets/img/logo_white_2.png",1,"img-fluid","mt-2"],[2,"font-size","0.75rem"],[1,"pl-1","pr-5","pt-5",2,"background-color","#f5f5f5","color","#000000"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"mat-h1"],[3,"href"],["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],["href","https://doi.org/10.1093/nar/gkz872"],["href","https://onlinelibrary.wiley.com/doi/abs/10.1038/sj.icb.7100144"],["href","https://onlinelibrary.wiley.com/doi/abs/10.1111/imcb.12288"],["href","https://academic.oup.com/nar/article/48/D1/D1051/5585549#"],["routerLink","./datarep"],["routerLink","./user-guide"],["href","./assets/doc/report_documentation.pdf"],["routerLink","./samplerep/null"],["routerLink","./generep"],["routerLink","./genesample/null"],["routerLink","./genetable"],["routerLink","./genebrowser/Human/Human_IGH"],["href","http://yaarilab.com/"],["href","http://shepherd-group.ismb.lon.ac.uk/research.html"],["href","http://yaarilab.com/contact"],["href","mailto:william@lees.org.uk"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"list-unstyled"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"div",1),Lo(2,"div",2),Lo(3,"div",3),Lo(4,"div",4),No(5,"img",5),Lo(6,"p",6),xa(7,"Immune Receptor Genotypes and Haplotypes"),Fo(),Fo(),Fo(),Fo(),Fo(),Lo(8,"div",7),Lo(9,"div",8),Lo(10,"div",9),Lo(11,"div",10),Lo(12,"div",9),Lo(13,"div",10),Lo(14,"h1",11),xa(15,"Latest News ("),Lo(16,"a",12),xa(17,"more"),Fo(),xa(18,")"),Fo(),Fo(),Fo(),Io(19,pL,3,0,"div",13),Io(20,fL,3,0,"div",14),Lo(21,"div"),Io(22,mL,2,0,"p",15),Io(23,vL,3,1,"div",15),Fo(),Fo(),Lo(24,"div",10),Lo(25,"div",9),Lo(26,"div",10),Lo(27,"h1",11),xa(28,"Help topics ("),Lo(29,"a",12),xa(30,"more"),Fo(),xa(31,")"),Fo(),Fo(),Fo(),Io(32,bL,3,0,"div",13),Io(33,yL,3,0,"div",14),Lo(34,"div"),Io(35,_L,2,0,"p",15),Io(36,xL,3,1,"div",15),Fo(),Fo(),Fo(),Lo(37,"div",9),Lo(38,"div",16),Lo(39,"h1",11),xa(40,"About VDJbase"),Fo(),Fo(),Fo(),Lo(41,"div",9),Lo(42,"div",16),Lo(43,"p"),xa(44," VDJbase is a database of adaptive immune receptor genes, genotypes and haplotypes. Our core collection is inferred from immune receptor repertoire sequences, as recently described in "),Lo(45,"a",17),xa(46,"Nucleic Acids Research"),Fo(),xa(47,". We are also beginning to add genomically derived material. "),Fo(),Lo(48,"p"),xa(49," Detailed knowledge of these genes, in humans and key research species, is vital to the understanding of the immune response. Current reference sets, widely used in immune repertoire research, are often incomplete. Problems in the "),Lo(50,"a",18),xa(51,"human"),Fo(),xa(52," and "),Lo(53,"a",19),xa(54,"mouse"),Fo(),xa(55," sets are long-standing. VDJbase allows researchers to consult inferences from many hundreds of samples, allowing a population-level understanding of genes and alleles to be developed, and hitherto unidentified alleles to be described. "),Fo(),Lo(56,"p"),xa(57," VDJbase provides customisable reports, which allow users to study gene and allele usage in various ways. Reports, and the data underlying them, are provided under open-source licence. If you use VDJbase in your research, please "),Lo(58,"a",20),xa(59,"cite our paper"),Fo(),xa(60,". "),Fo(),Lo(61,"p"),xa(62," From here you can: "),Fo(),Fo(),Fo(),Lo(63,"div",9),Lo(64,"div",16),Lo(65,"ul"),Lo(66,"li"),Lo(67,"a",21),xa(68,"Explore the data"),Fo(),xa(69," available in VDJbase today"),Fo(),Lo(70,"li"),xa(71,"Read our "),Lo(72,"a",22),xa(73,"user guide"),Fo(),xa(74," or find more information on "),Lo(75,"a",23),xa(76,"reports"),Fo(),Fo(),No(77,"br"),Lo(78,"li"),xa(79,"Browse the "),Lo(80,"a",24),xa(81,"adaptive immune receptor repertore (AIRR) datasets"),Fo(),Fo(),Lo(82,"li"),xa(83,"Browse "),Lo(84,"a",25),xa(85,"alleles"),Fo(),xa(86," identified from the AIRR datasets"),Fo(),No(87,"br"),Lo(88,"li"),xa(89,"Browse the "),Lo(90,"a",26),xa(91,"genomically-derived datasets"),Fo(),Fo(),Lo(92,"li"),xa(93,"Browse "),Lo(94,"a",27),xa(95,"alleles"),Fo(),xa(96," identified from the genomically-derived datasets"),Fo(),Lo(97,"li"),xa(98,"View "),Lo(99,"a",28),xa(100,"alignments"),Fo(),xa(101," in a genome browser."),Fo(),Fo(),Lo(102,"p"),xa(103,"All options are also available from the menu at the top of each page."),Fo(),Lo(104,"p"),xa(105," VDJbase is jointly developed and maintained by members of the "),Lo(106,"a",29),xa(107,"Yaari Lab"),Fo(),xa(108," at the Faculty of Engineering at Bar Ilan University, Israel, and the "),Lo(109,"a",30),xa(110,"Shepherd Group"),Fo(),xa(111," at the Institute of Structural and Molecular Biology, Birkbeck College, London. It is hosted at Birkbeck. For further information, please contact "),Lo(112,"a",31),xa(113,"Gur Yaari"),Fo(),xa(114," or "),Lo(115,"a",32),xa(116,"William Lees"),Fo(),xa(117,". "),Fo(),Fo(),Fo(),Fo(),Fo(),Fo()),2&e&&(Jr(16),ta("href","",t.wpConfig.wp_news_url,"/index.php/vdjbase_news",nr),Jr(3),Po("ngIf",t.loadingNews),Jr(1),Po("ngIf",t.errorNews),Jr(2),Po("ngIf",t.loadedNewsPosts.length<1&&!t.loadingNews&&!t.errorNews),Jr(1),Po("ngIf",t.loadedNewsPosts.length>=1&&!t.loadingNews),Jr(6),ta("href","",t.wpConfig.wp_help_url,"/index.php/vdjbase_help",nr),Jr(3),Po("ngIf",t.loadingHelp),Jr(1),Po("ngIf",t.errorHelp),Jr(2),Po("ngIf",t.loadedHelpPosts.length<1&&!t.loadingHelp&&!t.errorHelp),Jr(1),Po("ngIf",t.loadedHelpPosts.length>=1&&!t.loadingHelp))},directives:[eu,Vx,Qh],styles:[""]}),e})();const CL={production:!0,apiBasePath:location.protocol+"//"+location.hostname+"/admin/api",igvBasePath:location.protocol+"//"+location.hostname+"/static/study_data/Genomic/samples"};var kL=n("WuQa"),EL=n.n(kL);const AL=["igv"];let RL=(()=>{class e{constructor(e,t,n){this.geneTableService=e,this.route=t,this.authService=n,this.browser=null,this.geneTableServiceSubscription=null,this.authServiceSubscription=null,this.species=null,this.dataset=null,this.assemblyName=null,this.user=null}ngOnInit(){this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{this.selection=e,this.reconfigureBrowser()}),this.authServiceSubscription=this.authService.user.subscribe(e=>{this.user=e,e.accessToken&&EL.a.setOauthToken(e.accessToken,location.hostname)})}ngOnDestroy(){this.geneTableServiceSubscription.unsubscribe(),this.authServiceSubscription.unsubscribe()}reconfigureBrowser(){this.species=this.selection.species?this.selection.species:null,this.dataset=this.selection.datasets?this.selection.datasets[0]:null,this.assemblyName=this.selection.assemblies.length>0?this.selection.assemblies[0].replace(" ","_"):null,this.browser&&(EL.a.removeBrowser(this.browser),this.browser=null),this.species&&this.dataset&&this.assemblyName&&this.buildBrowser()}buildBrowser(){Lv(0),console.log(this.species);const e=CL.igvBasePath+"/"+this.species.replace(" ","_")+"/"+this.dataset+"/"+this.species.replace(" ","_")+"_"+this.assemblyName;console.log("BuildBrowser: "+e);const t=document.getElementById("igvdiv");EL.a.createBrowser(t,{reference:{id:this.species,fastaURL:e+".fasta",indexURL:e+".fasta.fai"},search:{url:CL.apiBasePath+"/genomic/feature_pos/"+this.species+"/"+this.dataset+"/"+this.assemblyName+"/$FEATURE$"}}).then(t=>{Lv(0),this.browser=t,this.browser.loadTrack({name:"Genes",type:"annotation",url:e+".gff3",height:100}).then(()=>{this.browser.loadTrack({name:"Samples",type:"alignment",format:"bam",url:e+".bam",indexURL:e+".bam.bai",height:500})})})}}return e.\u0275fac=function(t){return new(t||e)(Oo(r_),Oo(gw),Oo(aS))},e.\u0275cmp=$e({type:e,selectors:[["app-gene-browser-panel"]],viewQuery:function(e,t){if(1&e&&wc(AL,3),2&e){let e;_c(e=Sc())&&(t.igvdiv=e.first)}},inputs:{selection:"selection"},decls:3,vars:0,consts:[["id","igvdiv"],["igv",""]],template:function(e,t){1&e&&(Lo(0,"div"),No(1,"div",0,1),Fo())},styles:[""]}),e})(),TL=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-gene-browser"]],decls:3,vars:3,consts:[[1,"container-fluid"],[3,"showGenomic","showAssembly","showRepseq"]],template:function(e,t){1&e&&(Lo(0,"div",0),No(1,"app-gene-table-selector",1),No(2,"app-gene-browser-panel"),Fo()),2&e&&(Jr(1),Po("showGenomic",!0)("showAssembly",!0)("showRepseq",!1))},directives:[ES,RL],styles:[""]}),e})(),IL=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[BC,fu],BC]}),e})(),DL=(()=>{class e{constructor(){this.changes=new S,this.sortButtonLabel=e=>`Change sorting for ${e}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({factory:function(){return new e},token:e,providedIn:"root"}),e})();const OL={provide:DL,deps:[[new gi,new vi,DL]],useFactory:function(e){return e||new DL}};let PL=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[OL],imports:[[fu,BC]]}),e})(),ML=(()=>{class e{constructor(){this.cache=new Map}get(e){this.cache.get(e.urlWithParams)}put(e,t){const n=e.url,i={url:n,response:t,lastRead:Date.now()};this.cache.set(n,i);const r=Date.now()-36e5;this.cache.forEach(e=>{e.lastRead<r&&this.cache.delete(e.url)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),LL=(()=>{class e{constructor(e){this.cache=e}intercept(e,t){const n=this.cache.get(e);return n?xf(n):this.sendRequest(e,t,this.cache)}sendRequest(e,t,n){return t.handle(e).pipe(Ev(t=>{t instanceof jf&&n.put(e,t)}))}}return e.\u0275fac=function(t){return new(t||e)(ui(ML))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class FL{constructor(e){this.repseqService=e,this.repSampleSubject=new Jg([]),this.choicesSubject=new Jg({}),this.loadingSubject=new Jg(!1),this.errorSubject=new Jg(null),this.choices$=this.choicesSubject.asObservable(),this.loading$=this.loadingSubject.asObservable(),this.error$=this.errorSubject.asObservable(),this.totalItems=0}loadRepSamples(e,t,n,i,r,s,o){t=t.split(",").map(e=>"Test"===e?"Human_IGH":e).join(),this.loadingSubject.next(!0),this.errorSubject.next(null),e&&t?this.repseqService.getSamplesApi(e,t,n,i,r,s,o).pipe(i_(),Ly(e=>(this.errorSubject.next(e),[])),Qy(()=>{this.loadingSubject.next(!1)})).subscribe(e=>{this.totalItems=e.total_items,this.choicesSubject.next(e.uniques),void 0!==e&&e.hasOwnProperty("samples")?this.repSampleSubject.next(e.samples):this.repSampleSubject.next([])}):(this.loadingSubject.next(!1),this.totalItems=0,this.repSampleSubject.next([]))}connect(e){return this.repSampleSubject.asObservable()}disconnect(e){this.repSampleSubject.complete(),this.loadingSubject.complete(),this.errorSubject.complete(),this.choicesSubject.complete()}}const NL=[{id:"sample_name",name:"Sample name",section:"Sample",hidden:!1,type:"string",size:"small-col",description:"Sample name as allocated by VDJbase",example:""},{id:"reads",name:"VDJbase reads",section:"Sample",hidden:!1,type:"integer",size:"small-col",description:"Reads processed by VDJbase pipeline",example:""},{id:"study_id",name:"Study ID",section:"Study",hidden:!1,type:"string",size:"large-col",description:"Unique ID assigned by study registry",example:"PRJNA001"},{id:"tissue_label",name:"Tissue",section:"TissuePro",hidden:!1,type:"string",size:"small-col",description:"Label of the concept in the respective ontology",example:""},{id:"complete_sequences",name:"Complete sequences",section:"SeqProtocol",hidden:!1,type:"string",size:"small-col",description:'To be considered `complete`, the procedure used for library construction MUST generate sequences that 1) include the first V gene codon that encodes the mature polypeptide chain (i.e. after the leader sequence) and 2) include the last complete codon of the J gene (i.e. 1 bp 5" of the J->C splice site) and 3) provide sequence information for all positions between 1) and 2). To be considered `complete & untemplated`, the sections of the sequences defined in points 1) to 3) of the previous sentence MUST be untemplated, i.e. MUST NOT overlap with the primers used in library preparation. `mixed` should only be used if the procedure used for library construction will likely produce multiple categories of sequences in the given experiment. It SHOULD NOT be used as a replacement of a NULL value.',example:"partial"},{id:"genotype",name:"Genotype report",section:"Sample",hidden:!1,type:"genotype",size:"small-col",description:"Links to genotype reports",example:""},{id:"haplotypes",name:"Haplotype reports",section:"Sample",hidden:!1,type:"haplotype",size:"large-col",description:"Links to haplotype reports",example:""},{id:"repertoire_id",name:"Repertoire ID",section:"Sample",hidden:!0,type:"string",size:"small-col",description:"Identifier for the repertoire object. This identifier should be globally unique so that repertoires from multiple studies can be combined together without conflict. The repertoire_id is used to link other AIRR data to a Repertoire. Specifically, the Rearrangements Schema includes repertoire_id for referencing the specific Repertoire for that Rearrangement.",example:""},{id:"repertoire_name",name:"Repertoire name",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Short generic display name for the repertoire",example:""},{id:"repertoire_description",name:"Repertoire description",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Generic repertoire description",example:""},{id:"sample_processing_id",name:"Sample processing ID",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Identifier for the sample processing object. This field should be unique within the repertoire. This field can be used to uniquely identify the combination of sample, cell processing, nucleic acid processing and sequencing run information for the repertoire.",example:""},{id:"sample_id",name:"Biological sample ID",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Sample ID assigned by submitter, unique within study",example:"SUP52415"},{id:"sample_type",name:"Sample type",section:"Sample",hidden:!0,type:"string",size:"small-col",description:"The way the sample was obtained, e.g. fine-needle aspirate, organ harvest, peripheral venous puncture",example:"Biopsy"},{id:"tissue_id",name:"Tissue ID",section:"Sample",hidden:!0,type:"string",size:"small-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"anatomic_site",name:"Anatomic site",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"The anatomic location of the tissue, e.g. Inguinal, femur",example:"Iliac crest"},{id:"disease_state_sample",name:"Disease state of sample",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Histopathologic evaluation of the sample",example:"Tumor infiltration"},{id:"collection_time_point_relative",name:"Sample collection time",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Time point at which sample was taken, relative to `Collection time event`",example:"14"},{id:"collection_time_point_relative_unit_id",name:"Sample collection time unit",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"collection_time_point_relative_unit_label",name:"Sample collection time unit",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Label of the concept in the respective ontology",example:""},{id:"collection_time_point_reference",name:"Collection time event",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Event in the study schedule to which `Sample collection time` relates to",example:"Primary vaccination"},{id:"biomaterial_provider",name:"Biomaterial provider",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Name and address of the entity providing the sample",example:"Tissues-R-Us, Tampa, FL, USA"},{id:"sequencing_run_id",name:"Batch number",section:"Sample",hidden:!0,type:"string",size:"small-col",description:"ID of sequencing run assigned by the sequencing facility",example:"160101_M01234"},{id:"total_reads_passing_qc_filter",name:"Total reads passing QC filter",section:"Sample",hidden:!0,type:"string",size:"small-col",description:"Number of usable reads for analysis",example:"10365118"},{id:"sequencing_run_date",name:"Date of sequencing run",section:"Sample",hidden:!0,type:"string",size:"small-col",description:"Date of sequencing run",example:"16/12/2016"},{id:"file_type",name:"Raw sequencing data file type",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"File format for the raw reads or sequences",example:""},{id:"filename",name:"Raw sequencing data file name",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"File name for the raw reads or sequences. The first file in paired-read sequencing.",example:"MS10R-NMonson-C7JR9_S1_R1_001.fastq"},{id:"read_direction",name:"Read direction",section:"Sample",hidden:!0,type:"string",size:"small-col",description:"Read direction for the raw reads or sequences. The first file in paired-read sequencing.",example:"forward"},{id:"paired_filename",name:"Paired file name",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"File name for the second file in paired-read sequencing",example:"MS10R-NMonson-C7JR9_S1_R2_001.fastq"},{id:"paired_read_direction",name:"Paired read direction",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Read direction for the second file in paired-read sequencing",example:"reverse"},{id:"igsnper_plot_path",name:"Igsnper plot path",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Path for igsnper plot",example:""},{id:"sample_group",name:"Sample group",section:"Sample",hidden:!0,type:"string",size:"large-col",description:"Sample group",example:""},{id:"study_title",name:"Study title",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Descriptive study title",example:"Effects of sun light exposure of the Treg repertoire"},{id:"study_type_id",name:"Study type ID",section:"Study",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"study_type_label",name:"Study type",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Label of the concept in the respective ontology",example:""},{id:"study_description",name:"Study description",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Generic study description",example:"Longer description"},{id:"inclusion_exclusion_criteria",name:"Inclusion/exclusion criteria",section:"Study",hidden:!0,type:"string",size:"large-col",description:"List of criteria for inclusion/exclusion for the study",example:"Include: Clinical P. falciparum infection; Exclude: Seropositive for HIV"},{id:"grants",name:"Grant funding agency",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Funding agencies and grant numbers",example:"NIH, award number R01GM987654"},{id:"study_contact",name:"Contact information (study)",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Full contact information of the contact persons for this study This should include an e-mail address and a persistent identifier such as an ORCID ID.",example:"Dr. P. Stibbons, p.stibbons@unseenu.edu, https://orcid.org/0000-0002-1825-0097"},{id:"collected_by",name:"Contact  (data collection)",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Full contact information of the data collector, i.e. the person who is legally responsible for data collection and release. This should include an e-mail address.",example:"Dr. P. Stibbons, p.stibbons@unseenu.edu"},{id:"lab_name",name:"Lab name",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Department of data collector",example:"Department for Planar Immunology"},{id:"lab_address",name:"Lab address",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Institution and institutional address of data collector",example:"School of Medicine, Unseen University, Ankh-Morpork, Disk World"},{id:"submitted_by",name:"Contact  (data deposition)",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Full contact information of the data depositor, i.e. the person submitting the data to a repository. This is supposed to be a short-lived and technical role until the submission is relased.",example:"Adrian Turnipseed, a.turnipseed@unseenu.edu"},{id:"pub_ids",name:"Relevant publications",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Publications describing the rationale and/or outcome of the study",example:"PMID:85642"},{id:"keywords_study",name:"Keywords for study",section:"Study",hidden:!0,type:"string",size:"large-col",description:"",example:""},{id:"adc_publish_date",name:"ADC Publish Date",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Date the study was first published in the AIRR Data Commons.",example:"02/02/2021"},{id:"adc_update_date",name:"ADC Update Date",section:"Study",hidden:!0,type:"string",size:"large-col",description:"Date the study data was updated in the AIRR Data Commons.",example:"02/02/2021"},{id:"num_subjects",name:"Subjects",section:"Study",hidden:!0,type:"integer",size:"small-col",description:"Number of subjects in the study",example:""},{id:"num_samples",name:"Samples",section:"Study",hidden:!0,type:"integer",size:"small-col",description:"Number of samples in the study",example:""},{id:"accession_reference",name:"Study Ref",section:"Study",hidden:!0,type:"string",size:"large-col",description:"URL of the study in the registry",example:""},{id:"study_name",name:"Study name",section:"Study",hidden:!0,type:"string",size:"small-col",description:"Study name",example:""},{id:"subject_id",name:"Subject ID",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Subject ID assigned by submitter, unique within study",example:"SUB856413"},{id:"synthetic",name:"Synthetic library",section:"Subject",hidden:!0,type:"boolean",size:"large-col",description:"TRUE for libraries in which the diversity has been synthetically generated (e.g. phage display)",example:""},{id:"species_id",name:"Species ID",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"species_label",name:"Species",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Label of the concept in the respective ontology",example:""},{id:"organism_id",name:"Organism ID",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"organism_label",name:"Organism",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Label of the concept in the respective ontology",example:""},{id:"sex",name:"Sex",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Biological sex of subject",example:"female"},{id:"age_min",name:"Age minimum",section:"Subject",hidden:!0,type:"number",size:"small-col",description:"Specific age or lower boundary of age range.",example:"60"},{id:"age_max",name:"Age maximum",section:"Subject",hidden:!0,type:"number",size:"small-col",description:"Upper boundary of age range or equal to age_min for specific age. This field should only be null if age_min is null.",example:"80"},{id:"age_unit_id",name:"Age unit ID",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"age_unit_label",name:"Age unit",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Label of the concept in the respective ontology",example:""},{id:"age_event",name:"Age event",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Event in the study schedule to which `Age` refers. For NCBI BioSample this MUST be `sampling`. For other implementations submitters need to be aware that there is currently no mechanism to encode to potential delta between `Age event` and `Sample collection time`, hence the chosen events should be in temporal proximity.",example:"enrollment"},{id:"age",name:"Age",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"",example:""},{id:"ancestry_population",name:"Ancestry population",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Broad geographic origin of ancestry (continent)",example:"list of continents, mixed or unknown"},{id:"ethnicity",name:"Ethnicity",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Ethnic group of subject (defined as cultural/language-based membership)",example:"English, Kurds, Manchu, Yakuts (and other fields from Wikipedia)"},{id:"race",name:"Race",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Racial group of subject (as defined by NIH)",example:"White, American Indian or Alaska Native, Black, Asian, Native Hawaiian or Other Pacific Islander, Other"},{id:"strain_name",name:"Strain name",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Non-human designation of the strain or breed of animal used",example:"C57BL/6J"},{id:"linked_subjects",name:"Relation to other subjects",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Subject ID to which `Relation type` refers",example:"SUB1355648"},{id:"link_type",name:"Relation type",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Relation between subject and `linked_subjects`, can be genetic or environmental (e.g.exposure)",example:"father, daughter, household"},{id:"study_group_description",name:"Study group description",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Designation of study arm to which the subject is assigned to",example:"control"},{id:"disease_diagnosis_id",name:"Diagnosis",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"disease_diagnosis_label",name:"Diagnosis",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Label of the concept in the respective ontology",example:""},{id:"disease_length",name:"Length of disease",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Time duration between initial diagnosis and current intervention",example:"23 months"},{id:"disease_stage",name:"Disease stage",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Stage of disease at current intervention",example:"Stage II"},{id:"prior_therapies",name:"Prior therapies",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"List of all relevant previous therapies applied to subject for treatment of `Diagnosis`",example:"melphalan/prednisone"},{id:"immunogen",name:"Immunogen/agent",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Antigen, vaccine or drug applied to subject at this intervention",example:"bortezomib"},{id:"intervention",name:"Intervention definition",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Description of intervention",example:"systemic chemotherapy, 6 cycles, 1.25 mg/m2"},{id:"medical_history",name:"Other relevant medical history",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Medical history of subject that is relevant to assess the course of disease and/or treatment",example:"MGUS, first diagnosed 5 years prior"},{id:"genotype_process",name:"Genotype acquisition process",section:"Subject",hidden:!0,type:"string",size:"large-col",description:"Information on how the genotype was acquired. Controlled vocabulary.",example:"repertoire_sequencing"},{id:"patient_name",name:"Subject name",section:"Subject",hidden:!0,type:"string",size:"small-col",description:"Subject name as allocated by VDJbase",example:""},{id:"tissue_processing",name:"Tissue processing",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Enzymatic digestion and/or physical methods used to isolate cells from sample",example:"Collagenase A/Dnase I digested, followed by Percoll gradient"},{id:"cell_subset_id",name:"Cell subset ID",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"cell_subset_label",name:"Cell subset",section:"TissuePro",hidden:!0,type:"string",size:"small-col",description:"Label of the concept in the respective ontology",example:""},{id:"cell_phenotype",name:"Cell subset phenotype",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"List of cellular markers and their expression levels used to isolate the cell population",example:"CD19+ CD38+ CD27+ IgM- IgD-"},{id:"cell_species_id",name:"Cell species ID",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"cell_species_label",name:"Cell species",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Label of the concept in the respective ontology",example:""},{id:"single_cell",name:"Single-cell sort",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"TRUE if single cells were isolated into separate compartments",example:""},{id:"cell_number",name:"Number of cells in experiment",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Total number of cells that went into the experiment",example:"1000000"},{id:"cells_per_reaction",name:"Cells per  replicate",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Number of cells for each biological replicate",example:"50000"},{id:"cell_storage",name:"Cell storage",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"TRUE if cells were cryo-preserved between isolation and further processing",example:"TRUE"},{id:"cell_quality",name:"Cell quality",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Relative amount of viable cells after preparation and (if applicable) thawing",example:"90% viability as determined by 7-AAD"},{id:"cell_isolation",name:"Isolation / enrichment",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Description of the procedure used for marker-based isolation or enrich cells",example:"Cells were stained with fluorochrome labeled antibodies and then sorted on a FlowMerlin (CE) cytometer."},{id:"cell_processing_protocol",name:"Processing protocol",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Description of the methods applied to the sample including cell preparation/ isolation/enrichment and nucleic acid extraction. This should closely mirror the Materials and methods section in the manuscript.",example:"Stimulated wih anti-CD3/anti-CD28"},{id:"sub_cell_type",name:"Sub Cell Type",section:"TissuePro",hidden:!0,type:"string",size:"large-col",description:"Sub cell type",example:""},{id:"template_class",name:"Target substrate",section:"SeqProtocol",hidden:!0,type:"string",size:"small-col",description:"The class of nucleic acid that was used as primary starting material for the following procedures",example:"RNA"},{id:"template_quality",name:"Target substrate quality",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Description and results of the quality control performed on the template material",example:"RIN 9.2"},{id:"template_amount",name:"Template amount",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Amount of template that went into the process",example:"1000"},{id:"template_amount_unit_id",name:"Template amount unit ID",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"CURIE of the concept, encoding the ontology and the local ID",example:""},{id:"template_amount_unit_label",name:"Template amount unit",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Label of the concept in the respective ontology",example:""},{id:"library_generation_method",name:"Library generation method",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Generic type of library generation",example:"RT(oligo-dT)+TS(UMI)+PCR"},{id:"library_generation_protocol",name:"Library generation protocol",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Description of processes applied to substrate to obtain a library that is ready for sequencing",example:"cDNA was generated using"},{id:"library_generation_kit_version",name:"Protocol IDs",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"When using a library generation protocol from a commercial provider, provide the protocol version number",example:"v2.1 (2016-09-15)"},{id:"pcr_target_locus",name:"Target locus for PCR",section:"SeqProtocol",hidden:!0,type:"string",size:"small-col",description:"Designation of the target locus. Note that this field uses a controlled vocubulary that is meant to provide a generic classification of the locus, not necessarily the correct designation according to a specific nomenclature.",example:"IGK"},{id:"forward_pcr_primer_target_location",name:"Fwd PCR primer target",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Position of the most distal nucleotide templated by the forward primer or primer mix",example:"IGHV, +23"},{id:"reverse_pcr_primer_target_location",name:"Rev PCR primer target",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Position of the most proximal nucleotide templated by the reverse primer or primer mix",example:"IGHG, +57"},{id:"physical_linkage",name:"Physical linkage",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:'In case an experimental setup is used that physically links nucleic acids derived from distinct `Rearrangements` before library preparation, this field describes the mode of that linkage. All `hetero_*` terms indicate that in case of paired-read sequencing, the two reads should be expected to map to distinct IG/TR loci. `*_head-head` refers to techniques that link the 5" ends of transcripts in a single-cell context. `*_tail-head` refers to techniques that link the 3" end of one transcript to the 5" end of another one in a single-cell context. This term does not provide any information whether a continuous reading-frame between the two is generated. `*_prelinked` refers to constructs in which the linkage was already present on the DNA level (e.g. scFv).',example:"hetero_head-head"},{id:"sequencing_platform",name:"Sequencing platform",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Designation of sequencing instrument used",example:"Alumina LoSeq 1000"},{id:"sequencing_facility",name:"Sequencing facility",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Name and address of sequencing facility",example:"Seqs-R-Us, Vancouver, BC, Canada"},{id:"sequencing_kit",name:"Sequencing kit",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Name, manufacturer, order and lot numbers of sequencing kit",example:"FullSeq 600, Alumina, #M123456C0, 789G1HK"},{id:"read_length",name:"Forward read length",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Read length in bases for the first file in paired-read sequencing",example:"300"},{id:"paired_read_length",name:"Paired read length",section:"SeqProtocol",hidden:!0,type:"string",size:"large-col",description:"Read length in bases for the second file in paired-read sequencing",example:"300"},{id:"data_processing_id",name:"Data processing ID",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"Identifier for the data processing object.",example:""},{id:"primary_annotation",name:"Primary annotation",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"If true, indicates this is the primary or default data processing for the repertoire and its rearrangements. If false, indicates this is a secondary or additional data processing.",example:""},{id:"software_versions",name:"Software tools",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"Version number and / or date, include company pipelines",example:"IgBLAST 1.6"},{id:"paired_reads_assembly",name:"Paired read assembly",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"How paired end reads were assembled into a single receptor sequence",example:"PandaSeq (minimal overlap 50, threshold 0.8)"},{id:"quality_thresholds",name:"Quality thresholds",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"How sequences were removed from (4) based on base quality scores",example:"Average Phred score >=20"},{id:"primer_match_cutoffs",name:"Primer match cutoffs",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"How primers were identified in the sequences, were they removed/masked/etc?",example:"Hamming distance <= 2"},{id:"collapsing_method",name:"Collapsing method",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"The method used for combining multiple sequences from (4) into a single sequence in (5)",example:"MUSCLE 3.8.31"},{id:"data_processing_protocols",name:"Data processing protocols",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"General description of how QC is performed",example:"Data was processed using [...]"},{id:"data_processing_files",name:"Processed data file names",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"",example:""},{id:"germline_database",name:"V(D)J germline reference",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"Source of germline V(D)J genes with version number or date accessed.",example:"ENSEMBL, Homo sapiens build 90, 2017-10-01"},{id:"analysis_provenance_id",name:"Analysis provenance ID",section:"DataPro",hidden:!0,type:"string",size:"large-col",description:"Identifier for machine-readable PROV model of analysis provenance",example:""},{id:"prepro_tool",name:"Preprocessing tool",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Preprocessing tool",example:"PRESTO"},{id:"aligner_tool",name:"Aligner tool",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Aligner tool",example:"IgBLAST"},{id:"aligner_ver",name:"Aligner version",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Aligner version",example:"1.18"},{id:"aligner_reference_v",name:"Aligner ref V",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Aligner ref V",example:"IMGT full - version 2021-06-06"},{id:"aligner_reference_d",name:"Aligner ref D",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Aligner ref D",example:"IMGT full - version 2021-06-06"},{id:"aligner_reference_j",name:"Aligner ref J",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Aligner ref J",example:"IMGT full - version 2021-06-06"},{id:"geno_tool",name:"Genotyping tool",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Genotyping tool",example:"TIgGER"},{id:"geno_ver",name:"Genotyping tool version",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Genotyping tool version",example:"1.2"},{id:"haplotype_tool",name:"Haplotyping tool",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Haplotyping tool",example:"RabHIT"},{id:"haplotype_ver",name:"Haplotyping tool version",section:"GenoDetection",hidden:!0,type:"string",size:"large-col",description:"Haplotyping tool version",example:"1.2"},{id:"single_assignment",name:"Single assignment",section:"GenoDetection",hidden:!0,type:"boolean",size:"large-col",description:"TRUE if the processed reads are restricted to those that have a single V_call",example:"TRUE"},{id:"sample_basis",name:"Sample basis",section:"GenoDetection",hidden:!0,type:"string",size:"small-col",description:"Repertoire or germline",example:"Germline"}];function zL(e,t){1&e&&(Lo(0,"div",3),Lo(1,"span",4),xa(2,"Loading..."),Fo(),Fo())}function VL(e,t){if(1&e&&(Lo(0,"div",5),Lo(1,"div",6),Lo(2,"h4"),xa(3,"Error loading table"),Fo(),Lo(4,"p"),xa(5),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(5),Sa(e.error)}}function jL(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"ul"),Lo(2,"span",20),xa(3),Fo(),Lo(4,"a",21),No(5,"i",22),Fo(),Fo(),Fo()),2&e){const e=Xo(3).$implicit,t=Xo(3);Jr(2),ea("matTooltip",e.description),Jr(1),Ca("",e.name,":"),Jr(1),ea("href",t.sampleInfo[e.id],nr)}}function BL(e,t){if(1&e&&(Lo(0,"ul"),Lo(1,"span",20),xa(2),Fo(),xa(3),Fo()),2&e){const e=Xo(3).$implicit,t=Xo(3);Jr(1),ea("matTooltip",e.description),Jr(1),Ca("",e.name,":"),Jr(1),Ca(" ",t.sampleInfo[e.id],"")}}function HL(e,t){if(1&e&&(Lo(0,"div"),Io(1,jL,6,3,"div",17),Io(2,BL,4,3,"ng-template",null,19,Ac),Fo()),2&e){const e=Do(3),t=Xo(2).$implicit,n=Xo(3);Jr(1),Po("ngIf","string"===t.type&&n.sampleInfo[t.id].startsWith("http"))("ngIfElse",e)}}function qL(e,t){if(1&e&&(Lo(0,"ul"),Lo(1,"span",20),xa(2),Fo(),Fo()),2&e){const e=Xo(2).$implicit;Jr(1),ea("matTooltip",e.description),Jr(1),Ca("",e.name,":")}}function $L(e,t){if(1&e&&(Lo(0,"div"),Io(1,HL,4,2,"div",17),Io(2,qL,3,2,"ng-template",null,18,Ac),Fo()),2&e){const e=Do(3),t=Xo().$implicit,n=Xo(3);Jr(1),Po("ngIf",n.sampleInfo[t.id])("ngIfElse",e)}}function UL(e,t){if(1&e&&(Lo(0,"div"),Io(1,$L,4,2,"div",2),Fo()),2&e){const e=t.$implicit,n=Xo().$implicit;Jr(1),Po("ngIf",e.section===n)}}function WL(e,t){if(1&e&&(zo(0),Lo(1,"div",16),Lo(2,"h4"),Lo(3,"b"),xa(4),Fo(),Fo(),Io(5,UL,2,1,"div",13),Fo(),Vo()),2&e){const e=t.$implicit,n=Xo(2);Jr(4),Sa(e),Jr(1),Po("ngForOf",n.allColumns)}}const GL=function(){return["Study","Sample","Subject","TissuePro","SeqProtocol","DataPro","GenoDetection"]};function YL(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",7),Lo(2,"h3",8),xa(3),Fo(),Lo(4,"button",9),Uo("click",function(){return Pt(e),Xo().activeModal.dismiss("Cross click")}),Lo(5,"span",10),xa(6,"\xd7"),Fo(),Fo(),Fo(),Lo(7,"div",11),Lo(8,"div",12),Lo(9,"div",6),Io(10,WL,6,2,"ng-container",13),Fo(),Fo(),Fo(),Lo(11,"div",14),Lo(12,"button",15),Uo("click",function(){return Pt(e),Xo().activeModal.close("Close click")}),xa(13,"Close"),Fo(),Fo(),Vo()}if(2&e){const e=Xo();Jr(3),Ca("Sample Details - ",e.sampleName,""),Jr(7),Po("ngForOf",Xl(2,GL))}}let ZL=(()=>{class e{constructor(e,t,n){this.activeModal=e,this.modalService=t,this.repseqService=n,this.loading=!1,this.error=null,this.sampleInfo=null,this.allColumns=NL}ngOnInit(){this.loading=!0,this.error=null,this.repseqService.getSampleInfoApi(this.species,this.dataset,this.sampleName).pipe(i_(),Ly(e=>(this.error.next(e),[])),Qy(()=>{this.loading=!1})).subscribe(e=>{this.sampleInfo=e})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ab),Oo(Ob),Oo($y))},e.\u0275cmp=$e({type:e,selectors:[["app-sample-rep-info"]],inputs:{sampleName:"sampleName",species:"species",dataset:"dataset"},decls:3,vars:3,consts:[["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"row"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"col-4"],[4,"ngIf","ngIfElse"],["nullVal",""],["plainVal",""],["matTooltipClass","digby-table-tooltip",2,"font-weight","500",3,"matTooltip"],[3,"href"],[1,"fa","fa-external-link",2,"line-height","inherit"]],template:function(e,t){1&e&&(Io(0,zL,3,0,"div",0),Io(1,VL,6,1,"div",1),Io(2,YL,14,3,"ng-container",2)),2&e&&(Po("ngIf",t.loading),Jr(1),Po("ngIf",t.error),Jr(1),Po("ngIf",!t.loading&&!t.error))},directives:[eu,Qh,vR],styles:["h4,ul{margin-bottom:.2rem!important}h4{margin-top:1rem!important}.cdk-overlay-container{font-size:14px!important;z-index:1100!important}.digby-table-tooltip{font-size:14px}"],encapsulation:2}),e})(),XL=(()=>{class e{constructor(){this.selection=new Jg({names:[],onlySelected:!1}),this.source=this.selection.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),KL=(()=>{class e{constructor(){this.selection=new Jg({ids:[]}),this.source=this.selection.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),QL=(()=>{class e{constructor(){this.selection=new Jg({filters:[]}),this.source=this.selection.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const JL=["searchBox"];function eF(e,t){1&e&&(Lo(0,"div",29),Lo(1,"span",30),xa(2,"Loading..."),Fo(),Fo())}function tF(e,t){if(1&e&&(Lo(0,"div",31),Lo(1,"div",0),Lo(2,"h4"),xa(3,"Error loading table"),Fo(),Lo(4,"p"),xa(5),nc(6,"async"),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(5),Sa(ic(6,1,e.dataSource.error$))}}function nF(e,t){if(1&e){const e=Bo();Lo(0,"div",3),Lo(1,"div",32),Lo(2,"input",33),Uo("ngModelChange",function(t){return Pt(e),Xo().isSelectedSamplesChecked=t})("change",function(){return Pt(e),Xo().onSelectedSamplesChange()}),Fo(),Lo(3,"label",34),xa(4," Only samples with selected genes "),Fo(),Fo(),Fo()}if(2&e){const e=Xo();Jr(2),Po("ngModel",e.isSelectedSamplesChecked)}}const iF=function(){return{bottom:!1,right:!0,top:!1,left:!0}};function rF(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",39),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",40,41),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,iF)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function sF(e,t){if(1&e){const e=Bo();Lo(0,"mat-cell",42),Uo("click",function(){Pt(e);const n=t.$implicit;return Xo(3).showInfo(n)}),xa(1),Fo()}if(2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Ca(" ",e[n.id]," ")}}function oF(e,t){if(1&e&&(zo(0),zo(1,36),Io(2,rF,4,12,"mat-header-cell",37),Io(3,sF,2,4,"mat-cell",38),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function aF(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",39),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",44,41),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(10,iF)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function lF(e,t){if(1&e&&(zo(0),Lo(1,"a",45),No(2,"i",46),Fo(),Vo()),2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),ea("href",e[t.id],nr)}}function cF(e,t){if(1&e&&(zo(0),xa(1),Vo()),2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function hF(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,lF,3,1,"ng-container",35),Io(2,cF,2,1,"ng-container",35),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Po("ngIf",e[n.id]&&e[n.id].startsWith("http")),Jr(1),Po("ngIf",!e[n.id]||!e[n.id].startsWith("http"))}}function uF(e,t){if(1&e&&(zo(0),zo(1,36),Io(2,aF,4,11,"mat-header-cell",37),Io(3,hF,3,5,"mat-cell",43),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function dF(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",39),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",40,41),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,iF)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.NUMBER_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function pF(e,t){if(1&e&&(Lo(0,"mat-cell"),xa(1),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Sa(e[n.id])}}function fF(e,t){if(1&e&&(zo(0),zo(1,36),Io(2,dF,4,12,"mat-header-cell",37),Io(3,pF,2,4,"mat-cell",43),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function mF(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",39),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",40,41),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,iF)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.BOOL_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function gF(e,t){1&e&&No(0,"i",48)}function vF(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,gF,1,0,"i",47),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Po("ngIf",e[n.id])}}function bF(e,t){if(1&e&&(zo(0),zo(1,36),Io(2,mF,4,12,"mat-header-cell",37),Io(3,vF,2,4,"mat-cell",43),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function yF(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",39),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Fo()}if(2&e){const e=Xo(2).$implicit;ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(6,iF)),Jr(1),Ca(" ",e.name," ")}}const _F=function(e){return{sample:e}};function wF(e,t){if(1&e&&(Lo(0,"mat-cell"),Lo(1,"button",49),No(2,"i",50),Fo(),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;Xo();const i=Do(42);ha(n.size),Jr(1),Po("matMenuTriggerFor",i)("matMenuTriggerData",Kl(5,_F,e))}}function xF(e,t){if(1&e&&(zo(0),zo(1,36),Io(2,yF,2,7,"mat-header-cell",37),Io(3,wF,3,7,"mat-cell",43),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function SF(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",39),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Fo()}if(2&e){const e=Xo(2).$implicit;ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(6,iF)),Jr(1),Ca(" ",e.name," ")}}const CF=function(e,t){return{sample:e,haplo:t}};function kF(e,t){if(1&e&&(zo(0),Lo(1,"div",52),Lo(2,"button",53),xa(3),Fo(),Fo(),Vo()),2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Xo(3);const n=Do(39);Jr(2),Po("matMenuTriggerFor",n)("matMenuTriggerData",Ql(3,CF,t,e.key)),Jr(1),Ca(" ",e.key," ")}}function EF(e,t){if(1&e&&(Lo(0,"div"),Io(1,kF,4,6,"ng-container",35),Fo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf","path"!==e.key)}}function AF(e,t){if(1&e&&(Lo(0,"div"),Lo(1,"div",51),Lo(2,"div",0),Io(3,EF,2,1,"div",21),nc(4,"keyvalue"),Fo(),Fo(),Fo()),2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(3),Po("ngForOf",ic(4,1,e[t.id]))}}function RF(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,AF,5,3,"div",35),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Po("ngIf",e[n.id])}}function TF(e,t){if(1&e&&(zo(0),zo(1,36),Io(2,SF,2,7,"mat-header-cell",37),Io(3,RF,2,4,"mat-cell",43),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function IF(e,t){if(1&e&&(zo(0),Io(1,oF,4,1,"ng-container",35),Io(2,uF,4,1,"ng-container",35),Io(3,fF,4,1,"ng-container",35),Io(4,bF,4,1,"ng-container",35),Io(5,xF,4,1,"ng-container",35),Io(6,TF,4,1,"ng-container",35),Vo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf","string"===e.type&&"sample_name"===e.id),Jr(1),Po("ngIf","string"===e.type&&"sample_name"!==e.id),Jr(1),Po("ngIf","integer"===e.type||"number"===e.type),Jr(1),Po("ngIf","boolean"===e.type),Jr(1),Po("ngIf","genotype"===e.type),Jr(1),Po("ngIf","haplotype"===e.type)}}function DF(e,t){1&e&&No(0,"mat-header-row")}function OF(e,t){1&e&&No(0,"mat-row")}function PF(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),Lo(3,"button",60),Uo("click",function(){Pt(e);const t=Xo(),n=t.sample,i=t.haplo;return Xo().sendReportRequest("rep_single_haplotype","pdf",n.haplotypes[i].analysis)}),No(4,"i",61),Fo(),Lo(5,"span"),xa(6,"\xa0\xa0"),Fo(),Lo(7,"button",60),Uo("click",function(){Pt(e);const t=Xo(),n=t.sample,i=t.haplo;return Xo().sendReportRequest("rep_single_haplotype","html",n.haplotypes[i].analysis)}),No(8,"i",59),Fo(),Vo()}}function MF(e,t){1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),xa(3,"Not available "),Vo())}function LF(e,t){if(1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),Lo(3,"a",62),No(4,"i",63),Fo(),Vo()),2&e){const e=Xo(),t=e.sample,n=e.haplo;Jr(3),ea("href",t.haplotypes.path+t.haplotypes[n].rabhit,nr),ea("download",t.sample_name+"_rabhit.tab")}}function FF(e,t){1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),xa(3,"Not available "),Vo())}function NF(e,t){if(1&e&&(Lo(0,"div",51),Lo(1,"div",54),Lo(2,"b"),xa(3),Fo(),Fo(),Lo(4,"div",55),xa(5),Fo(),Lo(6,"div",56),xa(7," Haplotype Analysis "),Io(8,PF,9,0,"ng-container",35),Io(9,MF,4,0,"ng-container",35),Fo(),Lo(10,"div",57),xa(11," RabHIT report "),Io(12,LF,5,2,"ng-container",35),Io(13,FF,4,0,"ng-container",35),Fo(),Lo(14,"div",55),xa(15," RAbHIT explained "),Lo(16,"span"),xa(17,"\xa0\xa0"),Fo(),Lo(18,"a",58),No(19,"i",59),Fo(),Fo(),Fo()),2&e){const e=t.sample,n=t.haplo;Jr(3),Sa(e.sample_name),Jr(2),Ca(" Inferred haplotype using ",n," as anchor "),Jr(3),Po("ngIf",e.haplotypes[n].analysis.length>0),Jr(1),Po("ngIf",0===e.haplotypes[n].analysis.length),Jr(3),Po("ngIf",e.haplotypes[n].rabhit.length>0),Jr(1),Po("ngIf",0===e.haplotypes[n].rabhit.length)}}function zF(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),Lo(3,"button",60),Uo("click",function(){Pt(e);const t=Xo().sample;return Xo().sendReportRequest("rep_single_genotype","pdf",t.genotypes.analysis)}),No(4,"i",61),Fo(),Lo(5,"span"),xa(6,"\xa0\xa0"),Fo(),Lo(7,"button",60),Uo("click",function(){Pt(e);const t=Xo().sample;return Xo().sendReportRequest("rep_single_genotype","html",t.genotypes.analysis)}),No(8,"i",59),Fo(),Vo()}}function VF(e,t){1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),xa(3,"Not available "),Vo())}function jF(e,t){if(1&e&&(zo(0),Lo(1,"a",62),No(2,"i",63),Fo(),Vo()),2&e){const e=Xo().sample;Jr(1),ea("href",e.genotypes.path+e.genotypes.tigger,nr),ea("download",e.sample_name+"_tigger.tab")}}function BF(e,t){1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),xa(3,"Not available "),Vo())}function HF(e,t){if(1&e&&(zo(0),Lo(1,"a",62),No(2,"i",63),Fo(),Vo()),2&e){const e=Xo().sample;Jr(1),ea("href",e.genotypes.path+e.genotypes.ogrdbstats,nr),ea("download",e.sample_name+"_ogrdbstats.csv")}}function qF(e,t){1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),xa(3,"Not available "),Vo())}function $F(e,t){if(1&e&&(zo(0),Lo(1,"a",62),No(2,"i",61),Fo(),Vo()),2&e){const e=Xo().sample;Jr(1),ea("href",e.genotypes.path+e.genotypes.ogrdbplot,nr),ea("download",e.sample_name+"_ogrdbplot.pdf")}}function UF(e,t){1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),xa(3,"Not available "),Vo())}function WF(e,t){if(1&e&&(Lo(0,"div",51),Lo(1,"div",54),Lo(2,"b"),xa(3),Fo(),Fo(),Lo(4,"div",55),xa(5," Inferred genotype "),Fo(),Lo(6,"div",64),xa(7," Genotype Analysis "),Io(8,zF,9,0,"ng-container",35),Io(9,VF,4,0,"ng-container",35),Fo(),Lo(10,"div",64),xa(11," TIgGER report "),Lo(12,"span"),xa(13,"\xa0\xa0"),Fo(),Io(14,jF,3,2,"ng-container",35),Io(15,BF,4,0,"ng-container",35),Fo(),Lo(16,"div",64),xa(17," OGRDBStats report "),Lo(18,"span"),xa(19,"\xa0\xa0"),Fo(),Io(20,HF,3,2,"ng-container",35),Io(21,qF,4,0,"ng-container",35),Fo(),Lo(22,"div",64),xa(23," OGRDBStats plots "),Lo(24,"span"),xa(25,"\xa0\xa0"),Fo(),Io(26,$F,3,2,"ng-container",35),Io(27,UF,4,0,"ng-container",35),Fo(),Lo(28,"div",55),xa(29," TIgGER explained "),Lo(30,"span"),xa(31,"\xa0\xa0"),Fo(),Lo(32,"a",65),No(33,"i",59),Fo(),Fo(),Lo(34,"div",55),xa(35," OGRDBstats explained "),Lo(36,"span"),xa(37,"\xa0\xa0"),Fo(),Lo(38,"a",66),No(39,"i",59),Fo(),Fo(),Fo()),2&e){const e=t.sample;Jr(3),Sa(e.sample_name),Jr(5),Po("ngIf",e.genotypes.analysis.length>0),Jr(1),Po("ngIf",0===e.genotypes.analysis.length),Jr(5),Po("ngIf",e.genotypes.tigger.length>0),Jr(1),Po("ngIf",0===e.genotypes.tigger.length),Jr(5),Po("ngIf",e.genotypes.ogrdbstats.length>0),Jr(1),Po("ngIf",0===e.genotypes.ogrdbstats.length),Jr(5),Po("ngIf",e.genotypes.ogrdbplot.length>0),Jr(1),Po("ngIf",0===e.genotypes.ogrdbplot.length)}}function GF(e,t){if(1&e){const e=Bo();Lo(0,"div",51),Lo(1,"div",54),Lo(2,"b"),xa(3,"Download data for selected samples"),Fo(),Fo(),Lo(4,"div",56),xa(5," Sample info (csv) "),Lo(6,"span"),xa(7,"\xa0\xa0"),Fo(),Lo(8,"button",60),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_rep_data","csv",{type:"Sample info (CSV)"})}),No(9,"i",61),Fo(),Fo(),Lo(10,"div",56),xa(11," Sample data (zip) "),Lo(12,"span"),xa(13,"\xa0\xa0"),Fo(),Lo(14,"button",60),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_rep_data","zip",{type:"Sample files (ZIP)"})}),No(15,"i",67),Fo(),Fo(),Fo()}}const YF=function(){return[25,50,100,250]};let ZF=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c,h,u){this.repseqService=e,this.geneTableService=t,this.modalService=n,this.repGeneSelectedService=i,this.repSampleSelectedService=r,this.repSampleFilterService=s,this.tableParamsStorageService=o,this.reportsService=a,this.httpClient=l,this.route=c,this.reportRunService=h,this.router=u,this.displayedColumns=["sample_name","reads","lab_name","study_id","tissue_label","genotype","haplotypes"],this.allColumns=NL,this.lastLoadedColumns=[],this.paginatorSubscription=null,this.geneTableServiceSubscription=null,this.repGeneSelectedServiceSubscription=null,this.filterModeEnum=$T,this.filters=[],this.sorts=[],this.selectedSequenceNames=[],this.isSelectedSamplesChecked=!1,this.choices$Subscription=null,this.loading$Subscription=null,this.resizeEvents=new Map,this.clearSubject=new Jg(null),this.clear$=this.clearSubject.asObservable(),this.setFilterSubject=new Jg(null),this.setFilter$=this.setFilterSubject.asObservable()}ngOnInit(){this.resizeEvents=this.tableParamsStorageService.loadSavedInfo(this.resizeEvents,"rep-sample-table-widths"),this.dataSource=new FL(this.repseqService)}ngOnDestroy(){this.paginatorSubscription.unsubscribe(),this.geneTableServiceSubscription.unsubscribe(),this.choices$Subscription.unsubscribe()}ngAfterViewInit(){this.paginatorSubscription=this.paginator.page.subscribe(()=>this.loadSequencesPage()),setTimeout(()=>{this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{this.selection=e,this.paginator.firstPage(),this.table.renderRows(),this.loadSequencesPage()}),this.choices$Subscription=this.dataSource.choices$.subscribe(e=>{this.repSampleSelectedService.selection.next(this.filters.length>0&&!this.isSelectedSamplesChecked?{ids:e.names_by_dataset}:{ids:[]})}),this.loading$Subscription=this.dataSource.loading$.subscribe(e=>{e||this.applyResizes()}),this.repGeneSelectedServiceSubscription=this.repGeneSelectedService.source.subscribe(e=>{var t,n;(t=this.selectedSequenceNames).length===(n=e.names).length&&t.every(e=>n.includes(e))?console.log("---"):(this.selectedSequenceNames=e.names,this.isSelectedSamplesChecked&&0===this.selectedSequenceNames.length?this.isSelectedSamplesChecked=!1:e.onlySelected&&(this.isSelectedSamplesChecked=!0),this.onSelectedSamplesChange())}),this.router.events.subscribe(e=>{e instanceof f_&&this.applyResizes()})}),Ng(this.searchBox.nativeElement,"keyup").pipe(E(e=>e.target.value),PS(1e3),_v()).subscribe(e=>{this.quickSearch(e)})}onSelectedSamplesChange(){this.applyFilter(this.isSelectedSamplesChecked&&this.selectedSequenceNames.length?{field:"allele",predicates:[{field:"allele",op:"in",value:this.selectedSequenceNames}],sort:{order:""}}:{field:"allele",predicates:[],sort:{order:""}})}quickSearch(e){this.setFilterSubject.next({operator:{name:"Includes",operands:2,operator:"like",prefix:"%",postfix:"%"},op1:e,op2:""}),this.loadSequencesPage()}clearSelection(){this.filters=[],this.clearSubject.next(null),this.searchBox.nativeElement.value="",this.repSampleFilterService.selection.next({filters:this.filters}),this.loadSequencesPage()}applyFilter(e){for(let t=this.filters.length-1;t>=0;t--)this.filters[t].field===e.field&&this.filters.splice(t,1),"name"===e.field&&1===e.predicates.length&&"like"===e.predicates[0].op&&e.predicates[0].value==="%"+this.searchBox.nativeElement.value+"%"||(this.searchBox.nativeElement.value="");for(const t of e.predicates)t.op&&this.filters.push(t);for(let t=this.sorts.length-1;t>=0;t--)this.sorts[t].field===e.field&&this.sorts.splice(t,1);e.sort.order&&this.sorts.push(e.sort),this.repSampleFilterService.selection.next({filters:this.filters}),this.paginator.pageIndex=0,this.loadSequencesPage()}updateColumnData(e){const t=function(e,t){const n=new Set(e);for(const i of t)n.delete(i);return n}(new Set(this.lastLoadedColumns),new Set(this.displayedColumns));this.filters=this.filters.filter(e=>!t.has(e.field)),this.sorts=this.sorts.filter(e=>!t.has(e.field)),this.loadSequencesPage()}loadSequencesPage(){this.selection&&this.dataSource.loadRepSamples(this.selection.species,this.selection.repSeqs.join(),this.paginator.pageIndex,this.paginator.pageSize,JSON.stringify(this.filters),JSON.stringify(this.sorts),JSON.stringify(this.displayedColumns)),this.lastLoadedColumns=this.displayedColumns}showInfo(e){const t=this.modalService.open(ZL,{size:"xl"});t.componentInstance.sampleName=e.sample_name,t.componentInstance.species=this.selection.species,t.componentInstance.dataset=e.dataset}onResizeEnd(e,t){if(e.edges.right){const n=e.rectangle.width+"px";this.updateColumnWidth(t,n),this.resizeEvents.set(t,n),this.tableParamsStorageService.saveInfo(this.resizeEvents,"rep-sample-table-widths")}}applyResizes(){for(const[e,t]of this.resizeEvents)this.updateColumnWidth(e,t)}updateColumnWidth(e,t){const n=document.getElementsByClassName("mat-column-"+e);for(let i=0;i<n.length;i++)n[i].style.width=t}sendReportRequest(e,t,n){let i,r=[],s=this.selection.repSeqs,o="";"rep_single_haplotype"===e?(o="Haplotype Report",r=[{field:"sample_name",op:"in",value:[(n=JSON.parse(n)).name]}],i={haplo_gene:n.hap_gene,sort_order:n.sort_order},s=n.repSeqs):"rep_single_genotype"===e?(o="Genotype Report",r=[{field:"sample_name",op:"in",value:[(n=JSON.parse(n)).name]}],i={sort_order:n.sort_order},s=n.repSeqs):"download_rep_data"===e&&(o="Download Data",i=n,r=this.filters),this.reportRunService.runReport({name:e,title:o,filter_params:[]},t,this.selection.species,[],[],s,r,i)}}return e.\u0275fac=function(t){return new(t||e)(Oo($y),Oo(r_),Oo(Ob),Oo(XL),Oo(KL),Oo(QL),Oo(UT),Oo(qy),Oo(qf),Oo(gw),Oo(o_),Oo(Nx))},e.\u0275cmp=$e({type:e,selectors:[["app-sample-rep-panel"]],viewQuery:function(e,t){if(1&e&&(wc(OR,1),wc(_T,1),wc(JL,3)),2&e){let e;_c(e=Sc())&&(t.paginator=e.first),_c(e=Sc())&&(t.table=e.first),_c(e=Sc())&&(t.searchBox=e.first)}},inputs:{selection:"selection"},features:[qa([UT])],decls:47,vars:20,consts:[[1,"row"],["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex"],[1,"header-text"],[1,"searchBox"],["searchBox",""],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex","padding-left","0px !important"],["id","deleteButton",2,"border-width","0px","background-color","transparent",3,"click"],[1,"primary-icon"],["for","deleteButton",1,"form-check-label"],["digby-table-column-sorter","","id","colbutton",3,"columns","columnInfo","saveName","columnsChange"],[1,"primary-icon",2,"padding-left","0px !important"],["for","colbutton",1,"form-check-label"],["id","downloadbutton",2,"border-width","0px","background-color","transparent",3,"matMenuTriggerFor"],["for","downloadbutton",1,"form-check-label"],["class","col-auto","style","align-items: center; justify-content: flex-start; display: flex;",4,"ngIf"],[1,"col-auto","ml-auto"],[3,"length","pageSize","pageSizeOptions"],[1,"col"],[3,"dataSource"],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["xPosition","before",1,"menu-overflow-hidden"],["haploMenu","matMenu"],["matMenuContent",""],["genoMenu","matMenu"],["downloadMenu","matMenu"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"form-check"],["type","checkbox","id","chk-selected-items",1,"form-check-input",2,"margin-top",".1rem",3,"ngModel","ngModelChange","change"],["for","chk-selected-items",1,"form-check-label"],[4,"ngIf"],[3,"matColumnDef"],["mwlResizable","",3,"class","enableGhostResize","resizeEdges","resizeEnd",4,"matHeaderCellDef"],[3,"class","click",4,"matCellDef"],["mwlResizable","",3,"enableGhostResize","resizeEdges","resizeEnd"],[3,"columnName","filterMode","setFilter$","clear$","choices$","predicateEmitter"],["filterComponent","menuInOtherComponent"],[3,"click"],[3,"class",4,"matCellDef"],[3,"columnName","filterMode","clear$","choices$","predicateEmitter"],[3,"href"],[1,"fa","fa-external-link",2,"line-height","inherit"],["class","fa fa-check","style","line-height: inherit;",4,"ngIf"],[1,"fa","fa-check",2,"line-height","inherit"],[1,"btn","btn-sm","btn-solid-icon",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"fa","fa-folder","fa-5",2,"line-height","inherit"],[1,"container"],[1,"col-xs-6"],[1,"btn","btn-secondary","btn-sm","mr-1",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"row","ml-1","mr-2"],[1,"row","ml-1","mr-2","mb-1"],[1,"row","ml-4","mr-2","mb-0","align-middle"],[1,"row","ml-4","mr-2","mb-4"],["href","https://pubmed.ncbi.nlm.nih.gov/31173062","target","_blank"],[1,"fa","fa-desktop",2,"line-height","inherit"],[1,"btn","btn-sm","btn-solid-icon","addr",3,"click"],[1,"fa","fa-file-pdf-o",2,"line-height","inherit"],[3,"href","download"],[1,"fa","fa-save",2,"line-height","inherit"],[1,"row","ml-4","mr-2","mb-1"],["href","https://pubmed.ncbi.nlm.nih.gov/30814994","target","_blank"],["href","https://github.com/airr-community/ogrdbstats","target","_blank"],[1,"fa","fa-file-zip-o",2,"line-height","inherit"]],template:function(e,t){if(1&e&&(Lo(0,"div",0),Io(1,eF,3,0,"div",1),nc(2,"async"),Io(3,tF,7,3,"div",2),nc(4,"async"),Fo(),Lo(5,"div",0),Lo(6,"div",3),Lo(7,"span",4),xa(8,"Quick search:\xa0"),Fo(),No(9,"input",5,6),Fo(),Lo(11,"div",7),Lo(12,"button",8),Uo("click",function(){return t.clearSelection()}),Lo(13,"mat-icon",9),xa(14,"delete_sweep"),Fo(),Fo(),Lo(15,"label",10),xa(16,"Clear filters"),Fo(),Fo(),Lo(17,"div",7),Lo(18,"button",11),Uo("columnsChange",function(e){return t.displayedColumns=e})("columnsChange",function(e){return t.updateColumnData(e)}),Lo(19,"mat-icon",12),xa(20,"view_column"),Fo(),Fo(),Lo(21,"label",13),xa(22,"Arrange Columns"),Fo(),Fo(),Lo(23,"div",7),Lo(24,"button",14),Lo(25,"mat-icon",9),xa(26,"cloud_download"),Fo(),Fo(),Lo(27,"label",15),xa(28,"Download"),Fo(),Fo(),Io(29,nF,5,1,"div",16),Lo(30,"div",17),No(31,"mat-paginator",18),Fo(),Fo(),Lo(32,"div",0),Lo(33,"div",19),Lo(34,"mat-table",20),Io(35,IF,7,6,"ng-container",21),Io(36,DF,1,0,"mat-header-row",22),Io(37,OF,1,0,"mat-row",23),Fo(),Fo(),Fo(),Lo(38,"mat-menu",24,25),Io(40,NF,20,6,"ng-template",26),Fo(),Lo(41,"mat-menu",24,27),Io(43,WF,40,9,"ng-template",26),Fo(),Lo(44,"mat-menu",24,28),Io(46,GF,16,0,"ng-template",26),Fo()),2&e){const e=Do(45);Jr(1),Po("ngIf",ic(2,15,t.dataSource.loading$)),Jr(2),Po("ngIf",ic(4,17,t.dataSource.error$)),Jr(15),Po("columns",t.displayedColumns)("columnInfo",t.allColumns)("saveName","rep-sample-table"),Jr(6),Po("matMenuTriggerFor",e),Jr(5),Po("ngIf",t.selectedSequenceNames.length),Jr(2),Po("length",null==t.dataSource?null:t.dataSource.totalItems)("pageSize",25)("pageSizeOptions",Xl(19,YF)),Jr(3),Po("dataSource",t.dataSource),Jr(1),Po("ngForOf",t.allColumns),Jr(1),Po("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),Jr(1),Po("matRowDefColumns",t.displayedColumns)}},directives:[eu,lI,eO,kD,OR,_T,Qh,OT,MT,wD,pD,hm,zm,dg,ET,CT,xT,RT,cO,LM,IT,FT,zT],pipes:[uu,du],styles:[".btn-sm{padding:.1rem .3rem!important;line-height:1!important}.addr{color:#007bff!important}.i{line-height:inherit}.primary-icon{color:#007bff;align-items:center;vertical-align:bottom;line-height:20px}.header-text{color:rgba(0,0,0,.54);font-size:12px}.btn-solid-icon{background-color:#fff;color:#6c757d;border:none}mwlResizable{box-sizing:border-box}mat-cell,mat-footer-cell,mat-header-cell{width:200px;flex:none!important;display:block}mat-header-cell{border-left:1px solid #eee}.mat-cell,.mat-header-cell{padding-left:6px;padding-right:6px}.mat-cell{border-left:1px solid #eee;vertical-align:middle;overflow:hidden;text-overflow:ellipsis}.mat-row{min-height:18px!important;height:100%!important;padding-bottom:6px!important;padding-top:6px!important}.small-col{width:100px}.large-col{width:300px}.mat-ellipsis{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block}.mat-paginator-range-label{margin:0!important}.searchbox{border:1px solid #ced4ff}"],encapsulation:2}),e})(),XF=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-sample-rep"]],decls:3,vars:3,consts:[[1,"container-fluid"],[3,"showGenomic","showAssembly","showRepseq"]],template:function(e,t){1&e&&(Lo(0,"div",0),No(1,"app-gene-table-selector",1),No(2,"app-sample-rep-panel"),Fo()),2&e&&(Jr(1),Po("showGenomic",!1)("showAssembly",!1)("showRepseq",!0))},directives:[ES,ZF],styles:[""]}),e})(),KF=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({imports:[[BC],BC]}),e})(),QF=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({providers:[ok,{provide:YC,useValue:"fr-FR"}],imports:[[fu,Pg,Mg,AD,HT,wO,UD,IL,cI,KF,Nk,NA,sR,PL,aM,ok,dy,MM]]}),e})();const JF=[{id:"name",name:"Name",hidden:!1,type:"string",size:"large-col",description:"Allele name (reference allele name with SNPs in VDJbase format)"},{id:"gene_name",name:"Gene Name",hidden:!0,type:"string",size:"large-col",description:"Reference gene name"},{id:"pipeline_name",name:"Pipeline Alias",hidden:!0,type:"string",size:"large-col",description:"Processing pipeline name"},{id:"seq",name:"Sequence",hidden:!1,type:"string",size:"small-col",description:"Sequence (click to see in full)"},{id:"seq_len",name:"Seq Length",hidden:!1,type:"integer",size:"small-col",description:"Sequence length"},{id:"similar",name:"Similar",hidden:!1,type:"string",size:"large-col",description:"Names of any other alleles with identical sequence"},{id:"appears",name:"Appearances",hidden:!1,type:"integer",size:"small-col",description:"Number of subjects in which the allele has been inferred (click for list)"},{id:"is_single_allele",name:"Single Allele",hidden:!1,type:"boolean",size:"small-col",description:"True if no other alleles in the reference set have the same sequence"},{id:"low_confidence",name:"Low Confidence",hidden:!1,type:"boolean",size:"small-col",description:"True if the inference of this allele has low confidence markers (see notes)"},{id:"novel",name:"Novel",hidden:!1,type:"boolean",size:"small-col",description:"True if this allele is not in the reference set used by the pipeline"},{id:"max_kdiff",name:"Max kDiff",hidden:!1,type:"number",size:"small-col",description:"The maximum kdiff value with which this allele was inferred, amongst the samples in which it was found"},{id:"dataset",name:"Dataset",hidden:!1,type:"string",size:"small-col",description:"The dataset in which the allele was determined"},{id:"notes_count",name:"Notes",hidden:!1,type:"integer",size:"small-col",description:"The number of notes raised for this allele across all samples in which it was found (click for list)"}];class eN{constructor(e){this.repseqService=e,this.repSequenceSubject=new Jg([]),this.choicesSubject=new Jg({}),this.loadingSubject=new Jg(!1),this.errorSubject=new Jg(null),this.choices$=this.choicesSubject.asObservable(),this.loading$=this.loadingSubject.asObservable(),this.error$=this.errorSubject.asObservable(),this.totalItems=0}loadRepSequences(e,t,n,i,r,s,o){t=t.split(",").map(e=>"Test"===e?"Human_IGH":e).join(),this.loadingSubject.next(!0),this.errorSubject.next(null),e&&t?this.repseqService.getSequencesApi(e,t,r,s,n,i,o).pipe(i_(),Ly(e=>(this.errorSubject.next(e),[])),Qy(()=>{this.loadingSubject.next(!1)})).subscribe(e=>{this.totalItems=e.total_items,this.choicesSubject.next(e.uniques),void 0!==e&&e.hasOwnProperty("samples")?this.repSequenceSubject.next(e.samples):this.repSequenceSubject.next([])}):(this.loadingSubject.next(!1),this.totalItems=0,this.repSequenceSubject.next([]))}connect(e){return this.repSequenceSubject.asObservable()}disconnect(e){this.repSequenceSubject.complete(),this.loadingSubject.complete(),this.errorSubject.complete(),this.choicesSubject.complete()}}let tN=(()=>{class e{constructor(e){this.sanitizer=e}transform(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error(`Invalid safe type specified: ${t}`)}}}return e.\u0275fac=function(t){return new(t||e)(Oo(Uu))},e.\u0275pipe=Ke({name:"safe",type:e,pure:!0}),e})(),nN=(()=>{class e{constructor(e,t){this.activeModal=e,this.sanitizer=t}ngOnInit(){this.notes=this.notes.replace(/\n/g,"<br><br>")}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ab),Oo(Uu))},e.\u0275cmp=$e({type:e,selectors:[["app-rep-gene-notes"]],inputs:{notes:"notes",sequenceName:"sequenceName"},decls:13,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container",3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(zo(0),Lo(1,"div",0),Lo(2,"h3",1),xa(3),Fo(),Lo(4,"button",2),Uo("click",function(){return t.activeModal.dismiss("Cross click")}),Lo(5,"span",3),xa(6,"\xd7"),Fo(),Fo(),Fo(),Lo(7,"div",4),No(8,"div",5),nc(9,"safe"),Fo(),Lo(10,"div",6),Lo(11,"button",7),Uo("click",function(){return t.activeModal.close("Close click")}),xa(12,"Close"),Fo(),Fo(),Vo()),2&e&&(Jr(3),Ca("Sequence Notes - ",t.sequenceName,""),Jr(5),Po("innerHTML",rc(9,2,t.notes,"html"),tr))},pipes:[tN],styles:[""],encapsulation:2}),e})();const iN=["searchBox"];function rN(e,t){1&e&&(Lo(0,"div",25),Lo(1,"span",26),xa(2,"Loading..."),Fo(),Fo())}function sN(e,t){if(1&e&&(Lo(0,"div",27),Lo(1,"div",0),Lo(2,"h4"),xa(3,"Error loading table"),Fo(),Lo(4,"p"),xa(5),nc(6,"async"),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(5),Sa(ic(6,1,e.dataSource.error$))}}function oN(e,t){if(1&e){const e=Bo();Lo(0,"div",3),Lo(1,"div",28),Lo(2,"input",29),Uo("ngModelChange",function(t){return Pt(e),Xo().isSelectedGenesChecked=t})("change",function(){return Pt(e),Xo().onSelectedIdsChange()}),Fo(),Lo(3,"label",30),xa(4," Only genes from selected samples "),Fo(),Fo(),Fo()}if(2&e){const e=Xo();Jr(2),Po("ngModel",e.isSelectedGenesChecked)}}function aN(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"app-filter",36,37),Uo("predicateEmitter",function(t){return Pt(e),Xo(4).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(3).$implicit,t=Xo();Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function lN(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"app-filter",38,37),Uo("predicateEmitter",function(t){return Pt(e),Xo(4).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(3).$implicit,t=Xo();Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}const cN=function(){return{bottom:!1,right:!0,top:!1,left:!0}};function hN(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",35),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Io(2,aN,3,5,"div",31),Io(3,lN,3,4,"div",31),Fo()}if(2&e){const e=Xo(2).$implicit;ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(8,cN)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("ngIf","name"===e.id),Jr(1),Po("ngIf","name"!==e.id)}}function uN(e,t){if(1&e){const e=Bo();Lo(0,"div",41),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(3).onSequenceClick(t)}),xa(1),Fo()}if(2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function dN(e,t){if(1&e){const e=Bo();Lo(0,"div",42),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(3).onSequenceClick(t)}),xa(1),Fo()}if(2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function pN(e,t){if(1&e&&(Lo(0,"div"),xa(1),Fo()),2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function fN(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,uN,2,1,"div",39),Io(2,dN,2,1,"div",40),Io(3,pN,2,1,"div",31),Fo()),2&e){const e=Xo(2).$implicit;ha(e.size),Jr(1),Po("ngIf","name"===e.id),Jr(1),Po("ngIf","seq"===e.id),Jr(1),Po("ngIf",!("name"===e.id||"seq"===e.id))}}function mN(e,t){if(1&e&&(zo(0),zo(1,32),Io(2,hN,4,9,"mat-header-cell",33),Io(3,fN,4,6,"mat-cell",34),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function gN(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",35),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",36,37),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,cN)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.NUMBER_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function vN(e,t){if(1&e){const e=Bo();Lo(0,"div",41),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(3).onAppearancesClick(t)}),xa(1),Fo()}if(2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function bN(e,t){if(1&e){const e=Bo();Lo(0,"div",41),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(3).showNotes(t)}),xa(1),Fo()}if(2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function yN(e,t){if(1&e&&(Lo(0,"div"),xa(1),Fo()),2&e){const e=Xo().$implicit,t=Xo(2).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function _N(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,vN,2,1,"div",39),Io(2,bN,2,1,"div",39),Io(3,yN,2,1,"div",31),Fo()),2&e){const e=Xo(2).$implicit;ha(e.size),Jr(1),Po("ngIf","appears"===e.id),Jr(1),Po("ngIf","notesCount"===e.id),Jr(1),Po("ngIf","appears"!==e.id&&"notes_count"!=e.id)}}function wN(e,t){if(1&e&&(zo(0),zo(1,32),Io(2,gN,4,12,"mat-header-cell",33),Io(3,_N,4,6,"mat-cell",34),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function xN(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",35),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",36,37),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,cN)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.BOOL_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function SN(e,t){1&e&&No(0,"i",44)}function CN(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,SN,1,0,"i",43),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Po("ngIf",e[n.id])}}function kN(e,t){if(1&e&&(zo(0),zo(1,32),Io(2,xN,4,12,"mat-header-cell",33),Io(3,CN,2,4,"mat-cell",34),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function EN(e,t){if(1&e&&(zo(0),Io(1,mN,4,1,"ng-container",31),Io(2,wN,4,1,"ng-container",31),Io(3,kN,4,1,"ng-container",31),Vo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf","string"===e.type),Jr(1),Po("ngIf","integer"===e.type||"number"===e.type),Jr(1),Po("ngIf","boolean"===e.type)}}function AN(e,t){1&e&&No(0,"mat-header-row",45)}function RN(e,t){1&e&&No(0,"mat-row")}function TN(e,t){if(1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),Lo(3,"a",51),No(4,"i",50),Fo(),Vo()),2&e){const e=Xo().seq;Jr(3),ea("href",e.igsnper_plot_path,nr)}}function IN(e,t){1&e&&(zo(0),Lo(1,"span"),xa(2,"\xa0\xa0"),Fo(),xa(3,"Not available "),Vo())}function DN(e,t){if(1&e&&(Lo(0,"div",46),Lo(1,"div",47),Lo(2,"b"),xa(3),Fo(),Fo(),Lo(4,"div",48),xa(5," IgSNPer Analysis "),Io(6,TN,5,1,"ng-container",31),Io(7,IN,4,0,"ng-container",31),Fo(),Lo(8,"div",48),xa(9," IgSNPer explained "),Lo(10,"span"),xa(11,"\xa0\xa0"),Fo(),Lo(12,"a",49),No(13,"i",50),Fo(),Fo(),Fo()),2&e){const e=t.seq;Jr(3),Ca("",e.gene_name," allelic variation"),Jr(3),Po("ngIf",e.igsnper_plot_path.length>0),Jr(1),Po("ngIf",0===e.igsnper_plot_path.length)}}function ON(e,t){if(1&e){const e=Bo();Lo(0,"div",46),Lo(1,"div",47),Lo(2,"b"),xa(3,"Download data for selected genes"),Fo(),Fo(),Lo(4,"div",52),xa(5," Ungapped sequences (fasta) "),Lo(6,"span"),xa(7,"\xa0\xa0"),Fo(),Lo(8,"button",53),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_rep_data","fasta",{type:"Ungapped sequences (fasta)"})}),No(9,"i",54),Fo(),Fo(),Lo(10,"div",52),xa(11," Gapped sequences (fasta) "),Lo(12,"span"),xa(13,"\xa0\xa0"),Fo(),Lo(14,"button",53),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_rep_data","fasta",{type:"Gapped sequences (fasta)"})}),No(15,"i",54),Fo(),Fo(),Lo(16,"div",52),xa(17," Gene information (csv) "),Lo(18,"span"),xa(19,"\xa0\xa0"),Fo(),Lo(20,"button",53),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_rep_data","csv",{type:"Gene information (csv)"})}),No(21,"i",54),Fo(),Fo(),Fo()}}const PN=function(){return[25,50,100,250]};let MN=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l){this.repseqService=e,this.geneTableService=t,this.modalService=n,this.repGeneSelectedService=i,this.repSampleSelectedService=r,this.tableParamsStorageService=s,this.router=o,this.reportRunService=a,this.route=l,this.displayedColumns=["name","pipeline_name","seq","seq_len","similar","appears","is_single_allele","low_confidence","novel","max_kdiff"],this.allColumns=JF,this.lastLoadedColumns=[],this.paginatorSubscription=null,this.geneTableServiceSubscription=null,this.filterModeEnum=$T,this.filters=[],this.sorts=[],this.choices$Subscription=null,this.loading$Subscription=null,this.selectedSampleIds=[],this.isSelectedGenesChecked=!1,this.repSampleSelectedServiceSubscription=null,this.resizeEvents=new Map,this.samplesSelected=!1,this.clearSubject=new Jg(null),this.clear$=this.clearSubject.asObservable(),this.setFilterSubject=new Jg(null),this.setFilter$=this.setFilterSubject.asObservable(),this.redirectOnLoad=null,this.onlySelectedSamplesSet=!1,this.params=null,this.paramState="pre selection",this.route.params.subscribe(e=>this.params=e)}ngOnInit(){this.resizeEvents=this.tableParamsStorageService.loadSavedInfo(this.resizeEvents,"rep-gene-table-widths"),this.dataSource=new eN(this.repseqService)}ngOnDestroy(){this.paginatorSubscription.unsubscribe(),this.geneTableServiceSubscription.unsubscribe(),this.choices$Subscription.unsubscribe(),this.repSampleSelectedServiceSubscription.unsubscribe()}ngAfterViewInit(){this.paginatorSubscription=this.paginator.page.subscribe(()=>this.loadSequencesPage()),setTimeout(()=>{this.paramState="pre selection",this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{e.species&&e.repSeqs&&(this.selection=e,this.paginator.firstPage(),this.table.renderRows(),this.loadSequencesPage())}),this.choices$Subscription=this.dataSource.choices$.subscribe(e=>{this.filters.length>0&&!this.isSelectedGenesChecked?this.repGeneSelectedService.selection.next({names:e.name,onlySelected:this.onlySelectedSamplesSet}):(this.onlySelectedSamplesSet=!1,this.repGeneSelectedService.selection.next({names:[],onlySelected:this.onlySelectedSamplesSet}))}),this.loading$Subscription=this.dataSource.loading$.subscribe(e=>{if(!e&&(this.applyResizes(),this.redirectOnLoad)){const e=this.redirectOnLoad;this.redirectOnLoad=null,this.router.navigate(e)}}),this.repSampleSelectedServiceSubscription=this.repSampleSelectedService.source.subscribe(e=>{var t,n;t=e.ids,n=this.selectedSampleIds,LN(Object.keys(t),Object.keys(n))&&Object.keys(t).every(e=>LN(t[e],n[e]))||(this.selectedSampleIds=e.ids,this.samplesSelected=Object.keys(this.selectedSampleIds).length>0,this.isSelectedGenesChecked&&(this.samplesSelected||(this.isSelectedGenesChecked=!1),this.onSelectedIdsChange()))}),this.router.events.subscribe(e=>{e instanceof f_&&this.applyResizes()}),setTimeout(()=>{void 0!==this.params.species&&"pre selection"==this.paramState&&(this.paramState="post selection",this.geneTableService.selection.next({species:this.params.species,datasets:this.selection.datasets,assemblies:this.selection.assemblies,repSeqs:[this.params.dataset],repDatasetDescriptions:this.selection.repDatasetDescriptions}),setTimeout(()=>{this.searchBox.nativeElement.value=this.params.alleleName,this.quickSearch(this.params.alleleName)},2e3))},2e3)}),Ng(this.searchBox.nativeElement,"keyup").pipe(E(e=>e.target.value),PS(750),_v()).subscribe(e=>{this.quickSearch(e)})}onSelectedIdsChange(){this.applyFilter(this.isSelectedGenesChecked&&this.samplesSelected?{field:"sample_id",predicates:[{field:"sample_id",op:"in",value:this.selectedSampleIds}],sort:{order:""}}:{field:"sample_id",predicates:[],sort:{order:""}})}quickSearch(e){this.setFilterSubject.next({operator:{name:"Includes",operands:2,operator:"like",prefix:"%",postfix:"%"},op1:e,op2:""}),this.loadSequencesPage()}clearSelection(){this.filters=[],this.clearSubject.next(null),this.searchBox.nativeElement.value="",this.loadSequencesPage()}applyFilter(e){for(let t=this.filters.length-1;t>=0;t--)this.filters[t].field===e.field&&this.filters.splice(t,1),"name"===e.field&&1===e.predicates.length&&"like"===e.predicates[0].op&&e.predicates[0].value==="%"+this.searchBox.nativeElement.value+"%"||(this.searchBox.nativeElement.value="");for(const t of e.predicates)t.op&&this.filters.push(t);for(let t=this.sorts.length-1;t>=0;t--)this.sorts[t].field===e.field&&this.sorts.splice(t,1);e.sort.order&&this.sorts.push(e.sort),this.paginator.pageIndex=0,this.loadSequencesPage()}updateColumnData(e){const t=function(e,t){const n=new Set(e);for(const i of t)n.delete(i);return n}(new Set(this.lastLoadedColumns),new Set(this.displayedColumns));this.filters=this.filters.filter(e=>!t.has(e.field)),this.sorts=this.sorts.filter(e=>!t.has(e.field)),this.loadSequencesPage()}loadSequencesPage(){this.selection&&this.dataSource.loadRepSequences(this.selection.species,this.selection.repSeqs.join(),JSON.stringify(this.filters),JSON.stringify(this.sorts),this.paginator.pageIndex,this.paginator.pageSize,JSON.stringify(this.displayedColumns)),this.lastLoadedColumns=this.displayedColumns}showNotes(e){const t=this.modalService.open(nN,{size:"lg"});t.componentInstance.sequenceName=e.name,t.componentInstance.notes=e.notes}onSequenceClick(e){const t=this.modalService.open(IS,{size:"lg"});t.componentInstance.name=e.name,t.componentInstance.content=e.seq.indexOf(".")<0?{ungapped:e.seq,gapped:""}:{ungapped:e.seq.replace(/\./g,""),gapped:e.seq}}onAppearancesClick(e){this.onlySelectedSamplesSet=!0,this.redirectOnLoad=["./samplerep","true"],this.setFilterSubject.next({operator:{name:"Includes",operands:2,operator:"like",prefix:"",postfix:""},op1:e.name,op2:""})}onResizeEnd(e,t){if(e.edges.right){const n=e.rectangle.width+"px";this.updateColumnWidth(t,n),this.resizeEvents.set(t,n),this.tableParamsStorageService.saveInfo(this.resizeEvents,"rep-gene-table-widths")}}applyResizes(){for(const[e,t]of this.resizeEvents)this.updateColumnWidth(e,t)}updateColumnWidth(e,t){const n=document.getElementsByClassName("mat-column-"+e);for(let i=0;i<n.length;i++)n[i].style.width=t}sendReportRequest(e,t,n){const i=this.selection.repSeqs;n.filters=this.filters,this.reportRunService.runReport({name:e,title:"Download",filter_params:[]},t,this.selection.species,[],[],i,[],n)}}return e.\u0275fac=function(t){return new(t||e)(Oo($y),Oo(r_),Oo(Ob),Oo(XL),Oo(KL),Oo(UT),Oo(Nx),Oo(o_),Oo(gw))},e.\u0275cmp=$e({type:e,selectors:[["app-rep-gene-table-panel"]],viewQuery:function(e,t){if(1&e&&(wc(OR,1),wc(_T,1),wc(iN,3)),2&e){let e;_c(e=Sc())&&(t.paginator=e.first),_c(e=Sc())&&(t.table=e.first),_c(e=Sc())&&(t.searchBox=e.first)}},inputs:{selection:"selection"},features:[qa([UT])],decls:44,vars:20,consts:[[1,"row"],["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex"],[1,"header-text"],[1,"searchBox"],["searchBox",""],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex","padding-left","0px !important"],[2,"border-width","0px","background-color","transparent",3,"click"],[1,"primary-icon"],["digby-table-column-sorter","",3,"columns","columnInfo","saveName","columnsChange"],["id","downloadbutton",2,"border-width","0px","background-color","transparent",3,"matMenuTriggerFor"],["for","downloadbutton",1,"form-check-label"],["class","col-auto","style","align-items: center; justify-content: flex-start; display: flex;",4,"ngIf"],[1,"col-auto","ml-auto"],[3,"length","pageSize","pageSizeOptions"],[1,"col"],[3,"dataSource"],[4,"ngFor","ngForOf"],["class","mat-elevation-z1",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["xPosition","before",1,"menu-overflow-hidden"],["geneMenu","matMenu"],["matMenuContent",""],["downloadMenu","matMenu"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"form-check"],["type","checkbox","id","chk-selected-items",1,"form-check-input",2,"margin-top",".1rem",3,"ngModel","ngModelChange","change"],["for","chk-selected-items",1,"form-check-label"],[4,"ngIf"],[3,"matColumnDef"],["mwlResizable","",3,"class","enableGhostResize","resizeEdges","resizeEnd",4,"matHeaderCellDef"],[3,"class",4,"matCellDef"],["mwlResizable","",3,"enableGhostResize","resizeEdges","resizeEnd"],[3,"columnName","filterMode","setFilter$","clear$","choices$","predicateEmitter"],["filterComponent","menuInOtherComponent"],[3,"columnName","filterMode","clear$","choices$","predicateEmitter"],[3,"click",4,"ngIf"],["class","mat-ellipsis",3,"click",4,"ngIf"],[3,"click"],[1,"mat-ellipsis",3,"click"],["class","fa fa-check","style","line-height: inherit;",4,"ngIf"],[1,"fa","fa-check",2,"line-height","inherit"],[1,"mat-elevation-z1"],[1,"container"],[1,"row","ml-1","mr-2"],[1,"row","ml-1","mr-2","mb-1"],["href","https://github.com/Immunotools/IgSNPer","target","_blank"],[1,"fa","fa-desktop",2,"line-height","inherit"],["target","_blank",3,"href"],[1,"row","ml-4","mr-2","mb-0","align-middle"],[1,"btn","btn-sm","btn-solid-icon","addr",3,"click"],[1,"fa","fa-file-text-o",2,"line-height","inherit"]],template:function(e,t){if(1&e&&(Lo(0,"div",0),Io(1,rN,3,0,"div",1),nc(2,"async"),Io(3,sN,7,3,"div",2),nc(4,"async"),Fo(),Lo(5,"div",0),Lo(6,"div",3),Lo(7,"span",4),xa(8,"Quick search:\xa0"),Fo(),No(9,"input",5,6),Fo(),Lo(11,"div",7),Lo(12,"button",8),Uo("click",function(){return t.clearSelection()}),Lo(13,"mat-icon",9),xa(14,"delete_sweep"),Fo(),Lo(15,"span",4),xa(16,"Clear filters"),Fo(),Fo(),Fo(),Lo(17,"div",7),Lo(18,"button",10),Uo("columnsChange",function(e){return t.displayedColumns=e})("columnsChange",function(e){return t.updateColumnData(e)}),Lo(19,"mat-icon",9),xa(20,"view_column"),Fo(),Lo(21,"span",4),xa(22,"Arrange Columns"),Fo(),Fo(),Fo(),Lo(23,"div",7),Lo(24,"button",11),Lo(25,"mat-icon",9),xa(26,"cloud_download"),Fo(),Fo(),Lo(27,"label",12),xa(28,"Download"),Fo(),Fo(),Io(29,oN,5,1,"div",13),Lo(30,"div",14),No(31,"mat-paginator",15),Fo(),Fo(),Lo(32,"div",0),Lo(33,"div",16),Lo(34,"mat-table",17),Io(35,EN,4,3,"ng-container",18),Io(36,AN,1,0,"mat-header-row",19),Io(37,RN,1,0,"mat-row",20),Fo(),Fo(),Fo(),Lo(38,"mat-menu",21,22),Io(40,DN,14,3,"ng-template",23),Fo(),Lo(41,"mat-menu",21,24),Io(43,ON,22,0,"ng-template",23),Fo()),2&e){const e=Do(42);Jr(1),Po("ngIf",ic(2,15,t.dataSource.loading$)),Jr(2),Po("ngIf",ic(4,17,t.dataSource.error$)),Jr(15),Po("columns",t.displayedColumns)("columnInfo",t.allColumns)("saveName","rep-gene-table"),Jr(6),Po("matMenuTriggerFor",e),Jr(5),Po("ngIf",t.samplesSelected),Jr(2),Po("length",null==t.dataSource?null:t.dataSource.totalItems)("pageSize",25)("pageSizeOptions",Xl(19,PN)),Jr(3),Po("dataSource",t.dataSource),Jr(1),Po("ngForOf",t.allColumns),Jr(1),Po("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),Jr(1),Po("matRowDefColumns",t.displayedColumns)}},directives:[eu,lI,eO,kD,OR,_T,Qh,OT,MT,wD,pD,hm,zm,dg,ET,CT,xT,RT,cO,LM,IT,FT,zT],pipes:[uu],styles:[".btn-sm{padding:.1rem .3rem!important;line-height:1!important}.i{line-height:inherit}.primary-icon{color:#007bff;align-items:center;vertical-align:bottom;line-height:20px}.header-text{color:rgba(0,0,0,.54);font-size:12px}.btn-solid-icon{background-color:#fff;color:#6c757d;border:none}mwlResizable{box-sizing:border-box}mat-cell,mat-footer-cell,mat-header-cell{width:200px;flex:none!important;display:block}mat-header-cell{border-left:1px solid #eee}.mat-cell,.mat-header-cell{padding-left:6px;padding-right:6px}.mat-cell{border-left:1px solid #eee;vertical-align:middle;overflow:hidden;text-overflow:ellipsis}.mat-row{min-height:18px!important;height:100%!important;padding-bottom:6px!important;padding-top:6px!important}.small-col{width:100px}.large-col{width:300px}.mat-ellipsis{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block}.mat-paginator-range-label{margin:0!important}.searchbox{border:1px solid #ced4ff}"],encapsulation:2}),e})();function LN(e,t){return e.length===t.length&&e.every(e=>t.includes(e))}let FN=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-rep-gene-table"]],decls:3,vars:3,consts:[[1,"container-fluid"],[3,"showGenomic","showAssembly","showRepseq"]],template:function(e,t){1&e&&(Lo(0,"div",0),No(1,"app-gene-table-selector",1),No(2,"app-rep-gene-table-panel"),Fo()),2&e&&(Jr(1),Po("showGenomic",!1)("showAssembly",!1)("showRepseq",!0))},directives:[ES,MN],styles:[""]}),e})();class NN{constructor(e){this.genomicService=e,this.genSampleSubject=new Jg([]),this.choicesSubject=new Jg({}),this.loadingSubject=new Jg(!1),this.errorSubject=new Jg(null),this.choices$=this.choicesSubject.asObservable(),this.loading$=this.loadingSubject.asObservable(),this.error$=this.errorSubject.asObservable(),this.totalItems=0}loadGenSamples(e,t,n,i,r,s,o){this.loadingSubject.next(!0),this.errorSubject.next(null),e&&t?this.genomicService.getSubjectsApi(e,t,n,i,r,s,o).pipe(i_(),Ly(e=>(this.errorSubject.next(e),[])),Qy(()=>{this.loadingSubject.next(!1)})).subscribe(e=>{this.totalItems=e.total_items,this.choicesSubject.next(e.uniques),e&&e.hasOwnProperty("samples")?this.genSampleSubject.next(e.samples):this.genSampleSubject.next([])}):(this.loadingSubject.next(!1),this.totalItems=0,this.genSampleSubject.next([]))}connect(e){return this.genSampleSubject.asObservable()}disconnect(e){this.genSampleSubject.complete(),this.loadingSubject.complete(),this.errorSubject.complete(),this.choicesSubject.complete()}}const zN=[{id:"identifier",name:"Identifier",hidden:!1,type:"string",size:"small-col",description:"VDJbase identifier"},{id:"name_in_study",name:"Name in Study",hidden:!0,type:"string",size:"small-col",description:"Name or identifier of subject used on original study"},{id:"age",name:"Age",hidden:!0,type:"number",size:"small-col",description:"Subject age at time of study"},{id:"sex",name:"Sex",hidden:!0,type:"string",size:"small-col",description:"Subject sex"},{id:"ethnicity",name:"Ethnicity",hidden:!0,type:"string",size:"small-col",description:"Declared ethnicity"},{id:"sequencing_platform",name:"Sequencing Platform",hidden:!0,type:"string",size:"small-col",description:"Sequencing platform used with this sample"},{id:"capture_probes",name:"Capture Probes",hidden:!0,type:"string",size:"small-col",description:"Version of capture probes used with this sample"},{id:"annotation_path",name:"Report",hidden:!1,type:"string",size:"small-col",description:"Annotation report"},{id:"annotation_method",name:"Annotation Method",hidden:!1,type:"string",size:"large-col",description:"Tool used for annotaiton"},{id:"annotation_format",name:"Annotation Format",hidden:!0,type:"number",size:"small-col",description:"Subject age at time of study"},{id:"annotation_reference",name:"Annotation Ref",hidden:!0,type:"string",size:"small-col",description:"Format of annotation report"},{id:"study_name",name:"Study Name",hidden:!1,type:"string",size:"large-col",description:"Name of the study as used by the authors"},{id:"study_date",name:"Study Date",hidden:!1,type:"string",size:"small-col",description:"Date of the study"},{id:"study_description",name:"Study Description",hidden:!1,type:"string",size:"large-col",description:"Brief description of the study"},{id:"institute",name:"Institute",hidden:!1,type:"string",size:"large-col",description:"Institution issuing the study"},{id:"researcher",name:"Researcher",hidden:!0,type:"string",size:"large-col",description:"Researcher issuing the study"},{id:"contact",name:"Contact",hidden:!0,type:"string",size:"large-col",description:"Contact name for the study"},{id:"reference",name:"Reference",hidden:!0,type:"string",size:"large-col",description:"Link to reference for the study"},{id:"dataset",name:"Dataset",hidden:!0,type:"string",size:"small-col",description:"The dataset in which the allele was determined"},{id:"IGHV4_59_coverage",name:"IGHV4-59 Coverage",hidden:!0,type:"number",size:"small-col",description:"IGHV4-59 Coverage"},{id:"IGHV4_59_coverage_var",name:"IGHV4-59 Coverage Variance",hidden:!0,type:"number",size:"small-col",description:"IGHV4-59 Coverage variance"},{id:"IGH_coverage",name:"IGH Coverage",hidden:!0,type:"number",size:"small-col",description:"IGH coverage"}];function VN(e,t){1&e&&(Lo(0,"div",3),Lo(1,"span",4),xa(2,"Loading..."),Fo(),Fo())}function jN(e,t){if(1&e&&(Lo(0,"div",5),Lo(1,"div",6),Lo(2,"h4"),xa(3,"Error loading table"),Fo(),Lo(4,"p"),xa(5),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(5),Sa(e.error)}}function BN(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"div",7),Lo(2,"h3",8),xa(3),Fo(),Lo(4,"button",9),Uo("click",function(){return Pt(e),Xo().activeModal.dismiss("Cross click")}),Lo(5,"span",10),xa(6,"\xd7"),Fo(),Fo(),Fo(),Lo(7,"div",11),Lo(8,"div",12),Lo(9,"div",6),Lo(10,"div",13),Lo(11,"h4"),xa(12,"Study"),Fo(),Lo(13,"ul"),xa(14),Fo(),Lo(15,"ul"),xa(16),Fo(),Lo(17,"ul"),xa(18),Fo(),Lo(19,"ul"),xa(20,"Publication: "),Lo(21,"a",14),No(22,"i",15),Fo(),Fo(),Lo(23,"ul"),xa(24),Fo(),Fo(),Fo(),Lo(25,"div",6),Lo(26,"div",13),Lo(27,"h4"),xa(28,"Subject"),Fo(),Lo(29,"ul"),xa(30),Fo(),Lo(31,"ul"),xa(32),Fo(),Lo(33,"ul"),xa(34),Fo(),Fo(),Fo(),Fo(),Fo(),Lo(35,"div",16),Lo(36,"button",17),Uo("click",function(){return Pt(e),Xo().activeModal.close("Close click")}),xa(37,"Close"),Fo(),Fo(),Vo()}if(2&e){const e=Xo();Jr(3),Ca("Sample Details - ",e.sampleInfo.identifier,""),Jr(11),Ca("Institute: ",e.sampleInfo.institute,""),Jr(2),Ca("Researcher: ",e.sampleInfo.researcher,""),Jr(2),Ca("Study Description: ",e.sampleInfo.study_description,""),Jr(3),ea("href",e.sampleInfo.reference,nr),Jr(3),Ca("Contact Info: ",e.sampleInfo.contact,""),Jr(6),Ca("Name in Study: ",e.sampleInfo.name_in_study,""),Jr(2),Ca("Age: ",e.sampleInfo.sample_age,""),Jr(2),Ca("Sex: ",e.sampleInfo.sex,"")}}let HN=(()=>{class e{constructor(e,t,n){this.activeModal=e,this.modalService=t,this.genSampleService=n,this.loading=!1,this.error=null,this.sampleInfo=null}ngOnInit(){this.loading=!0,this.error=null,this.genSampleService.getSubjectInfoApi(this.species,this.dataset,this.subjectName).pipe(i_(),Ly(e=>(this.error.next(e),[])),Qy(()=>{this.loading=!1})).subscribe(e=>{this.sampleInfo=e})}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ab),Oo(Ob),Oo(Hy))},e.\u0275cmp=$e({type:e,selectors:[["app-gen-sample-info"]],inputs:{subjectName:"subjectName",species:"species",dataset:"dataset"},decls:3,vars:3,consts:[["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"row"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"col-sm"],[3,"href"],[1,"fa","fa-external-link",2,"line-height","inherit"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(Io(0,VN,3,0,"div",0),Io(1,jN,6,1,"div",1),Io(2,BN,38,9,"ng-container",2)),2&e&&(Po("ngIf",t.loading),Jr(1),Po("ngIf",t.error),Jr(1),Po("ngIf",!t.loading&&!t.error))},directives:[eu],styles:[""]}),e})(),qN=(()=>{class e{constructor(){this.selection=new Jg({filters:[]}),this.source=this.selection.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $N=["searchBox"];function UN(e,t){1&e&&(Lo(0,"div",28),Lo(1,"span",29),xa(2,"Loading..."),Fo(),Fo())}function WN(e,t){if(1&e&&(Lo(0,"div",30),Lo(1,"div",0),Lo(2,"h4"),xa(3,"Error loading table"),Fo(),Lo(4,"p"),xa(5),nc(6,"async"),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(5),Sa(ic(6,1,e.dataSource.error$))}}function GN(e,t){if(1&e){const e=Bo();Lo(0,"div",3),Lo(1,"div",31),Lo(2,"input",32),Uo("ngModelChange",function(t){return Pt(e),Xo().isSelectedSamplesChecked=t})("change",function(){return Pt(e),Xo().onSelectedSamplesChange()}),Fo(),Lo(3,"label",33),xa(4," Only records with selected genes "),Fo(),Fo(),Fo()}if(2&e){const e=Xo();Jr(2),Po("ngModel",e.isSelectedSamplesChecked)}}function YN(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"app-filter",38,39),Uo("predicateEmitter",function(t){return Pt(e),Xo(4).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(3).$implicit,t=Xo();Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function ZN(e,t){if(1&e){const e=Bo();Lo(0,"div"),Lo(1,"app-filter",40,39),Uo("predicateEmitter",function(t){return Pt(e),Xo(4).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(3).$implicit,t=Xo();Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.TEXT_MODE)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}const XN=function(){return{bottom:!1,right:!0,top:!1,left:!0}};function KN(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",37),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Io(2,YN,3,5,"div",34),Io(3,ZN,3,4,"div",34),Fo()}if(2&e){const e=Xo(2).$implicit;ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(8,XN)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("ngIf","identifier"===e.id),Jr(1),Po("ngIf","identifier"!==e.id)}}const QN=function(e){return{sample:e}};function JN(e,t){if(1&e&&(zo(0),Lo(1,"button",43),No(2,"i",44),Fo(),Vo()),2&e){const e=Xo().$implicit;Xo(4);const t=Do(39);Jr(1),Po("matMenuTriggerFor",t)("matMenuTriggerData",Kl(2,QN,e))}}function ez(e,t){1&e&&(zo(0),xa(1," NA "),Vo())}function tz(e,t){if(1&e&&(Lo(0,"mat-cell",42),Io(1,JN,3,4,"ng-container",34),Io(2,ez,2,0,"ng-container",34),Fo()),2&e){const e=t.$implicit,n=Xo(3).$implicit;Jr(1),Po("ngIf",e[n.id].length>0),Jr(1),Po("ngIf",0===e[n.id].length)}}function nz(e,t){1&e&&(Lo(0,"div"),Io(1,tz,3,2,"mat-cell",41),Fo())}function iz(e,t){if(1&e&&(zo(0),Lo(1,"a",46),No(2,"i",47),Fo(),Vo()),2&e){const e=Xo().$implicit,t=Xo(3).$implicit;Jr(1),ea("href",e[t.id],nr)}}function rz(e,t){if(1&e&&(zo(0),xa(1),Vo()),2&e){const e=Xo().$implicit,t=Xo(3).$implicit;Jr(1),Ca(" ",e[t.id]," ")}}function sz(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,iz,3,1,"ng-container",34),Io(2,rz,2,1,"ng-container",34),Fo()),2&e){const e=t.$implicit,n=Xo(3).$implicit;ha(n.size),Jr(1),Po("ngIf",e[n.id]&&e[n.id].startsWith("http")),Jr(1),Po("ngIf",!(e[n.id]&&e[n.id].startsWith("http")))}}function oz(e,t){1&e&&(Lo(0,"div"),Io(1,sz,3,5,"mat-cell",45),Fo())}function az(e,t){if(1&e&&(zo(0),zo(1,35),Io(2,KN,4,9,"mat-header-cell",36),Io(3,nz,2,0,"div",34),Io(4,oz,2,0,"div",34),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id),Jr(2),Po("ngIf","annotation_path"===e.id),Jr(1),Po("ngIf","report"!==e.id)}}function lz(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",37),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",38,39),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,XN)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.NUMBER_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function cz(e,t){if(1&e&&(Lo(0,"mat-cell"),xa(1),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Ca(" ",e[n.id]," ")}}function hz(e,t){if(1&e&&(zo(0),zo(1,35),Io(2,lz,4,12,"mat-header-cell",36),Io(3,cz,2,4,"mat-cell",45),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function uz(e,t){if(1&e){const e=Bo();Lo(0,"mat-header-cell",37),Uo("resizeEnd",function(t){Pt(e);const n=Xo(2).$implicit;return Xo().onResizeEnd(t,n.id)}),xa(1),Lo(2,"app-filter",38,39),Uo("predicateEmitter",function(t){return Pt(e),Xo(3).applyFilter(t)}),Fo(),Fo()}if(2&e){const e=Xo(2).$implicit,t=Xo();ha(e.size),Po("enableGhostResize",!0)("resizeEdges",Xl(11,XN)),Jr(1),Ca(" ",e.name," "),Jr(1),Po("columnName",e.id)("filterMode",t.filterModeEnum.BOOL_MODE)("setFilter$",t.setFilter$)("clear$",t.clear$)("choices$",t.dataSource.choices$)}}function dz(e,t){1&e&&No(0,"i",49)}function pz(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,dz,1,0,"i",48),Fo()),2&e){const e=t.$implicit,n=Xo(2).$implicit;ha(n.size),Jr(1),Po("ngIf",e[n.id])}}function fz(e,t){if(1&e&&(zo(0),zo(1,35),Io(2,uz,4,12,"mat-header-cell",36),Io(3,pz,2,4,"mat-cell",45),Vo(),Vo()),2&e){const e=Xo().$implicit;Jr(1),ea("matColumnDef",e.id)}}function mz(e,t){if(1&e&&(zo(0),Io(1,az,5,3,"ng-container",34),Io(2,hz,4,1,"ng-container",34),Io(3,fz,4,1,"ng-container",34),Vo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf","string"===e.type),Jr(1),Po("ngIf","integer"===e.type||"number"===e.type),Jr(1),Po("ngIf","boolean"===e.type)}}function gz(e,t){1&e&&No(0,"mat-header-row")}function vz(e,t){1&e&&No(0,"mat-row")}function bz(e,t){if(1&e&&(zo(0),Lo(1,"div",52),xa(2," IGenotyper Report "),Fo(),Lo(3,"div",53),xa(4," Genotype Analysis"),Lo(5,"span"),xa(6,"\xa0\xa0"),Fo(),Lo(7,"a",54),No(8,"i",55),Fo(),Fo(),Vo()),2&e){const e=Xo().sample;Jr(7),ea("href",e.annotation_path,nr)}}function yz(e,t){if(1&e&&(zo(0),Lo(1,"div",56),xa(2," VDJbase Annotation Report "),Fo(),Lo(3,"div",53),xa(4," Features"),Lo(5,"span"),xa(6,"\xa0\xa0"),Fo(),Lo(7,"a",54),No(8,"i",57),Fo(),Fo(),Lo(9,"div",58),xa(10," Documentation"),Lo(11,"span"),xa(12,"\xa0\xa0"),Fo(),Lo(13,"a",54),No(14,"i",55),Fo(),Fo(),Vo()),2&e){const e=Xo().sample;Jr(7),ea("href",e.annotation_path,nr),Jr(6),ea("href",e.annotation_reference,nr)}}function _z(e,t){if(1&e&&(Lo(0,"div",50),Lo(1,"div",51),Lo(2,"b"),xa(3),Fo(),Fo(),Io(4,bz,9,1,"ng-container",34),Io(5,yz,15,2,"ng-container",34),Fo()),2&e){const e=t.sample;Jr(3),Sa(e.name),Jr(1),Po("ngIf","IGenotyper"==e.annotation_method),Jr(1),Po("ngIf","VDJbase"==e.annotation_method)}}function wz(e,t){if(1&e){const e=Bo();Lo(0,"div",50),Lo(1,"div",51),Lo(2,"b"),xa(3,"Download data for selected samples"),Fo(),Fo(),Lo(4,"div",53),xa(5," Sample info (csv) "),Lo(6,"span"),xa(7,"\xa0\xa0"),Fo(),Lo(8,"button",59),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_gen_data","csv",{type:"Sample info (CSV)"})}),No(9,"i",60),Fo(),Fo(),Lo(10,"div",53),xa(11," Sample data (zip) "),Lo(12,"span"),xa(13,"\xa0\xa0"),Fo(),Lo(14,"button",59),Uo("click",function(){return Pt(e),Xo().sendReportRequest("download_gen_data","zip",{type:"Sample files (ZIP)"})}),No(15,"i",61),Fo(),Fo(),Fo()}}const xz=function(){return[25,50,100,250]};let Sz=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c){this.genSampleService=e,this.geneTableService=t,this.modalService=n,this.genGeneSelectedService=i,this.genSampleSelectedService=r,this.genSampleFilterService=s,this.tableParamsStorageService=o,this.route=a,this.reportRunService=l,this.router=c,this.displayedColumns=["identifier","name_in_study","age","sex","annotation_path","annotation_method","annotation_format","annotation_reference","study_name","study_date","study_description","researcher","reference","contact","dataset"],this.allColumns=zN,this.lastLoadedColumns=[],this.paginatorSubscription=null,this.geneTableServiceSubscription=null,this.genGeneSelectedServiceSubscription=null,this.filterModeEnum=$T,this.filters=[],this.sorts=[],this.choices$Subscription=null,this.loading$Subscription=null,this.selectedSequenceNames=[],this.isSelectedSamplesChecked=!1,this.resizeEvents=new Map,this.clearSubject=new Jg(null),this.clear$=this.clearSubject.asObservable(),this.setFilterSubject=new Jg(null),this.setFilter$=this.setFilterSubject.asObservable()}ngOnInit(){this.resizeEvents=this.tableParamsStorageService.loadSavedInfo(this.resizeEvents,"gen-sample-table-widths"),this.dataSource=new NN(this.genSampleService)}ngOnDestroy(){this.paginatorSubscription.unsubscribe(),this.geneTableServiceSubscription.unsubscribe(),this.choices$Subscription.unsubscribe()}ngAfterViewInit(){this.paginatorSubscription=this.paginator.page.subscribe(()=>this.loadSequencesPage()),setTimeout(()=>{this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{this.selection=e,this.paginator.firstPage(),this.table.renderRows(),this.loadSequencesPage()}),this.choices$Subscription=this.dataSource.choices$.subscribe(e=>{this.genSampleSelectedService.selection.next(this.filters.length>0&&!this.isSelectedSamplesChecked?{ids:e.names_by_dataset}:{ids:[]})}),this.loading$Subscription=this.dataSource.loading$.subscribe(e=>{e||this.applyResizes()}),this.genGeneSelectedServiceSubscription=this.genGeneSelectedService.source.subscribe(e=>{this.selectedSequenceNames=e.names,this.isSelectedSamplesChecked&&0===this.selectedSequenceNames.length?this.isSelectedSamplesChecked=!1:e.onlySelected&&(this.isSelectedSamplesChecked=!0),this.onSelectedSamplesChange()}),this.router.events.subscribe(e=>{e instanceof f_&&this.applyResizes()})}),Ng(this.searchBox.nativeElement,"keyup").pipe(E(e=>e.target.value),PS(1e3),_v()).subscribe(e=>{this.quickSearch(e)})}onSelectedSamplesChange(){this.applyFilter(this.isSelectedSamplesChecked&&this.selectedSequenceNames.length?{field:"allele",predicates:[{field:"allele",op:"in",value:this.selectedSequenceNames}],sort:{order:""}}:{field:"allele",predicates:[],sort:{order:""}})}quickSearch(e){this.setFilterSubject.next({operator:{name:"Includes",operands:2,operator:"like",prefix:"%",postfix:"%"},op1:e,op2:""}),this.loadSequencesPage()}clearSelection(){this.filters=[],this.clearSubject.next(null),this.searchBox.nativeElement.value="",this.genSampleFilterService.selection.next({filters:this.filters}),this.loadSequencesPage()}applyFilter(e){for(let t=this.filters.length-1;t>=0;t--)this.filters[t].field===e.field&&this.filters.splice(t,1),"name"===e.field&&1===e.predicates.length&&"like"===e.predicates[0].op&&e.predicates[0].value==="%"+this.searchBox.nativeElement.value+"%"||(this.searchBox.nativeElement.value="");for(const t of e.predicates)t.op&&this.filters.push(t);for(let t=this.sorts.length-1;t>=0;t--)this.sorts[t].field===e.field&&this.sorts.splice(t,1);e.sort.order&&this.sorts.push(e.sort),this.genSampleFilterService.selection.next({filters:this.filters}),this.paginator.pageIndex=0,this.loadSequencesPage()}updateColumnData(e){const t=function(e,t){const n=new Set(e);for(const i of t)n.delete(i);return n}(new Set(this.lastLoadedColumns),new Set(this.displayedColumns));this.filters=this.filters.filter(e=>!t.has(e.field)),this.sorts=this.sorts.filter(e=>!t.has(e.field)),this.loadSequencesPage()}loadSequencesPage(){this.selection&&this.dataSource.loadGenSamples(this.selection.species,this.selection.datasets.join(),this.paginator.pageIndex,this.paginator.pageSize,JSON.stringify(this.filters),JSON.stringify(this.sorts),JSON.stringify(this.displayedColumns)),this.lastLoadedColumns=this.displayedColumns}showInfo(e){const t=this.modalService.open(HN,{size:"xl"});t.componentInstance.subjectName=e.identifier,t.componentInstance.species=this.selection.species,t.componentInstance.dataset=e.dataset}onResizeEnd(e,t){if(e.edges.right){const n=e.rectangle.width+"px";this.updateColumnWidth(t,n),this.resizeEvents.set(t,n),this.tableParamsStorageService.saveInfo(this.resizeEvents,"rep-sample-table-widths")}}applyResizes(){for(const[e,t]of this.resizeEvents)this.updateColumnWidth(e,t)}updateColumnWidth(e,t){const n=document.getElementsByClassName("mat-column-"+e);for(let i=0;i<n.length;i++)n[i].style.width=t}sendReportRequest(e,t,n){const i=this.selection.datasets;n.filters=this.filters,this.reportRunService.runReport({name:e,title:"Download",filter_params:[]},t,this.selection.species,i,this.filters,[],[],n)}}return e.\u0275fac=function(t){return new(t||e)(Oo(Hy),Oo(r_),Oo(Ob),Oo(WT),Oo(GT),Oo(qN),Oo(UT),Oo(gw),Oo(o_),Oo(Nx))},e.\u0275cmp=$e({type:e,selectors:[["app-gen-sample-panel"]],viewQuery:function(e,t){if(1&e&&(wc(OR,1),wc(_T,1),wc($N,3)),2&e){let e;_c(e=Sc())&&(t.paginator=e.first),_c(e=Sc())&&(t.table=e.first),_c(e=Sc())&&(t.searchBox=e.first)}},inputs:{selection:"selection"},features:[qa([UT])],decls:45,vars:20,consts:[[1,"row"],["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex"],[1,"header-text"],[1,"searchBox"],["searchBox",""],[1,"col-auto",2,"align-items","center","justify-content","flex-start","display","flex","padding-left","0px !important"],[2,"border-width","0px","background-color","transparent",3,"click"],[1,"primary-icon"],["digby-table-column-sorter","","id","colbutton",3,"columns","columnInfo","saveName","columnsChange"],[1,"primary-icon",2,"padding-left","0px !important"],["for","colbutton",1,"form-check-label"],["id","downloadbutton",2,"border-width","0px","background-color","transparent",3,"matMenuTriggerFor"],["for","downloadbutton",1,"form-check-label"],["class","col-auto","style","align-items: center; justify-content: flex-start; display: flex;",4,"ngIf"],[1,"col-auto","ml-auto"],[3,"length","pageSize","pageSizeOptions"],[1,"col"],[3,"dataSource"],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["xPosition","before",1,"menu-overflow-hidden"],["genoMenu","matMenu"],[3,"click"],["matMenuContent",""],["downloadMenu","matMenu"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"form-check"],["type","checkbox","id","chk-selected-items",1,"form-check-input",2,"margin-top",".1rem",3,"ngModel","ngModelChange","change"],["for","chk-selected-items",1,"form-check-label"],[4,"ngIf"],[3,"matColumnDef"],["mwlResizable","",3,"class","enableGhostResize","resizeEdges","resizeEnd",4,"matHeaderCellDef"],["mwlResizable","",3,"enableGhostResize","resizeEdges","resizeEnd"],[3,"columnName","filterMode","setFilter$","clear$","choices$","predicateEmitter"],["filterComponent","menuInOtherComponent"],[3,"columnName","filterMode","clear$","choices$","predicateEmitter"],["class","small-col",4,"matCellDef"],[1,"small-col"],[1,"btn","btn-sm","btn-solid-icon",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"fa","fa-folder","fa-5",2,"line-height","inherit"],[3,"class",4,"matCellDef"],[3,"href"],[1,"fa","fa-external-link",2,"line-height","inherit"],["class","fa fa-check","style","line-height: inherit;",4,"ngIf"],[1,"fa","fa-check",2,"line-height","inherit"],[1,"container"],[1,"row","ml-1","mr-2"],[1,"row","ml-1","mr-2","mb-1"],[1,"row","ml-4","mr-2","mb-0","align-middle"],["target","_blank",3,"href"],[1,"fa","fa-desktop",2,"line-height","inherit"],[1,"row","ml-2","mr-2","mb-1"],[1,"fa","fa-save",2,"line-height","inherit"],[1,"row","ml-4","mr-2","mb-1"],[1,"btn","btn-sm","btn-solid-icon","addr",3,"click"],[1,"fa","fa-file-pdf-o",2,"line-height","inherit"],[1,"fa","fa-file-zip-o",2,"line-height","inherit"]],template:function(e,t){if(1&e&&(Lo(0,"div",0),Io(1,UN,3,0,"div",1),nc(2,"async"),Io(3,WN,7,3,"div",2),nc(4,"async"),Fo(),Lo(5,"div",0),Lo(6,"div",3),Lo(7,"span",4),xa(8,"Quick search:\xa0"),Fo(),No(9,"input",5,6),Fo(),Lo(11,"div",7),Lo(12,"button",8),Uo("click",function(){return t.clearSelection()}),Lo(13,"mat-icon",9),xa(14,"delete_sweep"),Fo(),Lo(15,"span",4),xa(16,"Clear filters"),Fo(),Fo(),Fo(),Lo(17,"div",7),Lo(18,"button",10),Uo("columnsChange",function(e){return t.displayedColumns=e})("columnsChange",function(e){return t.updateColumnData(e)}),Lo(19,"mat-icon",11),xa(20,"view_column"),Fo(),Fo(),Lo(21,"label",12),xa(22,"Arrange Columns"),Fo(),Fo(),Lo(23,"div",7),Lo(24,"button",13),Lo(25,"mat-icon",9),xa(26,"cloud_download"),Fo(),Fo(),Lo(27,"label",14),xa(28,"Download"),Fo(),Fo(),Io(29,GN,5,1,"div",15),Lo(30,"div",16),No(31,"mat-paginator",17),Fo(),Fo(),Lo(32,"div",0),Lo(33,"div",18),Lo(34,"mat-table",19),Io(35,mz,4,3,"ng-container",20),Io(36,gz,1,0,"mat-header-row",21),Io(37,vz,1,0,"mat-row",22),Fo(),Fo(),Fo(),Lo(38,"mat-menu",23,24),Lo(40,"div",25),Uo("click",function(e){return e.stopPropagation()}),Io(41,_z,6,3,"ng-template",26),Fo(),Fo(),Lo(42,"mat-menu",23,27),Io(44,wz,16,0,"ng-template",26),Fo()),2&e){const e=Do(43);Jr(1),Po("ngIf",ic(2,15,t.dataSource.loading$)),Jr(2),Po("ngIf",ic(4,17,t.dataSource.error$)),Jr(15),Po("columns",t.displayedColumns)("columnInfo",t.allColumns)("saveName","gen-sample-table"),Jr(6),Po("matMenuTriggerFor",e),Jr(5),Po("ngIf",t.selectedSequenceNames.length),Jr(2),Po("length",null==t.dataSource?null:t.dataSource.totalItems)("pageSize",25)("pageSizeOptions",Xl(19,xz)),Jr(3),Po("dataSource",t.dataSource),Jr(1),Po("ngForOf",t.allColumns),Jr(1),Po("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),Jr(1),Po("matRowDefColumns",t.displayedColumns)}},directives:[eu,lI,eO,kD,OR,_T,Qh,OT,MT,wD,pD,hm,zm,dg,ET,CT,RT,cO,LM,xT,IT,FT,zT],pipes:[uu],styles:[".btn-sm{padding:.1rem .3rem!important;line-height:1!important}.i{line-height:inherit}.primary-icon{color:#007bff;align-items:center;vertical-align:bottom;line-height:20px}.header-text{color:rgba(0,0,0,.54);font-size:12px}.btn-solid-icon{background-color:#fff;color:#6c757d;border:none}mwlResizable{box-sizing:border-box}.mat-paginator-range-label{margin:0!important}.searchbox{border:1px solid #ced4ff}mat-cell,mat-footer-cell,mat-header-cell{width:200px;flex:none!important;display:block}mat-header-cell{border-left:1px solid #eee}.mat-cell,.mat-header-cell{padding-left:6px;padding-right:6px}.mat-cell{border-left:1px solid #eee;vertical-align:middle;overflow:hidden;text-overflow:ellipsis}.mat-row{min-height:18px!important;height:100%!important;padding-bottom:6px!important;padding-top:6px!important}.small-col{width:100px}.large-col{width:300px}.mat-ellipsis{vertical-align:middle;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block}"],encapsulation:2}),e})(),Cz=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-gen-sample"]],decls:3,vars:3,consts:[[1,"container-fluid"],[3,"showGenomic","showAssembly","showRepseq"]],template:function(e,t){1&e&&(Lo(0,"div",0),No(1,"app-gene-table-selector",1),No(2,"app-gen-sample-panel"),Fo()),2&e&&(Jr(1),Po("showGenomic",!0)("showAssembly",!1)("showRepseq",!1))},directives:[ES,Sz],styles:[""]}),e})();class kz{constructor(){this.handlers={}}shouldDetach(e){return!0}store(e,t){this.handlers[e.routeConfig.path]=t}shouldAttach(e){return!!e.routeConfig&&!!this.handlers[e.routeConfig.path]}retrieve(e){return e.routeConfig?this.handlers[e.routeConfig.path]:null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}function Ez(e,t){1&e&&(Lo(0,"mat-header-cell"),xa(1," Name "),Fo())}function Az(e,t){if(1&e&&(Lo(0,"mat-cell"),Lo(1,"b"),xa(2),Fo(),Fo()),2&e){const e=t.$implicit;Jr(2),Sa(e.title)}}function Rz(e,t){1&e&&(Lo(0,"mat-header-cell"),xa(1," Thumbnail "),Fo())}function Tz(e,t){if(1&e&&(Lo(0,"div"),No(1,"img",14),Fo()),2&e){const e=Xo().$implicit;Jr(1),ea("src",e.thumbnail,nr)}}function Iz(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,Tz,2,1,"div",13),Fo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf",e.thumbnail)}}function Dz(e,t){1&e&&(Lo(0,"mat-header-cell"),xa(1," Description "),Fo())}function Oz(e,t){if(1&e&&(Lo(0,"mat-cell"),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Ca(" ",e.description," ")}}function Pz(e,t){1&e&&(Lo(0,"mat-header-cell"),xa(1," Run "),Fo())}function Mz(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"button",15),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(2).runReport(t,"pdf")}),No(2,"i",16),Fo(),Vo()}}function Lz(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"button",15),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(2).runReport(t,"html")}),No(2,"i",17),Fo(),Vo()}}function Fz(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"button",15),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(2).runReport(t,"xls")}),No(2,"i",18),Fo(),Vo()}}function Nz(e,t){if(1&e){const e=Bo();zo(0),Lo(1,"button",15),Uo("click",function(){Pt(e);const t=Xo().$implicit;return Xo(2).runReport(t,"xls")}),No(2,"i",19),Fo(),Vo()}}function zz(e,t){if(1&e&&(Lo(0,"mat-cell"),Io(1,Mz,3,0,"ng-container",13),Io(2,Lz,3,0,"ng-container",13),Io(3,Fz,3,0,"ng-container",13),Io(4,Nz,3,0,"ng-container",13),Fo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf",e.format.indexOf("pdf")>=0),Jr(1),Po("ngIf",e.format.indexOf("html")>=0),Jr(1),Po("ngIf",e.format.indexOf("xls")>=0),Jr(1),Po("ngIf",e.format.indexOf("file")>=0)}}function Vz(e,t){1&e&&No(0,"mat-header-row")}function jz(e,t){1&e&&No(0,"mat-row")}function Bz(e,t){if(1&e&&(Lo(0,"p",20),xa(1),Fo()),2&e){const e=Xo().$implicit;Jr(1),Sa(e.empty)}}function Hz(e,t){if(1&e&&(zo(0),Lo(1,"h2"),xa(2),Fo(),Lo(3,"mat-table",3),zo(4,4),Io(5,Ez,2,0,"mat-header-cell",5),Io(6,Az,3,1,"mat-cell",6),Vo(),zo(7,7),Io(8,Rz,2,0,"mat-header-cell",5),Io(9,Iz,2,1,"mat-cell",6),Vo(),zo(10,8),Io(11,Dz,2,0,"mat-header-cell",5),Io(12,Oz,2,1,"mat-cell",6),Vo(),zo(13,9),Io(14,Pz,2,0,"mat-header-cell",5),Io(15,zz,5,4,"mat-cell",6),Vo(),Io(16,Vz,1,0,"mat-header-row",10),Io(17,jz,1,0,"mat-row",11),Io(18,Bz,2,1,"p",12),No(19,"br"),No(20,"br"),Fo(),Vo()),2&e){const e=t.$implicit,n=Xo();Jr(2),Sa(e.title),Jr(1),Po("dataSource",e.source),Jr(13),Po("matHeaderRowDef",n.displayedColumns),Jr(1),Po("matRowDefColumns",n.displayedColumns)}}let qz=(()=>{class e{constructor(e,t,n,i,r,s,o,a,l,c){this.modalService=e,this.reportsService=t,this.geneTableService=n,this.repSampleFilterService=i,this.genSampleFilterService=r,this.repListDataSource=s,this.genOrRepListDataSource=o,this.reportsListDataSource=a,this.httpClient=l,this.reportRunService=c,this.displayedColumns=["thumbnail","title","description","actions"],this.reportSections=null,this.geneTableServiceSubscription=null,this.geneTableSelection=null,this.genSampleFilterSubscription=null,this.genSampleFilters=[],this.repSampleFilterSubscription=null,this.repSampleFilters=[],this.globalReportFilters=null,this.reportRequest=null,this.reportSections=[{source:s,title:"Reports using just AIRR-seq Sample Data",empty:"Select AIRR-Seq data sets to see reports in this section"},{source:o,title:"Reports using either AIRR-Seq or genomic data, or both",empty:"Select some data sets to see reports in this section"}]}ngOnInit(){this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{this.geneTableSelection=e}),this.genSampleFilterSubscription=this.genSampleFilterService.source.subscribe(e=>{this.genSampleFilters=e.filters}),this.repSampleFilterSubscription=this.repSampleFilterService.source.subscribe(e=>{this.repSampleFilters=e.filters})}ngOnDestroy(){this.geneTableServiceSubscription.unsubscribe(),this.genSampleFilterSubscription.unsubscribe(),this.repSampleFilterSubscription.unsubscribe()}runReport(e,t){this.reportRunService.runReport(e,t,this.geneTableSelection.species,this.geneTableSelection.datasets,this.genSampleFilters,this.geneTableSelection.repSeqs,this.repSampleFilters,null)}displayError(e){const t=this.modalService.open(Ky,{size:"m"});t.componentInstance.report="Error running report",t.componentInstance.errorMessage=e,t.result.then()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Ob),Oo(qy),Oo(r_),Oo(QL),Oo(qN),Oo($z),Oo(Uz),Oo(s_),Oo(qf),Oo(o_))},e.\u0275cmp=$e({type:e,selectors:[["app-reports"]],viewQuery:function(e,t){if(1&e&&wc(_T,1),2&e){let e;_c(e=Sc())&&(t.table=e.first)}},decls:17,vars:4,consts:[[3,"showGenomic","showAssembly","showRepseq"],["href","assets/doc/report_documentation.pdf"],[4,"ngFor","ngForOf"],[3,"dataSource"],["matColumnDef","title"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","thumbnail"],["matColumnDef","description"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["style","margin-bottom: 32px",4,"matNoDataRow"],[4,"ngIf"],["height","100",3,"src"],[1,"btn","btn-lg","btn-solid-icon",3,"click"],[1,"fa","fa-file-pdf-o",2,"line-height","inherit"],[1,"fa","fa-desktop",2,"line-height","inherit"],[1,"fa","fa-file-excel-o",2,"line-height","inherit"],[1,"fa","fa-save",2,"line-height","inherit"],[2,"margin-bottom","32px"]],template:function(e,t){1&e&&(No(0,"app-gene-table-selector",0),Lo(1,"div"),Lo(2,"h2"),xa(3,"VDJbase Reports"),Fo(),Lo(4,"p"),xa(5,"Currently available reports run against AIRR-Seq data sets. Reports that run against genomic datasets, or that combine data of both types, will be added in due course."),Fo(),Lo(6,"p"),xa(7,"Please select above the species and datasets on which you would like to report. Multiple datasets from the same species can be selected. "),Fo(),Lo(8,"p"),xa(9,"You can refine the samples against which the reports will run by using filters in the Samples windows to display just those samples that you wish to be included."),Fo(),Lo(10,"p"),xa(11,"To run the report, click on an icon in the Run column corresponding to the output format that you would like (e.g. pdf, on-screen, Excel)"),Fo(),Lo(12,"p"),Lo(13,"a",1),xa(14,"Click here"),Fo(),xa(15," for explanation of reports."),Fo(),Io(16,Hz,21,4,"ng-container",2),Fo()),2&e&&(Po("showGenomic",!0)("showAssembly",!1)("showRepseq",!0),Jr(16),Po("ngForOf",t.reportSections))},directives:[ES,Qh,_T,ET,CT,xT,OT,MT,jT,RT,IT,eu,FT,zT],styles:[""]}),e})(),$z=(()=>{class e extends aE{constructor(e,t,n){super(),this.reportsService=e,this.geneTableService=t,this.reportsListDataSource=n}connect(){return this.reportsListDataSource.connect().pipe(E(e=>e.filter(e=>e.scope.indexOf("rep_sample")>=0)))}disconnect(){}}return e.\u0275fac=function(t){return new(t||e)(ui(qy),ui(r_),ui(s_))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),Uz=(()=>{class e extends aE{constructor(e,t,n){super(),this.reportsService=e,this.geneTableService=t,this.reportsListDataSource=n}connect(){return this.reportsListDataSource.connect().pipe(E(e=>e.filter(e=>e.scope.indexOf("gen_or_rep_sample")>=0)))}disconnect(){}}return e.\u0275fac=function(t){return new(t||e)(ui(qy),ui(r_),ui(s_))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),Wz=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-quick-ref"]],decls:3,vars:0,consts:[[1,"container"],["src","./assets/img/howto-gene-table.png","width","80%"],["src","./assets/img/howto-gene-browser.png","width","80%"]],template:function(e,t){1&e&&(Lo(0,"div",0),No(1,"img",1),No(2,"img",2),Fo())},styles:[""]}),e})(),Gz=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-user-guide"]],decls:20,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm"],[1,"ml1"],["width","40%","height","40%","controls",""],["src","./assets/img/new_ui.mp4","type","video/mp4"],[1,"row",2,"margin-bottom","20px"],["src","/assets/img/genomic.mp4","type","video/mp4"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"h2"),xa(2,"Video Library"),Fo(),Lo(3,"div",1),Lo(4,"div",2),Lo(5,"p",3),xa(6,"Exploring AIRR-seq data sets with the new user interface"),Fo(),Fo(),Fo(),Lo(7,"div",1),Lo(8,"video",4),No(9,"source",5),xa(10," Your browser does not support the video tag. "),Fo(),Fo(),No(11,"div",6),Lo(12,"div",1),Lo(13,"div",2),Lo(14,"p"),xa(15,"Genomic data in VDJbase"),Fo(),Fo(),Fo(),Lo(16,"div",1),Lo(17,"video",4),No(18,"source",7),xa(19," Your browser does not support the video tag. "),Fo(),Fo(),Fo())},styles:[""]}),e})();const Yz=["*"],Zz=new Yn("GOOGLE_CHARTS_CONFIG"),Xz={mapsApiKey:"",version:"current",safeMode:!1};let Kz=(()=>{class e{constructor(e,t,n){this.zone=e,this.localeId=t,this.config=n,this.scriptSource="https://www.gstatic.com/charts/loader.js",this.scriptLoadSubject=new S,this.config=Object.assign(Object.assign({},Xz),n||{})}isGoogleChartsAvailable(){return"undefined"!=typeof google&&void 0!==google.charts}loadChartPackages(...e){return this.loadGoogleCharts().pipe(Sv(()=>new b(t=>{google.charts.load(this.config.version,{packages:e,language:this.localeId,mapsApiKey:this.config.mapsApiKey,safeMode:this.config.safeMode}),google.charts.setOnLoadCallback(()=>{this.zone.run(()=>{t.next(),t.complete()})})})))}loadGoogleCharts(){if(this.isGoogleChartsAvailable())return xf(null);if(!this.isLoadingGoogleCharts()){const e=this.createGoogleChartsScript();e.onload=()=>{this.zone.run(()=>{this.scriptLoadSubject.next(),this.scriptLoadSubject.complete()})},e.onerror=()=>{this.zone.run(()=>{console.error("Failed to load the google charts script!"),this.scriptLoadSubject.error(new Error("Failed to load the google charts script!"))})}}return this.scriptLoadSubject.asObservable()}isLoadingGoogleCharts(){return null!=this.getGoogleChartsScript()}getGoogleChartsScript(){return Array.from(document.getElementsByTagName("script")).find(e=>e.src===this.scriptSource)}createGoogleChartsScript(){const e=document.createElement("script");return e.type="text/javascript",e.src=this.scriptSource,e.async=!0,document.getElementsByTagName("head")[0].appendChild(e),e}}return e.\u0275fac=function(t){return new(t||e)(ui(Zc),ui(Nc),ui(Zz,8))},e.\u0275prov=de({factory:function(){return new e(ui(Zc),ui(Nc),ui(Zz,8))},token:e,providedIn:"root"}),e})(),Qz=(()=>{class e{constructor(e){this.loaderService=e,this.error=new lc,this.ready=new lc,this.stateChange=new lc,this.id="_"+Math.random().toString(36).substr(2,9),this.wrapperReadySubject=new sE(1),this.initialized=!1}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get controlWrapper(){return this._controlWrapper}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.createControlWrapper(),this.initialized=!0})}ngOnChanges(e){this.initialized&&(e.type&&this._controlWrapper.setControlType(this.type),e.options&&this._controlWrapper.setOptions(this.options),e.state&&this._controlWrapper.setState(this.state))}createControlWrapper(){this._controlWrapper=new google.visualization.ControlWrapper({containerId:this.id,controlType:this.type,state:this.state,options:this.options}),this.addEventListeners(),this.wrapperReadySubject.next(this._controlWrapper)}addEventListeners(){google.visualization.events.removeAllListeners(this._controlWrapper),google.visualization.events.addListener(this._controlWrapper,"ready",e=>this.ready.emit(e)),google.visualization.events.addListener(this._controlWrapper,"error",e=>this.error.emit(e)),google.visualization.events.addListener(this._controlWrapper,"statechange",e=>this.stateChange.emit(e))}}return e.\u0275fac=function(t){return new(t||e)(Oo(Kz))},e.\u0275cmp=$e({type:e,selectors:[["control-wrapper"]],hostAttrs:[1,"control-wrapper"],hostVars:1,hostBindings:function(e,t){2&e&&Aa("id",t.id)},inputs:{for:"for",type:"type",options:"options",state:"state"},outputs:{error:"error",ready:"ready",stateChange:"stateChange"},exportAs:["controlWrapper"],features:[lt],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})(),Jz=(()=>{class e{constructor(e,t){this.element=e,this.loaderService=t,this.ready=new lc,this.error=new lc,this.initialized=!1}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.createDataTable(),this.createDashboard(),this.initialized=!0})}ngOnChanges(e){this.initialized&&(e.data||e.columns)&&(this.createDataTable(),this.dashboard.draw(this.dataTable))}createDashboard(){const e=this.controlWrappers.map(e=>e.wrapperReady$),t=this.controlWrappers.map(e=>e.for).map(e=>Array.isArray(e)?tv(e.map(e=>e.wrapperReady$)):e.wrapperReady$);tv([...e,...t]).subscribe(()=>{this.dashboard=new google.visualization.Dashboard(this.element.nativeElement),this.initializeBindings(),this.dashboard.draw(this.dataTable)})}initializeBindings(){this.controlWrappers.forEach(e=>{if(Array.isArray(e.for)){const t=e.for.map(e=>e.chartWrapper);this.dashboard.bind(e.controlWrapper,t)}else this.dashboard.bind(e.controlWrapper,e.for.chartWrapper)})}createDataTable(){if(null==this.data)return;let e=!0;null!=this.columns&&(e=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),e)}getDataAsTable(){return this.columns?[this.columns,...this.data]:this.data}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Kz))},e.\u0275cmp=$e({type:e,selectors:[["dashboard"]],contentQueries:function(e,t,n){if(1&e&&xc(n,Qz,0),2&e){let e;_c(e=Sc())&&(t.controlWrappers=e)}},hostAttrs:[1,"dashboard"],inputs:{data:"data",columns:"columns"},outputs:{ready:"ready",error:"error"},exportAs:["dashboard"],features:[lt],ngContentSelectors:Yz,decls:1,vars:0,template:function(e,t){1&e&&(Qo(),Jo(0))},encapsulation:2,changeDetection:0}),e})(),eV=(()=>{class e{constructor(e,t,n){this.element=e,this.scriptLoaderService=t,this.dashboard=n,this.options={},this.dynamicResize=!1,this.ready=new lc,this.error=new lc,this.select=new lc,this.mouseover=new lc,this.mouseleave=new lc,this.wrapperReadySubject=new sE(1),this.initialized=!1}get chart(){return this.wrapper?this.wrapper.getChart():null}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get chartWrapper(){return this.wrapper}set chartWrapper(e){this.wrapper=e,this.drawChart()}ngOnInit(){this.scriptLoaderService.loadChartPackages().subscribe(()=>{this.createDataTable(),this.wrapper=new google.visualization.ChartWrapper({container:this.element.nativeElement,chartType:this.type,dataTable:this.dataTable,options:this.mergeOptions()}),this.registerChartEvents(),this.wrapperReadySubject.next(this.wrapper),this.initialized=!0,this.drawChart()})}ngOnChanges(e){if(e.dynamicResize&&this.updateResizeListener(),this.initialized){let t=!1;(e.data||e.columns||e.formatters)&&(this.createDataTable(),this.wrapper.setDataTable(this.dataTable),t=!0),e.type&&(this.wrapper.setChartType(this.type),t=!0),(e.options||e.width||e.height||e.title)&&(this.wrapper.setOptions(this.mergeOptions()),t=!0),t&&this.drawChart()}}createDataTable(){if(null==this.data)return;let e=!0;null!=this.columns&&(e=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),e),this.applyFormatters(this.dataTable)}getDataAsTable(){return this.columns?[this.columns,...this.data]:this.data}updateResizeListener(){null!=this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=null),this.dynamicResize&&(this.resizeSubscription=Ng(window,"resize").pipe(PS(100)).subscribe(()=>{this.initialized&&this.drawChart()}))}mergeOptions(){return Object.assign({title:this.title,width:this.width,height:this.height},this.options)}applyFormatters(e){if(null!=this.formatters)for(const t of this.formatters)t.formatter.format(e,t.colIndex)}registerChartEvents(){google.visualization.events.removeAllListeners(this.wrapper);const e=(e,t,n)=>{google.visualization.events.addListener(e,t,n)};e(this.wrapper,"ready",()=>{google.visualization.events.removeAllListeners(this.chart),e(this.chart,"onmouseover",e=>this.mouseover.emit(e)),e(this.chart,"onmouseout",e=>this.mouseleave.emit(e)),e(this.chart,"select",()=>{const e=this.chart.getSelection();this.select.emit({selection:e})}),this.ready.emit({chart:this.chart})}),e(this.wrapper,"error",e=>this.error.emit(e))}drawChart(){null==this.dashboard&&this.wrapper.draw()}}return e.\u0275fac=function(t){return new(t||e)(Oo(Xa),Oo(Kz),Oo(Jz,8))},e.\u0275cmp=$e({type:e,selectors:[["google-chart"]],hostAttrs:[1,"google-chart"],inputs:{options:"options",dynamicResize:"dynamicResize",type:"type",data:"data",columns:"columns",title:"title",width:"width",height:"height",formatters:"formatters"},outputs:{ready:"ready",error:"error",select:"select",mouseover:"mouseover",mouseleave:"mouseleave"},exportAs:["googleChart"],features:[lt],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%] { width: fit-content; display: block; }"],changeDetection:0}),e})(),tV=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[{provide:Zz,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=pe({}),e})();const nV=["datasetInfoTable"];function iV(e,t){1&e&&(Lo(0,"div",4),Lo(1,"span",5),xa(2,"Loading..."),Fo(),Fo())}function rV(e,t){if(1&e&&(Lo(0,"div",6),Lo(1,"div",7),Lo(2,"h4"),xa(3,"Error loading table"),Fo(),Lo(4,"p"),xa(5),Fo(),Fo(),Fo()),2&e){const e=Xo();Jr(5),Sa(e.error)}}function sV(e,t){1&e&&(Lo(0,"mat-header-cell",21),xa(1," Name "),Fo())}function oV(e,t){if(1&e&&(Lo(0,"mat-cell",21),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.dataset)}}function aV(e,t){1&e&&(Lo(0,"mat-header-cell"),xa(1," Description "),Fo())}function lV(e,t){if(1&e&&(Lo(0,"mat-cell"),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.description)}}function cV(e,t){1&e&&No(0,"mat-header-row",22)}function hV(e,t){1&e&&No(0,"mat-row")}const uV=function(){return["name","desc"]};function dV(e,t){if(1&e&&(zo(0),Lo(1,"h2",8),xa(2,"Datasets available for species "),Lo(3,"span",9),xa(4),Fo(),Fo(),Lo(5,"div",10),Lo(6,"mat-table",11,12),zo(8,13),Io(9,sV,2,0,"mat-header-cell",14),Io(10,oV,2,1,"mat-cell",15),Vo(),zo(11,16),Io(12,aV,2,0,"mat-header-cell",17),Io(13,lV,2,1,"mat-cell",18),Vo(),Io(14,cV,1,0,"mat-header-row",19),Io(15,hV,1,0,"mat-row",20),Fo(),Fo(),Vo()),2&e){const e=Xo();Jr(4),Sa(e.species),Jr(2),Po("dataSource",e.datasetDescriptions),Jr(8),Po("matHeaderRowDef",Xl(5,uV))("matHeaderRowDefSticky",!0),Jr(1),Po("matRowDefColumns",Xl(6,uV))}}const pV=function(){return{position:"none"}},fV=function(e){return{legend:e}},mV=function(){return{left:0,width:"100%",height:"75%"}},gV=function(e){return{chartArea:e}};function vV(e,t){if(1&e&&(zo(0),Lo(1,"h2",8),xa(2),Fo(),Lo(3,"p",9),xa(4),Fo(),Lo(5,"div",7),Lo(6,"div",23),No(7,"google-chart",24),Fo(),Lo(8,"div",23),No(9,"google-chart",25),Fo(),Lo(10,"div",23),No(11,"google-chart",24),Fo(),Lo(12,"div",23),No(13,"google-chart",24),Fo(),Fo(),Vo()),2&e){const e=Xo();Jr(2),ka("Summary of dataset ",e.dataset,": ",e.datasetInfo.total_samples," samples from ",e.datasetInfo.total_subjects," subjects"),Jr(2),Sa(e.datasetInfo.description),Jr(3),Po("type","BarChart")("title","Sex (no. of individuals)")("data",e.datasetInfo.sex_count)("options",Kl(22,fV,Xl(21,pV))),Jr(2),Po("type","PieChart")("title","Condition (% individuals)")("data",e.datasetInfo.condition_count)("options",Kl(25,gV,Xl(24,mV)))("width","100%"),Jr(2),Po("type","PieChart")("title","Cell Type (% samples)")("data",e.datasetInfo.celltype_count)("options",Kl(28,gV,Xl(27,mV))),Jr(2),Po("type","PieChart")("title","Tissue (% samples)")("data",e.datasetInfo.tissue_count)("options",Kl(31,gV,Xl(30,mV)))}}function bV(e,t){1&e&&(Lo(0,"mat-header-cell",38),xa(1," Project ID "),Fo())}function yV(e,t){if(1&e&&(Lo(0,"mat-cell",38),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.study_name)}}function _V(e,t){1&e&&(Lo(0,"mat-header-cell",38),xa(1," Accession ID "),Fo())}function wV(e,t){1&e&&(Lo(0,"a",41),No(1,"i",42),Fo()),2&e&&ea("href",Xo().$implicit,nr)}function xV(e,t){if(1&e&&(Lo(0,"span"),xa(1),Fo()),2&e){const e=Xo().$implicit;Jr(1),Ca(" ",e,"")}}function SV(e,t){if(1&e&&(zo(0),Io(1,wV,2,1,"a",40),Io(2,xV,2,1,"span",3),Vo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf",e.includes("http")),Jr(1),Po("ngIf",!e.includes("http"))}}function CV(e,t){if(1&e&&(zo(0),Io(1,SV,3,2,"ng-container",39),Vo()),2&e){const e=Xo().$implicit;Jr(1),Po("ngForOf",e.study_id.split(","))}}function kV(e,t){if(1&e&&(Lo(0,"mat-cell",38),Io(1,CV,2,1,"ng-container",3),Fo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf",e.study_id)}}function EV(e,t){1&e&&(Lo(0,"mat-header-cell",43),xa(1," Lab "),Fo())}function AV(e,t){if(1&e&&(Lo(0,"mat-cell",43),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.lab_address)}}function RV(e,t){1&e&&(Lo(0,"mat-header-cell",38),xa(1," Subjects "),Fo())}function TV(e,t){if(1&e&&(Lo(0,"mat-cell",38),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.num_subjects)}}function IV(e,t){1&e&&(Lo(0,"mat-header-cell",38),xa(1," Subjects in VDJbase "),Fo())}function DV(e,t){if(1&e&&(Lo(0,"mat-cell",38),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.subjects_in_vdjbase)}}function OV(e,t){1&e&&(Lo(0,"mat-header-cell",38),xa(1," Samples "),Fo())}function PV(e,t){if(1&e&&(Lo(0,"mat-cell",38),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.num_samples)}}function MV(e,t){1&e&&(Lo(0,"mat-header-cell",38),xa(1," Samples in VDJbase "),Fo())}function LV(e,t){if(1&e&&(Lo(0,"mat-cell",38),xa(1),Fo()),2&e){const e=t.$implicit;Jr(1),Sa(e.samples_in_vdjbase)}}function FV(e,t){1&e&&(Lo(0,"mat-header-cell",38),xa(1," Paper "),Fo())}function NV(e,t){1&e&&(Lo(0,"a",41),No(1,"i",42),Fo()),2&e&&ea("href",Xo().$implicit,nr)}function zV(e,t){if(1&e&&(Lo(0,"span"),xa(1),Fo()),2&e){const e=Xo().$implicit;Jr(1),Ca(" ",e,"")}}function VV(e,t){if(1&e&&(zo(0),Io(1,NV,2,1,"a",40),Io(2,zV,2,1,"span",3),Vo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf",e.includes("http")),Jr(1),Po("ngIf",!e.includes("http"))}}function jV(e,t){if(1&e&&(zo(0),Io(1,VV,3,2,"ng-container",39),Vo()),2&e){const e=Xo().$implicit;Jr(1),Po("ngForOf",e.pub_ids.split(","))}}function BV(e,t){if(1&e&&(Lo(0,"mat-cell",38),Io(1,jV,2,1,"ng-container",3),Fo()),2&e){const e=t.$implicit;Jr(1),Po("ngIf",e.pub_ids)}}function HV(e,t){1&e&&No(0,"mat-header-row",22)}function qV(e,t){1&e&&No(0,"mat-row")}const $V=function(){return["name","accession_id","institute","num_subjects","subjects_in_vdjbase","num_samples","samples_in_vdjbase","paper"]};function UV(e,t){if(1&e&&(zo(0),Lo(1,"div",10),Lo(2,"h2",8),xa(3),Fo(),Lo(4,"p"),xa(5,"Samples may be omitted from VDJbase if the associated set of reads is too small for analysis. "),Fo(),Lo(6,"mat-table",11,26),zo(8,13),Io(9,bV,2,0,"mat-header-cell",27),Io(10,yV,2,1,"mat-cell",28),Vo(),zo(11,29),Io(12,_V,2,0,"mat-header-cell",27),Io(13,kV,2,1,"mat-cell",28),Vo(),zo(14,30),Io(15,EV,2,0,"mat-header-cell",31),Io(16,AV,2,1,"mat-cell",32),Vo(),zo(17,33),Io(18,RV,2,0,"mat-header-cell",27),Io(19,TV,2,1,"mat-cell",28),Vo(),zo(20,34),Io(21,IV,2,0,"mat-header-cell",27),Io(22,DV,2,1,"mat-cell",28),Vo(),zo(23,35),Io(24,OV,2,0,"mat-header-cell",27),Io(25,PV,2,1,"mat-cell",28),Vo(),zo(26,36),Io(27,MV,2,0,"mat-header-cell",27),Io(28,LV,2,1,"mat-cell",28),Vo(),zo(29,37),Io(30,FV,2,0,"mat-header-cell",27),Io(31,BV,2,1,"mat-cell",28),Vo(),Io(32,HV,1,0,"mat-header-row",19),Io(33,qV,1,0,"mat-row",20),Fo(),Fo(),Vo()),2&e){const e=Xo();Jr(3),Ca("Studies included in ",e.dataset,":"),Jr(3),Po("dataSource",e.datasetInfo.studies),Jr(26),Po("matHeaderRowDef",Xl(5,$V))("matHeaderRowDefSticky",!0),Jr(1),Po("matRowDefColumns",Xl(6,$V))}}function WV(e,t){1&e&&(zo(0),Lo(1,"div",10),Lo(2,"p"),xa(3,"Please select a single dataset to see its statistics and composition"),Fo(),Fo(),Vo())}let GV=(()=>{class e{constructor(e,t){this.geneTableService=e,this.repseqService=t,this.geneTableServiceSubscription=null,this.species=null,this.dataset=null,this.datasetDescriptions=null,this.datasetInfo=null,this.loading=!1,this.error=null}ngOnInit(){setTimeout(()=>{this.geneTableServiceSubscription=this.geneTableService.source.subscribe(e=>{this.species=e.species,this.dataset=e.repSeqs,this.datasetDescriptions=e.repDatasetDescriptions,void 0!==this.datasetInfoTable&&this.datasetInfoTable.renderRows(),this.datasetInfo=null,1===this.dataset.length&&(this.error=null,this.loading=!0,this.repseqService.getDataSetInfoApi(this.species,this.dataset[0]).subscribe(e=>{this.loading=!1,this.datasetInfo=e}))},e=>{this.error=e})})}}return e.\u0275fac=function(t){return new(t||e)(Oo(r_),Oo($y))},e.\u0275cmp=$e({type:e,selectors:[["app-rep-explore-data-panel"]],viewQuery:function(e,t){if(1&e&&wc(nV,1),2&e){let e;_c(e=Sc())&&(t.datasetInfoTable=e.first)}},decls:8,vars:6,consts:[[1,"container-fluid"],["class","spinner-border","role","status",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"alert","alert-danger"],[1,"row"],[1,"mt-5"],[1,"font-italic"],[1,"container"],[3,"dataSource"],["datasetInfoTable",""],["matColumnDef","name"],["style","width: 30% !important; flex: 0 0 30% !important;",4,"matHeaderCellDef"],["style","width: 30% !important; flex: 0 0 30% !important;",4,"matCellDef"],["matColumnDef","desc"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-elevation-z1",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[2,"width","30% !important","flex","0 0 30% !important"],[1,"mat-elevation-z1"],[1,"col-lg-3","col-md-6","col-sm-12"],[3,"type","title","data","options"],[3,"type","title","data","options","width"],["datasetStudyTable",""],["class","small-col",4,"matHeaderCellDef"],["class","small-col",4,"matCellDef"],["matColumnDef","accession_id"],["matColumnDef","institute"],["class","large-col",4,"matHeaderCellDef"],["class","large-col",4,"matCellDef"],["matColumnDef","num_subjects"],["matColumnDef","subjects_in_vdjbase"],["matColumnDef","num_samples"],["matColumnDef","samples_in_vdjbase"],["matColumnDef","paper"],[1,"small-col"],[4,"ngFor","ngForOf"],[3,"href",4,"ngIf"],[3,"href"],[1,"fa","fa-external-link",2,"line-height","inherit"],[1,"large-col"]],template:function(e,t){1&e&&(Lo(0,"div",0),Io(1,iV,3,0,"div",1),Io(2,rV,6,1,"div",2),Io(3,dV,16,7,"ng-container",3),Io(4,vV,14,33,"ng-container",3),Io(5,UV,34,7,"ng-container",3),xa(6,"> "),Io(7,WV,4,0,"ng-container",3),Fo()),2&e&&(Jr(1),Po("ngIf",t.loading),Jr(1),Po("ngIf",t.error),Jr(1),Po("ngIf",!t.loading&&!t.error),Jr(1),Po("ngIf",!t.loading&&!t.error&&t.datasetInfo),Jr(1),Po("ngIf",!t.loading&&!t.error&&t.datasetInfo),Jr(2),Po("ngIf",!t.loading&&!t.error&&!t.datasetInfo))},directives:[eu,_T,ET,CT,xT,OT,MT,RT,IT,FT,zT,eV,Qh],styles:[".small-col{width:8%!important;flex:0 0 8%!important}.large-col{width:25%!important;flex:0 0 25%!important}"],encapsulation:2}),e})(),YV=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-rep-explore-data"]],decls:3,vars:3,consts:[[1,"container-fluid"],[3,"showGenomic","showAssembly","showRepseq"]],template:function(e,t){1&e&&(Lo(0,"div",0),No(1,"app-gene-table-selector",1),No(2,"app-rep-explore-data-panel"),Fo()),2&e&&(Jr(1),Po("showGenomic",!1)("showAssembly",!1)("showRepseq",!0))},directives:[ES,GV],styles:[""]}),e})(),ZV=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e({type:e,selectors:[["app-licensing"]],decls:25,vars:0,consts:[[1,"container"],["href","https://creativecommons.org/publicdomain/zero/1.0/legalcode"],["href","https://github.com/williamdlees/digby"],["href","https://github.com/williamdlees/digby_backend"],["href","https://bitbucket.org/yaarilab/vdjbasevis"],["href","https://bitbucket.org/yaarilab/processpipeline"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"h1"),xa(2,"Content"),Fo(),Lo(3,"p"),xa(4,"Information provided on this site and any reports that are created here are published under a "),Lo(5,"a",1),xa(6,"CC0 (Creative Commons 0) license"),Fo(),xa(7,"."),Fo(),Lo(8,"h1"),xa(9,"Source Code"),Fo(),Lo(10,"p"),xa(11,"Source Code is available at the following links:"),Fo(),Lo(12,"ul"),Lo(13,"li"),Lo(14,"a",2),xa(15,"Website front-end"),Fo(),Fo(),Lo(16,"li"),Lo(17,"a",3),xa(18,"Website back-end"),Fo(),Fo(),Lo(19,"li"),Lo(20,"a",4),xa(21,"Reporting package"),Fo(),Fo(),Lo(22,"li"),Lo(23,"a",5),xa(24,"Analysis pipeline"),Fo(),Fo(),Fo(),Fo())},styles:[""]}),e})();function XV(e,t){if(1&e&&(Lo(0,"div",5),Lo(1,"p"),xa(2),Fo(),Fo()),2&e){const e=Xo();Jr(2),Sa(e.error)}}function KV(e,t){1&e&&(Lo(0,"div",6),Lo(1,"span",7),xa(2,"Loading..."),Fo(),Fo())}function QV(e,t){if(1&e){const e=Bo();Lo(0,"form",8,9),Uo("ngSubmit",function(){Pt(e);const t=Do(1);return Xo().onSubmit(t)}),Lo(2,"div",10),Lo(3,"label",11),xa(4,"User Name"),Fo(),No(5,"input",12),Fo(),Lo(6,"div",10),Lo(7,"label",13),xa(8,"Password"),Fo(),No(9,"input",14),Fo(),Lo(10,"div",15),Lo(11,"label"),Lo(12,"input",16),Uo("ngModelChange",function(t){return Pt(e),Xo().stay_logged=t}),Fo(),xa(13," Stay logged in on this computer "),Fo(),Fo(),Lo(14,"div"),Lo(15,"button",17),xa(16," Login "),Fo(),Fo(),Fo()}if(2&e){const e=Do(1),t=Xo();Jr(12),Po("checked",t.stay_logged)("ngModel",t.stay_logged),Jr(3),Po("disabled",!e.valid)}}let JV=(()=>{class e{constructor(e,t){this.authService=e,this.router=t,this.isLoading=!1,this.error=null,this.stay_logged=!1}ngOnInit(){this.authService.user.pipe(gv(1)).subscribe(e=>{e.accessToken&&this.router.navigate(["/"])})}onSubmit(e){if(!e.valid)return;const t=e.value.userName,n=e.value.password;let i;this.isLoading=!0,i=this.authService.login(t,n,this.stay_logged),i.subscribe(e=>{console.log(e),this.isLoading=!1,this.router.navigate(["/"])},e=>{console.log(e),this.error=e,this.isLoading=!1}),e.reset()}}return e.\u0275fac=function(t){return new(t||e)(Oo(aS),Oo(Nx))},e.\u0275cmp=$e({type:e,selectors:[["app-auth"]],decls:5,vars:3,consts:[[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["class","alert alert-danger",4,"ngIf"],["class","spinner-border","role","status",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","userName"],["type","text","id","userName","ngModel","","name","userName","required","",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","",1,"form-control"],[1,"checkbox"],["type","checkbox","id","stay","name","stay",3,"checked","ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(Lo(0,"div",0),Lo(1,"div",1),Io(2,XV,3,1,"div",2),Io(3,KV,3,0,"div",3),Io(4,QV,17,3,"form",4),Fo(),Fo()),2&e&&(Jr(2),Po("ngIf",t.error),Jr(1),Po("ngIf",t.isLoading),Jr(1),Po("ngIf",!t.isLoading))},directives:[eu,pg,Vm,cg,pm,zm,dg,Dg,hm],encapsulation:2}),e})();function ej(e,t){return t?n=>n.pipe(ej((n,i)=>F(e(n,i)).pipe(E((e,r)=>t(n,e,i,r))))):t=>t.lift(new tj(e))}class tj{constructor(e){this.project=e}call(e,t){return t.subscribe(new nj(e,this.project))}}class nj extends z{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.hasSubscription=!0,this._innerSub(t)}_innerSub(e){const t=new N(this),n=this.destination;n.add(t);const i=V(e,t);i!==t&&n.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}let ij=(()=>{class e{constructor(e){this.authService=e}intercept(e,t){return this.authService.user.pipe(gv(1),ej(n=>{if(e.url.indexOf(location.hostname)>=0&&e.url.indexOf("/refresh")>=0&&n&&n.appProtected){const i=e.clone({headers:e.headers.set("Authorization","Bearer "+n.refreshToken)});return t.handle(i)}if(!n||!n.appProtected||e.url.indexOf(location.hostname)<0)return t.handle(e);const i=e.clone({headers:e.headers.set("Authorization","Bearer "+n.accessToken)});return t.handle(i)}))}}return e.\u0275fac=function(t){return new(t||e)(ui(aS))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function rj(e){return()=>new Promise(t=>{e.initialize().subscribe().add(t)})}let sj=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.user.pipe(gv(1),E(e=>e&&e.appProtected&&!e.accessToken?(console.log("guarding non-login routes"),this.router.createUrlTree(["/auth"])):(console.log("guards open"),!0)))}}return e.\u0275fac=function(t){return new(t||e)(ui(aS),ui(Nx))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function oj(){return new By({basePath:CL.apiBasePath})}const aj=[{path:"",component:SL,canActivate:[sj]},{path:"genesample/:onlySelectedSamples",component:Cz,canActivate:[sj]},{path:"genetable",component:uL,canActivate:[sj]},{path:"genebrowser/:speciesName/:refName",component:TL,canActivate:[sj]},{path:"samplerep/:onlySelectedSamples",component:XF,canActivate:[sj]},{path:"generep",component:FN,canActivate:[sj]},{path:"generep/:species/:dataset/:alleleName",component:FN,canActivate:[sj]},{path:"datarep",component:YV,canActivate:[sj]},{path:"reports",component:qz,canActivate:[sj]},{path:"quick-ref",component:Wz,canActivate:[sj]},{path:"user-guide",component:Gz,canActivate:[sj]},{path:"licensing",component:ZV,canActivate:[sj]},{path:"auth",component:JV},{path:"**",component:SL,canActivate:[sj]}];let lj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ye({type:e,bootstrap:[yS]}),e.\u0275inj=pe({providers:[ML,aS,{provide:Uf,useClass:LL,multi:!0},{provide:Uf,useClass:ij,multi:!0},{provide:Ax,useClass:kz},{provide:Rc,useFactory:rj,deps:[aS],multi:!0}],imports:[[Zu,wf,rm,Pg,Mg,Kb,wO,HT,PR,PL,IL,Qx.forRoot(aj),Wy.forRoot(oj),dy.forRoot(),QF,cI,AD,BD,oD,UD,nC,uO,tV,yR]]}),e})();CL.production&&function(){if(lh)throw new Error("Cannot enable prod mode after platform setup.");ah=!1}(),Gu().bootstrapModule(lj).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);
//# sourceMappingURL=main-es2015.cd3d9a468bff1ba038d6.js.map